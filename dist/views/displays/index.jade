extends layout

block content
  script(src='/js/lib/angular.js?ver=0.4.0')

  link(rel='stylesheet', href='/css/displays/main.css?ver=0.4.0')
  .ui-bar.ui-bar-b(style='position: relative; padding: 0px; padding-top: 4px; padding-bottom: 4px;')
      div(style='float: right;')
        .displayGroup(data-role='controlgroup', data-type='horizontal', data-inline='true', data-mini='true')
          a(href='#moreMenu', data-rel='popup', data-role='button', data-inline='true', data-transition='fade', data-icon='arrow-d', data-theme='b') Open Displays ({{tabs.length}})
          a#addDisplay( data-mini='true', data-role='button', data-icon='d-open', data-theme='b', data-inline='true', data-iconpos='notext') Load Display
          a#newDisplay(href='#', data-mini='true', data-role='button', data-icon='d-burst', data-theme='b', data-inline='true', data-iconpos='notext') Create Display
          a#importDisplay(href='/displays/import', data-mini='true', data-role='button', data-icon='d-import', data-theme='b', data-inline='true', data-iconpos='notext') Import Displays
      div(style='overflow:hidden;margin-right:290px;height:32px;')
          ul#track
            li.displayTab(ng-repeat='tab in tabs',class='pinned{{tab.pinned}}')
              .displayGroup(data-role='controlgroup', data-type='horizontal', data-inline='true', data-mini='true')
                  a.displayTitle(ng-click="viewTab(tab)", data-role='button', data-theme='{{tab.theme}}') {{tab.title}}
                  a.displayPin(ng-click="pinTab(tab)", data-role='button', data-iconpos='notext', data-theme='{{tab.theme}}', data-icon='pinned-{{tab.pinned}}') Pin Display
                  a.displayPop(ng-click="popTab(tab)", data-role='button', data-iconpos='notext', data-theme='{{tab.theme}}', data-icon='d-pop') Pop-Out Display
                  a.displayClose(ng-click="closeTab(tab)", data-role='button', data-iconpos='notext', data-theme='{{tab.theme}}', data-icon='delete') Close Display


    #framebox(style='border: none; position: fixed; top: 42px; left: 0px; right: 0px; bottom:0px;')
      iframe(ng-repeat='tab in tabs',class='iframe theme{{tab.theme}} disp_{{tab.upi}}', frameborder='0', src='/displays/view/{{tab.upi}}')

block panels
  #popSelector(data-role='popup', data-overlay-theme='a', data-theme='a', data-corners='false', data-tolerance='15,15')
    a.ui-btn-right(class='closePop', data-rel='back', data-role='button', data-theme='a', data-icon='delete', data-iconpos='notext') Close
    iframe(id='popFrame', src='', width='800', height='600', seamless='seamless')
  #moreMenu(data-role='popup',data-mini='true', data-theme='c')
    div(data-role='controlgroup', data-mini='true')
      a(ng-repeat='tab in tabs',ng-click="viewTabFront(tab)", data-role='button', data-icon='arrow-l', data-theme='c', data-mini='true', data-iconpos='left'){{tab.title}}

