!function(a){var b,c=a.Axis,d=a.Chart,e=a.Color,f=a.Legend,g=a.LegendSymbolMixin,h=a.Series,i=a.getOptions(),j=a.each,k=a.extend,l=a.extendClass,m=a.merge,n=a.pick,o=a.seriesTypes,p=a.wrap,q=function(){},r=a.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};k(r.prototype,c.prototype),k(r.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(a,b){var d,e="vertical"!==a.options.legend.layout;d=m(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},b,{isX:e,opposite:!e,showEmpty:!1,title:null,isColor:!0}),c.prototype.init.call(this,a,d),b.dataClasses&&this.initDataClasses(b),this.initStops(b),this.isXAxis=!0,this.horiz=e,this.zoomEnabled=!1},tweenColors:function(a,b,c){var d,e;return b.rgba.length&&a.rgba.length?(a=a.rgba,b=b.rgba,d=1!==b[3]||1!==a[3],e=(d?"rgba(":"rgb(")+Math.round(b[0]+(a[0]-b[0])*(1-c))+","+Math.round(b[1]+(a[1]-b[1])*(1-c))+","+Math.round(b[2]+(a[2]-b[2])*(1-c))+(d?","+(b[3]+(a[3]-b[3])*(1-c)):"")+")"):e=b.raw||"none",e},initDataClasses:function(a){var b,c=this,d=this.chart,f=0,g=this.options,h=a.dataClasses.length;this.dataClasses=b=[],this.legendItems=[],j(a.dataClasses,function(a,i){var j;a=m(a),b.push(a),a.color||("category"===g.dataClassColor?(j=d.options.colors,a.color=j[f++],f===j.length&&(f=0)):a.color=c.tweenColors(e(g.minColor),e(g.maxColor),h<2?.5:i/(h-1)))})},initStops:function(a){this.stops=a.stops||[[0,this.options.minColor],[1,this.options.maxColor]],j(this.stops,function(a){a.color=e(a[1])})},setOptions:function(a){c.prototype.setOptions.call(this,a),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var a,b,c,d,e=this.legendSymbol,f=this.chart;e&&(this.left=a=e.attr("x"),this.top=b=e.attr("y"),this.width=c=e.attr("width"),this.height=d=e.attr("height"),this.right=f.chartWidth-a-c,this.bottom=f.chartHeight-b-d,this.len=this.horiz?c:d,this.pos=this.horiz?a:b)},toColor:function(a,c){var d,e,f,g,h,i,j=this.stops,k=this.dataClasses;if(k){for(i=k.length;i--;)if(h=k[i],e=h.from,f=h.to,(e===b||a>=e)&&(f===b||a<=f)){g=h.color,c&&(c.dataClass=i);break}}else{for(this.isLog&&(a=this.val2lin(a)),d=1-(this.max-a)/(this.max-this.min||1),i=j.length;i--&&!(d>j[i][0]););e=j[i]||j[i+1],f=j[i+1]||e,d=1-(f[0]-d)/(f[0]-e[0]||1),g=this.tweenColors(e.color,f.color,d)}return g},getOffset:function(){var a=this.legendGroup,b=this.chart.axisOffset[this.side];a&&(c.prototype.getOffset.call(this),this.axisGroup.parentGroup||(this.axisGroup.add(a),this.gridGroup.add(a),this.labelGroup.add(a),this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=b)},setLegendColor:function(){var a,b=this.horiz,c=this.options,d=this.reversed;a=b?[+d,0,+!d,0]:[0,+!d,0,+d],this.legendColor={linearGradient:{x1:a[0],y1:a[1],x2:a[2],y2:a[3]},stops:c.stops||[[0,c.minColor],[1,c.maxColor]]}},drawLegendSymbol:function(a,b){var c,d=a.padding,e=a.options,f=this.horiz,g=n(e.symbolWidth,f?200:12),h=n(e.symbolHeight,f?12:200),i=n(e.labelPadding,f?16:30),j=n(e.itemDistance,10);this.setLegendColor(),b.legendSymbol=this.chart.renderer.rect(0,a.baseline-11,g,h).attr({zIndex:1}).add(b.legendGroup),c=b.legendSymbol.getBBox(),this.legendItemWidth=g+d+(f?j:i),this.legendItemHeight=h+d+(f?i:0)},setState:q,visible:!0,setVisible:q,getSeriesExtremes:function(){var a;this.series.length&&(a=this.series[0],this.dataMin=a.valueMin,this.dataMax=a.valueMax)},drawCrosshair:function(a,b){var d,e=b&&b.plotX,f=b&&b.plotY,g=this.pos,h=this.len;b&&(d=this.toPixels(b[b.series.colorKey]),d<g?d=g-2:d>g+h&&(d=g+h+2),b.plotX=d,b.plotY=this.len-d,c.prototype.drawCrosshair.call(this,a,b),b.plotX=e,b.plotY=f,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(a,b,d,e,f){return"number"==typeof f?this.horiz?["M",f-4,this.top-6,"L",f+4,this.top-6,f,this.top,"Z"]:["M",this.left,f,"L",this.left-6,f+6,this.left-6,f-6,"Z"]:c.prototype.getPlotLinePath.call(this,a,b,d,e)},update:function(a,b){var d=this.chart,e=d.legend;j(this.series,function(a){a.isDirtyData=!0}),a.dataClasses&&(j(e.allItems,function(a){a.isDataClass&&a.legendGroup.destroy()}),d.isDirtyLegend=!0),d.options[this.coll]=m(this.userOptions,a),c.prototype.update.call(this,a,b),this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var c,d=this,e=this.chart,f=this.legendItems,h=e.options.legend,i=h.valueDecimals,l=h.valueSuffix||"";return f.length||j(this.dataClasses,function(h,m){var n=!0,o=h.from,p=h.to;c="",o===b?c="< ":p===b&&(c="> "),o!==b&&(c+=a.numberFormat(o,i)+l),o!==b&&p!==b&&(c+=" - "),p!==b&&(c+=a.numberFormat(p,i)+l),f.push(k({chart:e,name:c,options:{},drawLegendSymbol:g.drawRectangle,visible:!0,setState:q,isDataClass:!0,setVisible:function(){n=this.visible=!n,j(d.series,function(a){j(a.points,function(a){a.dataClass===m&&a.setVisible(n)})}),e.legend.colorizeItem(this,n)}},h))}),f},name:""}),j(["fill","stroke"],function(a){HighchartsAdapter.addAnimSetter(a,function(b){b.elem.attr(a,r.prototype.tweenColors(e(b.start),e(b.end),b.pos))})}),p(d.prototype,"getAxes",function(a){var b=this.options,c=b.colorAxis;a.call(this),this.colorAxis=[],c&&(a=new r(this,c))}),p(f.prototype,"getAllItems",function(a){var b=[],c=this.chart.colorAxis[0];return c&&(c.options.dataClasses?b=b.concat(c.getDataClassLegendSymbols()):b.push(c),j(c.series,function(a){a.options.showInLegend=!1})),b.concat(a.call(this))});var s={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:q,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var a=this,b=this.options.nullColor,c=this.colorAxis,d=this.colorKey;j(this.data,function(e){var f,g=e[d];f=null===g?b:c&&void 0!==g?c.toColor(g,e):e.color||a.color,f&&(e.color=f)})}};i.plotOptions.heatmap=m(i.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),o.heatmap=l(o.scatter,m(s,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var a;o.scatter.prototype.init.apply(this,arguments),a=this.options,this.pointRange=a.pointRange=n(a.pointRange,a.colsize||1),this.yAxis.axisPointRange=a.rowsize||1},translate:function(){var a=this,b=a.options,c=a.xAxis,d=a.yAxis;a.generatePoints(),j(a.points,function(a){var e=(b.colsize||1)/2,f=(b.rowsize||1)/2,g=Math.round(c.len-c.translate(a.x-e,0,1,0,1)),h=Math.round(c.len-c.translate(a.x+e,0,1,0,1)),i=Math.round(d.translate(a.y-f,0,1,0,1)),j=Math.round(d.translate(a.y+f,0,1,0,1));a.plotX=a.clientX=(g+h)/2,a.plotY=(i+j)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(g,h),y:Math.min(i,j),width:Math.abs(h-g),height:Math.abs(j-i)}}),a.translateColors(),this.chart.hasRendered&&j(a.points,function(a){a.shapeArgs.fill=a.options.color||a.color})},drawPoints:o.column.prototype.drawPoints,animate:q,getBox:q,drawLegendSymbol:g.drawRectangle,getExtremes:function(){h.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,h.prototype.getExtremes.call(this)}}))}(Highcharts);