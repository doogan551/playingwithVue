var context=context||function(){function a(a){f=$.extend({},f,a),$(document).on("click","html",function(){$(".dropdown-context").fadeOut(f.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})}),f.preventDoubleContext&&$(document).on("contextmenu",".dropdown-context",function(a){a.preventDefault()}),$(document).on("mouseenter",".dropdown-submenu",function(){var a=$(this).find(".dropdown-context-sub:first"),b=a.width(),c=a.offset().left,d=b+c>window.innerWidth;d&&a.addClass("drop-left")})}function b(a){f=$.extend({},f,a)}function c(a,b,d){var e=d?" dropdown-context-sub":"",g=f.compress?" compressed-context":"",h=$('<ul class="dropdown-menu dropdown-context'+e+g+'" id="dropdown-'+b+'"></ul>'),i=0,j="";for(i;i<a.length;i++){if("undefined"!=typeof a[i].divider)h.append('<li class="divider"></li>');else if("undefined"!=typeof a[i].header)h.append('<li class="nav-header">'+a[i].header+"</li>");else{if("undefined"==typeof a[i].href&&(a[i].href="#"),"undefined"!=typeof a[i].target&&(j=' target="'+a[i].target+'"'),"undefined"!=typeof a[i].subMenu?$sub='<li class="dropdown-submenu"><a tabindex="-1" href="'+a[i].href+'">'+a[i].text+"</a></li>":$sub=$('<li><a tabindex="-1" href="'+a[i].href+'"'+j+">"+a[i].text+"</a></li>"),"undefined"!=typeof a[i].action){var k=new Date,l="event-"+k.getTime()*Math.floor(1e5*Math.random()),m=a[i].action;$sub.find("a").attr("id",l),$("#"+l).addClass("context-event"),$(document).on("click","#"+l,m)}if(h.append($sub),"undefined"!=typeof a[i].subMenu){var n=c(a[i].subMenu,b,!0);h.find("li:last").append(n)}}"function"==typeof f.filter&&f.filter(h.find("li:last"))}return h}function d(a,b){var d=new Date,e=d.getTime(),g=c(b,e);$("body").append(g),$(document).on("contextmenu",a,function(a){if(a.preventDefault(),a.stopPropagation(),$(".dropdown-context:not(.dropdown-context-sub)").hide(),$dd=$("#dropdown-"+e),"boolean"==typeof f.above&&f.above)$dd.addClass("dropdown-context-up").css({top:a.pageY-20-$("#dropdown-"+e).height(),left:a.pageX-13}).fadeIn(f.fadeSpeed);else if("string"==typeof f.above&&"auto"==f.above){$dd.removeClass("dropdown-context-up");var b=$dd.height()+12;a.pageY+b>$("html").height()?$dd.addClass("dropdown-context-up").css({top:a.pageY-20-b,left:a.pageX-13}).fadeIn(f.fadeSpeed):$dd.css({top:a.pageY+10,left:a.pageX-13}).fadeIn(f.fadeSpeed)}})}function e(a){$(document).off("contextmenu",a).off("click",".context-event")}var f={fadeSpeed:100,filter:function(a){},above:"auto",preventDoubleContext:!0,compress:!1};return{init:a,settings:b,attach:d,destroy:e}}();