!function(a){a.jqx.jqxWidget("jqxPasswordInput","",{}),a.extend(a.jqx._jqxPasswordInput.prototype,{defineInstance:function(){this.width=null,this.height=null,this.disabled=!1,this.rtl=!1,this.placeHolder=null,this.showStrength=!1,this.showStrengthPosition="right",this.maxLength=null,this.minLength=null,this.showPasswordIcon=!0,this.strengthTypeRenderer=null,this.passwordStrength=null,this.localization={passwordStrengthString:"Password strength",tooShort:"Too short",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong",showPasswordString:"Show Password"},this.strengthColors={tooShort:"rgb(170, 0, 51)",weak:"rgb(170, 0, 51)",fair:"rgb(255, 204, 51)",good:"rgb(45, 152, 243)",strong:"rgb(118, 194, 97)"}},createInstance:function(a){this.render()},render:function(){var b=a.jqx.browser.browser,c=a.jqx.browser.version;this._browserCheck="msie"!=b||"7.0"!=c&&"8.0"!=c,this.widgetID=this.element.id;var d=this.host,e="Invalid input type. Please set the type attribute of the input element to password.";if("password"!=d.attr("type"))throw e;this._hidden=!0,this._setAttributes(),this._setTheme(),this._showPassword(),this._showStrength()},refresh:function(b){1!=b&&(this.removeHandler(this.host,"focus.passwordinput"+this.widgetID),this.removeHandler(this.host,"blur.passwordinput"+this.widgetID),this.removeHandler(this.host,"click.passwordinput"+this.widgetID),this.removeHandler(a(window),"resize.passwordinput"+this.widgetID),this.removeHandler(this.host,"keyup.passwordinput"+this.widgetID),this.removeHandler(icon,"mousedown.passwordinput"+this.iconID),this.removeHandler(icon,"mouseup.passwordinput"+this.iconID),this.removeHandler(a(document),"mousedown.passwordinput"+this.iconID),this._setAttributes(),this._setTheme(),this._showPassword(),this._showStrength())},val:function(b){return a.isEmptyObject(b)&&""!=b?this.element.value:void(this.element.value=b)},propertyChangedHandler:function(a,b,c,d){var e=this.host;return"disabled"==b?void(1==a.disabled?(a.host.attr("disabled","disabled"),a.host.addClass(a.toThemeProperty("jqx-fill-state-disabled"))):(a.host.removeAttr("disabled"),a.host.removeClass(a.toThemeProperty("jqx-fill-state-disabled")))):void("placeHolder"==b?this._browserCheck&&("placeholder"in this.element?e.attr("placeholder",this.placeHolder):""==e.val()?(e.attr("type","text"),e.val(this.placeHolder)):e.val()==c&&e.val(this.placeHolder)):this.refresh())},resize:function(a,b){this.width=a,this.height=b,this.host.width(this.width),this.host.height(this.height)},_setAttributes:function(){var a=this,b=this.host;b.width(this.width),b.height(this.height),this.maxLength&&b.attr("maxlength",this.maxLength),this.minLength&&b.attr("minLength",this.minLength),this.placeHolder&&this._browserCheck&&("placeholder"in this.element?b.attr("placeholder",this.placeHolder):""==b.val()&&(b.attr("type","text"),b.val(this.placeHolder))),1==this.disabled?(b.attr("disabled","disabled"),b.addClass(this.toThemeProperty("jqx-fill-state-disabled"))):(b.removeAttr("disabled"),b.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))),this.addHandler(b,"click.passwordinput"+this.widgetID,function(){a.showPasswordIcon&&a.icon&&(a.icon.show(),a._positionIcon())}),a.interval=null,this.addHandler(b,"keydown.passwordinput"+this.widgetID,function(){if(a.showPasswordIcon&&a.icon){a.interval&&clearInterval(a.interval);var b=0;a.interval=setInterval(function(){"none"!=a.icon[0].style.display?(a._positionIcon(),b++,b>5&&clearInterval(a.interval)):clearInterval(a.interval)},100)}}),this.addHandler(b,"focus.passwordinput"+this.widgetID,function(){if(a._focused=!0,a.host.addClass(a.toThemeProperty("jqx-fill-state-focus")),!a.placeHolder||!a._browserCheck||"placeholder"in a.element||b.val()!=a.placeHolder||(b.val(""),1==a._hidden&&b.attr("type","password")),a.val().length>0&&1==a.showStrength){var c=b.jqxTooltip("content");c&&b.jqxTooltip("open")}a.showPasswordIcon&&a.icon&&(a.icon.show(),a._positionIcon())}),this.addHandler(b,"blur.passwordinput"+this.widgetID,function(){a._focused=!1,a.host.removeClass(a.toThemeProperty("jqx-fill-state-focus")),!a.placeHolder||!a._browserCheck||"placeholder"in a.element||""!=b.val()||(b.val(a.placeHolder),b.attr("type","text")),1==a.showPasswordIcon&&a._browserCheck&&(0==a.rtl?a.host.removeClass(a.toThemeProperty("jqx-passwordinput-password-icon-ltr")):a.host.removeClass(a.toThemeProperty("jqx-passwordinput-password-icon-rtl"))),1==a.showStrength&&b.jqxTooltip("close"),a.showPasswordIcon&&a.icon&&a.icon.hide()})},destroy:function(){this.host.jqxTooltip&&this.host.jqxTooltip("destroy"),this.host.remove()},_setTheme:function(){var a=this.host;a.addClass(this.toThemeProperty("jqx-widget")),a.addClass(this.toThemeProperty("jqx-widget-content")),a.addClass(this.toThemeProperty("jqx-input")),a.addClass(this.toThemeProperty("jqx-rc-all")),1==this.rtl?(a.addClass(this.toThemeProperty("jqx-rtl")),a.css("direction","rtl")):(a.removeClass(this.toThemeProperty("jqx-rtl")),a.css("direction","ltr"))},_showPassword:function(){if(1==this.showPasswordIcon&&this._browserCheck){var b=this;this.iconID=this.widgetID+"-password-icon",a("<span tabindex='-1' hasfocus='false' style='position: absolute; display: none;' id='"+this.iconID+"'></span>").insertAfter(this.host);var c=a("#"+this.iconID);this.icon=c,c.addClass(this.toThemeProperty("jqx-passwordinput-password-icon")),c.attr("title",b.localization.showPasswordString),b._positionIcon();var d=function(){b.host.attr("type","password"),b._hidden=!0,c.attr("title",b.localization.showPasswordString)},e=function(){0==b._hidden?d():1==b._hidden&&(b.host.attr("type","text"),b._hidden=!1)};this.addHandler(c,"mousedown.passwordinput"+this.iconID,function(a){return e(),!1}),this.addHandler(c,"mouseup.passwordinput"+this.iconID,function(a){return d(),!1}),this.addHandler(a(document),"mousedown.passwordinput"+this.iconID,function(a){b._focused&&d()})}},_positionIcon:function(){var a=this.host.offset(),b=this.host.outerWidth(),c=this.host.outerHeight();1==this.rtl?this.icon.offset({top:parseInt(a.top+c/2-5),left:a.left+2}):this.icon.offset({top:parseInt(a.top+c/2-5),left:a.left+b-18})},_showStrength:function(){if(1==this.showStrength){if(void 0==this.host.jqxTooltip)throw new Error("jqxPasswordInput: Missing reference to jqxtooltip.js");var b,c=this.widgetID+"Strength",d=c+"Value",e=c+"Indicator";if(this.strengthTypeRenderer){var f=this.host.val();"placeholder"in this.element||!this._browserCheck||f!=this.placeHolder||(f=""),this._countCharacters();var g=this.localization.tooShort,h=this.strengthTypeRenderer(f,{letters:this.letters,numbers:this.numbers,specialKeys:this.specials},g);b=h}else b="<div style='width: 220px;' id='"+c+"'><div><span style='font-weight: bold;'>"+this.localization.passwordStrengthString+": </span><span id='"+d+"'></span></div><div id='"+e+"'></div></div>";this.host.jqxTooltip({theme:this.theme,position:this.showStrengthPosition,content:b,trigger:"none",autoHide:!1,rtl:this.rtl}),this.strengthTypeRenderer||(a("#"+d).html(this.localization.tooShort),a("#"+e).addClass("jqx-passwordinput-password-strength-inicator").css("background-color",this.strengthColors.tooShort),0==this.rtl?a("#"+e).css("float","left"):a("#"+e).css("float","right")),this._checkStrength()}},_checkStrength:function(){var b=this,c=this.host;this.addHandler(a(window),"resize.passwordinput"+this.widgetID,function(){b.icon&&b.icon.hide()}),this.addHandler(this.host,"keyup.passwordinput"+this.widgetID,function(){var d=b.host.val(),e=d.length;if(b._countCharacters(),e>0&&1==b.showStrength){var f=!c.jqxTooltip("opened");f&&c.jqxTooltip("open")}var g,h=b.letters+b.numbers+2*b.specials+b.letters*b.numbers/2+e;if(g=e<8?b.localization.tooShort:h<20?b.localization.weak:h<30?b.localization.fair:h<40?b.localization.good:b.localization.strong,b.strengthTypeRenderer){var i=b.strengthTypeRenderer(d,{letters:b.letters,numbers:b.numbers,specialKeys:b.specials},g);b.host.jqxTooltip({content:i})}else{if(b.passwordStrength){var i=b.passwordStrength(d,{letters:b.letters,numbers:b.numbers,specialKeys:b.specials},g);a.each(b.localization,function(){var a=this;if(i==a)return g=i,!1})}a("#"+b.widgetID+"StrengthValue").html(g);var j=a("#"+b.widgetID+"StrengthIndicator");switch(g){case b.localization.tooShort:j.css({width:"20%","background-color":b.strengthColors.tooShort});break;case b.localization.weak:j.css({width:"40%","background-color":b.strengthColors.weak});break;case b.localization.fair:j.css({width:"60%","background-color":b.strengthColors.fair});break;case b.localization.good:j.css({width:"80%","background-color":b.strengthColors.good});break;case b.localization.strong:j.css({width:"100%","background-color":b.strengthColors.strong})}}})},_countCharacters:function(){this.letters=0,this.numbers=0,this.specials=0;for(var a="<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=",b=this.host.val(),c=b.length,d=0;d<c;d++){var e=b.charAt(d),f=b.charCodeAt(d);f>64&&f<91||f>96&&f<123||f>127&&f<155||f>159&&f<166?this.letters+=1:0!=isNaN(e)?a.indexOf(e)==-1||(this.specials+=1):this.numbers+=1}}})}(jQuery);