!function(a){function b(b,c){return this.owner=b,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.aggregates=null,this.aggregatesrenderer=null,this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(a,b){if(this[a]){var c=this[a];this[a]=b,this.owner._columnPropertyChanged(this,a,b,c)}else if(this[a.toLowerCase()]){var c=this[a.toLowerCase()];this[a.toLowerCase()]=b,this.owner._columnPropertyChanged(this,a.toLowerCase(),b,c)}},this._initfields=function(c){if(null!=c){var d=this;if(a.jqx.hasProperty(c,"dataField")&&(this.datafield=a.jqx.get(c,"dataField")),a.jqx.hasProperty(c,"displayField")?this.displayfield=a.jqx.get(c,"displayField"):this.displayfield=this.datafield,a.jqx.hasProperty(c,"columnType")&&(this.columntype=a.jqx.get(c,"columnType")),a.jqx.hasProperty(c,"validation")&&(this.validation=a.jqx.get(c,"validation")),a.jqx.hasProperty(c,"text")&&(this.text=a.jqx.get(c,"text")),a.jqx.hasProperty(c,"sortable")&&(this.sortable=a.jqx.get(c,"sortable")),a.jqx.hasProperty(c,"hidden")&&(this.hidden=a.jqx.get(c,"hidden")),a.jqx.hasProperty(c,"groupable")&&(this.groupable=a.jqx.get(c,"groupable")),a.jqx.hasProperty(c,"renderer")&&(this.renderer=a.jqx.get(c,"renderer")),a.jqx.hasProperty(c,"align")&&(this.align=a.jqx.get(c,"align")),a.jqx.hasProperty(c,"cellsAlign")&&(this.cellsalign=a.jqx.get(c,"cellsAlign")),a.jqx.hasProperty(c,"cellsFormat")&&(this.cellsformat=a.jqx.get(c,"cellsFormat")),a.jqx.hasProperty(c,"width")&&(this.width=a.jqx.get(c,"width")),a.jqx.hasProperty(c,"minWidth")&&(this.minwidth=a.jqx.get(c,"minWidth")),a.jqx.hasProperty(c,"maxWidth")&&(this.maxwidth=a.jqx.get(c,"maxWidth")),a.jqx.hasProperty(c,"cellsRenderer")&&(this.cellsrenderer=a.jqx.get(c,"cellsRenderer")),a.jqx.hasProperty(c,"columnType")&&(this.columntype=a.jqx.get(c,"columnType")),a.jqx.hasProperty(c,"pinned")&&(this.pinned=a.jqx.get(c,"pinned")),a.jqx.hasProperty(c,"filterable")&&(this.filterable=a.jqx.get(c,"filterable")),a.jqx.hasProperty(c,"filter")&&(this.filter=a.jqx.get(c,"filter")),a.jqx.hasProperty(c,"resizable")&&(this.resizable=a.jqx.get(c,"resizable")),a.jqx.hasProperty(c,"draggable")&&(this.draggable=a.jqx.get(c,"draggable")),a.jqx.hasProperty(c,"editable")&&(this.editable=a.jqx.get(c,"editable")),a.jqx.hasProperty(c,"initEditor")&&(this.initeditor=a.jqx.get(c,"initEditor")),a.jqx.hasProperty(c,"createEditor")&&(this.createeditor=a.jqx.get(c,"createEditor")),a.jqx.hasProperty(c,"destroyEditor")&&(this.destroyeditor=a.jqx.get(c,"destroyEditor")),a.jqx.hasProperty(c,"getEditorValue")&&(this.geteditorvalue=a.jqx.get(c,"getEditorValue")),a.jqx.hasProperty(c,"className")&&(this.classname=a.jqx.get(c,"className")),a.jqx.hasProperty(c,"cellClassName")&&(this.cellclassname=a.jqx.get(c,"cellClassName")),a.jqx.hasProperty(c,"aggregates")&&(this.aggregates=a.jqx.get(c,"aggregates")),a.jqx.hasProperty(c,"aggregatesRenderer")&&(this.aggregatesrenderer=a.jqx.get(c,"aggregatesRenderer")),a.jqx.hasProperty(c,"rendered")&&(this.rendered=a.jqx.get(c,"rendered")),a.jqx.hasProperty(c,"exportable")&&(this.exportable=a.jqx.get(c,"exportable")),a.jqx.hasProperty(c,"nullable")&&(this.nullable=a.jqx.get(c,"nullable")),a.jqx.hasProperty(c,"columnGroup")&&(this.columngroup=a.jqx.get(c,"columnGroup")),!c instanceof String&&"string"!=typeof c)for(var e in c)if(!d.hasOwnProperty(e)&&!d.hasOwnProperty(e.toLowerCase()))throw b.host.remove(),new Error("jqxDataTable: Invalid property name - "+e+".")}},this._initfields(c),this}a.jqx.jqxWidget("jqxDataTable","",{}),a.extend(a.jqx._jqxDataTable.prototype,{defineInstance:function(){this.altrows=!1,this.aggregatesheight=34,this.autoshowloadelement=!0,this.autorowheight=!0,this.columnsheight=30,this.columns=[],this.columngroups=null,this.columnsresize=!1,this.columnsreorder=!1,this.dataview=null,this.disabled=!1,this.editable=!1,this.editSettings={saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!1,editOnDoubleClick:!0,editOnF2:!0},this.enablehover=!0,this.enablebrowserselection=!1,this.filterheight=30,this.filterable=!1,this.filtermode="default",this.groupsrenderer=null,this.groups=new Array,this.headerZIndex=59,this.height=null,this.handlekeyboardnavigation=null,this.indentwidth=25,this.initrowdetails=!1,this.loadingerrormessage="The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed.",this.localization=null,this.pagerheight=28,this.pagesize=10,this.pagesizeoptions=["5","10","20"],this.pageable=!1,this.pagerposition="bottom",this.pagermode="default",this.pagerbuttonscount=5,this.pagerrenderer=null,this.ready=null,this.rendertoolbar=null,this.rowdetails=!1,this.renderstatusbar=null,this.rendered=null,this.rendering=null,this.rtl=!1,this.sortable=!1,this.showtoolbar=!1,this.showstatusbar=!1,this.statusbarheight=34,this.serverProcessing=!1,this.selectionmode="multiplerows",this.scrollbarsize=a.jqx.utilities.scrollBarSize,this.touchscrollbarsize=a.jqx.utilities.touchScrollBarSize,this.showaggregates=!1,this.showheader=!0,this.maxHeight=999999,this.maxWidth=999999,this.autobind=!0,this.autokoupdates=!0,this.exportSettings={columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,recordsInView:!0,fileName:"jqxDataTable"},this.source={beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},this.toolbarheight=34,this.tableZIndex=69,this._updating=!1,this.touchmode="auto",this.width=null,this.that=this,this.incrementalSearch=!0,this.events=["bindingComplete","sort","filter","pageChanged","pageSizeChanged","rowClick","rowDoubleClick","cellValueChanged","rowBeginEdit","rowEndEdit","rowSelect","rowUnselect","rowCheck","rowUncheck","columnResized","columnReordered","rowExpand","rowCollapse","cellBeginEdit","cellEndEdit"]},createInstance:function(b){if(15!=a.jqx.utilities.scrollBarSize&&(this.scrollbarsize=a.jqx.utilities.scrollBarSize),"table"==this.element.nodeName.toLowerCase()){var c=this.host.find("tbody tr"),d=this.host.find("th"),e=new Array;0===d.length&&(d=c[0],c.splice(0,1)),this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1));for(var f=[],g=0;g<c.length;g++){for(var h=c[g],i={},j=0;j<d.length;j++){var k=a.trim(a(d[j]).text());if(0===g){var l={name:k};if(this.columns[j]&&this.columns[j].cellsFormat){var m=this.columns[j].cellsFormat.toLowerCase();m.indexOf("p")==-1&&m.indexOf("c")==-1&&m.indexOf("n")==-1&&m.indexOf("f")==-1||(l.type="number"),m.indexOf("d")==-1&&m.indexOf("m")==-1&&m.indexOf("y")==-1&&m.indexOf("h")==-1&&m.indexOf("m")==-1&&m.indexOf("s")==-1&&m.indexOf("t")==-1||(l.type="date")}e.push(l)}var n=a(h).find("td:eq("+j+")"),o=e[j].type;if(o){var p=this.getvaluebytype(a.trim(n.text()),e[j]);i[k]=p}else i[k]=a.trim(n.text())}f[f.length]=i}this.host.wrap("<div></div>");var q=this.host.parent(),r=this.host.data();r.jqxDataTable.host=q,r.jqxDataTable.element=q[0],this.host.parent()[0].id=this.element.id;try{this.host.parent()[0].style=this.element.style}catch(s){}if(this.element=q[0],this.host=q,this.host.data(r),null==this.source||null==this.source._source){var t={dataFields:e,localdata:f,datatype:"array"},u=new a.jqx.dataAdapter(t);this.source=u}}this.source&&!this.source.dataBind&&(this.source=new a.jqx.dataAdapter(this.source));var v=this.source._source.datafields;if(v&&v.length>0&&(this._camelCase=void 0!==this.source._source.dataFields,this.selectionmode=this.selectionmode.toLowerCase()),null==this.host.attr("tabindex")&&this.host.attr("tabindex","0"),this.host.attr("role","grid"),this.host.attr("align","left"),this.host.addClass(this.toTP("jqx-grid")),this.host.addClass(this.toTP("jqx-reset")),this.host.addClass(this.toTP("jqx-rc-all")),this.host.addClass(this.toTP("jqx-widget")),this.host.addClass(this.toTP("jqx-widget-content")),!this._testmodules()){this.render(!0);var w=this;a.jqx.utilities.resize(this.host,function(){var b=a(window).width(),c=a(window).height(),d=w.host.width(),e=w.host.height();w._lastHostWidth==d&&w._lastHostHeight==e||w._updatesize(w._lastHostWidth!=d,w._lastHostHeight!=e),w._lastWidth=b,w._lastHeight=c,w._lastHostWidth=d,w._lastHostHeight=e})}},getvaluebytype:function(b,c){var d=b;if(null==b)return b;if(","==this.gridlocalization.decimalseparator&&b.indexOf(this.gridlocalization.decimalseparator)>=0&&(b=b.replace(this.gridlocalization.decimalseparator,".")),b.indexOf(this.gridlocalization.currencysymbol)>=0&&(b=b.replace(this.gridlocalization.currencysymbol,"")),b.indexOf(this.gridlocalization.percentagesymbol)>=0&&(b=b.replace(this.gridlocalization.percentagesymbol,"")),a.isArray(b)&&"array"!=c.type){for(var e=0;e<b.length;e++)b[e]=this.getvaluebytype(b[e],c);return b}if("date"==c.type)if("NaN"==b)b="";else{var f=new Date(b);if("string"==typeof b&&c.format){var g=a.jqx.dataFormat.parsedate(b,c.format);null!=g&&(f=g)}b=("NaN"==f.toString()||"Invalid Date"==f.toString())&&a.jqx.dataFormat?a.jqx.dataFormat.tryparsedate(b):f,null==b&&(b=d)}else if("float"==c.type||"number"==c.type||"decimal"==c.type)if("NaN"==b)b="";else{var b=parseFloat(b);isNaN(b)&&(b=d)}else if("int"==c.type||"integer"==c.type){var b=parseInt(b);isNaN(b)&&(b=d)}else"bool"!=c.type&&"boolean"!=c.type||(null!=b&&void 0!=b.toLowerCase&&("false"==b.toLowerCase()?b=!1:"true"==b.toLowerCase()&&(b=!0)),b=1==b||(0!=b||""===b)&&"");return b},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=a('<div style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var b=a('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");if(b.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),b.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(b),this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement),""!=this.source._source.url){var c=!1;("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(c=!0),c?(this.host.height(100),this.dataloadelement.height(100)):(this.host.height(this.height),this.dataloadelement.height(this.height));var d=!1;("auto"===this.width||null===this.width||this.autoWidth)&&(d=!0),d?(this.host.width(300),this.dataloadelement.width(300)):(this.host.width(this.width),this.dataloadelement.width(this.width))}},_measureElement:function(b){var c=a("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");c.addClass(this.toTP("jqx-widget")),a(document.body).append(c),"cell"==b?this._cellheight=c.height():this._columnheight=c.height(),c.remove()},_testmodules:function(){var b="",c=this,d=function(){""!=b.length&&(b+=",")};if(this.host.jqxScrollBar||(d(),b+=" jqxscrollbar.js"),this.host.jqxButton||(d(),b+=" jqxbuttons.js"),a.jqx.dataAdapter||(d(),b+=" jqxdata.js"),""!=b||this.editable||this.filterable||this.pageable){var e=[],f=function(a){switch(a){case"checkbox":c.host.jqxCheckBox||e.checkbox||(e.checkbox=!0,d(),b+=" jqxcheckbox.js");break;case"dropdownlist":c.host.jqxDropDownList||e.dropdownlist?c.host.jqxListBox||e.listbox||(d(),e.listbox=!0,b+=" jqxlistbox.js"):(d(),e.dropdownlist=!0,b+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}};if((this.filterable&&"simple"!=this.filtermode||"advanced"==this.pagermode&&this.pageable)&&f("dropdownlist"),""!=b)throw new Error("jqxDataTable: Missing references to the following module(s): "+b)}return!1},focus:function(){try{this.wrapper.focus();var a=this;setTimeout(function(){a.wrapper.focus()},10),this.focused=!0}catch(b){}},hiddenParent:function(){return a.jqx.isHidden(this.host)},_updatesize:function(b,c){if(!this._loading){var d=this,e=d.host.width(),f=d.host.height();d._oldWidth||(d._oldWidth=e),d._oldHeight||(d._oldHeight=f),void 0!=d._resizeTimer&&(clearTimeout(d._resizeTimer),d._resizeTimer=null);var g=(a.jqx.browser.msie,30);d._resizeTimer=setTimeout(function(){clearTimeout(d._resizeTimer),d.resizingGrid=!0,a.jqx.isHidden(d.host)||(d._updatecolumnwidths(),d.refresh(),d._oldWidth=e,d._oldHeight=f,d.resizingGrid=!1)},g)}},resize:function(a,b){void 0!=a&&(this.width=a),void 0!=b&&(this.height=b),this._updatecolumnwidths(),this.refresh()},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var b=a.jqx.mobile.isTouchDevice();return this.touchDevice=b,1==this.touchmode?(b=!0,a.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=b):0==this.touchmode&&(b=!1),b&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),b},toTP:function(a){return this.toThemeProperty(a)},localizestrings:function(b,c){if(this._cellscache=new Array,a.jqx.dataFormat&&a.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxDataTable: "+this.loadingerrormessage);if(null!=b){for(var d in b)d.toLowerCase()!==d&&(b[d.toLowerCase()]=b[d]);b.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=b.pagergotopagestring),b.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=b.pagershowrowsstring),b.pagerrangestring&&(this.gridlocalization.pagerrangestring=b.pagerrangestring),b.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=b.pagernextbuttonstring),b.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=b.pagerpreviousbuttonstring),b.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=b.pagerfirstbuttonstring),b.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=b.pagerlastbuttonstring),b.toppagerstring&&(this.gridlocalization.toppagerstring=b.toppagerstring),b.firstDay&&(this.gridlocalization.firstDay=b.firstDay),b.days&&(this.gridlocalization.days=b.days),b.months&&(this.gridlocalization.months=b.months),b.AM&&(this.gridlocalization.AM=b.AM),b.PM&&(this.gridlocalization.PM=b.PM),b.patterns&&(this.gridlocalization.patterns=b.patterns),b.percentsymbol&&(this.gridlocalization.percentsymbol=b.percentsymbol),b.currencysymbol&&(this.gridlocalization.currencysymbol=b.currencysymbol),b.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=b.currencysymbolposition),b.decimalseparator&&(this.gridlocalization.decimalseparator=b.decimalseparator),b.thousandsseparator&&(this.gridlocalization.thousandsseparator=b.thousandsseparator),b.filterapplystring&&(this.gridlocalization.filterapplystring=b.filterapplystring),b.filteraddnew&&(this.gridlocalization.filteraddnew=b.filteraddnew),b.filtercancelstring&&(this.gridlocalization.filtercancelstring=b.filtercancelstring),b.filterclearstring&&(this.gridlocalization.filterclearstring=b.filterclearstring),b.filterstring&&(this.gridlocalization.filterstring=b.filterstring),b.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=b.filterstringcomparisonoperators),b.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=b.filternumericcomparisonoperators),b.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=b.filterdatecomparisonoperators),b.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=b.filterbooleancomparisonoperators),b.emptydatastring&&(this.gridlocalization.emptydatastring=b.emptydatastring),b.filterselectstring&&(this.gridlocalization.filterselectstring=b.filterselectstring),b.todaystring&&(this.gridlocalization.todaystring=b.todaystring),b.clearstring&&(this.gridlocalization.clearstring=b.clearstring),b.validationstring&&(this.gridlocalization.validationstring=b.validationstring),b.loadtext&&(this.gridlocalization.loadtext=b.loadtext),b.filtersearchstring&&(this.gridlocalization.filtersearchstring=b.filtersearchstring),b.loadingerrormessage&&(this.gridlocalization.loadingerrormessage=b.loadingerrormessage,this.loadingerrormessage=b.loadingerrormessage),c!==!1&&(this._builddataloadelement(),a(this.dataloadelement).css("visibility","hidden"),a(this.dataloadelement).css("display","none"))}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",filterapplystring:"Apply",filtercancelstring:"Cancel",filterclearstring:"Clear Filter",filterstring:"advanced",filtersearchstring:"Search:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",loadingerrormessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed."}},_updateScrollbars:function(a){var b=!1;("auto"===this.width||null===this.width||this.autowidth)&&999999==this.maxWidth&&(b=!0);var c=parseInt(this.scrollbarsize),d=this.table?this.table.height():0,e=0,f="inherit",g=this.vScrollBar[0].style.visibility;this.hScrollBar[0].style.visibility;if(a)var h=a;else var h=this.host.height();h-=this.columngroups?this.showheader?this.columnsheader.height():0:this.showheader?this.columnsheight:0,this.filterable&&(h-=this.filter.height()),this.pageable&&(h-=this.pagerheight,"both"===this.pagerposition&&(h-=this.pagerheight)),this.showtoolbar&&(h-=this.toolbarheight),this.showstatusbar&&(h-=this.statusbarheight),this.showaggregates&&(h-=this.aggregatesheight);var i=!1;("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(i=!0),!i&&d>h&&(this.source.records.length>0||this.source.hierarchy.length>0)?(this.vScrollBar[0].style.visibility=f,e=4+parseInt(c),this.vScrollBar.jqxScrollBar({max:d-h})):this.vScrollBar[0].style.visibility="hidden",g!=this.vScrollBar[0].style.visibility&&this._updatecolumnwidths();var j=this.table?this.table.width():0;j>3&&(j-=3);var k=parseInt(this.host.css("border-left-width"))+parseInt(this.host.css("border-right-width")),l=k+this.host.width()-e;if(j>l&&!b){if(this.hScrollBar[0].style.visibility=f,this.hScrollBar.jqxScrollBar({max:j-l}),e=4+parseInt(c),!i){if(d>h-e+4&&(this.source.records.length>0||this.source.hierarchy.length>0)){this.hScrollBar.jqxScrollBar({max:k+j-l});var m="hidden"===this.vScrollBar[0].style.visibility;this.vScrollBar[0].style.visibility=f,this._updatecolumnwidths(),m&&this.hScrollBar.jqxScrollBar({max:j-l+e+k})}this.vScrollBar.jqxScrollBar({max:d-h+e})}}else this.hScrollBar[0].style.visibility="hidden";0===this.source.records.length&&this.source.hierarchy&&0===this.source.hierarchy.length&&(this.vScrollBar[0].style.visibility="hidden",this.bottomRight[0].style.visibility="hidden"),"hidden"==this.vScrollBar[0].style.visibility&&0!=this.vScrollInstance.value&&this.vScrollInstance.setPosition(0)},_measureElementWidth:function(b){var c=a("<span style='visibility: hidden; white-space: nowrap;'>"+b+"</span>");c.addClass(this.toTP("jqx-widget")),c.addClass(this.toTP("jqx-grid")),c.addClass(this.toTP("jqx-grid-column-header")),c.addClass(this.toTP("jqx-widget-header")),a(document.body).append(c);var d=c.outerWidth()+20;return c.remove(),d},_arrangeAutoHeight:function(a){if(a||(a=0),"auto"===this.height||null===this.height||this.autoheight){var b=this.table.height(),c=0;if(c+=this.columngroups?this.showheader?this.columnsheader.height():-1:this.showheader?this.columnsheight:-1,c+=this.showstatusbar?this.statusbarheight:0,c+=this.showaggregates?this.aggregatesheight:0,c+=this.showtoolbar?this.toolbarheight:0,c+=this.pageable?this.pagerheight:0,"both"===this.pagerposition&&(c+=this.pageable?this.pagerheight:0),c+=b,this.filterable){var d=this.filter.find(".filterrow"),e=this.filter.find(".filterrow-hidden"),f=1;e.length>0&&(f=0),c+=this.filterheight-1+this.filterheight*d.length*f}return c+a>this.maxHeight?this.host.height(this.maxHeight):this.host.height(c+a),!0}return!1},_arrangeAutoWidth:function(a){if(a||(a=0),"auto"===this.width||null===this.width||this.autowidth){for(var b=0,c=0;c<this.columns.records.length;c++){var d=this.columns.records[c].width;this.columns.records[c].hidden||("auto"==d?(d=this._measureElementWidth(this.columns.records[c].text),b+=d):b+=d)}return width=b,width+a>this.maxWidth?this.host.width(this.maxWidth):this.host.width(width+a),!0}return!1},_measureTopAndHeight:function(){var a=this.host.height(),b=0;if(this.showtoolbar&&(b+=this.toolbarheight,a-=parseInt(this.toolbarheight)),this.filterable){var c=this.filter.find(".filterrow"),d=this.filter.find(".filterrow-hidden"),e=1;d.length>0&&(e=0),b+=this.filterheight,a-=parseInt(this.filterheight);var f=1==e?c.length:0;b+=this.filterheight*f,a-=this.filterheight*f}return this.pageable&&"bottom"!=this.pagerposition&&(b+=parseInt(this.pagerheight)+1,a>this.pagerheight&&"both"===this.pagerposition&&(a-=parseInt(this.pagerheight))),{top:b,height:a}},_arrange:function(){if(this.table){this._arrangeAutoHeight(),this._arrangeAutoWidth();var a=this.host.width(),b=this.host.height(),c=b;this.pageable?"bottom"===this.pagerposition?(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="inherit"):"both"===this.pagerposition?(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="inherit"):"top"===this.pagerposition&&(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="hidden"):(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="hidden");var d=0;if(this.showtoolbar?(this.toolbar.width(a),this.toolbar.height(this.toolbarheight-1),this.toolbar.css("top",0),d+=this.toolbarheight,b-=parseInt(this.toolbarheight)):this.toolbar[0].style.height="0px",this.filterable){this.filter.width(a),this.filter.css("top",d);var e=this.filter.find(".filterrow"),f=this.filter.find(".filterrow-hidden"),g=1;f.length>0&&(g=0),this.filter.height(this.filterheight-1+this.filterheight*e.length*g),d+=this.filterheight,b-=parseInt(this.filterheight);var h=1==g?e.length:0;d+=this.filterheight*h,b-=this.filterheight*h}if(this.showstatusbar?(this.statusbar.width(this.table?Math.max(a,this.table.width()):a),this.statusbar.height(this.statusbarheight-1)):this.statusbar[0].style.height="0px",this.showaggregates?this.aggregates.height(this.aggregatesheight-1):this.aggregates[0].style.height="0px",this.pageable&&"bottom"!=this.pagerposition)this.toppager[0].style.width=a+"px",this.toppager[0].style.height=parseInt(this.pagerheight)+"px",this.toppager[0].style.top=parseInt(d)+"px",d+=parseInt(this.pagerheight)+1,b>this.pagerheight&&(b-=parseInt(this.pagerheight));else{this.toppager[0].style.width!=a+"px"&&(this.toppager[0].style.width=parseInt(a)+"px"),this.toppager[0].style.height!=this.pagerheight+"px"&&(this.toppager[0].style.height=parseInt(this.pagerheight)+"px"),this.toppager[0].style.top!=d+"px"&&(this.toppager[0].style.top=d+"px");var i="bottom"!=this.pagerposition?this.pagerheight:0,j=d+i+"px";this.content[0].style.top!=j&&(this.content[0].style.top=d+this.pagerheight+"px")}this._updateScrollbars(c);var k=parseInt(this.scrollbarsize),l=4,m=2,n=0;if("hidden"!=this.vScrollBar[0].style.visibility&&(n=k+l),"hidden"!=this.hScrollBar[0].style.visibility&&(m=k+l+2),this.showaggregates&&("hidden"===this.hScrollBar[0].style.visibility?this.aggregates.width(this.table?Math.max(a,this.table.width())+4:a):this.aggregates.width("auto")),"hidden"!=this.vScrollBar[0].style.visibility||"hidden"!=this.hScrollBar[0].style.visibility){var o=this._arrangeAutoHeight(m-2),p=this._arrangeAutoWidth(n+1);if(o||p){var a=this.host.width();this.toppager[0].style.width=parseInt(a)+"px",this.toolbar[0].style.width=parseInt(a)+"px",this.statusbar[0].style.width=parseInt(a)+"px",this.filter[0].style.width=parseInt(a)+"px"}if(o){var q=this._measureTopAndHeight();d=q.top,b=q.height}}var r=0;this.pageable&&(r=this.pagerheight,"top"!=this.pagerposition&&(m+=this.pagerheight)),this.showaggregates&&(m+=this.aggregatesheight,r+=this.aggregatesheight),this.showstatusbar&&(m+=this.statusbarheight,r+=this.statusbarheight),this.hScrollBar[0].style.height!=k+"px"&&(this.hScrollBar[0].style.height=parseInt(k)+"px"),this.hScrollBar[0].style.top==d+b-l-k-r+"px"&&"0px"==this.hScrollBar[0].style.left||(this.hScrollBar[0].style.top=d+b-l-k-r-1+"px",this.hScrollBar[0].style.left="0px");var s=this.hScrollBar[0].style.width,t=!1,u=!1;0==n?s!=a-2+"px"&&(this.hScrollBar[0].style.width=a-2+"px",t=!0):s!=a-k-l+"px"&&(this.hScrollBar[0].style.width=a-k-l+"px",t=!0),this.vScrollBar[0].style.width!=k+"px"&&(this.vScrollBar[0].style.width=k+"px",u=!0),this.vScrollBar[0].style.height!=parseInt(b)-m+"px"&&(this.vScrollBar[0].style.height=parseInt(b)-m+"px",u=!0),this.vScrollBar[0].style.left==parseInt(a)-parseInt(k)-l+"px"&&this.vScrollBar[0].style.top==d+"px"||(this.vScrollBar[0].style.top=d+"px",this.vScrollBar[0].style.left=parseInt(a)-parseInt(k)-l+"px"),this.rtl&&(this.vScrollBar.css({left:"0px",top:d}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:k+2}));var v=this.vScrollInstance;v.disabled=this.disabled;var w=this.hScrollInstance;w.disabled=this.disabled,t&&w.refresh(),u&&v.refresh();var x=function(a){"hidden"!=a.vScrollBar[0].style.visibility&&"hidden"!=a.hScrollBar[0].style.visibility?(a.bottomRight[0].style.visibility="inherit",a.bottomRight[0].style.left=1+parseInt(a.vScrollBar.css("left"))+"px",a.bottomRight[0].style.top=parseInt(a.hScrollBar.css("top"))+"px",a.rtl&&a.bottomRight.css("left","0px"),a.bottomRight[0].style.width=parseInt(k)+3+"px",a.bottomRight[0].style.height=parseInt(k)+4+"px",a.showaggregates&&(a.bottomRight.css("z-index",99),a.bottomRight.height(parseInt(k)+4+a.aggregatesheight),a.bottomRight.css({top:parseInt(a.hScrollBar.css("top"))-a.aggregatesheight}))):a.bottomRight[0].style.visibility="hidden"};if(x(this),this.content[0].style.width!=a-n+"px"&&(this.content[0].style.width=a-n+"px"),this.content[0].style.height!=b-m+3+"px"&&(this.content[0].style.height=b-m+3+"px"),this.content[0].style.top!=d+"px"&&(this.content[0].style.top=parseInt(d)+"px"),this.rtl&&(this.content.css("left",n),this.table)){var y=this.table.width();y<a-n&&this.content.css("left",a-y+2)}this.showaggregates&&(this.aggregates.css("top",d+b-this.aggregatesheight-(this.pageable?this.pagerheight:0)-(this.showstatusbar?this.statusbarheight+1:0)),this.rtl&&this.aggregates.css("left","0px"),"hidden"!=this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:d+b-l-k-r+this.aggregatesheight+"px"}),this.aggregates.css("top",1+d+b-k-5-this.aggregatesheight-(this.pageable?this.pagerheight:0)-(this.showstatusbar?this.statusbarheight+1:0))),x(this)),this.showstatusbar&&(this.statusbar.css("top",d+b-this.statusbarheight-(this.pageable?this.pagerheight:0)),this.rtl&&("hidden"==this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager[0].style.width=a+"px",this.pager[0].style.height=this.pagerheight+"px",this.pager[0].style.top=parseInt(d)+parseInt(b)-parseInt(this.pagerheight)-1+"px"):this.pager[0].style.height="0px",this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,a!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),b!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=a}},scrolloffset:function(a,b){if(0==arguments.length||null!=a&&"object"==typeof a&&!a.top)return{left:this.hScrollBar.jqxScrollBar("value"),top:this.vScrollBar.jqxScrollBar("value")};if(null!=a&&"object"==typeof a)var b=a.left,c=a.top,a=c;null!=a&&null!=b&&void 0!=a&&void 0!=b&&(this.vScrollBar.jqxScrollBar("setPosition",a),this.hScrollBar.jqxScrollBar("setPosition",b))},scrollleft:function(a){null!=a&&void 0!=a&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",a)},scrolltop:function(a){null!=a&&void 0!=a&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",a)},beginupdate:function(){this._updating=!0,this._datachanged=!1},endupdate:function(a){this._updating=!1,a!==!1&&(this._rendercolumnheaders(),
this.refresh())},updating:function(){return this._updating},databind:function(b,c,d){if(this.loadingstate!==!0){"block"==this.host.css("display")&&(this.autoshowloadelement?(a(this.dataloadelement).css("visibility","visible"),a(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height())):(a(this.dataloadelement).css("visibility","hidden"),a(this.dataloadelement).css("display","none")));var e=this;null==b&&(b={}),void 0!=b.sortcomparer&&null!=b.sortcomparer||(b.sortcomparer=null),void 0!=b.filter&&null!=b.filter||(b.filter=null),void 0!=b.sort&&null!=b.sort||(b.sort=null),void 0!=b.data&&null!=b.data||(b.data=null);var f=null;if(null!=b&&(f=void 0!=b._source?b._source.url:b.url),this.dataview=this.dataview||new a.jqx.dataView,this.dataview.pageable=this.pageable,this.dataview.grid=this,!e.initializedcall){if(b._source&&this.sortable&&(void 0!=b._source.sortcolumn&&(this.sortcolumn=b._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=b._source.sortcolumn,b._source.sortcolumn=null),void 0!=b._source.sortdirection)){this.dataview.sortfielddirection=b._source.sortdirection;var g=b._source.sortdirection;if("a"==g||"asc"==g||"ascending"==g||1==g)var h=!0;else var h=!1;null!=g?this.sortdirection={ascending:h,descending:!h}:this.sortdirection={ascending:!1,descending:!1}}this.pageable&&b._source&&(void 0!=b._source.pagenum&&(this.dataview.pagenum=b._source.pagenum),void 0!=b._source.pagesize?(this.pagesize=b._source.pagesize,this.dataview.pagesize=b._source.pagesize):(this.dataview.pagesize=b._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(b.sortcolumn&&(this.dataview.sortfield=b.sortcolumn),b.sortdirection&&(this.dataview.sortfielddirection=b.sortdirection))}this._loading=!0,this.dataview.update=function(b){e._loading=!1,e.rowsByKey=new Array;var f=e.source._source.datafields;if(e.groups&&e.groups.length>0){var g=Object.prototype.toString,h=e.groups[0];if(Object.prototype.toString="function"==typeof h?h:function(){return this[h]},!e.source.records.sort){var i=new Array,j=0;a.each(data,function(){i[startindex+j++]=this}),data=i}e.source.records.sort(function(b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),null===b&&null===c)return 0;if(null===b&&null!==c)return-1;if(null!==b&&null===c)return 1;if(b=b.toString(),c=c.toString(),a.jqx.dataFormat.isNumber(b)&&a.jqx.dataFormat.isNumber(c))return b<c?-1:b>c?1:0;if(a.jqx.dataFormat.isDate(b)&&a.jqx.dataFormat.isDate(c))return b<c?-1:b>c?1:0;a.jqx.dataFormat.isNumber(b)||a.jqx.dataFormat.isNumber(c)||(b=String(b).toLowerCase(),c=String(c).toLowerCase());try{if(b<c)return-1;if(b>c)return 1}catch(d){}return 0}),Object.prototype.toString=g}for(var k=0;k<e.source.records.length;k++){var l=e.source.records[k];if(e.rowsByKey[l.uid]=l,l.records&&l.records.length>0){var m=function(a){for(var b=0;b<a.length;b++)a[b]&&(e.rowsByKey[a[b].uid]=a[b],a[b].records&&a[b].records.length>0&&m(a[b].records))};m(l.records)}if(0===k){var n=!1;if(f)for(var o=0;o<f.length;o++)if(!f[o].type){n=!0,f[o].type="string";var p=l[f[o].name];if(void 0==p)continue;p!==!0&&p!==!1||(f[o].type="boolean"),(null!=p&&p.toString().indexOf(e.gridlocalization.currencysymbol)>-1||p.toString().indexOf(e.gridlocalization.percentsymbol)>-1)&&(p=new Number(e._toNumber(p.toString())),isNaN(p)||(f[o].type="number")),(a.jqx.dataFormat.isNumber(p)||!isNaN(parseFloat(p))&&isFinite(p))&&(f[o].type="number"),a.jqx.dataFormat.isDate(p)&&(f[o].type="date")}if(n)for(var o=0;o<f.length;o++){var q=e.source.getvaluebytype(l[f[o].name],f[o]);if(null!=q&&"number"==f[o].type){var r=q;r=new Number(e._toNumber(r.toString())),isNaN(r)||(q=r)}l[f[o].name]=q}}}if("pager"===c||"filter"===c||"sort"===c?e.refresh():e._render(),e.autoshowloadelement&&!e._loading&&(a(e.dataloadelement).css("visibility","hidden"),a(e.dataloadelement).css("display","none")),e.pageable&&(e.disabled||e.pagernexttop&&(e.pagerfirsttop.jqxButton({disabled:!1}),e.pagerfirstbottom.jqxButton({disabled:!1}),e.pagerlasttop.jqxButton({disabled:!1}),e.pagerlastbottom.jqxButton({disabled:!1}),e.pagernexttop.jqxButton({disabled:!1}),e.pagerprevioustop.jqxButton({disabled:!1}),e.pagershowrowscombotop.jqxDropDownList&&"advanced"==e.pagermode&&(e.pagershowrowscombotop.jqxDropDownList({disabled:!1}),e.pagershowrowscombobottom.jqxDropDownList({disabled:!1})),e.pagernextbottom.jqxButton({disabled:!1}),e.pagerpreviousbottom.jqxButton({disabled:!1}))),e._updateTouchScrolling(),e._raiseEvent("bindingComplete"),d&&d(),!e.initializedcall&&(e.initializedcall=!0,e.isInitialized=!0,e.ready&&e.ready(),(null!=e.width&&e.width.toString().indexOf("%")!=-1||null!=e.height&&e.height.toString().indexOf("%")!=-1)&&e._updatesize(!0),"hidden"==e.host.css("visibility"))){a.jqx.browser.msie&&a.jqx.browser.version<8;"visible"==e.vScrollBar.css("visibility")&&e.vScrollBar.css("visibility","inherit"),"visible"==e.hScrollBar.css("visibility")&&e.hScrollBar.css("visibility","inherit"),e._intervalTimer=setInterval(function(){"visible"==e.host.css("visibility")&&(e._updatesize(!0),clearInterval(e._intervalTimer))},100)}},this.dataview.databind(b)}},_raiseEvent:function(a,b){void 0==b&&(b={owner:null});var c=a;args=b,args.owner=this;var d=new jQuery.Event(c);d.owner=this,d.args=args;var e=this.host.trigger(d);return b=d.args,e},ensurecolumnvisible:function(a){for(var b=0,c=0,d=0;d<this.columns.records.length;d++){if(this.columns.records[d].datafield==a){b+=this.columns.records[d].width,c=this.columns.records[d].width;break}b+=this.columns.records[d].width}if("hidden"!=this.hScrollBar.css("visibility")){var e=this.hScrollBar.jqxScrollBar("value"),f=e+this.host.width();e>b-c?this.hScrollBar.jqxScrollBar("setPosition",b-c):b>f&&this.hScrollBar.jqxScrollBar("setPosition",e+b-f)}},ensurerowvisiblebykey:function(b){if("hidden"===this.vScrollBar[0].style.visibility)return!1;var c=this._getuirow(b);if(c){var d=this.vScrollBar.jqxScrollBar("value"),e=this.host.height(),f=0;f+=this.columngroups?this.showheader?this.columnsheader.height():0:this.showheader?this.columnsheight:0,this.filterable&&(f+=this.filter.height()),this.pageable&&"top"===this.pagerposition&&(f+=this.pagerheight),this.showtoolbar&&(f+=this.toolbarheight),e-=f,this.pageable&&"top"!==this.pagerposition&&(e-=this.pagerheight),this.showstatusbar&&(e-=this.statusbarheightt),this.showaggregates&&(e-=this.aggregatesheight),"hidden"!=this.hScrollBar.css("visibility")&&(e-=20);var g=this.host.coord().top+f,h=d,i=e+h,j=c.coord().top+d-g;j=Math.round(j);var k=j+c.outerHeight();if(k=Math.round(k),0===Math.round(c.position().top))return this.vScrollBar.jqxScrollBar("setPosition",0);var l=a(this._table.children()[1]).children().length-1,m=this._getuikey(l),n=this._getuirow(m);if(n&&n[0]===c[0])return this.vScrollBar.jqxScrollBar("setPosition",this.vScrollBar.jqxScrollBar("max"));if(j<h){var o=j-c.height();return o<0&&(o=0),this.vScrollBar.jqxScrollBar("setPosition",o)}return k>i?this.vScrollBar.jqxScrollBar("setPosition",4+k-e):void 0}},ensurerowvisible:function(a){var b=this._getkey(a);this.ensurerowvisiblebykey(b)},getcolumn:function(b){var c=null;return this.columns.records&&a.each(this.columns.records,function(){if(this.datafield==b||this.displayfield==b)return c=this,!1}),c},_setcolumnproperty:function(a,b,c){if(null==a||null==b||null==c)return null;b=b.toLowerCase();var d=this.getcolumn(a);if(null!=d){d[b];d[b]=c;var e=this.getcolumn(a);switch(null!=e&&(e[b]=c),b){case"filteritems":case"text":case"editable":case"resizable":case"draggable":case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":"align"==b?(this._rendercolumnheaders(),this.refresh()):"hidden"==b||"pinned"==b||"resizable"==b||"renderer"==b?(this._rendercolumnheaders(),this.refresh()):"width"==b||"maxwidth"==b||"minwidth"==b?(d._width=null,d._percentagewidth=null,this._updatecolumnwidths(),this.refresh()):this.refresh()}}},getcolumnproperty:function(a,b){if(null==a||null==b)return null;b=b.toLowerCase();var c=this.getcolumn(a);return c[b]},setcolumnproperty:function(a,b,c){this._setcolumnproperty(a,b,c)},hidecolumn:function(a){this._setcolumnproperty(a,"hidden",!0)},showcolumn:function(a){this._setcolumnproperty(a,"hidden",!1)},updatebounddata:function(a,b){this.databind(this.source,a,b)},refresh:function(b){if(1!=b){if(a.jqx.isHidden(this.host))return;this.vScrollInstance.setPosition(0),this._renderrows(),this.updatepagerdetails(),this._arrange(),this._renderhorizontalscroll(),this._showicons(),this.showaggregates&&this._updateaggregates(),this._updateTouchScrolling()}},_updateTouchScrolling:function(){var b=this.that;if(b.isTouchDevice()){var c=a.jqx.mobile.getTouchEventName("touchstart"),d=a.jqx.mobile.getTouchEventName("touchend"),e=a.jqx.mobile.getTouchEventName("touchmove");b.gridcontent&&(b.removeHandler(b.gridcontent,c+".touchScroll"),b.removeHandler(b.gridcontent,e+".touchScroll"),b.removeHandler(b.gridcontent,d+".touchScroll"),b.removeHandler(b.gridcontent,"touchcancel.touchScroll"),a.jqx.mobile.touchScroll(b.gridcontent[0],Math.max(b.vScrollInstance.max,b.hScrollInstance.max),function(a,c){if("hidden"!=b.vScrollBar.css("visibility")){var d=b.vScrollInstance.value;b.vScrollInstance.setPosition(d+c)}if("hidden"!=b.hScrollBar.css("visibility")){var d=b.hScrollInstance.value;b.hScrollInstance.setPosition(d+a)}b.scrolled=new Date,b.vScrollInstance.thumbCapture=!0},this.element.id,this.hScrollBar,this.vScrollBar))}},_showicons:function(){if(this.table)for(var b=0;b<this.columns.records.length;b++){var c=this.columns.records[b];if(a(c.filtericon).hide(),a(c.sortasc).hide(),a(c.sortdesc).hide(),"simple"!==this.filtermode)for(var d=0;d<this.dataview.filters.length;d++){var e=this.dataview.filters[d];if(e.datafield===c.displayfield){a(c.filtericon).show();break}}if(null!==this.sortcolumn&&this.sortcolumn===c.displayfield&&null!=this.sortdirection&&(this.sortdirection.ascending?a(c.sortasc).show():a(c.sortdesc).show()),"left"!=c.align&&"center"!=c.align&&!this.rtl||this.rtl&&"right"!=c.align&&"center"!=c.align){var f=a.jqx.isHidden(a(c.filtericon))?0:16;f+=a.jqx.isHidden(a(c.sortasc))?0:16,f+=a.jqx.isHidden(a(c.sortdesc))?0:16;var g=a(a(a(c.element).children()[0]).children()[0]);this.rtl?f>0?g.css("margin-left",4+f+"px"):g.css("margin-left","4px"):f>0?g.css("margin-right",4+f+"px"):g.css("margin-right","4px")}}},render:function(b){var c="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";this.element.innerText="",this.element.innerHTML=c,this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var d=this.host.find("#verticalScrollBar"+this.element.id),e=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),this.vScrollBar&&this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar&&this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar=d.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=e.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=a.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=a.data(this.hScrollBar[0],"jqxScrollBar").instance,this.filter=this.host.find("#filter"),this.filter[0].id="filter"+this.element.id,this.filter.addClass(this.toTP("jqx-widget-header")),this.filter.addClass(this.toTP("jqx-grid-toolbar")),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.aggregates=this.host.find("#aggregates"),this.aggregates[0].id="aggregates"+this.element.id,this.aggregates.addClass(this.toTP("jqx-grid-statusbar")),this.aggregates.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.toppager=this.host.find("#toppager"),this.toppager.addClass(this.toTP("jqx-grid-pager-top")),this.toppager.addClass(this.toTP("jqx-widget-header")),this.gridtable=null,this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this._builddataloadelement(),this._cachedcolumns=this.columns;var f=this.source.datafields;if(null==f&&this.source._source&&(f=this.source._source.datafields),f)for(var g=0;g<this.columns.length;g++){var h=this.columns[g];if(h&&h.cellsformat&&h.cellsformat.length>2)for(var i=0;i<f.length;i++)if(f[i].name==h.datafield&&!f[i].format){f[i].format=h.cellsformat;break}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this.showaggregates&&this.aggregates.css("visibility","inherit"),this.tableheight=null;var j=this,k=function(){j.content&&(j.content[0].scrollTop=0,j.content[0].scrollLeft=0),j.gridcontent&&(j.gridcontent[0].scrollLeft=0,j.gridcontent[0].scrollTop=0)};this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"mousedown"),this.addHandler(this.content,"scroll",function(a){return k(),!1}),b!==!0&&this._render()},_render:function(){if(null!=this.dataview&&!this._loading){(25!=this.columnsheight||this.columngroups)&&this._measureElement("column"),this.filterable?this.filter[0].style.visibility="inherit":this.filter[0].style.visibility="hidden",this.rowinfo=new Array,this._removeHandlers(),null==this.columns?this.columns=new a.jqx.collection(this.element):this._initializeColumns(),this.host.height(this.height),this.host.width(this.width),a.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||a('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header")),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||a('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var b=this.columnsheight;b=this._preparecolumngroups(),this.columnsheader.height(b),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._rendercolumnheaders(),this.tableheight=null,this.gridcontent.find("#contenttable"+this.element.id).remove(),null!=this.table&&(this.table.remove(),this.table=null),this.table=a('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;"></div>'),this.gridcontent.addClass(this.toTP("jqx-grid-content")),this.gridcontent.addClass(this.toTP("jqx-widget-content")),this.gridcontent.append(this.table),this._renderrows(),this.filterable&&this._renderfilter(),this.pageable&&this._initpager(),this._arrange(),this.renderstatusbar&&this.renderstatusbar(this.statusbar),this.rendertoolbar&&this.rendertoolbar(this.toolbar),this.showaggregates&&this._updateaggregates(),this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this._renderhorizontalscroll(),this._showicons(),this._addHandlers()}},clear:function(){this.source&&(this.source.records=new Array,this.source.hierarchy=new Array),this.dataview._filteredData=new Array,this.databind(null),this._render()},_initpager:function(){var b=this.gridlocalization.pagergotopagestring,c=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),d=(this.pagerheight-17)/2;if(this.pagerdiv=this.pagerdiv||a('<div style="width: 100%; height: 100%; position: relative;"></div>'),this.toppagerdiv=this.toppagerdiv||a('<div style="width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.toppagerdiv.remove();if(this.pagerrenderer){this.pagerdiv.children().remove(),this.toppager.children().remove();var e=this.pagerrenderer();null!=e&&this.pagerdiv.append(a(e)),this.pager.append(this.pagerdiv);var e=this.pagerrenderer();null!=e&&this.toppagerdiv.append(a(e)),this.toppager.append(this.toppagerdiv)}else{this.pagerdiv.css("top",d),this.toppagerdiv.css("top",d);var f=function(d,e){var f=this,g=a('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'),h=a('<div style="float: right; margin-right: 7px;"></div>'),i=a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),j=a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),k=a('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),l=a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),m=a('<div style="margin-right: 7px; float: right;"></div>'),n=a('<div style="margin-right: 7px; float: right;"></div>'),o=a('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>');g.attr("disabled",f.disabled);var p=a('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>');if(p[0].id="gridpagerlist"+e+f.element.id,f.removeHandler(i,"mousedown"),f.removeHandler(i,"mouseup"),f.removeHandler(i,"click"),f.removeHandler(j,"mousedown"),f.removeHandler(j,"mouseup"),f.removeHandler(j,"click"),f.removeHandler(k,"mousedown"),f.removeHandler(k,"mouseup"),f.removeHandler(k,"click"),f.removeHandler(l,"mousedown"),f.removeHandler(l,"mouseup"),f.removeHandler(l,"click"),f.rtl?(i.attr("title",f.gridlocalization.pagerpreviousbuttonstring),j.attr("title",f.gridlocalization.pagernextbuttonstring)):(j.attr("title",f.gridlocalization.pagerpreviousbuttonstring),i.attr("title",f.gridlocalization.pagernextbuttonstring)),a.jqx.browser.msie&&a.jqx.browser.version<8&&o.css("padding-top","3px"),this["pagerfirst"+e]=k,this["pagerlast"+e]=l,this["pagernext"+e]=i,this["pagerprevious"+e]=j,this["pagergotoinput"+e]=g,this["pagerdetails"+e]=m,this["pagershowrows"+e]=n,this["pagergotolabel"+e]=h,this["pagershowrowscombo"+e]=p,this["pagerbuttons"+e]=o,"default"==f.pagermode){f.rtl?(l.attr("title",f.gridlocalization.pagerfirstbuttonstring),k.attr("title",f.gridlocalization.pagerlastbuttonstring)):(k.attr("title",f.gridlocalization.pagerfirstbuttonstring),l.attr("title",f.gridlocalization.pagerlastbuttonstring));var q=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");q.addClass(f.toThemeProperty("jqx-icon-arrow-first")),k.wrapInner(q);var r=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");r.addClass(f.toThemeProperty("jqx-icon-arrow-last")),l.wrapInner(r),f.rtl?(d.append(l),d.append(i),d.append(o),d.append(j),d.append(k)):(d.append(k),d.append(j),d.append(o),d.append(i),d.append(l)),l.jqxButton({cursor:"pointer",disabled:f.disabled,theme:f.theme}),k.jqxButton({cursor:"pointer",disabled:f.disabled,theme:f.theme});var s=f.rtl?"right":"left";o.css("float",s),l.css("float",s),k.css("float",s),i.css("float",s),j.css("float",s),m.css("float",f.rtl?"left":"right"),f.rtl?(m.css("margin-left","7px"),m.css("margin-right","0px")):(m.css("margin-left","0px"),m.css("margin-right","7px"))}else f.rtl||(d.append(i),d.append(j));i.jqxButton({cursor:"pointer",disabled:f.disabled,theme:f.theme}),j.jqxButton({cursor:"pointer",disabled:f.disabled,theme:f.theme});var t=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");t.addClass(f.toThemeProperty("jqx-icon-arrow-left")),j.wrapInner(t);var u=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");if(u.addClass(f.toThemeProperty("jqx-icon-arrow-right")),i.wrapInner(u),f.rtl||d.append(m),"default"!=f.pagermode){f.rtl?(d.append(h),d.append(g),d.append(n),d.append(p),d.append(m),d.append(i),d.append(j)):(d.append(p),d.append(n),d.append(g),d.append(h));var v=f.pagesizeoptions;p.jqxDropDownList({_checkForHiddenParent:!1,rtl:f.rtl,disabled:f.disabled,source:v,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:44,height:16,theme:f.theme});for(var w=0,x=0;x<v.length;x++)this.pagesize>=v[x]&&(w=x);h[0].innerHTML=b,p.jqxDropDownList({selectedIndex:w});var y=g.find("input");y.addClass(f.toThemeProperty("jqx-input")),y.addClass(f.toThemeProperty("jqx-widget-content")),this.rtl&&y.css("direction","rtl");var f=this;this.removeHandler(p,"select"),this.addHandler(p,"select",function(a){if(a.args){f.vScrollInstance&&f.vScrollInstance.setPosition(0);var b=a.args.index;f.pagershowrowscombotop.data().jqxDropDownList.instance.selectIndex(b),f.pagershowrowscombobottom.data().jqxDropDownList.instance.selectIndex(b),f.pagershowrowscombobottom.data().jqxDropDownList.instance.renderSelection("mouse"),f.pagershowrowscombotop.data().jqxDropDownList.instance.renderSelection("mouse");var c=f.dataview.pagenum*f.dataview.pagesize,d=v[b],e=f.pagesize;f.pagesize=parseInt(d),isNaN(f.pagesize)&&(f.pagesize=10),d>=100?(f.pagershowrowscombotop.jqxDropDownList({width:55}),f.pagershowrowscombobottom.jqxDropDownList({width:55})):(f.pagershowrowscombotop.jqxDropDownList({width:44}),f.pagershowrowscombobottom.jqxDropDownList({width:44})),f.dataview.pagesize=f.pagesize;var g=Math.floor(c/f.dataview.pagesize);if(g!==f.dataview.pagenum||parseInt(d)!==parseInt(e)){f._raiseEvent("pageSizeChanged",{pagenum:g,oldpagesize:e,pagesize:f.dataview.pagesize});var h=f.gotopage(g);h||(f.serverProcessing?f.updatebounddata("pager"):f.refresh())}}});var g=g.find("input");g.addClass(f.toThemeProperty("jqx-grid-pager-input")),g.addClass(f.toThemeProperty("jqx-rc-all")),this.removeHandler(g,"keydown"),this.removeHandler(g,"change"),f.addHandler(g,"keydown",function(a){if(a.keyCode>=65&&a.keyCode<=90)return!1;if("13"==a.keyCode){var b=g.val();return b=parseInt(b),isNaN(b)||f.gotopage(b-1),!1}}),f.addHandler(g,"change",function(){var a=g.val();a=parseInt(a),isNaN(a)||f.gotopage(a-1)})}n[0].innerHTML=c,f.addHandler(i,"mouseenter",function(){u.addClass(f.toThemeProperty("jqx-icon-arrow-right-hover"))}),f.addHandler(j,"mouseenter",function(){t.addClass(f.toThemeProperty("jqx-icon-arrow-left-hover"))}),f.addHandler(i,"mouseleave",function(){u.removeClass(f.toThemeProperty("jqx-icon-arrow-right-hover"))}),f.addHandler(j,"mouseleave",function(){t.removeClass(f.toThemeProperty("jqx-icon-arrow-left-hover"))}),f.addHandler(i,"mousedown",function(){u.addClass(f.toThemeProperty("jqx-icon-arrow-right-selected"))}),f.addHandler(i,"mouseup",function(){u.removeClass(f.toThemeProperty("jqx-icon-arrow-right-selected"))}),f.addHandler(j,"mousedown",function(){t.addClass(f.toThemeProperty("jqx-icon-arrow-left-selected"))}),f.addHandler(j,"mouseup",function(){t.removeClass(f.toThemeProperty("jqx-icon-arrow-left-selected"))}),"default"===f.pagermode&&(f.addHandler(l,"mouseenter",function(){r.addClass(f.toThemeProperty("jqx-icon-arrow-last-hover"))}),f.addHandler(k,"mouseenter",function(){q.addClass(f.toThemeProperty("jqx-icon-arrow-first-hover"))}),f.addHandler(l,"mouseleave",function(){r.removeClass(f.toThemeProperty("jqx-icon-arrow-last-hover"))}),f.addHandler(k,"mouseleave",function(){q.removeClass(f.toThemeProperty("jqx-icon-arrow-first-hover"))}),f.addHandler(l,"mousedown",function(){r.addClass(f.toThemeProperty("jqx-icon-arrow-last-selected"))}),f.addHandler(k,"mousedown",function(){q.addClass(f.toThemeProperty("jqx-icon-arrow-first-selected"))}),f.addHandler(l,"mouseup",function(){r.removeClass(f.toThemeProperty("jqx-icon-arrow-last-selected"))}),f.addHandler(k,"mouseup",function(){q.removeClass(f.toThemeProperty("jqx-icon-arrow-first-selected"))})),f.addHandler(a(document),"mouseup.pagerbuttons"+e+this.element.id,function(){u.removeClass(f.toThemeProperty("jqx-icon-arrow-right-selected")),t.removeClass(f.toThemeProperty("jqx-icon-arrow-left-selected")),r&&(r.removeClass(f.toThemeProperty("jqx-icon-arrow-last-selected")),q.removeClass(f.toThemeProperty("jqx-icon-arrow-first-selected")))}),f.addHandler(i,"click",function(){i.jqxButton("disabled")||(f.rtl?f.gotoprevpage():f.gotonextpage())}),f.addHandler(j,"click",function(){j.jqxButton("disabled")||(f.rtl?f.gotonextpage():f.gotoprevpage())}),"default"===this.pagermode&&(f.addHandler(k,"click",function(){if(!k.jqxButton("disabled"))if(f.rtl){var a=f.dataview.totalrecords,b=Math.ceil(a/f.pagesize);f.gotopage(b-1)}else f.gotopage(0)}),f.addHandler(l,"click",function(){if(!l.jqxButton("disabled"))if(f.rtl)f.gotopage(0);else{var a=f.dataview.totalrecords,b=Math.ceil(a/f.pagesize);f.gotopage(b-1)}}))};this.pagerdiv.children().remove(),this.toppagerdiv.children().remove(),f.call(this,this.pagerdiv,"bottom"),f.call(this,this.toppagerdiv,"top"),this.pager.append(this.pagerdiv),this.toppager.append(this.toppagerdiv),this.updatepagerdetails()}},_updatepagertheme:function(){},gotopage:function(b,c){if(this._loading)return!1;if(void 0!=this.editKey){if(!this.editSettings.saveOnPageChange)return!1;var d=this.endroweditbykey(this.editKey);if(!d)return!1}if(null!=b&&void 0!=b||(b=0),b==-1&&(b=0),b<0)return!1;var e=this.dataview.totalrecords,f=this.dataview.pagenum,g=Math.ceil(e/this.pagesize);return b>=g&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),b>0&&(b=g-1)),this.dataview.pagenum!=b&&(this.pageable&&(this.dataview.pagenum=b,this._raiseEvent("pageChanged",{pagenum:b,oldpagenum:f,pagesize:this.dataview.pagesize})),this.serverProcessing?this.updatebounddata("pager",c):(this.refresh(),c&&a.isFunction(c)&&c()),!0)},gotoprevpage:function(a){if(this.dataview.pagenum>0)return this.gotopage(this.dataview.pagenum-1,a);if("default"!=this.pagermode&&"advanced"!=this.pagermode){var b=this.dataview.totalrecords,c=Math.ceil(b/this.pagesize);return this.gotopage(c-1,a)}return!1},gotonextpage:function(a){var b=this.dataview.totalrecords;this.summaryrows&&(b+=this.summaryrows.length);var c=Math.ceil(b/this.pagesize);return this.dataview.pagenum<c-1?this.gotopage(this.dataview.pagenum+1,a):"default"!=this.pagermode&&"advanced"!=this.pagermode&&this.gotopage(0,a)},updatepagerdetails:function(){if(this.pageable){var b=this;if(!this.serverProcessing)if(this.source.hierarchy){var c=b._names(),d=0,e=function(f,g){for(var h=0;h<g.length;h++)0==b.dataview.filters.length&&(g[h]._visible=!0),g[h]._visible!==!1&&d++,g[h].records&&(g[h][c.expanded]||g[h][c.leaf])&&g[h]._visible!==!1&&(e(f+1,g[h].records),this.treeGrid&&a(this.treeGrid).jqxTreeGrid("showSubAggregates")&&0!=f&&d--)};e(0,this.dataview.rows),this.dataview.totalrecords=d}else this.dataview.totalrecords=this.dataview.rows.length;var f=this.dataview.pagenum*this.pagesize,g=(this.dataview.pagenum+1)*this.pagesize;g>=this.dataview.totalrecords&&(g=this.dataview.totalrecords);var h=this.dataview.totalrecords;f++;var i=Math.ceil(h/this.dataview.pagesize);if(i>=1&&i--,i++,"default"!=this.pagermode){if(this.pagergotoinputbottom){var j=this.pagergotoinputbottom.find("input");j.val(this.dataview.pagenum+1),j.attr("title","1 - "+i),j=this.pagergotoinputtop.find("input"),j.val(this.dataview.pagenum+1),j.attr("title","1 - "+i)}}else{var k="",l=this.pagerbuttonscount;0!=l&&l||(l=5);var m=0;for(this.rtl&&(m=l-1);this.rtl&&m>=0||!this.rtl&&m<l;){var n=1+m,o=this.dataview.pagenum/l,p=Math.floor(o);n+=p*l;var q=this.toTP("jqx-grid-pager-number");if(q+=" "+this.toTP("jqx-rc-all"),n>i&&!this.rtl)break;if(this.rtl&&n>i)m--;else{if(this.rtl||0==m&&n>l&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(-1+n)+"'>...</a>"),this.dataview.pagenum===n-1&&(q+=" "+this.toTP("jqx-fill-state-pressed")),this.rtl){if(m===l-1){var q=this.toTP("jqx-grid-pager-number");i>=1+n&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(1+n)+"'>...</a>")}this.dataview.pagenum===n-1&&(q+=" "+this.toTP("jqx-fill-state-pressed")),k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+n+"'>"+n+"</a>"}else if(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+n+"'>"+n+"</a>",m===l-1){var q=this.toTP("jqx-grid-pager-number");i>=1+n&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(1+n)+"'>...</a>")}if(this.rtl){var q=this.toTP("jqx-grid-pager-number");0==m&&n>l&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(-1+n)+"'>...</a>")}this.rtl?m--:m++}}if(!this.pagerbuttonsbottom)return;var r=this.pagerbuttonsbottom.find("a");this.removeHandler(r,"click"),this.removeHandler(r,"mouseenter"),this.removeHandler(r,"mouseleave");var r=this.pagerbuttonstop.find("a");this.removeHandler(r,"click"),this.removeHandler(r,"mouseenter"),this.removeHandler(r,"mouseleave"),this.pagerbuttonsbottom[0].innerHTML=k,this.pagerbuttonstop[0].innerHTML=k,this.disabled&&this.host.find(".jqx-grid-pager-number").css("cursor","default");var s=function(){r.click(function(c){if(!b.disabled){var d=a(c.target).attr("data-page");b.gotopage(parseInt(d)-1)}}),r.mouseenter(function(c){b.disabled||a(c.target).addClass(b.toTP("jqx-fill-state-hover"))}),r.mouseleave(function(c){b.disabled||a(c.target).removeClass(b.toTP("jqx-fill-state-hover"))})};if("both"===this.pagerposition||"bottom"===this.pagerposition){var r=this.pagerbuttonsbottom.find("a");s(r)}if("both"===this.pagerposition||"top"===this.pagerposition){var r=this.pagerbuttonstop.find("a");s(r)}}if(0==g&&g<f&&(f=0),this.pagerdetailsbottom&&(this.rtl?(this.pagerdetailsbottom[0].innerHTML=h+this.gridlocalization.pagerrangestring+g+"-"+f,this.pagerdetailstop[0].innerHTML=h+this.gridlocalization.pagerrangestring+g+"-"+f):(this.pagerdetailsbottom[0].innerHTML=f+"-"+g+this.gridlocalization.pagerrangestring+h,
this.pagerdetailstop[0].innerHTML=f+"-"+g+this.gridlocalization.pagerrangestring+h)),"default"==this.pagermode){var t=this.pagerbuttonsbottom.width()+a(this.pagerdetailsbottom).width()+160;this.pagerdiv.css("min-width",t),this.toppagerdiv.css("min-width",t)}f>g&&this.gotoprevpage()}},_preparecolumngroups:function(){var a=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var b=this,c=0;c<this.columngroups.length;c++)this.columngroups[c].parent=null,this.columngroups[c].groups=null;for(var c=0;c<this.columns.records.length;c++)this.columns.records[c].parent=null,this.columns.records[c].groups=null;for(var d=function(a){for(var c=0;c<b.columngroups.length;c++){var d=b.columngroups[c];if(d.name===a)return d}return null},c=0;c<this.columngroups.length;c++){var e=this.columngroups[c];if(e.groups||(e.groups=null),e.parentGroup&&(e.parentgroup=e.parentGroup),e.parentgroup){var f=d(e.parentgroup);f&&(e.parent=f,f.groups||(f.groups=new Array),f.groups.indexOf(e)===-1&&f.groups.push(e))}}for(var c=0;c<this.columns.records.length;c++){var e=this.columns.records[c];if(e.columngroup){var f=d(e.columngroup);f&&(f.groups||(f.groups=new Array),e.parent=f,f.groups.indexOf(e)===-1&&f.groups.push(e))}}for(var g=0,c=0;c<this.columns.records.length;c++){var e=this.columns.records[c],h=e;for(e.level=0;h.parent;)h=h.parent,e.level++;var h=e,i=e.level;for(g=Math.max(g,e.level);h.parent;)h=h.parent,h&&(h.level=--i)}for(var j=function(a){var b=new Array;if(a.columngroup&&b.push(a),!a.groups)return new Array;for(var c=0;c<a.groups.length;c++)if(a.groups[c].columngroup)b.push(a.groups[c]);else if(a.groups[c].groups)for(var d=j(a.groups[c]),e=0;e<d.length;e++)b.push(d[e]);return b},c=0;c<this.columngroups.length;c++){var e=this.columngroups[c],k=j(e);e.columns=k;for(var l=new Array,m=0,n=0;n<k.length;n++)l.push(this.columns.records.indexOf(k[n])),k[n].pinned&&m++;if(0!=m)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group cannot be pinned.");l.sort(function(a,b){return a=parseInt(a),b=parseInt(b),a<b?-1:a>b?1:0});for(var o=1;o<l.length;o++)if(l[o]!=l[o-1]+1)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+g,a=this.columngroupslevel*this.columnsheight}return a},wheel:function(a,b){if(b.autoheight&&"hidden"==b.hScrollBar.css("visibility"))return a.returnValue=!0,!0;var c=0;if(a||(a=window.event),a.originalEvent&&a.originalEvent.wheelDelta&&(a.wheelDelta=a.originalEvent.wheelDelta),a.wheelDelta?c=a.wheelDelta/120:a.detail&&(c=-a.detail/3),c){var d=b._handleDelta(c);return d&&(a.preventDefault&&a.preventDefault(),null!=a.originalEvent&&(a.originalEvent.mouseHandled=!0),void 0!=a.stopPropagation&&a.stopPropagation()),!!d&&(d=!1,a.returnValue=d,d)}a.preventDefault&&a.preventDefault(),a.returnValue=!1},_handleDelta:function(a){if("hidden"!=this.vScrollBar.css("visibility")){var b=this.vScrollInstance.value;a<0?this.vScrollInstance.setPosition(this.vScrollInstance.value+20):this.vScrollInstance.setPosition(this.vScrollInstance.value-20);var c=this.vScrollInstance.value;if(b!=c)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){var b=this.hScrollInstance.value;a>0?this.hScrollInstance.value>20?this.hScrollInstance.setPosition(this.hScrollInstance.value-20):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+20):this.hScrollInstance.setPosition(this.hScrollInstance.max);var c=this.hScrollInstance.value;if(b!=c)return!0}return!1},_removeHandlers:function(){this.removeHandler(this.host,"focus"),this.removeHandler(a(window),"jqxReady"),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);var b="mousedown";this.isTouchDevice()&&(b=a.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown"),this.table&&(this.removeHandler(this.table,"mouseleave"),this.removeHandler(this.table,"mousemove"),this.removeHandler(this.table,b),this.removeHandler(this.table,"selectstart."+this.element.id),a.jqx.browser.msie&&a.jqx.browser.version<9&&this.removeHandler(this.table,"dblclick"))},_addHandlers:function(){var b=this;this._mousewheelfunc=this._mousewheelfunc||function(a){return b.wheel(a,b),!1},this.addHandler(this.host,"dragstart."+this.element.id,function(a){return!1}),this.addHandler(this.table,"selectstart."+this.element.id,function(c){return!!b.enablebrowserselection||(!(!b.filterable||!a(c.target).ischildof(b.filterrow))||(!!(b.rowdetails&&a(c.target).parents("[data-role=details]").length>0)||void 0!=b.editKey&&void 0))}),this.addHandler(a(window),"jqxReady",function(){b._updatecolumnwidths(),b.refresh()}),this.editable&&this.addHandler(a(document),"mousedown.gridedit"+this.element.id,function(c){if(b.editable&&b.editSettings.saveOnBlur&&null!=b.editKey&&!b.vScrollInstance.isScrolling()&&!b.vScrollInstance.isScrolling()){var d=b.host.coord(),e=b.host.width(),f=b.host.height(),g=!1,h=!1,i=!1;if((c.pageY<d.top||c.pageY>d.top+f)&&(g=!0,h=!0),(c.pageX<d.left||c.pageX>d.left+e)&&(g=!0,i=!0),g){var j=function(b){var d=a(b.children()[0]).data();if(d&&!d.jqxWidget&&(d=b.data()),d||(d=b.data()),d.jqxWidget&&d.jqxWidget.container&&"block"==d.jqxWidget.container[0].style.display){var e=d.jqxWidget,f=e.container.coord().top,i=e.container.coord().top+e.container.height();return!(!h||!(c.pageY<f||c.pageY>i))&&(g=!0,e.close(),!0)}},k=b._editors;if(k)for(var l=0;l<k.length;l++){var m=k[l].editor,n=j(m),o=m.attr("aria-owns");if(o){if(o==document.activeElement.id)return!0;if(a(document.activeElement).ischildof(a("#"+o)))return!0}else if(o=m.children().attr("aria-owns")){if(o==document.activeElement.id)return!0;if(a(document.activeElement).ischildof(a("#"+o)))return!0}if(n===!1)return}}g&&b.endroweditbykey(b.editKey)}}),this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"focus",function(a){a.preventDefault&&a.preventDefault()}),this.vScrollInstance.valuechanged=function(a){b._timer&&clearTimeout(b._timer),b._timer=setTimeout(function(){b.table&&(b.table[0].style.top=0-b.vScrollInstance.value+"px")},5)},this.hScrollInstance.valuechanged=function(a){b._timer&&clearTimeout(b._timer),b._timer=setTimeout(function(){b.table&&b._renderhorizontalscroll()},5)};var c="mousedown";this.isTouchDevice()&&(c=a.jqx.mobile.getTouchEventName("touchend"),a.jqx.browser.msie&&a.jqx.browser.version<10&&(c="mousedown"));var d=function(a,c){for(var d=null,e=b._table.coord(),f=e.top,g=e.left,h=b._table[0].rows,i=0;i<h.length;i++)for(var j=h[i],k=j.cells,l=0;l<k.length;l++){var m=k[l],n=m.offsetLeft+g,o=m.offsetTop+f,p=m.offsetWidth,q=m.offsetHeight;if(0!==p&&0!==q){if(!(o<=c&&c<o+q))break;if(n<=a&&a<n+p){d=m;break}}}return d},e=function(){if(b.hoveredRow){var a=b.hoveredRow[0].cells,c=function(a){for(var c=0;c<a.length;c++){var d=a[c],e=d.className;e=e.replace(" "+b.toTP("jqx-fill-state-hover"),""),e=e.replace(" "+b.toTP("jqx-grid-cell-hover"),""),d.className=e}};if(c(a),b._pinnedTable&&a.length>0){var d=b._pinnedTable[0].rows[b.hoveredRow[0].rowIndex].cells;c(d)}}b.hoveredRow=null};this.addHandler(this.table,"mouseleave",function(a){e(),b.wrapper&&(b.wrapper.parent().removeAttr("tabindex",0),b.wrapper.removeAttr("tabindex",1),b.content.removeAttr("tabindex",2))});var f=function(a){if(!b.enablehover)return!0;b.hoveredRow=a;var c=a[0].cells,d=b.rowdetails&&!b.treeGrid,e=d&&!b.treeGrid?1:0,f=0;e>0&&b.rtl&&(e=0,f=1);for(var g=e;g<c.length-f;g++){var h=c[g];h.className+=" "+b.toTP("jqx-fill-state-hover")+" "+b.toTP("jqx-grid-cell-hover")}if(b._pinnedTable&&b._pinnedTable[0].rows.length)for(var i=b._pinnedTable[0].rows[b.hoveredRow[0].rowIndex].cells,g=e;g<i.length-f;g++){var h=i[g];h.className+=" "+b.toTP("jqx-fill-state-hover")+" "+b.toTP("jqx-grid-cell-hover")}};b.isTouchDevice()&&(b.enablehover=!1),this.addHandler(this.table,"mousemove",function(c){var g=c.pageX,h=c.pageY;if(b.disabled)return!0;if(!b.enablehover)return!0;if(b.hScrollInstance.isScrolling()||b.vScrollInstance.isScrolling())return!0;if(td=d(g,h),!td)return!0;var i=a(td).parent();return e(),!(!b.rowdetails||!b.treeGrid||"row-details"!=i.attr("data-role"))||(!(!b.renderedRecords||0!==b.renderedRecords.length)||(null!=b.editKey&&b.editKey===i.attr("data-key")||(f(i),!0)))}),this.addHandler(this.host,"keydown",function(a){return b._handleKey(a)}),a.jqx.browser.msie&&a.jqx.browser.version<9&&this.addHandler(this.table,"dblclick",function(a){b.table.trigger("mousedown",a)}),this.addHandler(this.table,c,function(c){var e=(c.target,null);if(b.disabled)return!0;var g=(b.table.coord(),c.pageX),h=c.pageY;if(a.jqx.browser.msie&&a.jqx.browser.version<9&&arguments&&2==arguments.length&&(g=arguments[1].pageX,h=arguments[1].pageY),b.isTouchDevice()){var i=a.jqx.position(c);if(g=i.left,h=i.top,isNaN(g)||isNaN(h)){var i=a.jqx.position(c.originalEvent);g=i.left,h=i.top}}e=d(g,h);var j=a(e).parent(),k=j.attr("data-key");if(b.rowdetails&&b.treeGrid&&"row-details"==j.attr("data-role"))return!0;var l=function(){b.enablebrowserselection||c.preventDefault&&c.preventDefault();var d=a(document).scrollTop();b.host.focus(),a(document).scrollTop(d)};if(void 0!==k){if(k==b.editKey){if(!b.editSettings.editSingleCell)return!0;if(b.clickedTD==e)return!0;if(null!=b.editKey&&b.editSettings.saveOnSelectionChange){var m=b.endroweditbykey(b.editKey);if(!m)return!0}}else if(null!=b.editKey&&b.editSettings.saveOnSelectionChange){var m=b.endroweditbykey(b.editKey);if(!m)return!0}b.clickedTD=e;var n=b.rowinfo[k];if(n&&n.group)return!0;var o=!1;if(n){var p=b.getrowdisplayindex(n.row),q=b.getrowindex(n.row);b._raiseEvent("rowClick",{index:p,boundIndex:q,key:k,row:n.row,originalEvent:c});var r=(new Date).getTime(),s=300;b.clickTime||(b.clickTime=new Date),b._lastSelectedKey==k&&r-b.clickTime.getTime()<s&&(b._raiseEvent("rowDoubleClick",{index:p,boundIndex:q,key:k,row:n.row,originalEvent:c}),o=!0,c.preventDefault&&c.preventDefault())}if(b.clickTime=new Date,e.className.indexOf("jqx-grid-group")>=0)n.expanded?b.hidedetailsbykey(k):b.showdetailsbykey(k);else if(c.target&&c.target.className.indexOf("jqx-grid-group")>=0&&b.treeGrid)n.expanded?b.treeGrid.collapserow(k):b.treeGrid.expandrow(k),f(b._getuirow(k)),c.stopPropagation&&c.stopPropagation();else{if(!(c.target&&c.target.className.indexOf("checkbox")>=0&&b.treeGrid)){var t=a(e).index(),u=b.columns.records[t];if(c.stopPropagation&&c.stopPropagation(),b.editable&&null==b.editKey&&b._lastSelectedKey==k&&b.editSettings.editOnDoubleClick&&o){var m=b.beginroweditbykey(k,u);return!0}if(b.isTouchDevice()&&b.scrolled&&new Date-b.scrolled<500)return b.enablebrowserselection||c.preventDefault&&c.preventDefault(),!1;if("singlerow"===b.selectionmode&&"custom"!==b.selectionmode)return b.selectrowbykey(k,"mouse",!1),b._lastSelectedKey=k,b._updateSelection(),c.preventDefault&&c.preventDefault(),l(),!0;if("custom"!==b.selectionmode&&(c.ctrlKey||b.clearselection(!1),c.shiftKey&&b._lastSelectedKey)){var n=b.rowinfo[b._lastSelectedKey];b._doSelection(b._lastSelectedKey,!0,!1);var v=a(b._table.children()[1]).children("[data-key="+b._lastSelectedKey+"]"),w=v.index(),x=j.index();return b._selectRange(x,w),b.selectrowbykey(k,"mouse",!1),b._updateSelection(),c.preventDefault&&c.preventDefault(),l(),!0}return b._lastSelectedKey=k,b.clickTime=new Date,"custom"===b.selectionmode||(n&&(n.selected?b.unselectrowbykey(k,"mouse",!1):b.selectrowbykey(k,"mouse",!1),l()),b._updateSelection(),b.enablebrowserselection||c.preventDefault&&c.preventDefault(),!0)}n.checked?b.treeGrid.uncheckrow(k):b.treeGrid.checkrow(k),f(b._getuirow(k)),c.stopPropagation&&c.stopPropagation()}}})},_updateSelection:function(){var b=this,c=a(b._table.children()[1]).children(),d=b._pinnedTable?a(b._pinnedTable.children()[1]).children():null,e=b.rowdetails&&!b.treeGrid,f=e?1:0,g=0;f>0&&b.rtl&&(f=0,g=1);for(var h=0;h<c.length;h++){var i=c[h].cells;if(d)var j=d[h].cells;var k=null;if(c[h].getAttribute&&(k=c[h].getAttribute("data-key")),b.rowinfo[k]&&"none"!==b.selectionmode)if(b.rowinfo[k].selected)for(var l=f;l<i.length-g;l++){var m=i[l];a(m).addClass(b.toTP("jqx-grid-cell-selected")+" "+b.toTP("jqx-fill-state-pressed")),j&&a(j[l]).addClass(b.toTP("jqx-grid-cell-selected")+" "+b.toTP("jqx-fill-state-pressed"))}else for(var l=f;l<i.length-g;l++){var m=i[l];if(j)var n=j[l];var o=m.className;o=o.replace(" jqx-fill-state-pressed",""),o=o.replace(" jqx-fill-state-pressed-"+b.theme,""),o=o.replace(" jqx-grid-cell-selected",""),o=o.replace(" jqx-grid-cell-selected-"+b.theme,""),m.className=o,n&&(n.className=o)}}},_selectRange:function(b,c){var d=a(a(this._table.children()[1]).children()[c]),e=this;if(b>c)for(var f=c,g=d;f<b;){var g=g.next(),h=g.attr("data-key");e._doSelection(h,!0,!1),f++}else if(b<c)for(var f=c,g=d;f>b;){var g=g.prev(),h=g.attr("data-key");this._doSelection(h,!0,!1),f--}},_getuikey:function(b,c){var d=null,e=a(this._table.children()[1]).children();if(d=a(e[b]).attr("data-key"),a(e[b]).attr("data-role")){var f=a(e[b]);if("next"==c){for(;f;)if(f=f.next()){var g=f.attr("data-role");if(!g)return d=f.attr("data-key")}}else if("prev"==c)for(;f;)if(f=f.prev()){var g=f.attr("data-role");if(!g)return d=f.attr("data-key")}return null}return d},getRows:function(){return this.source.records},getView:function(){var b=this._names(),c=new Array,d=function(c,e){for(var f=0;f<e.length;f++)if(e[f]._visible!==!1){var g=a.extend({},e[f]);c.push(g),e[f][b.expanded]&&(g.records=new Array,d(g.records,e[f].records))}};return d(c,this.dataViewRecords),c},getKeys:function(){for(var a=new Array,b=this.source.records,c=0;c<b.length;c++)a.push(b[c].uid);return a},getKey:function(a){var b=this.getRows();return b?b[a].uid:-1},_getkey:function(b){if(this._loading)throw new Error("jqxDataTable: "+this.loadingerrormessage);var c=null,d=function(){var c=a(this._table.children()[1]).children(),d=null,e=0;if(this.pageable&&(e-=this.dataview.pagenum*this.dataview.pagesize),this.groups.length>0){for(var f=0,g=0;g<c.length;g++){var h=a(c[g]),i=h.children()[0].getAttribute("colspan");if(!(i>0)){if(f===e+b)return d=h.attr("data-key");f++}}return d}if(this.rowdetails)for(var f=0,g=0;g<c.length;g++){if(f===b+e)return d=a(c[g]).attr("data-key");g%2==1&&f++}else d=a(c[e+b]).attr("data-key");return d};if(c=d.call(this),null==c&&this.pageable){var e=Math.floor(b/this.dataview.pagesize);if(this.dataview.pagenum!=e){var f=this.getRows()[b];if(f&&null!=f.uid)return f.uid;if(isNaN(e))return null;this.gotopage(e),c=d.call(this)}}return c},_getuirow:function(b){try{var c=a(this._table.children()[1]).children("[data-key="+b+"]");if(c.length>0)return c}catch(d){for(var e=a(this._table.children()[1]).children(),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("data-key");if(b==h)return a(g)}return null}return null},_getpinneduirow:function(b){if(!this._pinnedTable)return null;try{var c=a(this._pinnedTable.children()[1]).children("[data-key="+b+"]");if(c.length>0)return c}catch(d){for(var e=a(this._pinnedTable.children()[1]).children(),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("data-key");if(b==h)return a(g)}return null}return null},_names:function(){var a={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};if(!this.source||this.source&&!this.source._source.hierarchy)return a;var b=this.source._source.hierarchy.reservedNames;return b?b:a},_getMatches:function(b,c){if(void 0==b||0==b.length)return-1;var d=this.renderedRecords;void 0!=c&&(d=d.slice(c));var e=0;if(this.rowdetails&&!this.treeGrid&&e++,e<this.columns.records.length)var f=this.columns.records[e].datafield;else new Array;var g=new Array;return a.each(d,function(c){var d=this[f];d||(d="");var e=a.jqx.string.startsWithIgnoreCase(d.toString(),b);e&&g.push(this.uid)}),g},_handleKey:function(b){if(this._loading)return!0;if(a(b.target).ischildof(this.filter))return!0;if(a(b.target).ischildof(this.toolbar))return!0;if(a(b.target).ischildof(this.statusbar))return!0;var c=this._names(),d=this,e=b.charCode?b.charCode:b.keyCode?b.keyCode:0,f=this._lastSelectedKey,g=(this.rowinfo[f],this._getuirow(f)),h=b.shiftKey&&"singlerow"!=this.selectionmode,i=b.ctrlKey;if(g){if(this.handlekeyboardnavigation){var j=this.handlekeyboardnavigation(e);if(j)return!0}if(this.editable&&void 0==this.editKey&&113===e&&this.editSettings.editOnF2&&this.beginroweditbykey(g.attr("data-key")),void 0==this.editKey&&!i&&!h&&this.incrementalSearch&&!(e>=33&&e<=40)){var k=-1;this._searchString||(this._searchString=""),(8==e||46==e)&&this._searchString.length>=1&&(this._searchString=this._searchString.substr(0,this._searchString.length-1));var l=String.fromCharCode(e),m=!isNaN(parseInt(l)),n=!1;if(e>=65&&e<=97||m||8==e||32==e||46==e){b.shiftKey||(l=l.toLocaleLowerCase()),8!=e&&32!=e&&46!=e&&(this._searchString.length>0&&this._searchString.substr(0,1)==l||(this._searchString+=l)),32==e&&(this._searchString+=" "),this._searchTime=new Date;var f=this.getselection();if(f.length>=1){for(var o=f[0].uid,p=-1,q=0;q<this.renderedRecords.length;q++)if(this.renderedRecords[q].uid==o){p=q;break}var r=this._getMatches(this._searchString,p);if(0==r.length||r.length>0&&r[0]==o)var r=this._getMatches(this._searchString)}else var r=this._getMatches(this._searchString);if(r.length>0){var f=this.getselection();if(f.length>=1){var s=r.indexOf(f[0].uid);if(s==-1)this.clearselection(!1),this.selectrowbykey(r[0]);else{var t=s+1;t>=r.length&&(t=0),this.clearselection(!1),this.selectrowbykey(r[t])}}else this.clearselection(!1),this.selectrowbykey(r[0]);this._lastSearchString=this._searchString}}if(void 0!=this._searchTimer&&clearTimeout(this._searchTimer),27!=e&&13!=e||(this._searchString="",this._lastSearchString=""),this._searchTimer=setTimeout(function(){d._searchString="",d._lastSearchString=""},500),k>=0)return;if(n)return!1}if(void 0!=this.editKey){if(27===e&&this.editSettings.cancelOnEsc)this.endroweditbykey(this.editKey,!0);else if(13===e&&this.editSettings.saveOnEnter){if(b.target&&"div"!=b.target.nodeName.toLowerCase()&&"input"!=b.target.nodeName.toLowerCase())return!0;this.endroweditbykey(this.editKey,!1)}else if(this.editSettings.editSingleCell&&this.editColumn){var u=this.columns.records.indexOf(this.editColumn);if(9==e&&u<this.columns.records.length-1&&!b.shiftKey){for(var v=this.editKey,w=null,q=u+1;q<this.columns.records.length;q++)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){w=this.columns.records[q];break}w&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(v,w))}else if(9==e&&b.shiftKey&&u>0){for(var v=this.editKey,x=null,q=u-1;q>=0;q--)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){x=this.columns.records[q];break}x&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(v,x))}if(9==e){var y=this.rowinfo[this.editKey],p=this.getrowindex(y),g=this._getuirow(this.editKey);if(b.shiftKey||w){if(!x&&b.shiftKey){for(var z=null,q=this.columns.records.length-1;q>=0;q--)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){z=this.columns.records[q];break}if(z){for(;g;)if(g=g.prev()){var A=g.attr("data-role");if(!A){var B=g.attr("data-key");break}}if(B){this.clearselection(!1),this._lastSelectedKey=B;var y=this.rowsByKey[B],p=this.getrowindex(y),C=this.getrowdisplayindex(y);this._raiseEvent("rowSelect",{key:B,index:C,boundIndex:p,row:this.rowsByKey[B]}),this.endroweditbykey(this.editKey,!1),this._doSelection(B,!0,!0),this.beginroweditbykey(B,z)}}}}else{for(var z=null,q=0;q<this.columns.records.length;q++)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){z=this.columns.records[q];break}if(z){for(;g;)if(g=g.next()){var A=g.attr("data-role");if(!A){var B=g.attr("data-key");break}}if(B){this.clearselection(!1),this._lastSelectedKey=B;var y=this.rowsByKey[B],p=this.getrowindex(y),C=this.getrowdisplayindex(y);this._raiseEvent("rowSelect",{key:B,index:C,boundIndex:p,row:this.rowsByKey[B]}),this.endroweditbykey(this.editKey,!1),this._doSelection(B,!0,!0),this.beginroweditbykey(B,z)}}}return!1}}return!0}if(b.ctrlKey){var D=String.fromCharCode(e).toLowerCase();if("c"==D||"x"==D){var f=this.getselection();if(f.length>=1){for(var E="",F=0;F<this.renderedRecords.length;F++)for(var G=this.renderedRecords[F],q=0;q<f.length;q++){var y=f[q];if(y.uid===G.uid){for(var H=0;H<this.columns.records.length;H++){var I=this.getcelltextbykey(y.uid,this.columns.records[H].displayfield);E+=I,H<this.columns.records.length-1&&(E+="\t")}E+="\n";break}}if(""!=E&&(E=E.substring(0,E.length-1)),window.clipboardData)window.clipboardData.setData("Text",E);else{var J=a('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');J.val(E),a("body").append(J),J.select(),setTimeout(function(){document.designMode="off",J.select(),J.remove()},100)}}}}if(32===e&&this.treeGrid&&this.treeGrid.checkboxes){var f=this.getselection();if(f.length>1){for(var q=0;q<f.length;q++){var K=f[q].uid;this.rowinfo[K].checked?this.treeGrid.uncheckrow(K,!1):this.treeGrid.checkrow(K,!1)}return this._renderrows(),!1}var o=g.attr("data-key");if(o)return this.rowinfo[o].checked?this.treeGrid.uncheckrow(o):this.treeGrid.checkrow(o),!1}var L=g.index(),M=function(b){var c=null,e=a(d._table.children()[1]).children().length-1,f=a(a(d._table.children()[1]).children()[e]),g=f.attr("data-role");if(g){for(;f;)if(f=f.prev()){var g=f.attr("data-role");if(!g){c=f.attr("data-key");break}}}else c=f.attr("data-key");return"all"==b?{row:f,key:c}:c},N=function(b){var c=null,e=a(a(d._table.children()[1]).children()[0]),f=e.attr("data-role");if(f){for(;e;)if(e=e.next()){var f=e.attr("data-role");if(!f){c=e.attr("data-key");break}}}else c=e.attr("data-key");return"all"==b?{row:e,key:c}:c},o=null,O=function(){if(i||h||d.clearselection(!1),33==e||37==e){var a=L;o=d._getuikey(a,"prev"),o||(o=N())}else if(34==e||39==e){var a=L;o=d._getuikey(a,"next"),o||(o=M())}else 38==e?o=M():40==e&&(o=N());d._lastSelectedKey=o;var b=d.rowsByKey[o],a=d.getrowindex(b),c=d.getrowdisplayindex(b);d._raiseEvent("rowSelect",{key:o,index:c,boundIndex:a,row:d.rowsByKey[o]}),d._doSelection(o,!0,!0),d.host.focus()},P=function(){d.clearselection(!1);var a=N();h||i?d._selectRange(g.index(),0):d._lastSelectedKey=a,d.selectrowbykey(a,"keyboard")},Q=function(){d.clearselection(!1);var a=M("all"),b=a.key;h||i?d._selectRange(g.index(),a.row.index()):d._lastSelectedKey=b,d.selectrowbykey(b,"keyboard")};if(this.treeGrid&&this.rtl&&(37==e?e=39:39==e&&(e=37)),36==e||i&&38==e)return P(),!1;if(35==e||i&&40==e)return Q(),!1;if(33==e||37==e){var o=g.attr("data-key");if(this.rowdetails&&37==e&&!this.treeGrid)return this.hidedetailsbykey(o),!1;if(this.treeGrid&&37==e){if(this.rowinfo[o].row&&!this.rowinfo[o].row[c.parent]&&!this.rowinfo[o][c.leaf]&&!this.rowinfo[o].expanded)return!1;if(this.rowinfo[o].expanded&&!this.rowinfo[o][c.leaf])return this.treeGrid.collapserow(o),!1;if(this.rowinfo[o].row&&this.rowinfo[o].row[c.parent]&&(o=this.rowinfo[o].row[c.parent].uid),this.rowinfo[o][c.leaf])return!1}if(this.pageable&&!this.treeGrid)return this.rtl?this.gotonextpage(O):this.gotoprevpage(O),!1;if(this.treeGrid&&this.pageable&&33==e)return this.gotoprevpage(O),!1}else if(34==e||39==e){var o=g.attr("data-key");if(this.rowdetails&&39==e&&!this.treeGrid)return this.showdetailsbykey(o),!1;if(this.treeGrid&&39==e){if(this.rowinfo[o][c.leaf])return!1;if(!this.rowinfo[o].expanded)return this.treeGrid.expandrow(o),!1;if(this.rowinfo[o].row&&this.rowinfo[o].row.records&&this.rowinfo[o].row.records.length>0)if(this.dataview.filters.length>0){for(var R=this.rowinfo[o].row.records,q=0;q<R.length;q++)if(R[q]._visible){o=R[q].uid;break}}else o=this.rowinfo[o].row.records[0].uid}if(this.pageable&&!this.treeGrid)return this.rtl?this.gotoprevpage(O):this.gotonextpage(O),!1;if(this.treeGrid&&this.pageable&&34==e)return this.gotonextpage(O),!1}else if(38==e){for(;g;)if(g=g.prev()){var A=g.attr("data-role");if(!A){o=g.attr("data-key");break}}if(this.pageable&&null==o)return this.gotoprevpage(O),!1}else if(40==e){for(;g;)if(g=g.next()){var A=g.attr("data-role");if(!A){o=g.attr("data-key");break}}if(this.pageable&&null==o)return this.gotonextpage(O),!1}if(null!=o){if(i||h||this.clearselection(!1),this.rowinfo[o]&&this.rowinfo[o].selected&&(i||h)){this._doSelection(this._lastSelectedKey,!1,!1),this._lastSelectedKey=o;var y=this.rowsByKey[o],p=this.getrowindex(y);d._updateSelection();var C=this.getrowdisplayindex(y);return this._raiseEvent("rowUnselect",{key:o,index:C,boundIndex:p,row:y}),!1}this._lastSelectedKey=o;var y=this.rowsByKey[o],p=this.getrowindex(y);this._doSelection(o,!0,!1),d._updateSelection();var C=this.getrowdisplayindex(y);if(this._raiseEvent("rowSelect",{key:o,index:C,boundIndex:p,row:y}),this.treeGrid)if(37==e){var g=this._getuirow(o),S=null;if(g){var A=g.attr("data-role");A||(S=g.attr("data-key"))}if(this.pageable&&null==S&&this.dataview.pagenum>0)for(;null==this._getuirow(o)&&this.dataview.pagenum>0;)this.gotoprevpage()}else if(39==e){var g=this._getuirow(o),S=null;if(g){var A=g.attr("data-role");A||(S=g.attr("data-key"))}this.pageable&&null==S&&this.gotonextpage()}return!1}}},_selection:function(a){if("selectionStart"in a[0]){var b=a[0],c=b.selectionEnd-b.selectionStart;return{start:b.selectionStart,end:b.selectionEnd,length:c,text:b.value}}var d=document.selection.createRange();if(null==d)return{start:0,end:b.value.length,length:0};var e=a[0].createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e);var c=d.text.length;return{start:f.text.length,end:f.text.length+d.text.length,length:c,text:d.text}},_doSelection:function(a,b,c){if(null==a)return void this.clearselection();"singlerow"===this.selectionmode&&this.clearselection(!1);var d=this.rowinfo[a];if(d)d.selected=b,this.ensurerowvisiblebykey(a);else{this.ensurerowvisiblebykey(a);var d=this.rowinfo[a];d?d.selected=b:this.rowinfo[a]={selected:b}}"none"!=this.selectionmode&&c!==!1&&this._renderrows()},clearselection:function(a){if(this.rowinfo){var b=this.getRows();for(var c in this.rowinfo){var d=this.rowinfo[c];if(d.selected){d.selected=!1;var e=b.indexOf(d.row),f=this.getrowdisplayindex(d.row);this._raiseEvent("rowUnselect",{key:c,index:f,boundIndex:e,row:d.row})}}}a!==!1&&this._renderrows()},exportdata:function(c){if(!a.jqx.dataAdapter.ArrayExporter){if(!this.treeGrid)throw"jqxDataTable: Missing reference to jqxdata.export.js!";throw"jqxTreeGrid: Missing reference to jqxdata.export.js!"}var d=this.exportSettings.columnsHeader;void 0==d&&(d=!0);var e=this.exportSettings.hiddenColumns;void 0==e&&(e=!1);var f=this.exportSettings.serverURL,g=this.exportSettings.characterSet,h=this.exportSettings.collapsedRecords;void 0==h&&(h=!1);var i=this.exportSettings.fileName;void 0===i&&(i=this.treeGrid?"jqxTreeGrid_Data":"jqxDataTable_Data");var j=this,k=this.getRows();if(1==this.exportSettings.recordsInView&&(k=this.getView()),this.groups&&this.groups.length>0){var l=this.source.getGroupedRecords(this.groups,"records","label",null,"data",null,"parent",k),m=function(b,c){for(var d=0;d<b.length;d++){var e=a.extend({},b[d]);if(c.push(e),e.records&&e.records.length>0)for(var f=m(e.records,new Array),g=0;g<f.length;g++)f[g].leaf?c.push(f[g]):c.push(f[g])}return c},n=m.call(this,l,new Array);k=n}if(0==k.length)throw"No data to export.";this.exporting=!0,this.altrows&&this._renderrows();for(var o=new Array,p=0;p<this.columns.records.length;p++)!e&&this.columns.records[p].hidden||o.push(a.extend({},this.columns.records[p]));if(this.groups&&this.groups.length>0&&o.length>0)for(var q=this._names(),p=0;p<k.length;p++)k[p][q.leaf]||(j.rtl?k[p][o[o.length-1].displayfield]=k[p].label:k[p][o[0].displayfield]=k[p].label);var r=0;if(this.treeGrid){var s=this.treeGrid.getRows();1==this.exportSettings.recordsInView&&(s=this.getView());var q=this._names(),t=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c[q.expanded]||!c[q.expanded]&&h;c[q.leaf]&&(r=Math.max(r,c[q.level])),c.records&&c.records.length>0&&d&&(r=Math.max(r,c[q.level]),t(a[b].records))}};if(t(s),0!=r&&r++,"xml"!=c&&"json"!=c){for(var u=o.length,p=0;p<r;p++){var v=new b(this,this);v.width=this.indentwidth,v.datafield="Level"+p,v.displayfield="Level"+p,v.align="center",v.cellsalign="center",v.text="",this.rtl?o.splice(u,0,v):o.splice(p,0,v)}var w=new Array,x=!(!this.source._source.hierarchy||!this.source._source.hierarchy.groupingDataFields),y=function(b){for(var d=0;d<b.length;d++){for(var e=a.extend({},b[d]),f=0;f<e[q.level];f++)e["Level"+f]="";var g=e[q.expanded]||!e[q.expanded]&&h;("xls"==c||"html"==c)&&e.records&&e.records.length>0?e["Level"+e[q.level]]=g?"-":"+":e["Level"+e[q.level]]="",e[q.leaf]&&(e["Level"+e[q.level]]="");for(var f=e[q.level]+1;f<r;f++)e["Level"+f]="";if(x&&!e[q.leaf]&&(j.rtl?e[o[o.length-r-1].displayfield]=e.label:e[o[r].displayfield]=e.label),e.aggregate)for(var i="xls"==c?"AG":"",f=r;f<o.length;f++){var k=f;j.rtl&&(k=o.length-f-1),void 0!=e[o[k].displayfield]&&(e[o[k].displayfield]=i+e[o[k].displayfield])}w.push(e),g&&!e[q.leaf]&&y(e.records)}};y(s),k=w}else k=s}var z=void 0!=e&&e,A={},B={},C=this.host.find(".jqx-grid-cell:first"),D=this.host.find(".jqx-grid-cell-alt:first"),E=this.toThemeProperty;C.removeClass(E("jqx-grid-cell-selected")),C.removeClass(E("jqx-fill-state-pressed")),D.removeClass(E("jqx-grid-cell-selected")),D.removeClass(E("jqx-fill-state-pressed")),C.removeClass(E("jqx-grid-cell-hover")),C.removeClass(E("jqx-fill-state-hover")),D.removeClass(E("jqx-grid-cell-hover")),D.removeClass(E("jqx-fill-state-hover"));for(var F="cell",G=1,H="column",I=1,J=[],K=0;K<o.length;K++){var v=o[K];if(""!=v.cellclassname)if(v.customCellStyles=new Array,"string"==typeof v.cellclassname)v.customCellStyles.push(v.cellclassname);else for(var p=0;p<k.length;p++){var L=p,M=v.cellclassname(L,v.displayfield,k[p][v.displayfield],k[p]);M&&(v.customCellStyles[p]=M)}}if(a.each(o,function(b){var e=b;b>=r?e=o.length-r-1:r>0&&b<r&&(e=0);var f=a(j._table[0].rows[0].cells[e]);if(j._table[0].rows.length>1){var g=a(j._table[0].rows[1].cells[e]);if(0==g.length)var g=a(j._table[0].rows[1].cells[0])}if(0==f.length)var f=a(j._table[0].rows[0].cells[0]);var h=this,i=function(a){var b=j.toThemeProperty;if(a.removeClass(b("jqx-cell")),a.removeClass(b("jqx-grid-cell-selected")),a.removeClass(b("jqx-fill-state-pressed")),a.removeClass(b("jqx-grid-cell-hover")),a.removeClass(b("jqx-fill-state-hover")),h.customCellStyles)for(var c in h.customCellStyles)a.removeClass(h.customCellStyles[c])};if(i(f),g&&i(g),null==this.displayfield)return!0;j.showaggregates&&j.getcolumnaggregateddata&&J.push(j.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,k));var l=j._getexportcolumntype(this);!this.exportable||this.hidden&&!z||(A[this.displayfield]={},A[this.displayfield].text=this.text,A[this.displayfield].width=parseInt(this.width),isNaN(A[this.displayfield].width)&&(A[this.displayfield].width=60),A[this.displayfield].formatString=this.cellsformat,A[this.displayfield].localization=j.gridlocalization,A[this.displayfield].type=l,A[this.displayfield].cellsAlign=this.cellsalign,A[this.displayfield].hidden=!d,A[this.displayfield].index=e,A[this.displayfield].maxIndex=o.length),F="cell"+G;var m=this.element;if("json"!=c&&"xml"!=c){H="column"+I;var n=function(a,b,d,e,f,g,h,i,j){B[a]={index:1+h,maxIndex:o.length},g.rtl&&(B[a].index=o.length-h),"html"!=c&&"xls"!=c&&"pdf"!=c||(b&&(B[a]["font-size"]=b.css("font-size"),B[a]["font-weight"]=b.css("font-weight"),B[a]["font-style"]=b.css("font-style"),B[a]["background-color"]=g._getexportcolor(b.css("background-color")),B[a].color=g._getexportcolor(b.css("color")),B[a]["border-color"]=g._getexportcolor(b.css("border-top-color"))),
d?B[a]["text-align"]=f.align:(B[a]["text-align"]=f.cellsalign,B[a].formatString=f.cellsformat,B[a].dataType=l),"html"!=c&&"pdf"!=c||(B[a]["border-top-width"]="0px",g.rtl?(B[a]["border-left-width"]="1px",B[a]["border-right-width"]="0px",h==o.length-r-1&&d&&(B[a]["border-right-width"]="1px")):(B[a]["border-left-width"]="0px",B[a]["border-right-width"]="1px"),B[a]["border-bottom-width"]="1px",b&&(B[a]["border-top-style"]=b.css("border-top-style"),B[a]["border-left-style"]=b.css("border-left-style"),B[a]["border-right-style"]=b.css("border-right-style"),B[a]["border-bottom-style"]=b.css("border-bottom-style")),d?(0!=h||g.rtl?h==o.length-1&&g.rtl&&(B[a]["border-right-width"]="1px"):B[a]["border-left-width"]="1px",b&&(B[a]["border-top-width"]="1px",B[a]["border-bottom-width"]=b.css("border-bottom-width"))):0!=h||g.rtl?h==o.length-1&&g.rtl&&(B[a]["border-right-width"]="1px"):B[a]["border-left-width"]="1px",b&&(B[a].height=b.css("height")),g.treeGrid&&!d&&(B[a].index-1<r?g.rtl?B[a]["border-left-width"]="0px":B[a]["border-right-width"]="0px":B[a].index-1==r&&(g.rtl?B[a]["border-right-width"]="0px":B[a]["border-left-width"]="0px")))),!f.exportable||f.hidden&&!z||(1==i?(A[f.displayfield].customCellStyles||(A[f.displayfield].customCellStyles=new Array),A[f.displayfield].customCellStyles[j]=a):d?A[f.displayfield].style=a:e?A[f.displayfield].cellAltStyle=a:A[f.displayfield].cellStyle=a)};if(n(H,m,!0,!1,this,j,b),I++,n(F,f,!1,!1,this,j,b),j.altrows&&(F="cellalt"+G,n(F,g,!1,!0,this,j,b)),this.customCellStyles){for(var p in h.customCellStyles)f.removeClass(h.customCellStyles[p]);for(var p in h.customCellStyles)f.addClass(h.customCellStyles[p]),n(F+h.customCellStyles[p],f,!1,!1,this,j,b,!0,p),f.removeClass(h.customCellStyles[p])}G++}}),"json"!=c&&"xml"!=c&&r>0&&this.treeGrid){var N=r+1;if(this.rtl&&(N=o.length-r),B["column"+N]){var O=B["column"+N];O.merge=r,O["border-left-width"]="1px";for(var p=(B["cell"+N],0);p<o.length;p++){var N=p+1;this.rtl&&(N=o.length-p),B["column"+N].level=p,B["column"+N].maxLevel=r,B["cell"+N].maxLevel=r,B["cellalt"+N]&&(B["cellalt"+N].maxLevel=r)}for(var p=0;p<r;p++){var N=p+1,P=p;this.rtl&&(N=o.length-p);var Q=B["column"+N];if(Q.disabled=!0,B["cell"+N].level=P,B["cell"+N].maxLevel=r,B["column"+N].level=P,B["cellalt"+N]&&(B["cellalt"+N].level=P,B["cellalt"+N].maxLevel=r),("html"==c||"pdf"==c||"xls"==c)&&(Q["font-size"]=O["font-size"],Q["font-weight"]=O["font-weight"],Q["font-style"]=O["font-style"],Q["background-color"]=O["background-color"],Q.color=O.color,Q["border-color"]=O["border-color"],"html"==c||"pdf"==c)){Q["border-top-width"]=O["border-top-width"],Q["border-left-width"]=O["border-left-width"],this.rtl&&(Q["border-right-width"]=O["border-right-width"],0==p&&(Q["border-right-width"]="1px")),0!=p||this.rtl?0==p&&this.rtl&&(Q["border-left-width"]="0px"):Q["border-left-width"]="0px",this.rtl?this.rtl&&(Q["border-left-width"]="0px"):Q["border-right-width"]="0px",Q["border-bottom-width"]="0px";var Q=B["cell"+N];this.rtl?this.rtl&&(Q["border-left-width"]="0px"):Q["border-right-width"]="0px"}}}}if(this.showaggregates){var R=[],S="xls"==c?"AG":"",T=0;this.rowdetails&&!this.treeGrid&&T++,J.length>0&&(a.each(o,function(a){if(this.aggregates)for(var b=0;b<this.aggregates.length;b++)if(R[b]||(R[b]={}),R[b]){var c=j._getaggregatename(this.aggregates[b]),d=j._getaggregatetype(this.aggregates[b]),e=J[a-T];e&&(R[b][this.displayfield]=S+c+": "+e[d])}}),a.each(o,function(a){for(var b=0;b<R.length;b++)void 0==R[b][this.displayfield]&&(R[b][this.displayfield]=S)})),a.each(R,function(){k.push(this)})}var U=this,V=a.jqx.dataAdapter.ArrayExporter(k,A,B,f,this.treeGrid&&("xml"==c||"json"==c));if(void 0==i){this._renderrows();var W=V.exportTo(c);return this.showaggregates&&a.each(R,function(){k.pop(this)}),setTimeout(function(){U.exporting=!1},50),W}var X=this.treeGrid&&("xml"==c||"json"==c);V.exportToFile(c,i,f,g,X),this.showaggregates&&a.each(R,function(){k.pop(this)}),this._renderrows(),setTimeout(function(){U.exporting=!1},50)},_getexportcolor:function(a){var b=a;if("transparent"==a&&(b="#FFFFFF"),b&&b.toString()||(b="#FFFFFF"),b.toString().indexOf("rgb")!=-1){var c=b.split(",");if(b.toString().indexOf("rgba")!=-1){var d=parseInt(c[0].substring(5)),e=parseInt(c[1]),f=parseInt(c[2]),g=parseInt(c[3].substring(1,4)),h={r:d,g:e,b:f},i=this._rgbToHex(h);return 0==d&&0==e&&0==f&&0==g?"#ffffff":"#"+i}var d=parseInt(c[0].substring(4)),e=parseInt(c[1]),f=parseInt(c[2].substring(1,4)),h={r:d,g:e,b:f},i=this._rgbToHex(h);return"#"+i}if(b.toString().indexOf("#")!=-1&&4==b.toString().length){var j=b.toString().substring(1,4);b+=j}return b},_rgbToHex:function(a){return this._intToHex(a.r)+this._intToHex(a.g)+this._intToHex(a.b)},_intToHex:function(a){var b=parseInt(a).toString(16);return 1==b.length&&(b="0"+b),b.toUpperCase()},_getexportcolumntype:function(b){var c=this,d="string",e=c.source.datafields||(c.source._source?c.source._source.datafields:null);if(e){var f="";if(a.each(e,function(){if(this.name==b.displayfield)return this.type&&(f=this.type),!1}),f)return f}if(null!=b){if(void 0==this.dataview.cachedrecords)return d;var g=null;if(this.virtualmode)a.each(this.dataview.cachedrecords,function(){return g=this[b.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return d;if(g=this.dataview.cachedrecords[0][b.displayfield],null!=g&&""==g.toString())return"string"}if(null!=g){if(b.cellsformat.indexOf("c")!=-1)return"number";if(b.cellsformat.indexOf("n")!=-1)return"number";if(b.cellsformat.indexOf("p")!=-1)return"number";if(b.cellsformat.indexOf("d")!=-1)return"date";if(b.cellsformat.indexOf("y")!=-1)return"date";if(b.cellsformat.indexOf("M")!=-1)return"date";if(b.cellsformat.indexOf("m")!=-1)return"date";if(b.cellsformat.indexOf("t")!=-1)return"date";if("boolean"==typeof g)d="boolean";else if(a.jqx.dataFormat.isNumber(g))d="number";else{var h=new Date(g);if("NaN"==h.toString()||"Invalid Date"==h.toString())if(a.jqx.dataFormat){if(h=a.jqx.dataFormat.tryparsedate(g),null!=h){if(h&&h.getFullYear()&&1970==h.getFullYear()&&0==h.getMonth()&&1==h.getDate()){var i=new Number(g);return isNaN(i)?"string":"number"}return"date"}d="string"}else d="string";else d="date"}}}return d},showdetails:function(a){var b=this._getkey(a);this.showdetailsbykey(b)},hidedetails:function(a){var b=this._getkey(a);this.hidedetailsbykey(b)},setcellvaluebykey:function(b,c,d){var e=this.rowsByKey[b],f=this.getrowindex(e),g=e;if(null!=g&&g[c]==d)return!1;if(null==g||null!==g[c]||""!==d){var h="";if(null!=g&&g[c]!==d){var i=this.getcolumn(c),j="string",k=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(k){var l="";a.each(k,function(){if(this.name==i.displayfield)return this.type&&(l=this.type),!1}),l&&(j=l)}if(h=g[c],!i.nullable||null!=d&&""!==d&&i.nullable&&void 0===d.label){if(a.jqx.dataFormat.isNumber(h)||"number"==j||"float"==j||"int"==j||"decimal"==j&&"date"!=j)d=new Number(d),d=parseFloat(d),isNaN(d)&&(d=0);else if((a.jqx.dataFormat.isDate(h)||"date"==j)&&""!=d){var m=d;m=new Date(m),"Invalid Date"!=m&&null!=m?d=m:"Invalid Date"==m&&(m=new Date,d=m)}if(g[c]===d)return}if(g[c]=d,this.treeGrid){var n=this.treeGrid.getrow(b);n&&(n[c]=d)}if(null!=d&&null!=d.label){var i=this.getcolumn(c);if(g[i.displayfield]=d.label,g[c]=d.value,this.treeGrid){var n=this.treeGrid.getrow(b);n&&(n[i.displayfield]=d.label,n[c]=d.value)}}}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var o=f,p=this.source._source._localdata()[o];this.source.suspendKO=!0;var q=p;if(q[c]&&q[c].subscribe)null!=d&&null!=d.label?(q[i.displayfield](d.label),q[c](d.value)):q[c](d);else{var k=this.source._source.datafields,r=null;if(k&&a.each(k,function(){if(this.name==c)return r=this.map,!1}),null==r)null!=d&&null!=d.label?(q[c]=d.value,q[i.displayfield]=d.label):q[c]=d;else{var s=r.split(this.source.mapChar);if(s.length>0){for(var t=q,u=0;u<s.length-1;u++)t=t[s[u]];t[s[s.length-1]]=d}}this.source._source._localdata.replace(p,a.extend({},q))}this.source.suspendKO=!1}if(this.source.updaterow&&(void 0==sync||1==sync)){var v=!1,w=function(a){0==a&&this.setcellvalue(e,c,h,!0,!1)};try{var x=b;v=this.source.updaterow(x,g,w),void 0==v&&(v=!0)}catch(y){return v=!1,void this.setcellvalue(e,c,h)}}var z=this.getrowdisplayindex(e);this._raiseEvent("cellValueChanged",{value:d,oldValue:h,key:b,boundIndex:f,index:z,row:this.rowsByKey[b]}),this._renderrows()}},setcellvalue:function(a,b,c){if(null==a||null==b)return!1;var d=parseInt(a),e=this._getkey(d);this.setcellvaluebykey(e,b,c)},getcelltext:function(a,b){if(null==a||null==b)return!1;var c=parseInt(a),d=this._getkey(c);return this.getcelltextbykey(d,b)},getcelltextbykey:function(b,c){if(null==b||null==c)return null;var d=this.getcellvaluebykey(b,c),e=this.getcolumn(c);return e&&""!=e.cellsformat&&a.jqx.dataFormat&&(a.jqx.dataFormat.isDate(d)?d=a.jqx.dataFormat.formatdate(d,e.cellsformat,this.gridlocalization):(a.jqx.dataFormat.isNumber(d)||!isNaN(parseFloat(d))&&isFinite(d))&&(d=a.jqx.dataFormat.formatnumber(d,e.cellsformat,this.gridlocalization))),d},getcellvalue:function(a,b){if(null==a||null==b)return!1;var c=parseInt(a),d=this._getkey(c);return this.getcellvaluebykey(d,b)},getcellvaluebykey:function(a,b){var c=this.rowsByKey[a];!c&&this.treeGrid&&(c=this.treeGrid.getrow(a));var d=(this.getrowindex(c),c);return null!=d?d[b]:null},beginrowedit:function(a){var b=this._getkey(a);this.beginroweditbykey(b)},begincelledit:function(a,b){var c=this._getkey(a),d=this.getcolumn(b);this.beginroweditbykey(c,d)},endcelledit:function(a,b,c){this.endrowedit(a,c)},endrowedit:function(a,b){var c=this._getkey(a);this.endroweditbykey(c,b)},getrowindex:function(a){var b=this.getRows().indexOf(a);if(b!=-1)return b;if(this.groups&&this.groups.length>0)for(var c=this.getRows(),d=0;d<c.length;d++)if(a.originalRecord){if(c[d].uid==a.originalRecord.uid){b=d;break}}else if(c[d].uid==a.uid){b=d;break}return b},getrowdisplayindex:function(a){var b=this.getView().indexOf(a);if(b!=-1)return b;if(void 0==a)return b;for(var c=this.getView(),d=0;d<c.length;d++)if(c[d].uid==a.uid||a.originalRecord&&c[d].uid==a.originalRecord.uid){b=d;break}return b},beginroweditbykey:function(b,c){if(null==this._lastSelectedKey&&this.selectrowbykey(b),this.editKey===b&&void 0!=this.editKey)return!1;if(this.rowinfo[b]&&this.rowinfo[b].locked)return!1;if(null!=this.editKey)return this.endroweditbykey(b,!0),!1;var d=this.editSettings.editSingleCell;if(!c&&d&&this.columns.records&&this.columns.records.length>0){for(var e=0;e<this.columns.records.length&&(c=this.columns.records[e],!c.editable||c.hidden);e++);if(!c)return!1}if(d&&c&&!c.editable)return this.editKey=null,!1;d&&(this.editColumn=c);var f=this,g=this.rowsByKey[b];if(this.treeGrid)var g=this.treeGrid.getrow(b);var h=this.getrowindex(g),i=this._getuirow(b),j=this._getpinneduirow(b);this._editors=new Array;var k=!1;if(i)for(var l=i[0].cells,m=0,e=0;e<l.length;e++){var n=this.columns.records[e],o=l[e];if(!n.rowdetailscolumn&&!(n.checkboxcolumn||(n.pinned&&(o=j[0].cells[e]),d&&c&&n.datafield!=c.datafield||(a(o).removeClass(this.toTP("jqx-grid-cell-selected")),a(o).removeClass(this.toTP("jqx-fill-state-pressed")),a(o).removeClass(this.toTP("jqx-grid-cell-hover")),a(o).removeClass(this.toTP("jqx-fill-state-hover")),"none"==n.columntype)))){var p=a(o).outerWidth(),q=a(o).width();0===m&&(m=a(o).outerHeight()-1),a(o).css("padding","0px"),cellContent="<div style='height:"+m+"px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>";var r=this.getcelltextbykey(b,n.displayfield);o.innerHTML=cellContent;var s=a(o.firstChild);switch(n.columntype){case"textbox":case"default":var t=a("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(s);if(this.rtl&&t.css("direction","rtl"),t.addClass(this.toThemeProperty("jqx-input")),t.addClass(this.toThemeProperty("jqx-widget-content")),t.addClass(this.toThemeProperty("jqx-cell-editor")),t[0].onfocus=function(b){setTimeout(function(){if(b){var c=a(b.target).parent().parent().index();c>=0&&f.ensurecolumnvisible(f.columns.records[c].datafield)}else{var c=a(document.activeElement).parent().parent().index();c>=0&&f.ensurecolumnvisible(f.columns.records[c].datafield)}f.content&&(f.content[0].scrollTop=0,f.content[0].scrollLeft=0),f.gridcontent&&(f.gridcontent[0].scrollLeft=0,f.gridcontent[0].scrollTop=0)},10)},n.editable){if(!k){k=!0;var u=a.jqx.browser.msie&&a.jqx.browser.version>10;u||t.focus();var v=t;setTimeout(function(){u||v.focus();try{if("selectionStart"in v[0])v[0].setSelectionRange(0,0);else{var a=v[0].createTextRange();a.collapse(!0),a.moveEnd("character",0),a.moveStart("character",0),a.select()}}catch(b){}},10)}}else t.attr("disabled",!0),t.attr("readOnly",!0),t.addClass(this.toThemeProperty("jqx-fill-state-disabled"));if(t.width(q),t.height(m),a.jqx.browser.msie&&a.jqx.browser.version<9&&t.css("line-height",parseInt(m)+"px"),t.css("text-align",n.cellsalign),null===r&&(r=""),void 0==r&&(r=""),t.val(r),n.createeditor){var w=r,r=this.getcellvaluebykey(b,n.displayfield);n.createeditor(this.treeGrid?b:h,r,t,w,q,m)}if(this._editors.push({column:n,editor:t}),""!=n.cellsformat&&(n.cellsformat.indexOf("p")==-1&&n.cellsformat.indexOf("c")==-1&&n.cellsformat.indexOf("n")==-1&&n.cellsformat.indexOf("f")==-1||t.keydown(function(a){var b=a.charCode?a.charCode:a.keyCode?a.keyCode:0,c=String.fromCharCode(b),d=parseInt(c);if(isNaN(d))return!0;if(f._selection(t).length>0)return!0;var e="",g=t.val();if(n.cellsformat.length>1){var h=parseInt(n.cellsformat.substring(1));isNaN(h)&&(h=0)}else var h=0;if(h>0&&g.indexOf(f.gridlocalization.decimalseparator)!=-1&&f._selection(t).start>g.indexOf(f.gridlocalization.decimalseparator))return!0;for(var i=0;i<g.length-h;i++){var j=g.substring(i,i+1);null!=j.match(/^[0-9]+$/)&&(e+=j)}return!(e.length>=11)&&void 0})),n.initeditor){var w=r,r=this.getcellvaluebykey(b,n.displayfield);n.initeditor(this.treeGrid?b:h,r,t,w,q,m)}break;case"custom":case"template":this.editorsCache||(this.editorsCache=new Array);var x=a("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(s),y=a.trim(n.datafield).split(" ").join("");y.indexOf(".")!=-1&&(y=y.replace(".",""));var z=this.editorsCache["templateeditor_"+y];if("custom"==n.columntype)var z=this.editorsCache["customeditor_"+y+"_"+b];var w=r,r=this.getcellvaluebykey(b,n.displayfield);if(z){var t=z;t.width(p),t.height(m),t.appendTo(x)}else{var t=a("<div style='border: none;'></div>");t.width(p),t.height(m),z=t,null===r&&(r=""),"custom"!=n.columntype?this.editorsCache["templateeditor_"+y]=t:this.editorsCache["customeditor_"+y+"_"+b]=t,t.appendTo(x),n.createeditor&&n.createeditor(this.treeGrid?b:h,r,t,w,p,m)}n.initeditor&&n.initeditor(this.treeGrid?b:h,r,t,w,p,m),this._editors.push({column:n,editor:t})}}}this.editKey=b,this.beginupdate();var A=this.getrowdisplayindex(g);if(this._raiseEvent("rowBeginEdit",{key:b,index:A,boundIndex:h,row:this.rowsByKey[b]}),d){var g=this.rowsByKey[b],B=null,C=null;g&&(B=g[c.datafield],C=g[c.displayfield]),this._raiseEvent("cellBeginEdit",{value:B,displayValue:C,key:b,index:A,dataField:c.datafield,displayField:c.displayfield,boundIndex:h,row:this.rowsByKey[b]})}this.endupdate(!1)},_toNumber:function(a){a.indexOf||void 0==a||(a=a.toString()),a.indexOf(this.gridlocalization.currencysymbol)>-1&&(a=a.replace(this.gridlocalization.currencysymbol,""));var b=function(a,b,c){var d=a;if(b==c)return a;for(var e=d.indexOf(b);e!=-1;)d=d.replace(b,c),e=d.indexOf(b);return d};a=b(a,this.gridlocalization.thousandsseparator,""),a=a.replace(this.gridlocalization.decimalseparator,"."),a.indexOf(this.gridlocalization.percentsymbol)>-1&&(a=a.replace(this.gridlocalization.percentsymbol,""));for(var c="",d=0;d<a.length;d++){var e=a.substring(d,d+1);"-"===e&&(c+="-"),"."===e&&(c+="."),null!=e.match(/^[0-9]+$/)&&(c+=e)}return a=c,a=a.replace(/ /g,"")},_geteditorvalue:function(b,c,d,e){var f=new String;if(c){if(!b.geteditorvalue)switch(b.columntype){case"textbox":default:if(f=c.val(),""!=b.cellsformat){var g="string",h=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(h){var i="";a.each(h,function(){if(this.name==b.displayfield)return this.type&&(i=this.type),!1}),i&&(g=i)}var j="number"===g||"float"===g||"int"===g||"integer"===g,k="date"===g||"time"===g;if(j||"string"===g&&(b.cellsformat.indexOf("p")!=-1||b.cellsformat.indexOf("c")!=-1||b.cellsformat.indexOf("n")!=-1||b.cellsformat.indexOf("f")!=-1)){if(""===f&&b.nullable)return"";f=this._toNumber(f),f=new Number(f),isNaN(f)&&(f="")}if(k||"string"===g&&(b.cellsformat.indexOf("H")!=-1||b.cellsformat.indexOf("m")!=-1||b.cellsformat.indexOf("M")!=-1||b.cellsformat.indexOf("y")!=-1||b.cellsformat.indexOf("h")!=-1||b.cellsformat.indexOf("d")!=-1)){if(""===f&&b.nullable)return"";var l=f;f=new Date(f),("Invalid Date"==f||null==f||b.cellsformat.length>1)&&(a.jqx.dataFormat&&(f=a.jqx.dataFormat.parsedate(l,b.cellsformat,this.gridlocalization)),"Invalid Date"!=f&&null!=f||(f=""))}}b.displayfield!=b.datafield&&(f={label:f,value:f})}if(b.geteditorvalue){var m=this.getcellvaluebykey(e,b.displayfield);f=b.geteditorvalue(this.treeGrid?e:d,m,c)}}return f},endroweditbykey:function(b,c){var d=this.rowsByKey[b],e=this.getrowindex(d),f=this;if(c!==!0){var g=this._editors,h=!0;if(g){for(var i=this.editKey,j=this._getuirow(i),k=0;k<g.length;k++){var l=g[k].editor,m=g[k].column,n=this._geteditorvalue(m,l,e,i);if(m.validation){l.removeClass(this.toThemeProperty("jqx-grid-validation-label"));var o=m.datafield;try{var p=m.validation({value:n,row:i,datafield:m.datafield,displayfield:m.displayfield,column:m},n),q=this.gridlocalization.validationstring;void 0!=p.message&&(q=p.message);var r="boolean"==typeof p?p:p.result;r||(void 0!=p.showmessage&&1!=p.showmessage||this._showvalidationpopup(j,o,q,l),h=!1)}catch(s){this._showvalidationpopup(j,o,this.gridlocalization.validationstring,l),h=!1}}}if(h){this.dataview._sortHierarchyData=null,this.dataview._sortData=null;for(var k=0;k<g.length;k++){var l=g[k].editor,m=g[k].column,n=this._geteditorvalue(m,l,e,i),t=d[m.displayfield];if(n&&void 0!=n.label?(d[m.displayfield]=n.label,d[m.datafield]=n.value):d[m.displayfield]=n,this.treeGrid){var u=this.treeGrid.getrow(i);u&&(u[m.displayfield]=n)}if(n!=t){if(this.editorsCache){var v="customeditor_"+m.displayfield+"_"+b,w="templateeditor_"+m.displayfield;this.editorsCache[v]&&this.editorsCache[v].detach(),this.editorsCache[w]&&this.editorsCache[w].detach()}this.beginupdate(),this._raiseEvent("cellValueChanged",{value:n,oldValue:t,key:b,index:e,row:d}),this.endupdate(!1)}}}}if(!h)return!1;this.updaterowbykey(this.editKey,d,!1)}if(this.editorsCache)for(var l in this.editorsCache)a(this.editorsCache[l]).detach();this.beginupdate();var x=this.getrowdisplayindex(d);if(this._raiseEvent("rowEndEdit",{key:b,index:x,boundIndex:e,row:this.rowsByKey[b]}),this.editSettings.editSingleCell){var d=this.rowsByKey[b],n=null,y=null;d&&(n=d[this.editColumn.datafield],y=d[this.editColumn.displayfield]),this._raiseEvent("cellEndEdit",{value:n,displayValue:y,key:b,index:x,dataField:this.editColumn.datafield,displayField:this.editColumn.displayfield,boundIndex:e,row:this.rowsByKey[b]})}return this.endupdate(!1),this.editColumn=null,this.editKey=null,this._renderrows(),this._renderhorizontalscroll(),this.host.focus(),setTimeout(function(){f.host.focus()},10),!0},_showvalidationpopup:function(b,c,d,e){if(void 0==d)var d=this.gridlocalization.validationstring;e.addClass(this.toThemeProperty("jqx-grid-validation-label"));var f=a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),g=a("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");f.html(d),g.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),f.addClass(this.toThemeProperty("jqx-grid-validation")),f.addClass(this.toThemeProperty("jqx-rc-all")),f.hide(),g.hide(),f.prependTo(this.table),g.prependTo(this.table);var h=this.hScrollInstance,i=h.value,j=parseInt(i),k=this.getcolumn(c).uielement,l=b;f.css("top",parseInt(l.position().top)+30+"px");var m=parseInt(f.css("top"));g.css("top",m-11),g.removeClass(),g.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var n=!1;m>=this._table.height()&&(g.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),g.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),m=parseInt(l.position().top)-l.outerHeight()-5,m<0&&(m=0,g.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),n=!0),f.css("top",m+"px"),g.css("top",m+f.outerHeight()-9));var o=-j+parseInt(a(k).position().left);g.css("left",j+o+30);var p=f.width();if(p+o>this.host.width()-20){var q=p+o-this.host.width()+40;o-=q}n?f.css("left",j+parseInt(a(k).position().left)-f.outerWidth()):f.css("left",j+o),e.mouseenter(function(){e.hasClass("jqx-grid-validation-label")&&(f.show(),g.show())}),e.mouseleave(function(){f.hide(),g.hide()}),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:f,validationrow:g}},addrow:function(b,c,d,e){if(void 0!=c){this._datachanged=!0,void 0==d&&(d="last");var f=!1,g=this.that;if(null==b){var h=this.dataview.filters&&this.dataview.filters.length>0,i=h?this.source.records.length:this.dataview.totalrecords;if(!this.pageable){this.source._source.totalrecords?this.dataview.totalrecords=this.source._source.totalrecords:this.source._source.totalRecords?this.dataview.totalrecords=this.source._source.totalRecords:0!==this.source.hierarchy.length?this.dataview.totalrecords=this.source.hierarchy.length:this.dataview.totalrecords=this.source.records.length;var i=h?this.source.records.length:this.dataview.totalrecords}if(a.isArray(c)){var j=new Array;a.each(c,function(a,b){var d=g.dataview.getid(g.dataview.source.id,c[a],i+a);j.push(d),g.getcolumn(g.dataview.source.id)&&(c[a][g.dataview.source.id]=d)}),b=j}else b=this.dataview.getid(this.dataview.source.id,c,i),this.getcolumn(this.dataview.source.id)&&(c[this.dataview.source.id]=b)}else a.isArray(c)?a.each(c,function(a,d){var e=b[a];g.getcolumn(g.dataview.source.id)&&(c[a][g.dataview.source.id]=e)}):this.getcolumn(this.dataview.source.id)&&(c[this.dataview.source.id]=b);var k=!!this.treeGrid&&!!this.treeGrid.virtualModeCreateRecords,l=function(b,c,d,f){if(b._loading)throw new Error("jqxDataTable: "+b.loadingerrorthatssage);var g=b.vScrollInstance.value,h=!1;return a.isArray(d)?a.each(d,function(a,d){var g=null;null!=c&&null!=c[a]&&(g=c[a]),this.uid=g,b.rowsByKey[g]=this,c==e&&(e=null),h=b.source.addRecord(this,f,e,k)}):(d.uid=c,b.rowsByKey[c]=d,c==e&&(e=null),h=b.source.addRecord(d,f,e,k)),void 0!=b._updating&&0!=b._updating||b.refresh(),b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata&&(b.source.suspendKO=!0,b.source._source._localdata.push(d),b.source.suspendKO=!1),b.vScrollInstance.setPosition(g),h};if(this.source.addrow){var m=function(a,e){1!=a&&void 0!=a||(void 0!=e&&(b=e),l(g,b,c,d))};try{f=g.treeGrid?this.source.addrow(b,c,d,e,m):this.source.addrow(b,c,d,m),void 0==f&&(f=!0)}catch(n){f=!1}if(0==f)return!1}else l(this,b,c,d);return f}return!1},deleterow:function(a){var b=this._getkey(a);this.deleterowbykey(b)},deleterowbykey:function(b){if(void 0!=b){this._datachanged=!0;var c=!1,d=this.that,e=function(b,c){if(b._loading)throw new Error("jqxDataTable: "+b.loadingerrorthatssage);var d=!1,e=b.vScrollInstance.value;if(a.isArray(c))a.each(c,function(){var a=this;if(b.rowsByKey[a]){if(d=!0,b.rowinfo[a].selected&&b.unselectrowbykey(a,!1),delete b.rowsByKey[a],b.treeGrid&&b.rowinfo[a]){var c=b.rowinfo[a].row.records,e=function(a){for(var c=0;c<a.length;c++){var d=a[c].uid;delete b.rowsByKey[d],delete b.rowinfo[d],a[c].records&&e(a[c].records)}};c&&(e(c),delete b.rowinfo[a])}b.source.deleteRecord(a)}});else{var d=!1;if(b.rowsByKey[c]){if(d=!0,b.rowinfo[c].selected&&b.unselectrowbykey(c,!1),delete b.rowsByKey[c],b.treeGrid&&b.rowinfo[c]){var f=b.rowinfo[c].row.records,g=function(a){for(var c=0;c<a.length;c++){var d=a[c].uid;delete b.rowsByKey[d],delete b.rowinfo[d],a[c].records&&g(a[c].records)}};f&&g(f)}delete b.rowinfo[c],b.source.deleteRecord(c)}}return b.refresh(),b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata&&(b.source.suspendKO=!0,b.source._source._localdata.pop(rowdata),b.source.suspendKO=!1),b.vScrollInstance.setPosition(e),d};if(this.source.deleterow){var f=function(a){1!=a&&void 0!=a||e(d,b)};try{this.source.deleterow(b,f),void 0==c&&(c=!0)}catch(g){c=!1}}else c=e(d,b);return c}return!1},updaterow:function(a,b){var c=this._getkey(a);this.updaterowbykey(c,b)},updaterowbykey:function(b,c,d){if(void 0!=b&&void 0!=c){var e=this.that,f=!1,g=function(b,c,e){if(b._loading)throw new Error("jqxDataTable: "+b.loadingerrorthatssage);var f=!1;if(a.isArray(c))a.each(c,function(a,c){var d=b.rowsByKey[this],g=function(b,c){d?d[this]=e[a]:f=!1};g(this,d),b.treeGrid&&(d=b.treeGrid.getrow(this),g(this,d))});else{var g=b.rowsByKey[c],h=function(a){if(a)for(var c=0;c<b.columns.records.length;c++)a[b.columns.records[c].datafield]=e[b.columns.records[c].datafield],b.groups.length>0&&a.originalRecord&&(a.originalRecord[b.columns.records[c].datafield]=e[b.columns.records[c].datafield]);else f=!1};h(g),b.treeGrid&&(g=b.treeGrid.getrow(c),h(g))}var i=b.vScrollInstance.value;if(void 0!=d&&1!=d||void 0!=b._updating&&0!=b._updating||b._renderrows(),b.showaggregates&&b._updatecolumnsaggregates&&b._updatecolumnsaggregates(),b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata){var g=b.rowsByKey[c],j=b.getrowindex(g),k=b.source._source._localdata()[j];b.source.suspendKO=!0,b.source._source._localdata.replace(k,a.extend({},g)),b.source.suspendKO=!1}return b.vScrollInstance.setPosition(i),f};if(this.source.updaterow){var h=function(a){1!=a&&void 0!=a||g(e,b,c)};try{f=this.source.updaterow(b,c,h),void 0==f&&(f=!0)}catch(i){f=!1}}else f=g(e,b,c);return f}return!1},lockrow:function(a){var b=this._getkey(a);this.lockrowbykey(b)},unlockrow:function(a){var b=this._getkey(a);this.unlockrowbykey(b)},lockrowbykey:function(a){this.rowinfo[a]?this.rowinfo[a].locked=!0:this.rowinfo[a]={locked:!0},this._renderrows()},unlockrowbykey:function(a){this.rowinfo[a]?this.rowinfo[a].locked=!1:this.rowinfo[a]={locked:!1},this._renderrows()},selectrow:function(a){var b=this._getkey(a);this.selectrowbykey(b)},unselectrow:function(a){var b=this._getkey(a);this.unselectrowbykey(b)},selectrowbykey:function(a,b,c){"keyboard"!=b&&"mouse"!=b&&(this._lastSelectedKey=a);var d=c!==!1;this._doSelection(a,!0,d);var e=this.rowsByKey[a],f=this.getrowindex(e),g=this.getrowdisplayindex(e);this._raiseEvent("rowSelect",{key:a,index:g,boundIndex:f,row:this.rowsByKey[a]})},unselectrowbykey:function(a,b){var c=b!==!1;this._doSelection(a,!1,c);var d=this.rowsByKey[a],e=this.getrowindex(d),f=this.getrowdisplayindex(d);this._raiseEvent("rowUnselect",{key:a,index:f,boundIndex:e,row:this.rowsByKey[a]})},getselection:function(){var a=new Array;if(this.rowinfo)for(var b in this.rowinfo){var c=this.rowinfo[b];c.selected&&a.push(c.row)}return a},showdetailsbykey:function(b){if(this.rowdetails){var c=this.rowinfo[b];if(c){c.expanded=!0;var d=a(this._table.children()[1]).children("[data-key="+b+"]"),e=a(this._pinnedTable.children()[1]).children("[data-key="+b+"]");if(d){var f=e.children(),g=a(f[0]);if(this.rtl)var g=a(f[f.length-1]);this.rtl?(g.removeClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),g.addClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),g.removeClass(this.toThemeProperty("jqx-icon-arrow-left")),g.addClass(this.toThemeProperty("jqx-icon-arrow-down"))):(g.removeClass(this.toThemeProperty("jqx-grid-group-collapse")),g.addClass(this.toThemeProperty("jqx-grid-group-expand")),g.removeClass(this.toThemeProperty("jqx-icon-arrow-right")),g.addClass(this.toThemeProperty("jqx-icon-arrow-down"))),d.next().show();var h=e.next();if(h.show(),a.jqx.browser.msie&&a.jqx.browser.version<8&&(d.next().children().show(),e.next().children().show()),!c.initialized){var i=c.detailsHeight,j=this.initrowdetails(b,c.row,a(a(h).children().children().children()[0]),c);c.details=a(h).children().children().children()[0],c.initialized=!0,j!==!1&&c.detailsHeight==i||(j===!1&&(c.expanded=!1,c.nodetails=!0,h.hide()),this._renderrows())}this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var k=this.getrowindex(c.row),l=this.getrowdisplayindex(c.row);this._raiseEvent("rowExpand",{row:c.row,index:l,boundIndex:k,rowKey:b})}}}},hidedetailsbykey:function(b){if(this.rowdetails){var c=this.rowinfo[b];if(c){c.expanded=!1;var d=a(this._table.children()[1]).children("[data-key="+b+"]"),e=a(this._pinnedTable.children()[1]).children("[data-key="+b+"]");if(d){var f=e.children(),g=a(f[0]);if(this.rtl)var g=a(f[f.length-1]);this.rtl?(g.addClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),g.removeClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),g.addClass(this.toThemeProperty("jqx-icon-arrow-left")),g.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))):(g.addClass(this.toThemeProperty("jqx-grid-group-collapse")),g.removeClass(this.toThemeProperty("jqx-grid-group-expand")),g.addClass(this.toThemeProperty("jqx-icon-arrow-right")),g.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))),d.next().hide(),e.next().hide(),a.jqx.browser.msie&&a.jqx.browser.version<8&&(d.next().children().hide(),e.next().children().hide()),this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var h=this.getrowindex(c.row),i=this.getrowdisplayindex(c.row);this._raiseEvent("rowCollapse",{row:c.row,index:i,boundIndex:h,rowKey:b})}}}},_renderhorizontalscroll:function(){var a=this.hScrollInstance,b=a.value;"hidden"===this.hScrollBar.css("visibility")&&(a.value=0,b=0);var c=parseInt(b);if(null!=this.table){var d=this.columnsrow,e=0,f=this.columns.records.length-e,g=this.columns.records,h=0==this.source.records.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(c=a.max-c),h&&!this._haspinned)this.table[0].style.left=-c+"px",d[0].style.marginLeft=-c+"px";else{if(this._haspinned||void 0==this._haspinned){for(var i=0;i<e+f;i++){var j=g[i];if(j.pinned){var k=null;if(this.showaggregates&&this.statusbar[0].cells&&(k=this.statusbar[0].cells[i]),this.filterrow&&this.filterrow[0].cells&&(filtercell=this.filterrow[0].cells[i]),this.rtl){var l=d[0].cells[i];l.style.marginLeft=-parseInt(b)+"px",k&&(k.style.marginLeft=-parseInt(b)+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=-parseInt(b)+"px")}else{var l=d[0].cells[i];l.style.marginLeft=c+"px",k&&(k.style.marginLeft=c+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=c+"px")}}}this._table[0].style.left=-c+"px",d[0].style.marginLeft=-c+"px"}else 0==this._haspinned&&(this.table[0].style.left=-c+"px",d[0].style.marginLeft=-c+"px");this.filterrow&&(this.filterrow[0].style.left=-c+"px")}if(this.showaggregates&&this.aggregates[0].cells){var m=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&(m="hidden"!=this.hScrollBar.css("visibility")?2+parseInt(this.hScrollBar.css("left")):3+parseInt(this.vScrollBar.width())),this.aggregates[0].style.marginLeft=-c+m+"px"}}},_initializeColumns:function(){var c=this.source.datafields;null==c&&this.source._source&&(c=this.source._source.datafields);var d=!!c&&c.length>0;if(this.columns&&this.columns.records)for(var e=0;e<this.columns.records.length;e++)this._removecolumnhandlers(this.columns.records[e]);var f=this,g=new a.jqx.collection(this.element),h=0;if(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,"checkbox"==this.selectionmode){var i=new b(f,this);i.visibleindex=h++,i.width=f.indentwidth,i.checkboxcolumn=!0,i.editable=!1,i.columntype="checkbox",
i.groupable=!1,i.draggable=!1,i.filterable=!1,i.resizable=!1,i.datafield="_checkboxcolumn",g.add(i)}if(this.rowdetails&&!this.treeGrid){var i=new b(f,this);i.visibleindex=h++,i.width=f.indentwidth,i.editable=!1,i.rowdetailscolumn=!0,i.groupable=!1,i.draggable=!1,i.pinned=!0,i.filterable=!1,i.resizable=!1,g.add(i)}var j=new Array;a.each(this.columns,function(a){if(void 0!=f.columns[a]){var c=new b(f,this);if(c.visibleindex=h++,void 0!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(f._haspinned=!0),null==this.datafield)f.source&&f.source._source&&"array"==f.source._source.datatype&&(d||(f.source._source.datafields?f.source._source.datafields.push({name:a.toString()}):(f.source._source.datafields=new Array,f.source._source.datafields.push({name:a.toString()}))),this.datafield=a.toString(),this.displayfield=a.toString(),c.datafield=this.datafield,c.displayfield=this.displayfield);else{if(j[this.datafield])throw new Error("jqxDataTable: Invalid column 'dataField' setting. jqxDataTable's columns should be initialized with unique data fields.");j[this.datafield]=!0}g.add(c)}}),this.rtl&&g.records.reverse(),this.columns=g},addfilter:function(a,b){var c=this.getcolumn(a);c&&this.dataview.addfilter(a,b)},removefilter:function(a){var b=this.getcolumn(a);b&&this.dataview.removefilter(a)},clearfilters:function(a,b){this.dataview.filters=new Array,this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,b!==!1&&this.resetfilter(),a!==!1&&this.applyfilters()},resetfilter:function(){if(this.filterinput&&this.filterinput.val(""),this.filterrow)for(var b=0;b<this.filterrow[0].cells.length;b++){var c=this.filterrow[0].cells[b],d=a(c).find("input:first"),e=a(c).find(".filterconditions"),f=this.columns.records[b];if(f.filterable){d.val("");var g=this.getcolumntypebydatafield(f),h=new a.jqx.filter;switch(g){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=h.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=h.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=h.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=h.getoperatorsbyfiltertype("stringfilter")}e.length>0&&("stringfilter"===filtertype?e.jqxDropDownList({selectedIndex:2}):e.jqxDropDownList({selectedIndex:0}))}}},applyfilters:function(){if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this.serverProcessing?(this.dataview.pagenum=0,this.updatebounddata("filter")):(this.gotopage(0),this.refresh()),arguments&&arguments.length>0){if(this._updateSimpleFilter&&this.filtercolumnsList){var a=this.filtercolumnsList.jqxDropDownList("getSelectedItem").value;this._updateSimpleFilter(a)}this._updateFilterRow&&this._updateFilterRow()}this._raiseEvent("filter",{filters:this.dataview.filters})},sortby:function(a,b){if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this._loading)throw new Error("jqxDataTable: "+this.loadingerrormessage);if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(null==a&&(b=null,a=this.sortcolumn),a){var c=this;"a"==b||"asc"==b||"ascending"==b||1==b?ascending=!0:ascending=!1,null!=b?c.sortdirection={ascending:ascending,descending:!ascending}:c.sortdirection={ascending:!1,descending:!1},null!=b?c.sortcolumn=a:c.sortcolumn=null,c.source.sort&&(c.dataview.sortfield=a,null==b?c.dataview.sortfielddirection="":c.dataview.sortfielddirection=ascending?"asc":"desc",c.source.sort&&!this._loading&&c.source.sort(a,b)),c.dataview.sortby(a,b),c._raiseEvent("sort",{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection})}this.serverProcessing?this.updatebounddata("sort"):this.refresh()},_togglesort:function(a){var b=this;if(!this.disabled&&a.sortable&&b.sortable){var c={sortcolumn:this.sortcolumn,sortdirection:this.sortdirection},d=null;null!=c.sortcolumn&&c.sortcolumn==a.displayfield?(d=c.sortdirection.ascending,d=1!=d&&null):d=!0,b.sortby(a.displayfield,d)}},_renderfilter:function(){var b=this,c=a("<div style='position: relative; margin: 4px;'><input role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>");c.height(22);var d=c.find("input"),e=c.find("div:first");c.addClass(this.toThemeProperty("jqx-rc-all")),c.addClass(this.toThemeProperty("jqx-widget")),c.addClass(this.toThemeProperty("jqx-input-group")),d.addClass(this.toThemeProperty("jqx-input")),d.addClass(this.toThemeProperty("jqx-rc-l")),d.addClass(this.toThemeProperty("jqx-input-group-addon")),d.addClass(this.toThemeProperty("jqx-widget")),d.addClass(this.toThemeProperty("jqx-widget-content")),e.addClass(this.toThemeProperty("jqx-fill-state-normal")),e.addClass(this.toThemeProperty("jqx-rc-r")),e.addClass(this.toThemeProperty("jqx-input-group-addon")),e.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.filter.children().remove(),this.filterbutton=e;for(var f=new Array,g=0;g<b.columns.records.length;g++)b.columns.records[g].datafield&&b.columns.records[g].filterable&&f.push({label:b.columns.records[g].text,value:b.columns.records[g].displayfield});var h=f.length<10,i=a("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filter.append(i);var j=a("<div class='filtercolumns' style='margin: 4px; float: left;'></div>");this.filter.append(j),j.jqxDropDownList&&j.jqxDropDownList({theme:this.theme,autoDropDownHeight:h,rtl:b.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:20,source:f,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=j;var k=function(a){b.filterinput.val("");for(var c=0;c<b.dataview.filters.length;c++){var d=b.dataview.filters[c];d.datafield===a&&b.filterinput.val(d.filter.getfilterat(0).filtervalue)}};b._updateSimpleFilter=k,this.addHandler(j,"select",function(a){var b=a.args.item.value;k(b)}),"simple"===this.filtermode?(this.filtercolumnsList.hide(),i.show(),i.css("margin-top",-this.filter.height()/2)):(this.filtercolumnsList.show(),i.hide());var l=function(){if(!e.hasClass("jqx-fill-state-disabled")){var c=d.val();if(j.jqxDropDownList)var f=j.jqxDropDownList("getSelectedItem");var g=function(c,d,e){var f=new a.jqx.filter,g=b.getcolumntypebydatafield(c),h=b._getfiltertype(g);if("datefilter"==h)var i=f.createfilter(h,d,"EQUAL",null,c.cellsformat,b.gridlocalization);else if("numericfilter"==h||"booleanfilter"==h){"numericfilter"==h&&(","==b.gridlocalization.decimalseparator&&d.indexOf(b.gridlocalization.decimalseparator)>=0&&(d=d.replace(b.gridlocalization.decimalseparator,".")),d.indexOf(b.gridlocalization.currencysymbol)>=0&&(d=d.replace(b.gridlocalization.currencysymbol,"")),d.indexOf(b.gridlocalization.percentagesymbol)>=0&&(d=d.replace(b.gridlocalization.percentagesymbol,"")));var i=f.createfilter(h,d,"EQUAL",null,c.cellsformat,b.gridlocalization)}else var i=f.createfilter(h,d,"CONTAINS");return f.operator=e,f.addfilter(0,i),f};if("simple"!==b.filtermode){if(f){var h=f.value,i=b.getcolumn(h),k=g(i,c,"and");c.length>0?(b.removefilter(h),b.addfilter(h,k),b.applyfilters()):(b.removefilter(h),b.applyfilters()),"advanced"===b.filtermode&&b._updateFilterRow&&b._updateFilterRow(!0)}}else{if(b.clearfilters(!1,!1),c.length>0)for(var l=0;l<b.columns.records.length;l++){var i=b.columns.records[l],k=g(i,c,"or");b.addfilter(i.datafield,k)}b.applyfilters()}0==b.dataview.filters.length?b.filtericon.fadeOut(200):b.filtericon.fadeIn(200)}};if(d.keydown(function(a){if(13===a.keyCode)return l(),a.preventDefault&&a.preventDefault(),!1}),e.click(function(){l()}),this.filterinput=d,this.filter.append(c),"advanced"==this.filtermode){var m=a("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>"+this.gridlocalization.filterstring+"</a>");c.append(m),this.addHandler(m,"click",function(c){var d=function(c){if(b.filterrow)for(var d=0;d<b.filterrow[0].cells.length;d++){var e=b.filterrow[0].cells[d],f=a(e).find("input:first"),g=b.columns.records[d];if(g.filterable){c===!0&&f.val("");for(var h=0;h<b.dataview.filters.length;h++){var i=b.dataview.filters[h];if(i.datafield===g.displayfield){f.val(i.filter.getfilterat(0).filtervalue);break}}}}};b._updateFilterRow=d;var e=function(){b.filtercolumnsList.jqxDropDownList({disabled:!0}),b.filterinput.addClass(b.toThemeProperty("jqx-fill-state-disabled")),b.filterinput.attr("disabled",!0),b.filterbutton.addClass(b.toThemeProperty("jqx-fill-state-disabled"))};return 0===b.filter.find(".filterrow").length?(b._renderadvancedfilter(),e(),d(),b._arrange()):("none"===b.filter.find(".filterrow").css("display")?(e(),b.filter.find(".filterrow").removeClass("filterrow-hidden"),d(),b.filter.find(".filterrow").show()):(b.filtercolumnsList.jqxDropDownList({disabled:!1}),b.filterinput.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),b.filterinput.attr("disabled",!1),b.filterbutton.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),k(b.filtercolumnsList.jqxDropDownList("getSelectedItem").value),b.filter.find(".filterrow").addClass("filterrow-hidden"),b.filter.find(".filterrow").hide()),b._arrange()),!1})}var n=a("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");n.attr("title",b.gridlocalization.filterclearstring),n.addClass(b.toThemeProperty("jqx-icon-close")),c.append(n),n.hide(),b.filtericon=n,n.click(function(){b.clearfilters(),b.filtericon.fadeOut(200)})},_renderadvancedfilter:function(){var b=this,c=function(){b.clearfilters(!1,!1);for(var c=b.filtercolumnsList.jqxDropDownList("getSelectedItem").value,d=(b.filterinput.val(),0);d<b.filterrow[0].cells.length;d++){var e=b.filterrow[0].cells[d],f=a(e).find("input:first"),g=a(e).find(".filterconditions"),h=b.columns.records[d],i="";if(h.filterable){h.displayfield===c&&b.filterinput.val(f.val());var j=b.getcolumntypebydatafield(h),k=new a.jqx.filter;switch(j){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=k.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=k.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=k.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=k.getoperatorsbyfiltertype("stringfilter")}if(0==g.length)i="stringfilter"===filtertype?conditions[2]:conditions[0];else{var l=g.jqxDropDownList("getSelectedItem");i=l?conditions[l.index]:"stringfilter"===filtertype?conditions[2]:conditions[0]}var m=f.val();if(m.length>0){var n=h.displayfield,o=new a.jqx.filter;"numericfilter"==filtertype&&(","==b.gridlocalization.decimalseparator&&m.indexOf(b.gridlocalization.decimalseparator)>=0&&(m=m.replace(b.gridlocalization.decimalseparator,".")),m.indexOf(b.gridlocalization.currencysymbol)>=0&&(m=m.replace(b.gridlocalization.currencysymbol,"")),m.indexOf(b.gridlocalization.percentagesymbol)>=0&&(m=m.replace(b.gridlocalization.percentagesymbol,"")));var k=o.createfilter(filtertype,m,i,null,h.cellsformat,b.gridlocalization);o.addfilter(0,k),m.length>0&&b.addfilter(n,o)}}}b.dataview.filters.length>0?b.applyfilters():b.clearfilters(),0==b.dataview.filters.length?b.filtericon.fadeOut(200):b.filtericon.fadeIn(200)},d=function(){var d=a("<div style='position: relative;' class='filterrow'></div>").appendTo(b.filter);b.filterrow=d,d[0].cells=new Array,d.height(24),d.width(b.table.width());var e=b.filtercolumnsList.jqxDropDownList("getSelectedItem").value,f=b.filterinput.val();a.each(b.columns.records,function(){var g=this,h=a("<div></div>").appendTo(d);if(h.css("position","absolute"),h.css("left",g.uielement[0].style.left),g.pinned&&(h.css("z-index",b.tableZIndex+b.columns.records.length),h.addClass(b.toThemeProperty("jqx-widget-header"))),d[0].cells.push(h[0]),!this.filterable)return!0;var i=a("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(h);i.keydown(function(a){13===a.keyCode&&c()}),g.displayfield===e&&i.val(f),i.addClass(b.toThemeProperty("jqx-input")),i.addClass(b.toThemeProperty("jqx-rc-all")),i.addClass(b.toThemeProperty("jqx-widget")),i.addClass(b.toThemeProperty("jqx-widget-content"));var j=a("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(h);j.append(a("<div style='width: 16px; height: 16px;' class='"+b.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>")),i.focus(function(){b.ensurecolumnvisible(g.displayfield),b.filter[0].scrollLeft=0,b.ensurecolumnvisible(g.displayfield),setTimeout(function(){b.filter[0].scrollLeft=0,b.ensurecolumnvisible(g.displayfield)},10)}),j.click(function(){var c=a("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>");c.insertAfter(j),j.remove();var d=b.getcolumntypebydatafield(g),e=b._getfiltersbytype(d);"string"===d?index=2:index=0,c.jqxDropDownList({theme:b.theme,enableBrowserBoundsDetection:!0,renderMode:"simple",arrowSize:0,selectedIndex:index,rtl:b.rtl,dropDownWidth:230,dropDownHeight:180,width:20,height:20,source:e,selectionRenderer:function(){return"<div style='width: 16px; height: 16px;' class='"+b.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>"}}),b.addHandler(c,"close",function(a){i.focus(),setTimeout(function(){i.focus()},10)}),c.removeAttr("tabindex"),c.find("div").removeAttr("tabindex"),c.jqxDropDownList("open")}),i[0].style.width=g.width-6-22+"px"}),a("<div style='clear: both;'></div>").appendTo(d)};d();var e=a("<div class='filterrow'></div>").appendTo(b.filter),f=a("<input type='button' style='float: left; margin-top: 4px; margin-left: 4px;' value='"+b.gridlocalization.filterapplystring+"'/>").appendTo(e),g=a("<input type='button' style='float: left; margin-top: 4px;  margin-left: 4px;' value='"+b.gridlocalization.filtercancelstring+"'/>").appendTo(e);f.jqxButton({theme:b.theme}),g.jqxButton({theme:b.theme}),g.click(function(){b.filtercolumnsList.jqxDropDownList({disabled:!1}),b.filterinput.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),b.filterinput.attr("disabled",!1),b.filterbutton.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),b.filter.find(".filterrow").addClass("filterrow-hidden"),b.filter.find(".filterrow").hide(),b._arrange()}),f.click(function(){c()}),b._renderhorizontalscroll()},_getfiltertype:function(a){var b="stringfilter";switch(a){case"number":case"int":case"float":case"decimal":b="numericfilter";break;case"boolean":case"bool":b="booleanfilter";break;case"date":case"time":b="datefilter";break;case"string":b="stringfilter"}return b},getcolumntypebydatafield:function(b){var c=this,d="string",e=c.source.datafields||(c.source._source?c.source._source.datafields:null);if(e){var f="";if(a.each(e,function(){if(this.name==b.displayfield)return this.type&&(f=this.type),!1}),f)return f}return d},_getfiltersbytype:function(a){var b=this,c="";switch(a){case"number":case"float":case"int":c=b.gridlocalization.filternumericcomparisonoperators;break;case"date":c=b.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":c=b.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:c=b.gridlocalization.filterstringcomparisonoperators}return c},_getcellvalue:function(a,b){var c=null;return c=b[a.datafield],null!=a.displayfield&&(c=b[a.displayfield]),null==c&&(c=""),c},_renderrows:function(){if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(this.treeGrid)return void this.treeGrid._renderrows();if(!this._loading&&!this._updating){this.rendering&&this.rendering();var b=this,c=0;this.table[0].rows=new Array;var d=this.toTP("jqx-cell")+" "+this.toTP("jqx-widget-content");this.rtl&&(d+=" "+this.toTP("jqx-cell-rtl"));var e=this.columns.records.length,f=a.jqx.browser.msie&&a.jqx.browser.version<8;f&&this.host.attr("hideFocus","true");var g=b.groups.length,h=new Array,i=this.source.records;if(i=this.dataview.evaluate(i),this.dataViewRecords=i,"all"==this.dataview.pagesize||!this.pageable||this.serverProcessing){var j=i;if(this.pageable&&this.serverProcessing&&i.length>this.dataview.pagesize)var j=i.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize)}else var j=i.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize);if(b.groups&&b.groups.length>0){var k=this.pageable?this.dataview.pagesize*this.dataview.pagenum:0,l=b.source.getGroupedRecords(b.groups,"records","label",null,"data",null,"parent",j,k),m=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b.push(d),d.records&&d.records.length>0)for(var e=m(d.records,new Array),f=0;f<e.length;f++)e[f].leaf?b.push(e[f]):b.push(e[f])}return b},h=m.call(b,l,new Array);j=h,this.rowsByKey=new Array;for(var n=0;n<j.length;n++){var o=j[n];this.rowsByKey[o.uid]=o}}var h=j;this.renderedRecords=h;var p=h.length,q=this.tableZIndex,r=0,s=0;if(f)for(var t=0;t<e;t++){var u=this.columns.records[t],v=u.width;v<u.minwidth&&(v=u.minwidth),v>u.maxwidth&&(v=u.maxwidth);var w=a('<table><tr><td role="gridcell" style="max-width: '+v+"px; width:"+v+'px;" class="'+d+'"></td></tr></table>');a(document.body).append(w);var x=w.find("td");r=1+parseInt(x.css("padding-left"))+parseInt(x.css("padding-right")),w.remove();break}for(var y=this.rtl?" "+this.toTP("jqx-grid-table-rtl"):"",z="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+y+"' id='table"+this.element.id+"'><colgroup>",A="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+y+"' id='pinnedtable"+this.element.id+"'><colgroup>",B=0,C=e,t=0;t<e;t++){var u=this.columns.records[t];if(u.hidden)B++,C--;else{var v=u.width;if(v<u.minwidth&&(v=u.minwidth),v>u.maxwidth&&(v=u.maxwidth),v-=r,v<0&&(v=0),f){var D=v;if(t==B&&D++,u.rowdetailscolumn){var D=D+4;A+="<col style='max-width: "+D+"px; width: "+D+"px;'>",z+="<col style='max-width: "+D+"px; width: "+D+"px;'>"}else A+="<col style='max-width: "+D+"px; width: "+D+"px;'>",z+="<col style='max-width: "+D+"px; width: "+D+"px;'>"}else A+="<col style='max-width: "+v+"px; width: "+v+"px;'>",z+="<col style='max-width: "+v+"px; width: "+v+"px;'>";s+=v}}z+="</colgroup>",A+="</colgroup>",this._hiddencolumns=!1;var E=!1;if(this.rowdetails&&this._pinnedTable&&(this._pinnedTable.find("[data-role=details]").detach(),this._table.find("[data-role=details]").detach()),0===p){var F='<tr role="row">',G=this.host.height();if(this.pageable&&(G-=this.pagerheight,"both"===this.pagerposition&&(G-=this.pagerheight)),G-=this.columnsheight,this.filterable){var H=this.filter.find(".filterrow"),I=this.filter.find(".filterrow-hidden"),J=1;I.length>0&&(J=0),G-=this.filterheight+this.filterheight*H.length*J}this.showstatusbar&&(G-=this.statusbarheight),this.showaggregates&&(G-=this.aggregatesheight),G<25&&(G=25),"hidden"!=this.hScrollBar[0].style.visibility&&(G-=this.hScrollBar.outerHeight()),("auto"===this.height||null===this.height||this.autoheight)&&(G=300);var w='<td colspan="'+this.columns.records.length+'" role="gridcell" style="border: none; min-height: '+G+"px; height: "+G+"px; max-width:"+s+"px; width:"+s+"px;",d=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");d+=" "+this.toTP("jqx-center-align"),w+='" class="'+d+'">',w+=this.gridlocalization.emptydatastring,w+="</td>",F+=w,z+=F,A+=F,this.table[0].style.width=s+2+"px",c=s}for(var K=this.getRows(),n=0;n<h.length;n++){var o=h[n],L=o.uid;void 0===o.uid&&(o.uid=this.dataview.generatekey());var F='<tr data-key="'+L+'" role="row" id="row'+n+this.element.id+'">',M='<tr data-key="'+L+'" role="row" id="row'+n+this.element.id+'">';if(g>0&&o.level<g)var F='<tr data-role="row-group" data-key="'+L+'" role="row" id="row'+n+this.element.id+'">',M='<tr data-role="row-group" data-key="'+L+'" role="row" id="row'+n+this.element.id+'">';for(var N=0,O=0,t=0;t<e;t++){var P=this.columns.records[t];(P.pinned||this.rtl&&this.columns.records[e-1].pinned)&&(E=!0);var v=P.width;v<P.minwidth&&(v=P.minwidth),v>P.maxwidth&&(v=P.maxwidth),v-=r,v<0&&(v=0);var d=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");P.pinned&&(d+=" "+this.toTP("jqx-grid-cell-pinned")),this.sortcolumn===P.displayfield&&(d+=" "+this.toTP("jqx-grid-cell-sort")),this.altrows&&n%2!=0&&(d+=" "+this.toTP("jqx-grid-cell-alt")),this.rtl&&(d+=" "+this.toTP("jqx-cell-rtl"));var Q="";if(g>0&&o.level<g)if(f)d+=" "+this.toTP("jqx-grid-cell-pinned");else{d+=" "+this.toTP("jqx-grid-cell-pinned"),Q+=' colspan="'+e+'"';for(var D=0,R=0;R<e;R++){var S=b.columns.records[R],T=S.width;T<S.minwidth&&(v=S.minwidth),T>S.maxwidth&&(v=S.maxwidth),T-=r,T<0&&(T=0),S.hidden||(D+=T)}v=D}var w='<td role="gridcell" '+Q+' style="max-width:'+v+"px; width:"+v+"px;",U='<td role="gridcell" '+Q+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+v+"px; width:"+v+"px;";t==e-1&&1==e&&(w+="border-right-color: transparent;",U+="border-right-color: transparent;");var V=!1;g>0&&o.level<g&&(V=!0),V?this.rtl&&(d+=" "+this.toTP("jqx-right-align")):"left"!=P.cellsalign&&(d+="right"===P.cellsalign?" "+this.toTP("jqx-right-align"):" "+this.toTP("jqx-center-align")),this.rowinfo[o.uid]&&(this.rowinfo[o.uid].selected&&!P.rowdetailscolumn&&this.editKey!==o.uid&&"none"!==this.selectionmode&&(d+=" "+this.toTP("jqx-grid-cell-selected"),d+=" "+this.toTP("jqx-fill-state-pressed")),this.rowinfo[o.uid].locked&&(d+=" "+this.toTP("jqx-grid-cell-locked"))),P.hidden?V||(w+="display: none;",U+="display: none;",this._hiddencolumns=!0):(N+=r+v,0==O&&(w+="border-left-width: 0px;",U+="border-left-width: 0px;"),O++),g>0&&f&&V&&t>=g&&(w+="font-size: 1px; border-color: transparent;  color: transparent;",U+="font-size: 1px; border-color: transparent; color: transparent;"),P.pinned&&(w+="pointer-events: auto;",U+="pointer-events: auto;"),!V&&P.rowdetailscolumn&&(this.rowinfo[o.uid]?this.rowinfo[o.uid].nodetails||(this.rowinfo[o.uid].expanded?(d+=this.rtl?" "+this.toTP("jqx-grid-group-expand-rtl"):" "+this.toTP("jqx-grid-group-expand"),d+=" "+this.toTP("jqx-icon-arrow-down")):this.rtl?(d+=" "+this.toTP("jqx-grid-group-collapse-rtl"),d+=" "+this.toTP("jqx-icon-arrow-left")):(d+=" "+this.toTP("jqx-grid-group-collapse"),d+=" "+this.toTP("jqx-icon-arrow-right"))):this.rtl?(d+=" "+this.toTP("jqx-grid-group-collapse-rtl"),d+=" "+this.toTP("jqx-icon-arrow-left")):(d+=" "+this.toTP("jqx-grid-group-collapse"),d+=" "+this.toTP("jqx-icon-arrow-right"))),this.autorowheight||(d+=" "+this.toTP("jqx-grid-cell-nowrap "));var W=b._getcellvalue(P,o);if(g>0&&o.level<g&&(W=o.label),""!=P.cellsformat&&a.jqx.dataFormat&&(a.jqx.dataFormat.isDate(W)?W=a.jqx.dataFormat.formatdate(W,P.cellsformat,b.gridlocalization):(a.jqx.dataFormat.isNumber(W)||!isNaN(parseFloat(W))&&isFinite(W))&&(W=a.jqx.dataFormat.formatnumber(W,P.cellsformat,b.gridlocalization))),V)this.groupsrenderer&&(W=this.groupsrenderer(W,o,o.level));else{if(""!=P.cellclassname&&P.cellclassname)if("string"==typeof P.cellclassname)d+=" "+P.cellclassname;else{var X=P.cellclassname(n,P.datafield,W,o);X&&(d+=" "+X)}if(""!=P.cellsrenderer&&P.cellsrenderer){var Y=K.indexOf(o);W=P.cellsrenderer(Y,P.datafield,W,o)}}if(w+='" class="'+d+'">',w+=W,w+="</td>",U+='" class="'+d+'">',U+=W,U+="</td>",P.pinned?(M+=w,F+=w):(F+=w,E&&(M+=U)),g>0&&!f&&o.level<g)break}if(0==c&&(this.table[0].style.width=N+2+"px",c=N),F+="</tr>",M+="</tr>",z+=F,A+=M,this.rowinfo[o.uid]||(this.rowinfo[o.uid]={group:V,row:o,details:null,detailsHeight:200,initialized:!1,expanded:!1}),this.serverProcessing&&(this.rowinfo[o.uid].row=o),this.rowdetails){var Z=this.rowinfo[o.uid].detailsHeight;if(this.rowinfo[o.uid])if(this.rowinfo[o.uid].expanded)var $='<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+Z+"px; max-height: "+Z+"px; height: "+Z+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var $='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+Z+"px; max-height: "+Z+"px; height: "+Z+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var $='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+Z+"px; max-height: "+Z+"px; height: "+Z+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';var d=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");d+=" "+this.toTP("jqx-details"),d+=" "+this.toTP("jqx-reset"),$+='" class="'+d+'"><div style="pointer-events: auto; overflow: hidden; min-height: '+Z+"px; max-height: "+Z+"px; height: "+Z+'px;"><div data-role="details"></div></div></td></tr>',z+=$,A+=$}}if(z+="</table>",A+="</table>",E){b.WinJS?MSApp.execUnsafeLocalFunction(function(){b.table.html(A+z)}):b.table[0].innerHTML=A+z;var _=this.table.find("#table"+this.element.id),aa=this.table.find("#pinnedtable"+this.element.id);if(aa.css("float","left"),aa.css("pointer-events","none"),_.css("float","left"),aa[0].style.position="absolute",_[0].style.position="relative",_[0].style.zIndex=q-10,aa[0].style.zIndex=q+10,this._table=_,this._table[0].style.left="0px",this._pinnedTable=aa,this._pinnedTable[0].style.left="0px",this._pinnedTable[0].style.width=c+"px",this._table[0].style.width=c+"px",this.rtl&&c>parseInt(this.element.style.width)&&this._haspinned&&(this._pinnedTable[0].style.left=3-c+parseInt(this.element.style.width)+"px"),this.rowdetails)for(var n=0;n<p;n++){var o=h[n],L=o.uid;if(this.rowinfo[L].details){var ba=a(this._table.children()[1]).children("[data-key="+L+"]"),ca=a(this._pinnedTable.children()[1]).children("[data-key="+L+"]");if(ba){var da=ca.next(),ea=a(a(da).children().children());ea.children().detach(),ea.append(this.rowinfo[o.uid].details)}}}}else{b.WinJS?MSApp.execUnsafeLocalFunction(function(){b.table.html(z)}):b.table[0].innerHTML=z;var R=this.table.find("#table"+this.element.id);this._table=R,a.jqx.browser.msie&&a.jqx.browser.version<10&&(this._table[0].style.width=c+"px"),0===p&&(this._table[0].style.width=2+c+"px")}0===p&&(this._table[0].style.tableLayout="auto",this._pinnedTable&&(this._pinnedTable[0].style.tableLayout="auto")),this.rendered&&this.rendered()}},getcolumnindex:function(a){var b=this.getcolumn(a),c=this.columns.records.indexOf(b);return c},setcolumnindex:function(b,c,d){var e=this.getcolumn(b);if(!(e.pinned||e.hidden||e.checkboxcolumn||e.grouped)){var f=this.columns.records.indexOf(e);this.columns.records.splice(f,1),this.columns.records.splice(c,0,e);var g=0,h=this.headerZIndex;this.columnsrow.children().detach();var i=this.toThemeProperty("jqx-grid-cell");i+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),i+=" "+this.toThemeProperty("jqx-item"),this.filterrow&&(a(this.filterrow.children()[0]).children().detach(),this.filterrow[0].cells=[]);var j=this,k=null;if(void 0!=j.filterrow)var k=a(j.filterrow.children()[0]);this.columnsrow[0].cells=[];var l=!1;if(a.each(this.columns.records,function(b,c){var d=this.uielement;j.columnsrow.append(d),j.rtl?d.css("z-index",h++):d.css("z-index",h--);var e=this.width;if(d.css("left",g),j.columnsrow[0].cells[j.columnsrow[0].cells.length]=d[0],j.filterrow){var f=a('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+i+'"></div>');k.append(f),f.css("left",g),f.css("z-index",h+1),f.width(this.width),f[0].left=g,f.append(this._filterwidget),j.filterrow[0].cells[j.filterrow[0].cells.length]=f[0]}this.hidden&&(l=!0),this.hidden&&this.hideable||(g+=e)}),this.groupable){var m=this.groups.length;m>0&&f-m>=0&&(f-=m,c-=m)}this.rowdetails&&f-1>=0&&(f--,c--),"checkbox"==this.selectionmode&&f-1>=0&&(f--,c--);var e=this._columns[f];this._columns.splice(f,1),this._columns.splice(c,0,e),this.resize(),this._rendercolumngroups(),this._raiseEvent("columnReordered",{dataField:e.datafield,oldIndex:f,newIndex:c})}},_pinnedColumnsLength:function(){var b=0;return a.each(this.columns.records,function(){this.pinned&&b++,this.grouped&&b++}),this.rowdetails&&b++,"checkbox"==this.selectionmode&&b++,b},_handlecolumnsreorder:function(){var b=this,c=-1,d=!1;if(b.columnsreorder){var e="mousemove.reorder"+this.element.id,f="mousedown.reorder"+this.element.id,g="mouseup.reorder"+this.element.id,h=!1;this.isTouchDevice()&&this.touchmode!==!0&&(h=!0,e=a.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,f=a.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,g=a.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(a(document),e),this.addHandler(a(document),e,function(a){if(b.resizing)return!0;if(null!=b.reordercolumn){var e=parseInt(a.pageX),f=parseInt(a.pageY);if(h){var g=b.getTouches(a),i=g[0];void 0!=i&&(e=parseInt(i.pageX),f=parseInt(i.pageY))}var j=b.host.coord(),k=parseInt(j.left),l=parseInt(j.top);void 0!=b.dragmousedownoffset&&null!=b.dragmousedownoffset||(b.dragmousedownoffset={left:0,top:0});var m=parseInt(e)-parseInt(b.dragmousedownoffset.left),n=parseInt(f)-parseInt(b.dragmousedownoffset.top);if(b.reordercolumn.css({left:m+"px",top:n+"px"}),d=!1,e>=k&&e<=k+b.host.width()&&f>=l&&f<=l+b.host.height()&&(d=!0),c=-1,d){b.reordercolumnicon.removeClass(b.toThemeProperty("jqx-grid-dragcancel-icon")),b.reordercolumnicon.addClass(b.toThemeProperty("jqx-grid-drag-icon"));var o=b.columnsheader.coord(),p=o.top+b.columnsheader.height();null!=b.columnsdropline&&(f>=o.top&&f<=p?c=b._handlereordercolumnsdroplines(e):b.columnsdropline.fadeOut("slow"))}else null!=b.columnsdropline&&b.columnsdropline.fadeOut("slow"),b.reordercolumnicon.removeClass(b.toThemeProperty("jqx-grid-drag-icon")),b.reordercolumnicon.addClass(b.toThemeProperty("jqx-grid-dragcancel-icon"));if(a.preventDefault&&(a.preventDefault(),a.stopPropagation()),h)return a.preventDefault(),a.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(a(document),f),this.addHandler(a(document),f,function(c){if(b.resizing)return!0;b.columnsbounds=new Array;var d=b.host.coord().left,e=b.host.coord().top;b.showtoolbar&&(e+=b.toolbarheight);var f=0;a.each(b.columns.records,function(c){var g=this;if(g.hidden)return b.columnsbounds[b.columnsbounds.length]={top:e,column:g,left:d,width:0,height:2+b.rowsheight},!0;0==f&&(d=b.rtl?parseInt(b.host.coord().left)-b.hScrollInstance.max+b.hScrollInstance.value:parseInt(b.host.coord().left)-b.hScrollInstance.value),f++;var h=2+b.columnsheight;b.columnshierarchy&&(e=a(g.uielement).coord().top,h=a(g.uielement).height()),b.columnsbounds[b.columnsbounds.length]={top:e,column:g,left:d,width:g.width,height:h},d+=g.width})}),this.removeHandler(a(document),g),this.addHandler(a(document),g,function(e){if(b.resizing)return!0;b.__drag=!1,a(document.body).removeClass("jqx-disableselect");var f=parseInt(e.pageX),g=parseInt(e.pageY);if(h){var i=b.getTouches(e),j=i[0];f=parseInt(j.pageX),g=parseInt(j.pageY)}var k=b.host.coord(),l=(parseInt(k.left),parseInt(k.top));if(b.showtoolbar&&(l+=b.toolbarheight),b.columndragstarted=!1,b.dragmousedown=null,null!=b.reordercolumn){var m=a.data(b.reordercolumn[0],"reorderrecord"),n=b.columns.records.indexOf(b.getcolumn(m));b.reordercolumn.remove(),b.reordercolumn=null;var o=0;if(o+=b._pinnedColumnsLength(),null!=m){if(d&&c!=-1){var p=c.index;if(p>=o){var q=b.columns.records[p];if(void 0!=q){var r=b.columns.records.indexOf(b.getcolumn(q.datafield));if(null==q.datafield)var r=b.columns.records.indexOf(b.getcolumnbytext(q.text));if(b.columngroups){var s=q;if(n<r&&"before"==c.position&&(s=b.columns.records[r-1]),
s.columngroup!=b.getcolumn(m).columngroup)return void(null!=b.columnsdropline&&(b.columnsdropline.remove(),b.columnsdropline=null))}n<r?"before"==c.position?b.setcolumnindex(m,r-1):b.setcolumnindex(m,r):n>r&&b.setcolumnindex(m,r)}}}null!=b.columnsdropline&&(b.columnsdropline.remove(),b.columnsdropline=null)}}})}},getcolumnbytext:function(b){var c=null;return this.columns.records&&a.each(this.columns.records,function(){if(this.text==b)return c=this,!1}),c},_handlereordercolumnsdroplines:function(b){var c=this,d=-1,e=c._pinnedColumnsLength(),f=parseInt(c.host.coord().left),g=f+c.host.width(),h="hidden"!=c.vScrollBar.css("visibility")?19:0;return c.rtl||(h=0),a.each(c.columnsbounds,function(a){if(a>=e){if(0==this.width)return!0;if(b<=this.left+this.width/2)return b>g?(c.columnsdropline.fadeOut(),!1):(c.columnsdropline.css("left",h+parseInt(this.left)+"px"),c.columnsdropline.css("top",parseInt(this.top)+"px"),c.columnsdropline.height(this.height),c.columnsdropline.fadeIn("slow"),d={index:a,position:"before"},!1);if(b>=this.left+this.width/2){if(this.left+this.width>g)return c.columnsdropline.fadeOut(),!1;c.columnsdropline.css("left",h+1+this.left+this.width),c.columnsdropline.css("top",this.top),c.columnsdropline.height(this.height),c.columnsdropline.fadeIn("slow"),d={index:a,position:"after"}}}}),d},_createreordercolumn:function(b,c,d){var e=this,f=c;e.reordercolumn&&e.reordercolumn.remove(),e.columnsdropline&&e.columnsdropline.remove(),e.reordercolumn=a("<div></div>");var g=b.clone();e.reordercolumn.css("z-index",999999),g.css("border-width","1px"),g.css("opacity","0.4");var h=a(g.find("."+e.toThemeProperty("jqx-grid-column-menubutton")));h.length>0&&h.css("display","none");var i=a(g.find(".jqx-icon-close"));i.length>0&&i.css("display","none"),e.reordercolumnicon=a('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),e.reordercolumnicon.addClass(e.toThemeProperty("jqx-grid-drag-icon")),e.reordercolumn.css("float","left"),e.reordercolumn.css("position","absolute");e.host.coord();g.width(b.width()+16),e.reordercolumn.append(g),e.reordercolumn.height(b.height()),e.reordercolumn.width(g.width()),e.reordercolumn.append(e.reordercolumnicon),a(document.body).append(e.reordercolumn),g.css("margin-left",0),g.css("left",0),g.css("top",0),e.reordercolumn.css("left",f.left+e.dragmousedown.left),e.reordercolumn.css("top",f.top+e.dragmousedown.top),void 0!=d&&d&&(e.columnsdropline=a('<div style="z-index: 9999; display: none; position: absolute;"></div>'),e.columnsdropline.width(2),e.columnsdropline.addClass(e.toThemeProperty("jqx-grid-group-drag-line")),a(document.body).append(e.columnsdropline))},_handlecolumnsdragreorder:function(b,c){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var d,e=this,f=!1;this.isTouchDevice()&&this.touchmode!==!0&&(f=!0);var g="mousedown.drag",d="mousemove.drag";f?(g=a.jqx.mobile.getTouchEventName("touchstart")+".drag",d=a.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(c,"dragstart",function(a){return!1}),this.addHandler(c,g,function(c){if(0==b.draggable)return!0;if(e.resizing)return!0;e.__drag=!0;var d=c.pageX,g=c.pageY;if(f){var h=e.getTouches(c),i=h[0];d=i.pageX,g=i.pageY}e.dragmousedown={left:d,top:g};var j=a(c.target).coord();return e.dragmousedownoffset={left:parseInt(d)-parseInt(j.left),top:parseInt(g-j.top)},c.preventDefault&&c.preventDefault(),!0}),this.addHandler(c,d,function(g){if(!b.draggable)return!0;if(void 0==b.datafield)return!0;if(b.pinned)return!0;if(e.resizing)return!0;if(e.dragmousedown){var h=g.pageX,i=g.pageY;if(f){var j=e.getTouches(g),k=j[0];void 0!=k&&(h=k.pageX,i=k.pageY)}if(d={left:h,top:i},!e.columndragstarted&&null==e.reordercolumn){var l=Math.abs(d.left-e.dragmousedown.left),m=Math.abs(d.top-e.dragmousedown.top);(l>3||m>3)&&(e._createreordercolumn(c,d,!0),a(document.body).addClass("jqx-disableselect"),a.data(e.reordercolumn[0],"reorderrecord",b.datafield))}}})},_handlecolumnsresize:function(){var b=this;if(this.columnsresize){var c=!1;b.isTouchDevice()&&(c=!0);var d="mousemove.resize"+this.element.id,e="mousedown.resize"+this.element.id,f="mouseup.resize"+this.element.id;if(c)var d=a.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,e=a.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,f=a.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(a(document),d),this.addHandler(a(document),d,function(d){if(null!=b.resizablecolumn&&!b.disabled&&b.resizing&&null!=b.resizeline){var e=(b.resizablecolumn.columnelement,b.host.coord()),f=parseInt(b.resizestartline.coord().left),g=f-b._startcolumnwidth,h=b.resizablecolumn.column.minwidth;h="auto"==h?0:parseInt(h);var i=b.resizablecolumn.column.maxwidth;i="auto"==i?0:parseInt(i);var j=d.pageX;if(c){var k=a.jqx.mobile.getTouches(d),l=k[0];j=l.pageX}g+=h;var m=i>0?f+i:0,n=0==i||b._startcolumnwidth+j-f<i;if(b.rtl)var n=!0;if(n)if(b.rtl){if(j>=e.left&&j<=e.left+b.host.width()&&(b.resizeline.css("left",j),c))return!1}else if(j>=e.left&&j>=g&&(0!=m&&d.pageX<m?b.resizeline.css("left",j):0==m&&b.resizeline.css("left",j),c))return!1}if(!c&&null!=b.resizablecolumn)return!1}),this.removeHandler(a(document),e),this.addHandler(a(document),e,function(c){if(null!=b.resizablecolumn&&!b.disabled){var d=b.resizablecolumn.columnelement;if(d.coord().top+d.height()+5<c.pageY)return void(b.resizablecolumn=null);if(d.coord().top-5>c.pageY)return void(b.resizablecolumn=null);b._startcolumnwidth=b.resizablecolumn.column.width,b.resizablecolumn.column._width=null,a(document.body).addClass("jqx-disableselect"),a(document.body).addClass("jqx-position-reset"),b._mouseDownResize=new Date,b.resizing=!0,b._resizecolumn=b.resizablecolumn.column,b.resizeline=b.resizeline||a('<div style="position: absolute;"></div>'),b.resizestartline=b.resizestartline||a('<div style="position: absolute;"></div>'),b.resizebackground=b.resizebackground||a('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),b.resizebackground.css("opacity",.01),b.resizebackground.css("cursor","col-resize"),b.resizeline.css("cursor","col-resize"),b.resizestartline.css("cursor","col-resize"),b.resizeline.addClass(b.toThemeProperty("jqx-grid-column-resizeline")),b.resizestartline.addClass(b.toThemeProperty("jqx-grid-column-resizestartline")),a(document.body).append(b.resizeline),a(document.body).append(b.resizestartline),a(document.body).append(b.resizebackground);var e=b.resizablecolumn.columnelement.coord();b.resizebackground.css("left",b.host.coord().left),b.resizebackground.css("top",b.host.coord().top),b.resizebackground.width(b.host.width()),b.resizebackground.height(b.host.height()),b.resizebackground.css("z-index",999999999);var f=function(a){b.rtl?a.css("left",parseInt(e.left)):a.css("left",parseInt(e.left)+b._startcolumnwidth);var c=0,d=b.showtoolbar?b.toolbarheight:0;c+=d;var f=b.showstatusbar?b.statusbarheight:0;c+=f;var g=b.showaggregates?b.aggregatesheight:0;c+=g,b.pageable&&"bottom"!=b.pagerposition&&(c+=b.pagerheight);var h=0;b.pageable&&"top"!=b.pagerposition&&(h=b.pagerheight);var i="hidden"!=b.hScrollBar.css("visibility")?b.scrollbarsize:0;a.css("top",parseInt(e.top)),a.css("z-index",9999999999),b.columngroups?a.height(b.host.height()+b.resizablecolumn.columnelement.height()-h-c-i-b.columngroupslevel*b.columnsheight):a.height(b.host.height()-h-c-i),a.show("fast")};f(b.resizeline),f(b.resizestartline),b.dragmousedown=null}});var g=function(){if(a(document.body).removeClass("jqx-disableselect"),a(document.body).removeClass("jqx-position-reset"),b.resizing){b._mouseUpResize=new Date;var c=b._mouseUpResize-b._mouseDownResize;if(c<200)return b.resizing=!1,void(null!=b._resizecolumn&&null!=b.resizeline&&"block"==b.resizeline.css("display")&&(b._resizecolumn=null,b.resizeline.hide(),b.resizestartline.hide(),b.resizebackground.remove()));if(b.resizing=!1,!b.disabled){var d=b.host.width();if("hidden"!=b.vScrollBar[0].style.visibility&&(d-=20),d<0&&(d=0),null!=b._resizecolumn&&null!=b.resizeline&&"block"==b.resizeline.css("display")){var e=parseInt(b.resizeline.css("left")),f=parseInt(b.resizestartline.css("left")),g=b._startcolumnwidth+e-f;if(b.rtl)var g=b._startcolumnwidth-e+f;var h=b._resizecolumn.width;b._resizecolumn.width=g,void 0!=b._resizecolumn._percentagewidth&&(b._resizecolumn._percentagewidth=g/d*100);for(var i=0;i<b._columns.length;i++)if(b._columns[i].datafield===b._resizecolumn.datafield){b._columns[i].width=b._resizecolumn.width;break}var j=(b.hScrollBar[0].style.visibility,b._resizecolumn.displayfield);b._updatecolumnwidths(),b.refresh(),b._resizecolumn=null,b.resizeline.hide(),b.resizestartline.hide(),b.resizebackground.remove(),b.resizablecolumn=null,b._raiseEvent("columnResized",{dataField:j,oldWidth:h,newWidth:g})}else b.resizablecolumn=null}}};try{if(""!=document.referrer||window.frameElement){var h=null;if(null!=window.top&&window.top!=window.that&&window.parent&&document.referrer&&(h=document.referrer),h&&h.indexOf(document.location.host)!=-1){var i=function(a){g()};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",i,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",i)}}}catch(j){}this.removeHandler(a(document),f),this.addHandler(a(document),f,function(c){var d=a.data(document.body,"contextmenu"+b.element.id);return!(null==d||!b.autoshowcolumnsmenubutton)||void g()})}},_updatecolumnwidths:function(){var b=this.host.width(),c=b;"hidden"!==this.vScrollBar.css("visibility")&&(b-=parseInt(this.scrollbarsize)+6,c=b);var d="";if(void 0!=this.columns&&void 0!=this.columns.records){var e=this,f=!1;a.each(this.columns.records,function(a,f){if(!this.hidden)if(this.width.toString().indexOf("%")!=-1||void 0!=this._percentagewidth){var f=0;"hidden"==e.vScrollBar[0].style.visibility?0:e.scrollbarsize+5;f=parseFloat(this.width)*c/100,void 0!=this._percentagewidth&&(f=parseFloat(this._percentagewidth)*c/100),f<this.minwidth&&"auto"!=this.minwidth&&(f=this.minwidth),f>this.maxwidth&&"auto"!=this.maxwidth&&(f=this.maxwidth),b-=Math.round(f)}else"auto"==this.width||this._width?d+=this.text:b-=this.width});var g=this.columnsheader.find("#columntable"+this.element.id);if(0!=g.length){var h=0,i=g.find(".jqx-grid-column-header"),j=0;a.each(this.columns.records,function(g,k){var l=a(i[g]),m=!1,n=this.width,o=this.width;if(this.width.toString().indexOf("%")==-1&&void 0==this._percentagewidth||(n=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*c/100:parseFloat(this.width)*c/100,n=Math.round(n),m=!0),"auto"==this.width||this._width||m)if(m)n<this.minwidth&&"auto"!=this.minwidth&&(n=this.minwidth,this.width=n),n>this.maxwidth&&"auto"!=this.maxwidth&&(n=this.maxwidth,this.width=n),parseInt(l[0].style.width)!=n&&(l.width(n),this.width=n);else{var p=Math.floor(b*(this.text.length/d.length));isNaN(p)&&(p=this.minwidth);var q=b*(this.text.length/d.length)-p;h+=q,h>=1&&(h-=1,p++),h>=.5&&g==e.columns.records.length-1&&p++,p<0&&($element=a("<span>"+this.text+"</span>"),a(document.body).append($element),p=10+$element.width(),$element.remove()),p<this.minwidth&&(p=this.minwidth),p>this.maxwidth&&(p=this.maxwidth),this._width="auto",this.width=p,l.width(this.width)}else parseInt(l[0].style.width)!=this.width&&l.width(this.width);parseInt(l[0].style.left)!=j&&l.css("left",j),this.hidden||(j+=this.width),this._requirewidthupdate=!0,o!==this.width&&(f=!0)}),this.columnsheader.width(2+j),g.width(this.columnsheader.width()),this._resizecolumngroups(),f&&this._renderrows(),this.showaggregates&&this._refreshcolumnsaggregates()}}},_rendercolumnheaders:function(){var b=this;if(!this._updating){this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var c=a('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');c[0].cells=new Array;var d=0,e="",f=this.host.width(),g=f,h=new Array,i=new Array;if(a.each(this.columns.records,function(a,c){if(!this.hidden)if("auto"==this.width||this._width)e+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)f-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)f-=this.maxwidth;else if(this.width.toString().indexOf("%")!=-1){var c=0;c=parseFloat(this.width)*g/100,c<this.minwidth&&"auto"!=this.minwidth&&(c=this.minwidth),c>this.maxwidth&&"auto"!=this.maxwidth&&(c=this.maxwidth),f-=c}else"string"==typeof this.width&&(this.width=parseInt(this.width)),f-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(b._haspinned&&(this.pinned=!0),h[h.length]=this):i[i.length]=this}),this.rtl){var j=0;h.reverse();for(var k=this.columns.records.length-1;k>=this.columns.records.length-h.length;k--)this.columns.replace(k,h[j++]);for(var l=0;l<i.length;l++)this.columns.replace(l,i[l])}else{for(var k=0;k<h.length;k++)this.columns.replace(k,h[k]);for(var l=0;l<i.length;l++)this.columns.replace(h.length+l,i[l])}var m=this.headerZIndex,n=b.columnsheight,o=function(a,c){var d=b.columngroupslevel*b.columnsheight;return d-=c.level*b.columnsheight},p=0;a.each(this.columns.records,function(h,i){this.height=b.columnsheight,b.columngroups&&b.columngroups.length&&(this.height=o(this.datafield,this),n=this.height);var j=b.toTP("jqx-grid-column-header")+" "+b.toTP("jqx-widget-header");b.rtl&&(j+=" "+b.toTP("jqx-grid-column-header-rtl")),b.enablebrowserselection||(j+=" "+b.toTP("jqx-disableselect"));var k=self.rtl?150+m+1:150+m-1,l=b.rtl?m++:m--,q=a('<div role="columnheader" style="z-index: '+l+';position: absolute; height: 100%;" class="'+j+'"><div style="height: 100%; width: 100%;"></div></div>');b.rtl&&0===h&&(q[0].style.borderLeftColor="transparent"),b.columngroups&&(q[0].style.height=n+"px",q[0].style.bottom="0px",this.pinned&&(q[0].style.zIndex=k)),this.uielement=q,this.element=q,""!=this.classname&&this.classname&&q.addClass(this.classname);var r=this.width,s=!1;if(null===this.width&&(this.width="auto"),this.width.toString().indexOf("%")==-1&&void 0==this._percentagewidth||(r=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*g/100:parseFloat(this.width)*g/100,r=Math.round(r),s=!0),"auto"==this.width||this._width||s)if(s)r<this.minwidth&&"auto"!=this.minwidth&&(r=this.minwidth),r>this.maxwidth&&"auto"!=this.maxwidth&&(r=this.maxwidth),void 0!=this._percentagewidth&&this.width.toString().indexOf("%")==-1||(this._percentagewidth=this.width),q.width(r),this.width=r;else{var t=Math.floor(f*(this.text.length/e.length)),u=f*(this.text.length/e.length)-t;p+=u,p>=1&&(p-=1,t++),p>=.5&&h==b.columns.records.length-1&&t++,isNaN(t)&&(t=this.minwidth),t<0&&($element=a("<span>"+this.text+"</span>"),a(document.body).append($element),t=10+$element.width(),$element.remove()),t<this.minwidth&&(t=this.minwidth),t>this.maxwidth&&(t=this.maxwidth),this._width="auto",this.width=parseInt(t),r=this.width,q.width(this.width)}else r<this.minwidth&&"auto"!=this.minwidth&&(r=this.minwidth),r>this.maxwidth&&"auto"!=this.maxwidth&&(r=this.maxwidth),q[0].style.width=parseInt(r)+"px";this.hidden&&q.css("display","none");var v=a(q.children()[0]);c[0].cells[h]=q[0];var w=!1,x=!1,y=null!=this.renderer?this.renderer(this.text,this.align,n):b._rendercolumnheader(this.text,this.align,n,b);if(null==y&&(y=b._rendercolumnheader(this.text,this.align,n,b)),null!=this.renderer&&(y=a(y)),w=!0,b.WinJS?MSApp.execUnsafeLocalFunction(function(){v.append(a(y))}):this.renderer?v.append(a(y)):y&&(v[0].innerHTML=y),null!=y){var z=a('<div class="iconscontainer" style="height: '+n+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+b.toTP("jqx-widget-header")+'" style="height: '+n+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+b.toTP("jqx-widget-header")+'" style="height: '+n+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("jqx-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+b.toTP("jqx-widget-header")+'" style="height: '+n+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("jqx-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"></div></div></div>');v.append(z);var A=z.children();this.sortasc=A[1],this.sortdesc=A[2],this.filtericon=A[0],this.iconscontainer=z,b.rtl&&(z.css("margin-left","0px"),z.css("left","0px"),a(this.sortasc).css("float","left"),a(this.filtericon).css("float","left"),a(this.sortdesc).css("float","left"))}c.append(q),b.columnsreorder&&this.draggable&&b._handlecolumnsdragreorder&&b._handlecolumnsdragreorder(this,q);var B=this;if(b.addHandler(q,"click",function(a){return!!B.checkboxcolumn||(b._togglesort&&(b._loading||b._togglesort(B)),void a.preventDefault())}),B.resizable&&b.columnsresize&&!x){var C=!1,D="mousemove";b.isTouchDevice()&&(C=!0,D=a.jqx.mobile.getTouchEventName("touchstart")),b.addHandler(q,D,function(c){var d=parseInt(c.pageX),e=5,f=parseInt(q.coord().left);if(b.hasTransform&&(f=a.jqx.utilities.getOffset(q).left),b._handlecolumnsresize){if(C){var g=a.jqx.mobile.getTouches(c),h=g[0];return d=h.pageX,e=40,d>=f+B.width-e?(b.resizablecolumn={columnelement:q,column:B},q.css("cursor","col-resize")):(q.css("cursor",""),b.resizablecolumn=null),!0}var i=B.width;if(b.rtl&&(i=0),d>=f+i-e){if(d<=f+i+e)return b.resizablecolumn={columnelement:q,column:B},q.css("cursor","col-resize"),!1;q.css("cursor",""),b.resizablecolumn=null}else q.css("cursor",""),d<f+i-e&&(B._animating||B._menuvisible||q.mouseenter()),b.resizablecolumn=null}})}if(q.css("left",d),this.hidden||(d+=r),B.rendered){var E=B.rendered(a(v[0].firstChild),B.align,n);E&&null!=z&&z.hide()}}),d>0?this.columnsheader.width(2+d):this.columnsheader.width(d),this.columnsrow=c,b.columnsheader.append(c),c.width(d),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups()}},_rendercolumngroups:function(){if(this.columngroups){for(var b=0,c=0;c<this.columns.records.length;c++)this.columns.records[c].pinned&&b++;var d=this.headerZIndex-b+this.columns.records.length,e=this,f=e.toTP("jqx-grid-column-header")+" "+e.toTP("jqx-grid-columngroup-header")+" "+e.toTP("jqx-widget-header");e.rtl&&(f+=" "+e.toTP("jqx-grid-columngroup-header-rtl"));var g=this.columnsheader.find("#columntable"+this.element.id);g.find("jqx-grid-columngroup-header").remove();for(var h=0;h<this.columngroupslevel-1;h++)for(var c=0;c<this.columngroups.length;c++){var i=this.columngroups[c],j=i.level;if(j===h){var k=j*this.columnsheight,l=99999;if(i.groups){var m=function(a){for(var b=0,c=0;c<a.groups.length;c++){var d=a.groups[c];d.groups?b+=m(d):d.hidden||(b+=d.width,l=Math.min(parseInt(d.element[0].style.left),l))}return b};i.width=m(i),i.left=l;var n=this.columnsheight,o=d--,p=a('<div role="columnheader" style="z-index: '+o+';position: absolute;" class="'+f+'"></div>'),q=a(this._rendercolumnheader(i.text,i.align,this.columnsheight,this));p.append(q),p[0].style.left=l+"px",0===l&&(p[0].style.borderLeftColor="transparent"),p[0].style.top=k+"px",p[0].style.height=n+"px",p[0].style.width=-1+i.width+"px",g.append(p),i.element=p}}}}},_resizecolumngroups:function(){if(this.columngroups)for(var a=0;a<this.columngroups.length;a++){var b=this.columngroups[a],c=b.level,d=c*this.columnsheight,e=99999;if(b.groups){var f=function(a){for(var b=0,c=0;c<a.groups.length;c++){var d=a.groups[c];d.groups?b+=f(d):(b+=d.width,e=Math.min(parseInt(d.element[0].style.left),e))}return b};b.width=f(b),b.left=e;var g=this.columnsheight,h=b.element;h[0].style.left=e+"px",h[0].style.top=d+"px",h[0].style.height=g+"px",h[0].style.width=-1+b.width+"px"}}},_removecolumnhandlers:function(b){var c=this,d=a(b.element);if(d.length>0){c.removeHandler(d,"mouseenter"),c.removeHandler(d,"mouseleave");var e=a(b.filtericon);c.removeHandler(e,"mousedown"),c.removeHandler(e,"click"),c.removeHandler(d,"click")}},_calculateaggregate:function(a,b,c,d){var e=a.aggregates;if(e||(e=b),e){for(var f=new Array,g=0;g<e.length;g++)"count"!=e[g]&&(f[f.length]=a.cellsformat);if(this.source&&this.source.getAggregatedData){void 0==d&&(d=this.getRows(),this.dataViewRecords&&(d=this.dataViewRecords));var h=d,i=-1;if(this.treeGrid){var j=new Array,k=function(a){for(var b=0;b<a.length;b++)void 0!=a[b]&&(i==-1&&(i=a[b].level),a[b].aggregate||j.push(a[b]),!a[b].leaf&&a[b].records&&a[b].records.length>0&&k(a[b].records))};k(d),d=j}if(this.treeGrid&&this.filterable&&this.dataview.filters.length>0){for(var l=new Array,g=0;g<d.length;g++)d[g]&&d[g]._visible!==!1&&l.push(d[g]);d=l;for(var m=new Array,g=0;g<h.length;g++)h[g]&&h[g]._visible!==!1&&m.push(h[g]);h=m}if(void 0==c||1==c){var n=this.source.getAggregatedData([{name:a.datafield,aggregates:e,formatStrings:f}],this.gridlocalization,d,i);if(this.treeGrid){var o=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if((0==o||i>=o)&&(void 0!=n[a.datafield].sum||void 0!=n[a.datafield].avg)){var p=this.source.getAggregatedData([{name:a.datafield,aggregates:e,formatStrings:f}],this.gridlocalization,h,i);void 0!=n[a.datafield].sum&&(n[a.datafield].sum=p[a.datafield].sum),void 0!=n[a.datafield].avg&&(n[a.datafield].avg=p[a.datafield].avg)}}return n}var n=this.source.getAggregatedData([{name:a.datafield,aggregates:e}],this.gridlocalization,d,i);if(this.treeGrid&&(void 0!=n[a.datafield].sum||void 0!=n[a.datafield].avg)){var o=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if(0==o||i>=o){var p=this.source.getAggregatedData([{name:a.datafield,aggregates:e}],this.gridlocalization,h,i);void 0!=n[a.datafield].sum&&(n[a.datafield].sum=p[a.datafield].sum),void 0!=n[a.datafield].avg&&(n[a.datafield].avg=p[a.datafield].avg)}}return n}}return null},getcolumnaggregateddata:function(a,b,c,d){var e=this.getcolumn(a);if(!e)return"";var f=void 0!=c&&0!=c&&c;if(null==b)return"";var g=e.aggregates;e.aggregates=null;var h=this._calculateaggregate(e,b,f,d),i={};return h&&(i=h[a],e.aggregates=g),i},_updatecolumnaggregates:function(b,c,d){var e=this;if(c)if(d.children().remove(),d.html(""),b.aggregatesrenderer){if(c){var f=b.aggregatesrenderer(c[b.datafield],b,d,this.getcolumnaggregateddata(b.datafield,b.aggregates),"aggregates");d.html(f)}}else a.each(c,function(){var b=this;for(g in b){var c=a('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),f=g;f=e._getaggregatename(f),c.html(f+":"+b[g]),e.rtl&&c.addClass(e.toThemeProperty("jqx-rtl")),d.append(c)}});else if(d.children().remove(),d.html(""),b.aggregatesrenderer){var g={};b.aggregates&&(g=this.getcolumnaggregateddata(b.datafield,b.aggregates));var f=b.aggregatesrenderer({},b,d,null);d.html(f)}},_getaggregatetype:function(a){switch(a){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return a}var b=a;for(var c in a){b=c;break}return b},_getaggregatename:function(a){var b=a;switch(a){case"min":b="Min";break;case"max":b="Max";break;case"count":b="Count";break;case"avg":b="Avg";break;case"product":b="Product";break;case"var":b="Var";break;case"stdevp":b="StDevP";break;case"stdev":b="StDev";break;case"varp":b="VarP";case"sum":b="Sum"}if(a===b&&"string"!=typeof b)for(var c in a){b=c;break}return b},_updatecolumnsaggregates:function(){var b=this.getRows();this.dataViewRecords&&(b=this.dataViewRecords);var c=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var d=0;d<c;d++){var e=a(this.aggregates[0].cells[d]),f=this.columns.records[d],g=this._calculateaggregate(f,null,!0,b);this._updatecolumnaggregates(f,g,e)}},_refreshcolumnsaggregates:function(){var b=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var c=0,d=0;d<b;d++){var e=a(this.aggregates[0].cells[d]),f=this.columns.records[d];e&&(e.width(f.width),e[0].style.left=c+"px",f.hidden&&f.hideable?e.css("display","none"):c+=f.width)}},_updateaggregates:function(){var b=a('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),c=0,d=this.columns.records.length,e=this.toThemeProperty("jqx-grid-cell");this.rtl&&(e+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),c=0,b.css("border-left-width","0px"),this.aggregates.css("border-left-color","transparent")),e+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var f=d+10,g=new Array;this.aggregates[0].cells=g;for(var h=0;h<d;h++){var i=this.columns.records[h],j=this._calculateaggregate(i),k=i.width;k<i.minwidth&&(k=i.minwidth),k>i.maxwidth&&(k=i.maxwidth);var l=e;i.cellsalign&&(l+=" "+this.toThemeProperty("jqx-"+i.cellsalign+"-align"));var m=a('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+l+'"></div>');b.append(m),m.css("left",c),this.rtl?(m.css("z-index",f++),0==h&&m.css("border-left-width","0px")):m.css("z-index",f--),m.width(k),m[0].style.left=c+"px",i.hidden&&i.hideable?m.css("display","none"):c+=k,g[g.length]=m[0],this._updatecolumnaggregates(i,j,m)}a.jqx.browser.msie&&a.jqx.browser.version<8&&b.css("z-index",f--),b.width(parseInt(c)+2),b.height(this.aggregatesheight),this.aggregates.children().remove(),this.aggregates.append(b),this.aggregates.removeClass(this.toThemeProperty("jqx-widget-header")),this.aggregates.addClass(e),this.aggregates.css("border-bottom-color","transparent"),this.aggregates.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll()},destroy:function(){if(this.columns&&this.columns.records)for(var b=0;b<this.columns.records.length;b++)this._removecolumnhandlers(this.columns.records[b]);if(this.removeHandler(a(document),"mouseup.pagerbuttonstop"),this.removeHandler(a(document),"mouseup.pagerbuttonsbottom"),this.filterable){if(this.filterrow)for(var b=0;b<this.filterrow[0].cells.length;b++){var c=this.filterrow[0].cells[b],d=a(c).find(".filterconditions");this.columns.records[b];d.length>0&&d.jqxDropDownList("destroy")}this.filtercolumnsList&&this.filtercolumnsList.jqxDropDownList("destroy")}this.pageable&&(this.pagershowrowscombotop&&this.pagershowrowscombotop.jqxDropDownList("destroy"),this.pagershowrowscombobottom&&this.pagershowrowscombobottom.jqxDropDownList("destroy")),this._removeHandlers(),a.jqx.utilities.resize(this.host,null,!0),this.host.remove()},propertyChangedHandler:function(b,c,d,e){if(void 0!=this.isInitialized&&0!=this.isInitialized&&(c=c.toLowerCase(),e!==d))if("height"===c)b.host.height(b.height),b.host.width(b.width),b._updatesize(!1,!0);else if("width"===c)b.host.height(b.height),b.host.width(b.width),b._updatesize(!0,!1);else if("source"===c)b.updatebounddata();else if("columns"===c||"columngroups"===c)b._columns=null,b._render();else if("pagermode"===c)b.pagermode=e.toLowerCase(),b._initpager();else if("pagesizeoptions"==c){b._initpager();for(var f=!1,g=0;g<e.length;g++)if(parseInt(e[g])==b.pagesize){f=!0;break}f||a.jqx.set(b,[{pagesize:e[0]}])}else if("pagesize"==c){var h=b.dataview.pagenum*b.dataview.pagesize;b.dataview.pagesize=b.pagesize;var i=Math.floor(h/b.dataview.pagesize);if(i!==b.dataview.pagenum||parseInt(e)!==parseInt(d)){b._raiseEvent("pageSizeChanged",{pagenum:e,oldpagesize:d,pagesize:b.dataview.pagesize});var j=b.gotopage(i);j||(b.serverProcessing?b.updatebounddata("pager"):b.refresh())}}else if("pagerposition"===c)b.refresh();else if("selectionmode"===c)b.selectionmode=e.toLowerCase();else if("touchmode"==c)b._removeHandlers(),b.touchDevice=null,b.vScrollBar.jqxScrollBar({touchMode:e}),b.hScrollBar.jqxScrollBar({touchMode:e}),b.refresh(),b._addHandlers();else{if("enablehover"==c)return;if("disabled"==c)e?b.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):b.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),b.pageable&&(b.pagernexttop&&(b.pagernexttop.jqxButton({disabled:e}),b.pagerprevioustop.jqxButton({disabled:e}),b.pagernextbottom.jqxButton({disabled:e}),b.pagerpreviousbottom.jqxButton({disabled:e}),b.pagerfirsttop.jqxButton({disabled:e}),b.pagerfirstbottom.jqxButton({disabled:e}),b.pagerlasttop.jqxButton({disabled:e}),b.pagerlastbottom.jqxButton({disabled:e}),b.pagershowrowscombotop.jqxDropDownList&&"advanced"==b.pagermode&&(b.pagershowrowscombotop.jqxDropDownList({disabled:!1}),b.pagershowrowscombobottom.jqxDropDownList({disabled:!1}))),b.host.find(".jqx-grid-pager-number").css("cursor",e?"default":"pointer")),b.host.find(".jqx-grid-group-collapse").css("cursor",e?"default":"pointer"),b.host.find(".jqx-grid-group-expand").css("cursor",e?"default":"pointer");else if("columnsheight"==c)b._render();else if("theme"==c){if(a.jqx.utilities.setTheme(d,e,b.host),b.vScrollBar.jqxScrollBar({theme:b.theme}),b.hScrollBar.jqxScrollBar({theme:b.theme}),b.pageable&&b.pagernexttop&&(b.pagernexttop.jqxButton({theme:b.theme}),b.pagerprevioustop.jqxButton({theme:b.theme}),b.pagernextbottom.jqxButton({theme:b.theme}),b.pagerpreviousbottom.jqxButton({theme:b.theme}),b.pagerfirsttop.jqxButton({theme:b.theme}),b.pagerfirstbottom.jqxButton({theme:b.theme}),b.pagerlasttop.jqxButton({theme:b.theme}),b.pagerlastbottom.jqxButton({theme:b.theme}),b.pagershowrowscombotop.jqxDropDownList&&"advanced"==b.pagermode&&(b.pagershowrowscombotop.jqxDropDownList({theme:b.theme}),b.pagershowrowscombobottom.jqxDropDownList({theme:b.theme}))),b.filterable){var k=a(".filterconditions");k.length>0&&k.jqxDropDownList({theme:b.theme}),b.filtercolumnsList&&b.filtercolumnsList.jqxDropDownList({theme:b.theme})}b.refresh()}else b.refresh()}},_rendercolumnheader:function(a,b,c,d){var e="4px";return d.columngroups?(e=c/2-this._columnheight/2,e<0&&(e=4),e+="px"):25!=this.columnsheight&&(e=this.columnsheight/2-this._columnheight/2,e<0&&(e=4),e+="px"),'<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+b+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+e+"; margin-top: "+e+';"><span style="text-overflow: ellipsis; cursor: default;">'+a+"</span></div>"}}),a.jqx.collection=function(a){return this.records=new Array,this.owner=a,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(a,b){this.records[a]=b},this.isempty=function(a){return void 0==this.records[a]},this.initialize=function(a){a<1&&(a=1),this.records[a-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(a){return this.records.indexOf(a)},this.add=function(a){return null!=a&&(this.records[this.records.length]=a,!0)},this.insertAt=function(a,b){return null!=a&&void 0!=a&&(null!=b&&(a>=0&&(a<this.records.length?(this.records.splice(a,0,b),!0):this.add(b))))},this.remove=function(a){if(null==a||void 0==a)return!1;var b=this.records.indexOf(a);return b!=-1&&(this.records.splice(b,1),!0)},this.removeAt=function(a){if(null==a||void 0==a)return!1;if(a<0)return!1;if(a<this.records.length){this.records[a];return this.records.splice(a,1),!0}return!1},this},a.jqx.dataView=function(){return this.that=this,this.grid=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(b,c){var d=!!b._source,e=null;this._sortData=null,this._sortHierarchyData=null,d?(e=b,b=b._source):e=new a.jqx.dataAdapter(b,{autoBind:!1});var f=function(a){e.recordids=[],e.records=new Array,e.cachedrecords=new Array,e.originaldata=new Array,e._options.totalrecords=a.totalrecords,e._options.originaldata=a.originaldata,e._options.recordids=a.recordids,e._options.cachedrecords=new Array,e._options.pagenum=a.pagenum,e._options.pageable=a.pageable,void 0!=b.type&&(e._options.type=b.type),void 0!=b.formatdata&&(e._options.formatData=b.formatdata),
void 0!=b.contenttype&&(e._options.contentType=b.contenttype),void 0!=b.async&&(e._options.async=b.async),void 0!=b.updaterow&&(e._options.updaterow=b.updaterow),void 0!=b.addrow&&(e._options.addrow=b.addrow),void 0!=b.deleterow&&(e._options.deleterow=b.deleterow),0==a.pagesize&&(a.pagesize=10),e._options.pagesize=a.pagesize},g=function(a){a.originaldata=e.originaldata,a.records=e.records,a.hierarchy=e.hierarchy,a.hierarchy||(a.hierarchy=new Array,e.hierarchy=new Array),e._source.totalrecords?a.totalrecords=e._source.totalrecords:e._source.totalRecords?a.totalrecords=e._source.totalRecords:0!==a.hierarchy.length?a.totalrecords=a.hierarchy.length:a.totalrecords=a.records.length,a.cachedrecords=e.cachedrecords};f(this),this.source=b,void 0!==c&&(uniqueId=c);var h=this;switch(b.datatype){case"local":case"array":default:if(null==b.localdata&&(b.localdata=[]),null!=b.localdata){e.unbindBindingUpdate(h.grid.element.id),(!h.grid.autobind&&h.grid.isInitialized||h.grid.autobind)&&e.dataBind();var i=function(){g(h),h.update()};i(),e.bindBindingUpdate(h.grid.element.id,i)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=b.localdata){e.unbindBindingUpdate(h.grid.element.id),(!h.grid.autobind&&h.grid.isInitialized||h.grid.autobind)&&e.dataBind();var i=function(a){g(h),h.update()};return i(),void e.bindBindingUpdate(h.grid.element.id,i)}for(var j=0,k={},l=0;l<this.filters.length;l++){var m=this.filters[l].datafield,n=this.filters[l].filter,o=n.getfilters();k[m+"operator"]=n.operator;for(var p=0;p<o.length;p++){o[p].datafield=m;var q=o[p].value;k["filtervalue"+j]=q.toString(),k["filtercondition"+j]=o[p].condition,k["filteroperator"+j]=o[p].operator,k["filterdatafield"+j]=m,j++}}k.filterslength=j,a.extend(k,{sortdatafield:h.sortfield,sortorder:h.sortfielddirection,pagenum:h.pagenum,pagesize:h.grid.pagesize});var r=e._options.data;e._options.data?a.extend(e._options.data,k):(b.data&&a.extend(k,b.data),e._options.data=k);var i=function(){var b=a.jqx.browser.msie&&a.jqx.browser.version<9,c=function(){g(h),h.update()};if(b)try{c()}catch(d){}else c()};e.unbindDownloadComplete(h.grid.element.id),e.bindDownloadComplete(h.grid.element.id,i),e._source.loaderror=function(a,b,c){i()},(!h.grid.autobind&&h.grid.isInitialized||h.grid.autobind)&&e.dataBind(),e._options.data=r}},this.addfilter=function(a,b){this._sortData=null,this._sortHierarchyData=null;for(var c=-1,d=0;d<this.filters.length;d++)if(this.filters[d].datafield==a){c=d;break}c==-1?this.filters[this.filters.length]={filter:b,datafield:a}:this.filters[c]={filter:b,datafield:a}},this.removefilter=function(a){this._sortData=null,this._sortHierarchyData=null;for(var b=0;b<this.filters.length;b++)if(this.filters[b].datafield==a){this.filters.splice(b,1);break}},this.sortby=function(a,b){return null==b?(this.sortfield="",void(this.sortfielddirection="")):(void 0==b&&(b=!0),b="a"==b||"asc"==b||"ascending"==b||1==b,"constructor"==a&&(a=""),this.sortfield=a,void(this.sortfielddirection=b?"asc":"desc"))},this._sort=function(b){if(!this.sortfield||!this.sortfielddirection)return b;if(this._sortfield==this.sortfield&&this._sortfielddirection==this.sortfielddirection&&this._sortData)return this._sortData;var c=this,d=Object.prototype.toString;Object.prototype.toString="function"==typeof c.sortfield?c.sortfield:function(){return this[c.sortfield]};var e="";this.source.datafields&&a.each(this.source.datafields,function(){if(this.name==c.sortfield)return this.type&&(e=this.type),!1});for(var f=new Array,g=0;g<b.length;g++)f.push(a.extend({originalRecord:b[g]},b[g]));if(this._sortfield=this.sortfield,this._sortfielddirection=this.sortfielddirection,"desc"===this.sortfielddirection)var h=f.sort(function(a,b){return c._compare(a,b,e)}).reverse();else var h=f.sort(function(a,b){return c._compare(a,b,e)});return this._sortData=h,Object.prototype.toString=d,h},this._compare=function(b,c,d){var b=b,c=c;if(void 0===b&&(b=null),void 0===c&&(c=null),null===b&&null===c)return 0;if(null===b&&null!==c)return 1;if(null!==b&&null===c)return 1;if(b=b.toString(),c=c.toString(),a.jqx.dataFormat)if(d&&""!=d)switch(d){case"number":case"int":case"float":return b<c?-1:b>c?1:0;case"date":case"time":return b<c?-1:b>c?1:0;case"string":case"text":b=String(b).toLowerCase(),c=String(c).toLowerCase()}else{if(a.jqx.dataFormat.isNumber(b)&&a.jqx.dataFormat.isNumber(c))return b<c?-1:b>c?1:0;if(a.jqx.dataFormat.isDate(b)&&a.jqx.dataFormat.isDate(c))return b<c?-1:b>c?1:0;a.jqx.dataFormat.isNumber(b)||a.jqx.dataFormat.isNumber(c)||(b=String(b).toLowerCase(),c=String(c).toLowerCase())}try{if(b<c)return-1;if(b>c)return 1}catch(e){}return 0},this._equals=function(a,b){return 0===this._compare(a,b)},this.evaluate=function(b){if(this.grid.serverProcessing){if(b&&(""==this.grid.source._source.id||null==this.grid.source._source.id)&&this.grid.pageable){var c=this.grid.pagesize*this.pagenum;this.grid.rowsByKey=new Array;var d=this;a.each(b,function(a){this.uid=c,d.grid.rowsByKey[this.uid]=this,c++})}return b}var e=new Array;if(this.filters.length){var f=new Array,g=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];d._visible=!0;for(var e=void 0,g=0;g<this.filters.length;g++){var h=this.filters[g].filter,i=d[this.filters[g].datafield],j=h.evaluate(i);e=void 0==e?j:"or"==h.operator?e||j:e&&j}d._visible=!1,(e||d.aggregate)&&(d._visible=!0,b.push(d),f[d.uid]=d)}};if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var h=new Array,i=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];h.push(d),d.records&&d.records.length>0&&i(d,d.records)}};i(null,b),g.call(this,h,e);for(var j=0;j<e.length;j++)for(var k=e[j];k.parent;){var l=k.parent;f[l.uid]||(l._visible=!0,f[l.uid]=l),k=l}e=b}else g.call(this,b,e);this._filteredData=e,this.rows=e}}else this.rows=b;if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var d=this,m=new Array;this._sortData=null;var n=function(b,c){d._sortData=null;var e=null;if(d.source.hierarchy.groupingDataFields)if(c&&c.length>0&&c[0].level<d.source.hierarchy.groupingDataFields.length){e=new Array;for(var f=0;f<c.length;f++)e.push(a.extend({originalRecord:c[f]},c[f]))}else e=d._sort(c);else e=d._sort(c);b.records?b.records=e:b=b.concat(e);for(var f=0;f<e.length;f++)e[f].records&&e[f].records.length&&n(e[f],e[f].records);return b};(this.sortfield||this.sortfielddirection)&&(m=this._sortHierarchyData?this._sortHierarchyData:n(m,b),this.rows=m,this._sortHierarchyData=m)}else this.rows=this._sort(this.rows);return this.rows},this.getid=function(b,c,d){if(a(b,c).length>0)return a(b,c).text();if(this.rows&&""!=b&&void 0!=b&&this.rows.length>0){var e=this.rows[this.rows.length-1][b];null==e&&(e=null);for(var f=1;f<=100;f++){var g=this.grid.rowsByKey[f+e];if(!g)return e+f}}if(b&&b.toString().length>0){var h=a(c).attr(b);if(null!=h&&h.toString().length>0)return h}return d},this.generatekey=function(){var a=function(){return 16*(1+Math.random())|0};return""+a()+a()+"-"+a()+"-"+a()},this}}(jQuery);