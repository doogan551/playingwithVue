!function(a){a.jqx.jqxWidget("jqxComboBox","",{}),a.extend(a.jqx._jqxComboBox.prototype,{defineInstance:function(){this.disabled=!1,this.width=200,this.height=25,this.items=new Array,this.selectedIndex=-1,this.selectedItems=new Array,this._selectedItems=new Array,this.source=null,this.scrollBarSize=a.jqx.utilities.scrollBarSize,this.arrowSize=18,this.enableHover=!0,this.enableSelection=!0,this.visualItems=new Array,this.groups=new Array,this.equalItemsWidth=!0,this.itemHeight=-1,this.visibleItems=new Array,this.emptyGroupText="Group",this.emptyString="",void 0==this.openDelay&&(this.openDelay=250),void 0==this.closeDelay&&(this.closeDelay=300),this.animationType="default",this.dropDownWidth="auto",this.dropDownHeight="200px",this.autoDropDownHeight=!1,this.enableBrowserBoundsDetection=!1,this.dropDownHorizontalAlignment="left",this.searchMode="startswithignorecase",this.autoComplete=!1,this.remoteAutoComplete=!1,this.remoteAutoCompleteDelay=500,this.selectionMode="default",this.minLength=2,this.displayMember="",this.valueMember="",this.keyboardSelection=!0,this.renderer=null,this.autoOpen=!1,this.checkboxes=!1,this.promptText="",this.placeHolder="",this.rtl=!1,this.listBox=null,this.renderSelectedItem=null,this.search=null,this.popupZIndex=1e5,this.searchString=null,this.multiSelect=!1,this.showArrow=!0,this._disabledItems=new Array,this.touchMode="auto",this.autoBind=!0,this.aria={"aria-disabled":{name:"disabled",type:"boolean"}},this.events=["open","close","select","unselect","change","checkChange","bindingComplete"]},createInstance:function(b){if(this.host.attr("role","combobox"),a.jqx.aria(this,"aria-autocomplete","both"),null==a.jqx._jqxListBox||void 0==a.jqx._jqxListBox)throw new Error("jqxComboBox: Missing reference to jqxlistbox.js.");a.jqx.aria(this),""!=this.promptText&&(this.placeHolder=this.promptText),this.render()},render:function(){this.removeHandlers(),this.isanimating=!1,this.id=a.jqx.utilities.createId(),this.element.innerHTML="";var b=a("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; margin: 0; border-top: none; border-bottom: none; float: left; position: absolute;'/><div id='dropdownlistArrow' style='padding: 0; margin: 0; border-left-width: 1px; border-bottom-width: 0px; border-top-width: 0px; border-right-width: 0px; float: right; position: absolute;'/></div></div>");if(this.comboStructure=b,null==a.jqx._jqxListBox||void 0==a.jqx._jqxListBox)throw"jqxComboBox: Missing reference to jqxlistbox.js.";this.touch=a.jqx.mobile.isTouchDevice(),this.touchMode===!0&&(this.touch=!0),this.host.append(b),this.dropdownlistWrapper=this.host.find("#dropdownlistWrapper"),this.dropdownlistArrow=this.host.find("#dropdownlistArrow"),this.dropdownlistContent=this.host.find("#dropdownlistContent"),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content")),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-widget-content")),this.dropdownlistWrapper[0].id="dropdownlistWrapper"+this.element.id,this.dropdownlistArrow[0].id="dropdownlistArrow"+this.element.id,this.dropdownlistContent[0].id="dropdownlistContent"+this.element.id,this.dropdownlistContent.append(a('<input autocomplete="off" style="margin: 0; padding: 0; border: 0;" type="textarea"/>')),this.input=this.dropdownlistContent.find("input"),this.input.addClass(this.toThemeProperty("jqx-combobox-input")),this.input.addClass(this.toThemeProperty("jqx-widget-content")),this.host.attr("tabindex")&&(this.input.attr("tabindex",this.host.attr("tabindex")),this.host.removeAttr("tabindex")),this._addInput(),this.rtl&&(this.input.css({direction:"rtl"}),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-rtl")));try{var c="listBox"+this.id,d=a(a.find("#"+c));d.length>0&&d.remove(),a.jqx.aria(this,"aria-owns",c),a.jqx.aria(this,"aria-haspopup",!0),a.jqx.aria(this,"aria-multiline",!1),this.listBoxContainer&&this.listBoxContainer.jqxListBox("destroy"),this.container&&this.container.remove();var e=a("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox"+this.id+"'><div id='innerListBox"+this.id+"'></div></div>");e.hide(),e.appendTo(document.body),this.container=e,this.listBoxContainer=a(a.find("#innerListBox"+this.id));var f=this.width;"auto"!=this.dropDownWidth&&(f=this.dropDownWidth),null==this.dropDownHeight&&(this.dropDownHeight=200);var g=this;this.container.width(parseInt(f)+25),this.container.height(parseInt(this.dropDownHeight)+25),this.addHandler(this.listBoxContainer,"bindingComplete",function(a){g._raiseEvent("6")});var h=!0;this.listBoxContainer.jqxListBox({_checkForHiddenParent:!1,checkboxes:this.checkboxes,emptyString:this.emptyString,autoBind:!this.remoteAutoComplete&&this.autoBind,renderer:this.renderer,rtl:this.rtl,itemHeight:this.itemHeight,selectedIndex:this.selectedIndex,incrementalSearch:!1,width:f,scrollBarSize:this.scrollBarSize,autoHeight:this.autoDropDownHeight,height:this.dropDownHeight,displayMember:this.displayMember,valueMember:this.valueMember,source:this.source,theme:this.theme,rendered:function(){if(g.listBox=a.data(g.listBoxContainer[0],"jqxListBox").instance,g.remoteAutoComplete)if(g.autoDropDownHeight?(g.container.height(g.listBox.virtualSize.height+25),g.listBoxContainer.height(g.listBox.virtualSize.height),g.listBox._arrange()):(g.listBox._arrange(),g.listBox.ensureVisible(0),g.listBox._renderItems(),g.container.height(g.listBoxContainer.height()+25)),void 0!=g.searchString&&g.searchString.length>=g.minLength){var b=g.listBoxContainer.jqxListBox("items");b&&b.length>0?g.isOpened()||g.open():g.close()}else g.close();else g.renderSelection("mouse"),g.multiSelect&&g.doMultiSelect(!1);g.rendered&&g.rendered()}}),this.listBoxContainer.css({position:"absolute",zIndex:this.popupZIndex,top:0,left:0}),this.listBoxContainer.css("border-top-width","1px"),this.listBoxContainer.addClass(this.toThemeProperty("jqx-popup")),a.jqx.browser.msie&&this.listBoxContainer.addClass(this.toThemeProperty("jqx-noshadow")),this.listBox=a.data(this.listBoxContainer[0],"jqxListBox").instance,this.listBox.enableSelection=this.enableSelection,this.listBox.enableHover=this.enableHover,this.listBox.equalItemsWidth=this.equalItemsWidth,this.listBox._arrange(),this.addHandler(this.listBoxContainer,"unselect",function(a){g.multiSelect||g._raiseEvent("3",{index:a.args.index,type:a.args.type,item:a.args.item})}),this.addHandler(this.listBoxContainer,"change",function(a){g.multiSelect||g._raiseEvent("4",{index:a.args.index,type:a.args.type,item:a.args.item})}),"none"==this.animationType?this.container.css("display","none"):this.container.hide(),h=!1}catch(i){throw i}var j=this;j.input.attr("disabled",j.disabled);var k=a.jqx.browser.msie&&a.jqx.browser.version<8;if(k||j.input.attr("placeholder",j.placeHolder),this.propertyChangeMap.disabled=function(b,c,d,e){e?(b.host.addClass(j.toThemeProperty("jqx-combobox-state-disabled")),b.host.addClass(j.toThemeProperty("jqx-fill-state-disabled")),b.dropdownlistContent.addClass(j.toThemeProperty("jqx-combobox-content-disabled"))):(b.host.removeClass(j.toThemeProperty("jqx-combobox-state-disabled")),b.host.removeClass(j.toThemeProperty("jqx-fill-state-disabled")),b.dropdownlistContent.removeClass(j.toThemeProperty("jqx-combobox-content-disabled"))),b.input.attr("disabled",b.disabled),a.jqx.aria(b,"aria-disabled",b.disabled),b.input.attr("disabled",b.disabled)},this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-combobox-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-disabled"))),this.host.addClass(this.toThemeProperty("jqx-combobox-state-normal")),this.host.addClass(this.toThemeProperty("jqx-combobox")),this.host.addClass(this.toThemeProperty("jqx-rc-all")),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-widget-content")),this.dropdownlistArrowIcon=a("<div></div>"),this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon")),this.dropdownlistArrow.append(this.dropdownlistArrowIcon),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-normal")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-normal")),this.rtl?this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-l")):this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-r")),this._setSize(),this._updateHandlers(),this.addHandler(this.input,"keyup.textchange",function(a){g._search(a);g.cinput&&g.input&&(g.cinput[0].value=g.input[0].value)}),a.jqx.browser.msie&&a.jqx.browser.version<8&&this.host.parents(".jqx-window").length>0){var l=this.host.parents(".jqx-window").css("z-index");e.css("z-index",l+10),this.listBoxContainer.css("z-index",l+10)}this.checkboxes?(this.input.attr("readonly",!0),a.jqx.aria(this,"aria-readonly",!0)):a.jqx.aria(this,"aria-readonly",!1),this.remoteAutoComplete||(this.searchString="")},_addInput:function(){var b=this.host.attr("name");this.cinput=a("<input type='hidden'/>"),this.host.append(this.cinput),b&&this.cinput.attr("name",b)},_updateInputSelection:function(){if(this.cinput){if(this.selectedIndex==-1)this.cinput.val("");else{var a=this.getSelectedItem();null!=a?this.cinput.val(a.value):this.cinput.val(this.dropdownlistContent.text())}if(this.checkboxes||this.multiSelect){if(this.multiSelect)var b=this.getSelectedItems();else var b=this.getCheckedItems();var c="";if(null!=b)for(var d=0;d<b.length;d++)c+=d==b.length-1?b[d].value:b[d].value+",";this.cinput.val(c)}}},_search:function(b){if(9!=b.keyCode&&"none"!=this.searchMode&&null!=this.searchMode&&"undefined"!=this.searchMode&&16!=b.keyCode&&17!=b.keyCode&&20!=b.keyCode&&!this.checkboxes){if(this.multiSelect){var c=a("<span style='visibility: hidden; white-space: nowrap;'>"+this.input.val()+"</span>");c.addClass(this.toThemeProperty("jqx-widget")),a(document.body).append(c);var d=c.width()+15;c.remove(),d>this.host.width()&&(d=this.host.width()),d<25&&(d=25),this.input.css("width",d+"px"),0==this.selectedItems.length?(this.input.css("width","100%"),this.input.attr("placeholder",this.placeHolder)):this.input.attr("placeholder","");var e=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px",f=a.jqx.mobile.isSafariMobileBrowser()||a.jqx.mobile.isWindowsPhone(),g=a.jqx.utilities.hasTransform(this.host);(g||null!=f&&f)&&(e=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),"0px"!=a("body").css("border-top-width")&&(e=parseInt(e)-this._getBodyOffset().top+"px")),this.container.css("top",e);var h=parseInt(this.host.height());this.dropdownlistArrow.height(h)}if(!this.isanimating){if(b.altKey&&38==b.keyCode)return this.hideListBox("altKey"),!1;if(b.altKey&&40==b.keyCode)return this.isOpened()||this.showListBox("altKey"),!1}if(37==b.keyCode||39==b.keyCode)return!1;if(!b.altKey&&18!=b.keyCode&&!(b.keyCode>=33&&b.keyCode<=40||(b.ctrlKey||this.ctrlKey)&&88!=b.keyCode&&86!=b.keyCode)){var i=this.input.val();if(0==i.length&&!this.autoComplete)return this.listBox.searchString=this.input.val(),this.listBox.clearSelection(),this.hideListBox("search"),void(this.searchString=this.input.val());if(this.remoteAutoComplete){var j=this,k=function(){j.listBox.vScrollInstance.value=0};if(i.length>=j.minLength){if(!b.ctrlKey&&!b.altKey){if(j.searchString!=i){var l=j.listBoxContainer.jqxListBox("source");null==l&&j.listBoxContainer.jqxListBox({source:j.source}),this._searchTimer&&clearTimeout(this._searchTimer),13!=b.keyCode&&27!=b.keyCode&&(this._searchTimer=setTimeout(function(){if(k(),j.autoDropDownHeight&&(j.listBox.autoHeight=!0),j.searchString=j.input.val(),null==j.search)throw"'search' function is not defined";j.search(j.input.val())},this.remoteAutoCompleteDelay))}j.searchString=i}}else this._searchTimer&&clearTimeout(this._searchTimer),k(),j.searchString="",j.listBoxContainer.jqxListBox({source:null})}else{var j=this;if(i!==j.searchString){if("27"!=b.keyCode&&"13"!=b.keyCode){var m=this._updateItemsVisibility(i),n=m.matchItems,o=m.index;if(!this.autoComplete&&!this.removeAutoComplete&&(!this.multiSelect||this.multiSelect&&o>=0)){this.listBox.selectIndex(o);var p=this.listBox.isIndexInView(o);p?this.listBox._renderItems():this.listBox.ensureVisible(o)}this.autoComplete&&0===n.length&&this.hideListBox("search")}if("13"==b.keyCode){var q="block"==this.container.css("display");if(q&&!this.isanimating)return this.hideListBox("keyboard"),void(this._oldvalue=this.listBox.selectedValue)}else if("27"==b.keyCode){var q="block"==this.container.css("display");if(q&&!this.isanimating){if(s.multiSelect)s.input.val(""),s.listBox.selectedValue=null;else{var r=this.listBox.getVisibleItem(this._oldvalue);if(r){var s=this;setTimeout(function(){s.autoComplete&&s._updateItemsVisibility(""),s.listBox.selectIndex(r.index),s.renderSelection("api")},s.closeDelay)}else this.clearSelection()}return this.hideListBox("keyboard"),this.renderSelection("api"),b.preventDefault(),!1}}else{this.isOpened()||this.opening||b.ctrlKey||this.listBox.visibleItems&&this.listBox.visibleItems.length>0&&this.input.val()!=this.searchString&&void 0!=this.searchString&&o!=-1&&this.showListBox("search"),this.searchString=this.input.val(),""==this.searchString&&(this.listBox.itemsByValue[""]||(o=-1));var r=this.listBox.getVisibleItem(o);void 0!=r&&this._updateInputSelection()}}}}}},val:function(a){if(!this.input)return"";if("object"==typeof a||0==arguments.length){var b=this.getSelectedItem();return b?b.value:this.input.val()}var b=this.getItemByValue(a);return null!=b?this.selectItem(b):this.input.val(a),this.input.val()},focus:function(){var a=this,b=function(){a.input.focus();var b=a.input.val();a._setSelection(0,b.length)};b(),setTimeout(function(){b()},10)},_setSelection:function(a,b){try{if("selectionStart"in this.input[0])this.input[0].focus(),this.input[0].setSelectionRange(a,b);else{var c=this.input[0].createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}}catch(d){}},setContent:function(a){this.input.val(a)},_updateItemsVisibility:function(b){var c=this.getItems();if(void 0==c)return{index:-1,matchItem:new Array};var d=this,e=-1,f=new Array,g=0;a.each(c,function(c){var h="";if(!this.isGroup){h=this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem",h=h.toString();var i=!1;switch(d.searchMode){case"containsignorecase":i=a.jqx.string.containsIgnoreCase(h,b);break;case"contains":i=a.jqx.string.contains(h,b);break;case"equals":i=a.jqx.string.equals(h,b);break;case"equalsignorecase":i=a.jqx.string.equalsIgnoreCase(h,b);break;case"startswith":i=a.jqx.string.startsWith(h,b);break;case"startswithignorecase":i=a.jqx.string.startsWithIgnoreCase(h,b);break;case"endswith":i=a.jqx.string.endsWith(h,b);break;case"endswithignorecase":i=a.jqx.string.endsWithIgnoreCase(h,b)}if(d.autoComplete&&!i&&(this.visible=!1),i&&d.autoComplete&&(f[g++]=this,this.visible=!0,e=this.visibleIndex),""==b&&d.autoComplete&&(this.visible=!0,i=!1),d.multiSelect&&(this.disabled=!1,(d.selectedItems.indexOf(this.value)>=0||d._disabledItems.indexOf(this.value)>=0)&&(this.disabled=!0,i=!1)),d.multiSelect){if(i&&!d.autoComplete)return e===-1&&(e=this.visibleIndex),!0}else if(i&&!d.autoComplete)return e=this.visibleIndex,!1}}),this.listBox.searchString=b;var h=this,i=function(){if(h.multiSelect){for(var a=0,b=!1,c=null,d=0;d<h.listBox.items.length;d++)h.listBox.selectedIndexes[d]=-1,h.listBox.items[d].disabled||0==b&&(c=h.listBox.items[d],a=c.visibleIndex,b=!0);h.listBox.selectedIndex=-1,h.listBox.selectedIndex=a,h.listBox.selectedIndexes[a]=a,h.listBox.visibleItems.length>0&&c?h.listBox.selectedValue=c.value:h.listBox.selectedValue=null,h.listBox.ensureVisible(0)}};if(!this.autoComplete)return i(),{index:e,matchItems:f};this.listBox.renderedVisibleItems=new Array;var j=this.listBox.vScrollInstance.value;this.listBox.vScrollInstance.value=0,this.listBox.visibleItems=new Array,this.listBox._renderItems();var k=this.listBox.selectedValue,l=this.listBox.getItemByValue(k);if(this.multiSelect)i();else if(l)if(l.visible){this.listBox.selectedIndex=l.visibleIndex;for(var m=0;m<this.listBox.items.length;m++)this.listBox.selectedIndexes[m]=-1;this.listBox.selectedIndexes[l.visibleIndex]=l.visibleIndex}else{for(var m=0;m<this.listBox.items.length;m++)this.listBox.selectedIndexes[m]=-1;this.listBox.selectedIndex=-1}this.listBox._renderItems();var n=this.listBox._calculateVirtualSize().height;if(n<j&&(j=0,this.listBox.vScrollInstance.refresh()),this.autoDropDownHeight)this._disableSelection=!0,this.listBox.autoHeight!=this.autoDropDownHeight&&this.listBoxContainer.jqxListBox({autoHeight:this.autoDropDownHeight}),this.container.height(n+25),this.listBox.invalidate(),this._disableSelection=!1;else if(n<parseInt(this.dropDownHeight)){var o="hidden"==this.listBox.hScrollBar[0].style.visibility?0:20;this.listBox.height=o+n,this.container.height(n+25+o),this.listBox.invalidate()}else this.listBox.height=parseInt(this.dropDownHeight),this.container.height(parseInt(this.dropDownHeight)+25),this.listBox.invalidate();return this.listBox.vScrollInstance.setPosition(j),{index:e,matchItems:f}},findItems:function(b){var c=this.getItems(),d=this,e=0,f=new Array;return a.each(c,function(c){var g="";if(!this.isGroup){g=this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";var h=!1;switch(d.searchMode){case"containsignorecase":h=a.jqx.string.containsIgnoreCase(g,b);break;case"contains":h=a.jqx.string.contains(g,b);break;case"equals":h=a.jqx.string.equals(g,b);break;case"equalsignorecase":h=a.jqx.string.equalsIgnoreCase(g,b);break;case"startswith":h=a.jqx.string.startsWith(g,b);break;case"startswithignorecase":h=a.jqx.string.startsWithIgnoreCase(g,b);break;case"endswith":h=a.jqx.string.endsWith(g,b);break;case"endswithignorecase":h=a.jqx.string.endsWithIgnoreCase(g,b)}h&&(f[e++]=this)}}),f},_resetautocomplete:function(){a.each(this.listBox.items,function(a){this.visible=!0}),this.listBox.vScrollInstance.value=0,this.listBox._addItems(),this.listBox.autoHeight=!1,this.listBox.height=this.dropDownHeight,this.container.height(parseInt(this.dropDownHeight)+25),this.listBoxContainer.height(parseInt(this.dropDownHeight)),this.listBox._arrange(),this.listBox._addItems(),this.listBox._renderItems()},getItems:function(){var a=this.listBox.items;return a},getVisibleItems:function(){return this.listBox.getVisibleItems()},_setSize:function(){null!=this.width&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height);var b=!1;if(null!=this.width&&this.width.toString().indexOf("%")!=-1&&(b=!0,this.host.width(this.width)),null!=this.height&&this.height.toString().indexOf("%")!=-1&&(b=!0,this.host.height(this.height)),b){var c=this,d=this.host.width();"auto"!=this.dropDownWidth&&(d=this.dropDownWidth),this.listBoxContainer.jqxListBox({width:d}),this.container.width(parseInt(d)+25),this._arrange()}var c=this,e=function(){c.multiSelect&&c.host.height(c.height),c._arrange(),c.multiSelect&&c.host.height("auto")};a.jqx.utilities.resize(this.host,function(){e(),c.hideListBox("api")})},isOpened:function(){var b=this,c=a.data(document.body,"openedComboJQXListBox"+this.element.id);return"block"==this.container.css("display")&&(null!=c&&c==b.listBoxContainer)},_updateHandlers:function(){var b=this,c=!1;this.removeHandlers(),this.multiSelect&&(this.addHandler(this.dropdownlistContent,"click",function(a){return!a.target.href&&(b.input.focus(),void setTimeout(function(){b.input.focus()},10))}),this.addHandler(this.dropdownlistContent,"focus",function(a){return!a.target.href&&(b.input.focus(),void setTimeout(function(){b.input.focus()},10))})),this.touch||(this.host.parents()&&this.addHandler(this.host.parents(),"scroll.combobox"+this.element.id,function(a){var c=b.isOpened();c&&b.close()}),this.addHandler(this.host,"mouseenter",function(){!b.disabled&&b.enableHover&&(c=!0,b.host.addClass(b.toThemeProperty("jqx-combobox-state-hover")),b.dropdownlistArrowIcon.addClass(b.toThemeProperty("jqx-icon-arrow-down-hover")),b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-combobox-arrow-hover")),b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.host,"mouseleave",function(){!b.disabled&&b.enableHover&&(b.host.removeClass(b.toThemeProperty("jqx-combobox-state-hover")),b.dropdownlistArrowIcon.removeClass(b.toThemeProperty("jqx-icon-arrow-down-hover")),b.dropdownlistArrow.removeClass(b.toThemeProperty("jqx-combobox-arrow-hover")),b.dropdownlistArrow.removeClass(b.toThemeProperty("jqx-fill-state-hover")),c=!1)})),b.autoOpen&&(this.addHandler(this.host,"mouseenter",function(){var a=b.isOpened();!a&&b.autoOpen&&(b.open(),b.host.focus())}),this.addHandler(a(document),"mousemove."+b.id,function(a){var c=b.isOpened();if(c&&b.autoOpen){var d=b.host.coord(),e=d.top,f=d.left,g=b.container.coord(),h=g.left,i=g.top;canClose=!0,a.pageY>=e&&a.pageY<=e+b.host.height()+2&&a.pageX>=f&&a.pageX<f+b.host.width()&&(canClose=!1),a.pageY>=i&&a.pageY<=i+b.container.height()-20&&a.pageX>=h&&a.pageX<h+b.container.width()&&(canClose=!1),canClose&&b.close()}}));var d="mousedown";this.touch&&(d=a.jqx.mobile.getTouchEventName("touchstart"));var e=function(c){if(!b.disabled){var d="block"==b.container.css("display");if(!b.isanimating){if(d)return b.hideListBox("api"),a.jqx.mobile.isTouchDevice()||(b.input.focus(),setTimeout(function(){b.input.focus()},10)),!0;if(b.autoDropDownHeight){b.container.height(b.listBoxContainer.height()+25);var e=b.listBoxContainer.jqxListBox("autoHeight");e||(b.listBoxContainer.jqxListBox({autoHeight:b.autoDropDownHeight}),b.listBox._arrange(),b.listBox.ensureVisible(0),b.listBox._renderItems(),b.container.height(b.listBoxContainer.height()+25))}if(b.showListBox("api"),a.jqx.mobile.isTouchDevice())return!0;setTimeout(function(){b.input.focus()},10)}}};this.addHandler(this.dropdownlistArrow,d,function(a){e(a)}),this.addHandler(this.dropdownlistArrowIcon,d,function(a){}),this.addHandler(this.host,"focus",function(){b.focus()}),this.addHandler(this.input,"focus",function(a){return b.focused=!0,b.host.addClass(b.toThemeProperty("jqx-combobox-state-focus")),b.host.addClass(b.toThemeProperty("jqx-fill-state-focus")),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-combobox-content-focus")),a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),!1}),this.addHandler(this.input,"blur",function(){b.focused=!1,b.isOpened()||b.opening||("dropDownList"==b.selectionMode&&b._selectOldValue(),b.host.removeClass(b.toThemeProperty("jqx-combobox-state-focus")),b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus")),b.dropdownlistContent.removeClass(b.toThemeProperty("jqx-combobox-content-focus"))),b._searchTimer&&clearTimeout(b._searchTimer)}),this.addHandler(a(document),"mousedown."+this.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}),this.touch&&this.addHandler(a(document),a.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}),this.addHandler(this.host,"keydown",function(a){var c="block"==b.container.css("display");if(b.ctrlKey=a.ctrlKey,"none"==b.host.css("display"))return!0;if(("13"==a.keyCode||"9"==a.keyCode)&&c&&!b.isanimating){if(b.listBox.selectedIndex!=-1){b.renderSelection("mouse");var d=b.listBox.selectedIndex,e=b.listBox.getVisibleItem(d);e&&(b.listBox.selectedValue=e.value),b._setSelection(b.input.val().length,b.input.val().length),b.hideListBox("keyboard")}return"13"==a.keyCode&&(b._oldvalue=b.listBox.selectedValue),b.keyboardSelection||b._raiseEvent("2",{index:b.selectedIndex,type:"keyboard",item:b.getItem(b.selectedIndex)}),"9"==a.keyCode}if(115==a.keyCode)return b.isanimating||(b.isOpened()?b.isOpened()&&b.hideListBox("keyboard"):b.showListBox("keyboard")),!1;if(a.altKey&&"block"==b.host.css("display")&&(b.isanimating||(38==a.keyCode?b.isOpened()&&b.hideListBox("altKey"):40==a.keyCode&&(b.isOpened()||b.showListBox("altKey")))),("27"==a.keyCode||"9"==a.keyCode)&&b.isOpened()&&!b.isanimating){if("27"==a.keyCode)if(b.multiSelect)b.listBox.selectedValue=null,b.input.val("");else{var e=b.listBox.getItemByValue(b._oldvalue);e?setTimeout(function(){b.autoComplete&&b._updateItemsVisibility(""),b.listBox.selectIndex(e.index),b.renderSelection("api")},b.closeDelay):b.clearSelection()}return b.hideListBox("keyboard"),"9"==a.keyCode||(b.renderSelection("api"),a.preventDefault(),!1)}var f=a.keyCode;if(c&&!b.disabled&&8!=f)return b.listBox._handleKeyDown(a);if(!b.disabled&&!c){var f=a.keyCode;if(33==f||34==f||35==f||36==f||38==f||40==f)return b.listBox._handleKeyDown(a)}if(8===f&&b.multiSelect&&0===b.input.val().length){var g=b.selectedItems[b.selectedItems.length-1];return b.selectedItems.pop(),b._selectedItems.pop(),g&&(b._raiseEvent("3",{index:g.index,type:"keyboard",item:g}),b._raiseEvent("4",{index:g.index,type:"keyboard",item:g})),b.listBox.selectedValue=null,b.doMultiSelect(),!1}}),this.addHandler(this.listBoxContainer,"checkChange",function(a){b.renderSelection("mouse"),b._updateInputSelection(),b._raiseEvent(5,{label:a.args.label,value:a.args.value,checked:a.args.checked,item:a.args.item})}),this.addHandler(this.listBoxContainer,"select",function(a){if(!b.disabled&&("keyboard"!=a.args.type||b.keyboardSelection)&&(b.renderSelection(a.args.type),b.multiSelect||b._raiseEvent("2",{index:a.args.index,type:a.args.type,item:a.args.item}),"mouse"==a.args.type&&(b._oldvalue=b.listBox.selectedValue,!b.checkboxes))){if(b.hideListBox("mouse"),b.touch)return!1;b.input.focus()}}),null!=this.listBox&&null!=this.listBox.content&&this.addHandler(this.listBox.content,"click",function(a){if(!b.disabled){if(b.listBox.itemswrapper&&a.target===b.listBox.itemswrapper[0])return!0;if(a.target&&a.target.className&&a.target.className.indexOf("jqx-fill-state-disabled")>=0)return!0;b.renderSelection("mouse"),b._oldvalue=b.listBox.selectedValue,b.touch||b.ishiding||b.checkboxes||(b.hideListBox("mouse"),b.input.focus()),b.touch===!0&&(b.checkboxes||b.hideListBox("mouse"))}})},_selectOldValue:function(){var a=this;if(a.listBox.selectedIndex==-1)if(a.multiSelect)a.listBox.selectedValue=null,a.input.val("");else{var b=a.listBox.getItemByValue(a._oldvalue);b?setTimeout(function(){a.autoComplete&&a._updateItemsVisibility(""),a.listBox.selectIndex(b.index),a.renderSelection("api")},a.closeDelay):(a.clearSelection(),a.listBox.selectIndex(0),a.renderSelection("api"))}else a.renderSelection("api")},removeHandlers:function(){var b=this;if(null!=this.dropdownlistWrapper&&this.removeHandler(this.dropdownlistWrapper,"mousedown"),this.dropdownlistContent&&(this.removeHandler(this.dropdownlistContent,"click"),this.removeHandler(this.dropdownlistContent,"focus")),this.removeHandler(this.host,"keydown"),this.removeHandler(this.host,"focus"),null!=this.input&&(this.removeHandler(this.input,"focus"),this.removeHandler(this.input,"blur")),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave"),this.removeHandler(a(document),"mousemove."+b.id),this.listBoxContainer&&(this.removeHandler(this.listBoxContainer,"checkChange"),this.removeHandler(this.listBoxContainer,"select")),this.host.parents()&&this.removeHandler(this.host.parents(),"scroll.combobox"+this.element.id),this.dropdownlistArrowIcon&&this.dropdownlistArrow){var c="mousedown";this.touch&&(c=a.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.dropdownlistArrowIcon,c),this.removeHandler(this.dropdownlistArrow,c)}},getItem:function(a){var b=this.listBox.getItem(a);return b},getItemByValue:function(a){var b=this.listBox.getItemByValue(a);return b},getVisibleItem:function(a){var b=this.listBox.getVisibleItem(a);return b},renderSelection:function(b){if(void 0!=b&&"none"!=b&&this._disableSelection!==!0&&null!=this.listBox&&!this.multiSelect){var c=this.listBox.visibleItems[this.listBox.selectedIndex];if(this.autoComplete&&!this.checkboxes&&void 0!==this.listBox.selectedValue)var c=this.getItemByValue(this.listBox.selectedValue);if(this.checkboxes){var d=this.getCheckedItems();c=null!=d&&d.length>0?d[0]:null}if(null==c){var e=a.jqx.browser.msie&&a.jqx.browser.version<8;return this.input.val(""),e||this.input.attr("placeholder",this.placeHolder),void this._updateInputSelection()}this.selectedIndex=this.listBox.selectedIndex;var f=a("<span></span>");void 0!=c.label&&null!=c.label&&c.label.toString().length>0?a.jqx.utilities.html(f,c.label):void 0!=c.value&&null!=c.value&&c.value.toString().length>0?a.jqx.utilities.html(f,c.value):void 0!=c.title&&null!=c.title&&c.title.toString().length>0?a.jqx.utilities.html(f,c.title):a.jqx.utilities.html(f,this.emptyString);f.outerHeight();if(this.checkboxes){for(var g=this.getCheckedItems(),h="",i=0;i<g.length;i++)h+=i==g.length-1?g[i].label:g[i].label+", ";this.input.val(h)}else this.input.val(f.text());if(f.remove(),this.renderSelectedItem){var j=this.renderSelectedItem(this.listBox.selectedIndex,c);void 0!=j&&this.input.val(j)}this._updateInputSelection(),this.listBox&&this.listBox._activeElement&&a.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id)}},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source}),this.renderSelection("mouse"),null==this.source&&this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null}),this.clearSelection()},clearSelection:function(a){this.selectedIndex=-1,this.listBox.clearSelection(),this.input.val(""),this.multiSelect&&(this.listBox.selectedValue="",this.selectedItems=new Array,this._selectedItems=new Array,this.doMultiSelect(!1))},unselectIndex:function(a,b){if(!isNaN(a)&&(this.autoComplete&&this._updateItemsVisibility(""),this.listBox.unselectIndex(a,b),this.renderSelection("mouse"),this.multiSelect)){if(a>=0){var c=this.getItem(a),d=this.selectedItems.indexOf(c.value);d>=0&&(c.value===this.listBox.selectedValue&&(this.listBox.selectedValue=null),this.selectedItems.splice(d,1),this._selectedItems.splice(d,1))}this.doMultiSelect(!1)}},selectIndex:function(a,b,c,d){this.autoComplete&&this._updateItemsVisibility(""),this.listBox.selectIndex(a,b,c,d),this.renderSelection("mouse"),this.selectedIndex=a,this.multiSelect&&this.doMultiSelect()},selectItem:function(a){this.autoComplete&&this._updateItemsVisibility(""),void 0!=this.listBox&&(this.listBox.selectedIndex=-1,this.listBox.selectItem(a),this.selectedIndex=this.listBox.selectedIndex,this.renderSelection("mouse"),this.multiSelect&&this.doMultiSelect(!1))},unselectItem:function(a){if(this.autoComplete&&this._updateItemsVisibility(""),void 0!=this.listBox&&(this.listBox.unselectItem(a),this.renderSelection("mouse"),this.multiSelect)){var b=this.getItemByValue(a);if(b){var c=this.selectedItems.indexOf(b.value);c>=0&&(b.value===this.listBox.selectedValue&&(this.listBox.selectedValue=null),this.selectedItems.splice(c,1),this._selectedItems.splice(c,1))}this.doMultiSelect(!1)}},checkItem:function(a){this.autoComplete&&this._updateItemsVisibility(""),void 0!=this.listBox&&this.listBox.checkItem(a)},uncheckItem:function(a){this.autoComplete&&this._updateItemsVisibility(""),void 0!=this.listBox&&this.listBox.uncheckItem(a)},indeterminateItem:function(a){this.autoComplete&&this._updateItemsVisibility(""),void 0!=this.listBox&&this.listBox.indeterminateItem(a)},getSelectedValue:function(){return this.listBox.selectedValue},getSelectedIndex:function(){return this.listBox.selectedIndex;
},getSelectedItem:function(){return this.getVisibleItem(this.listBox.selectedIndex)},getSelectedItems:function(){var b=new Array,c=this;return a.each(this.selectedItems,function(){var a=c.getItemByValue(this);if(a)b.push(a);else{var a=c._selectedItems[this];a&&b.push(a)}}),b},getCheckedItems:function(){return this.listBox.getCheckedItems()},checkIndex:function(a){this.listBox.checkIndex(a)},uncheckIndex:function(a){this.listBox.uncheckIndex(a)},indeterminateIndex:function(a){this.listBox.indeterminateIndex(a)},checkAll:function(){this.listBox.checkAll(),this.renderSelection("mouse")},uncheckAll:function(){this.listBox.uncheckAll(),this.renderSelection("mouse")},insertAt:function(a,b){return null!=a&&this.listBox.insertAt(a,b)},addItem:function(a){return this.listBox.addItem(a)},removeAt:function(a){var b=this.listBox.removeAt(a);return this.renderSelection("mouse"),b},removeItem:function(a){var b=this.listBox.removeItem(a);return this.renderSelection("mouse"),b},updateItem:function(a,b){var c=this.listBox.updateItem(a,b);return this.renderSelection("mouse"),c},updateAt:function(a,b){var c=this.listBox.updateAt(a,b);return this.renderSelection("mouse"),c},ensureVisible:function(a){return this.listBox.ensureVisible(a)},disableAt:function(a){var b=this.getVisibleItem(a);return b&&this._disabledItems.push(b.value),this.listBox.disableAt(a)},enableAt:function(a){var b=this.getVisibleItem(a);return b&&this._disabledItems.splice(this._disabledItems.indexOf(b.value),1),this.listBox.enableAt(a)},disableItem:function(a){var a=this.getVisibleItem(a);return a&&this._disabledItems.push(a.value),this.listBox.disableItem(a)},enableItem:function(a){var a=this.getVisibleItem(a);return a&&this._disabledItems.splice(this._disabledItems.indexOf(a.value),1),this.listBox.enableItem(a)},_findPos:function(b){for(;b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b.nextSibling;if(b){var c=a(b).coord(!0);return[c.left,c.top]}},testOffset:function(b,c,d){var e=b.outerWidth(),f=b.outerHeight(),g=a(window).width()+a(window).scrollLeft(),h=a(window).height()+a(window).scrollTop();if(c.left+e>g&&e>this.host.width()){var i=this.host.coord().left,j=e-this.host.width();c.left=i-j+2}return c.left<0&&(c.left=parseInt(this.host.coord().left)+"px"),c.top-=Math.min(c.top,c.top+f>h&&h>f?Math.abs(f+d+23):0),c},open:function(){this.isOpened()||this.opening||this.showListBox("api")},close:function(){this.isOpened()&&this.hideListBox("api")},_getBodyOffset:function(){var b=0,c=0;return"0px"!=a("body").css("border-top-width")&&(b=parseInt(a("body").css("border-top-width")),isNaN(b)&&(b=0)),"0px"!=a("body").css("border-left-width")&&(c=parseInt(a("body").css("border-left-width")),isNaN(c)&&(c=0)),{left:c,top:b}},showListBox:function(b){if(!this.listBox.items||0!=this.listBox.items.length){if("search"!=b||this.autoComplete||this.remoteAutoComplete||this.autoDropDownHeight&&this.container.height(this.listBoxContainer.height()+25),(this.autoComplete||this.multiSelect&&!this.remoteAutoComplete)&&"search"!=b&&(this._updateItemsVisibility(""),this.multiSelect))for(var c=this.getVisibleItems(),d=0;d<c.length;d++)if(!c[d].disabled){this.ensureVisible(d);break}if(this.remoteAutoComplete&&this.listBox.clearSelection(),"search"!=b&&(this._oldvalue=this.listBox.selectedValue),a.jqx.aria(this,"aria-expanded",!0),"auto"==this.dropDownWidth&&null!=this.width&&this.width.indexOf&&this.width.indexOf("%")!=-1&&this.listBox.host.width()!=this.host.width()){var e=this.host.width();this.listBoxContainer.jqxListBox({width:e}),this.container.width(parseInt(e)+25)}var f,g=this,h=this.listBoxContainer,i=this.listBox,j=(a(window).scrollTop(),a(window).scrollLeft(),parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px"),k=parseInt(Math.round(this.host.coord(!0).left));f=k+"px";var l=a.jqx.mobile.isSafariMobileBrowser()||a.jqx.mobile.isWindowsPhone();this.ishiding=!1;var m=a.jqx.utilities.hasTransform(this.host);(m||null!=l&&l)&&(f=a.jqx.mobile.getLeftPos(this.element),j=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),"0px"!=a("body").css("border-top-width")&&(j=parseInt(j)-this._getBodyOffset().top+"px"),"0px"!=a("body").css("border-left-width")&&(f=parseInt(f)-this._getBodyOffset().left+"px")),this.host.addClass(this.toThemeProperty("jqx-combobox-state-selected")),this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-selected")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.host.addClass(this.toThemeProperty("jqx-combobox-state-focus")),this.host.addClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-focus")),this.container.css("left",f),this.container.css("top",j),i._arrange();var n=!1;if("right"==this.dropDownHorizontalAlignment||this.rtl){var o=this.container.outerWidth(),p=Math.abs(o-this.host.width());o>this.host.width()?this.container.css("left",25+parseInt(Math.round(k))-p+"px"):this.container.css("left",25+parseInt(Math.round(k))+p+"px")}if(this.enableBrowserBoundsDetection){var q=this.testOffset(h,{left:parseInt(this.container.css("left")),top:parseInt(j)},parseInt(this.host.outerHeight()));parseInt(this.container.css("top"))!=q.top?(n=!0,h.css("top",23),h.addClass(this.toThemeProperty("jqx-popup-up"))):h.css("top",0),this.container.css("top",q.top),this.container.css("top",q.top),parseInt(this.container.css("left"))!=q.left&&this.container.css("left",q.left)}if("none"==this.animationType)this.container.css("display","block"),a.data(document.body,"openedComboJQXListBoxParent",g),a.data(document.body,"openedComboJQXListBox"+g.element.id,h),h.css("margin-top",0),h.css("opacity",1);else{this.container.css("display","block");var r=h.outerHeight();h.stop(),"fade"==this.animationType?(h.css("margin-top",0),h.css("opacity",0),h.animate({opacity:1},this.openDelay,function(){g.isanimating=!1,g.opening=!1,a.data(document.body,"openedComboJQXListBoxParent",g),a.data(document.body,"openedComboJQXListBox"+g.element.id,h)})):(h.css("opacity",1),n?h.css("margin-top",r):h.css("margin-top",-r),this.isanimating=!0,this.opening=!0,h.animate({"margin-top":0},this.openDelay,function(){g.isanimating=!1,g.opening=!1,a.data(document.body,"openedComboJQXListBoxParent",g),a.data(document.body,"openedComboJQXListBox"+g.element.id,h)}))}i._renderItems(),n?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),h.addClass(this.toThemeProperty("jqx-rc-b-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-t-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),h.addClass(this.toThemeProperty("jqx-rc-t-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-b-expanded"))),h.addClass(this.toThemeProperty("jqx-fill-state-focus")),this._raiseEvent("0",i)}},doMultiSelect:function(b){this.checkboxes&&(this.multiSelect=!1);var c=this;if(!this.multiSelect){var d=c.dropdownlistContent.find(".jqx-button"),e="mousedown";return this.touch&&(e=a.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(d,e),this.removeHandler(d.find(".jqx-icon-close"),e),d.remove(),this.selectedItems=new Array,void(this._selectedItems=new Array)}if(this.validateSelection){var f=this.validateSelection(this.listBox.selectedValue);if(!f)return}this.selectedItems;if(this.listBox.selectedValue){if(this.selectedItems.indexOf(this.listBox.selectedValue)===-1){var g=this.getItemByValue(this.listBox.selectedValue);g&&g.visible&&(this.selectedItems.push(this.listBox.selectedValue),this._selectedItems.push(g),this._raiseEvent("2",{index:g.index,item:g}),this._raiseEvent("4",{index:g.index,item:g}))}this.listBox.selectedIndex=0}var h=this.listBox.items;if(h){for(var i=0;i<h.length;i++)h[i].disabled=!1,(this.selectedItems.indexOf(h[i].value)>=0||this._disabledItems.indexOf(this.value)>=0)&&(h[i].disabled=!0);this.listBox._renderItems(),this.searchString="",this.input.val("");var h="",e="mousedown",d=c.dropdownlistContent.find(".jqx-button");this.touch&&(e=a.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(d,e),this.removeHandler(d.find(".jqx-icon-close"),e),d.remove(),c.input.detach(),this.selectedItems.length>0?(c.input.css("width","25px"),c.input.attr("placeholder","")):(c.input.css("width","100%"),c.input.attr("placeholder",this.placeHolder)),a.each(this.selectedItems,function(b){var d=c.getItemByValue(this);d&&!c.remoteAutoComplete||(d=c._selectedItems[b]);var e=a('<div style="overflow: hidden; float: left;"></div>');if(e.addClass(c.toThemeProperty("jqx-button")),e.addClass(c.toThemeProperty("jqx-combobox-multi-item")),e.addClass(c.toThemeProperty("jqx-fill-state-normal")),e.addClass(c.toThemeProperty("jqx-rc-all")),d){var f=d.label;""==e[0].innerHTML&&(e[0].innerHTML='<a data-value="'+d.value+'" style="float: left;" href="#">'+f+"</a>"),c.rtl&&(e[0].innerHTML='<a data-value="'+d.value+'" style="float: right;" href="#">'+f+"</a>");var g=c.rtl?"left":"right",h='<div style="position: relative; overflow: hidden; float: '+g+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+c.toThemeProperty("jqx-icon-close")+'"></div></div>';if(a.jqx.browser.msie&&a.jqx.browser.version<8&&(h='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+c.toThemeProperty("jqx-icon-close")+'"></div></div>'),c.rtl){var h='<div style="position: relative; overflow: hidden; float: '+g+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+c.toThemeProperty("jqx-icon-close")+'"></div></div>';a.jqx.browser.msie&&a.jqx.browser.version<8&&(h='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+c.toThemeProperty("jqx-icon-close")+'"></div></div>')}e[0].innerHTML+=h}else""==e[0].innerHTML&&(e[0].innerHTML='<a href="#"></a>');c.dropdownlistContent.append(e)}),c.dropdownlistContent.append(c.input),c.input.val(""),b!==!1&&(c.input.focus(),setTimeout(function(){c.input.focus()},10));var d=c.dropdownlistContent.find(".jqx-button");this.touchMode===!0&&(e="mousedown"),this.addHandler(d,e,function(b){if(b.target.className.indexOf("jqx-icon-close")>=0)return!0;if(c.disabled)return!0;var d=a(b.target).attr("data-value"),e=c.getItemByValue(d);return e&&(c.listBox.selectedValue=null,c.listBox.clearSelection()),c.listBox.scrollTo(0,0),c.open(),b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),!1}),this.addHandler(d.find(".jqx-icon-close"),e,function(b){if(!c.disabled){var d=a(b.target).parent().parent().find("a").attr("data-value"),e=c.getItemByValue(d);if(e){c.listBox.selectedValue=null;var f=c.selectedItems.indexOf(d);if(f>=0)c.selectedItems.splice(f,1),c._selectedItems.splice(f,1),c._raiseEvent("3",{index:e.index,type:"mouse",item:e}),c._raiseEvent("4",{index:e.index,type:"mouse",item:e}),c.doMultiSelect();else for(var g=0;g<c.selectedItems.length;g++){var h=c.selectedItems[g];if(h==d){c.selectedItems.splice(g,1),c._selectedItems.splice(g,1),c._raiseEvent("3",{index:e.index,type:"mouse",item:e}),c._raiseEvent("4",{index:e.index,type:"mouse",item:e}),c.doMultiSelect();break}}}}}),c.dropdownlistArrow.height(this.host.height()),c._updateInputSelection()}},hideListBox:function(b){var c=this.listBoxContainer,d=this.listBox,e=this.container;if("none"!=this.container[0].style.display){a.jqx.aria(this,"aria-expanded",!1),"keyboard"!=b&&"mouse"!=b||(this.listBox.searchString=""),("keyboard"==b||"mouse"==b&&this.multiSelect)&&this.doMultiSelect();var f=this;if(a.data(document.body,"openedComboJQXListBox"+this.element.id,null),"none"==this.animationType)this.opening=!1,this.container.css("display","none");else if(!this.ishiding){var g=c.outerHeight();c.css("margin-top",0),c.stop(),this.opening=!1,this.isanimating=!0;var h=-g;parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(h=g),"fade"==this.animationType?(c.css({opacity:1}),c.animate({opacity:0},this.closeDelay,function(){f.isanimating=!1,e.css("display","none"),f.ishiding=!1})):c.animate({"margin-top":h},this.closeDelay,function(){f.isanimating=!1,e.css("display","none"),f.ishiding=!1})}this.ishiding=!0,this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected")),this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.focused||(this.host.removeClass(this.toThemeProperty("jqx-combobox-state-focus")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistContent.removeClass(this.toThemeProperty("jqx-combobox-content-focus"))),this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),c.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),c.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),c.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),this._raiseEvent("1",d)}},closeOpenedListBox:function(b){var c=b.data.me,d=a(b.target),e=b.data.listbox;if(null==e)return!0;if(!a(b.target).ischildof(b.data.me.host)){var f=!1;return a.each(d.parents(),function(){if("undefined"!=this.className&&this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1)return f=!0,!1;if(this.className.indexOf("jqx-combobox")!=-1)return c.element.id==this.id&&(f=!0),!1}}),null==e||f||c.isOpened()&&(c.hideListBox("api"),c.input.blur()),!0}},loadFromSelect:function(a){this.listBox.loadFromSelect(a)},refresh:function(a){this._setSize(),this._arrange(),this.listBox&&this.renderSelection()},resize:function(){this._setSize(),this._arrange()},_arrange:function(){var b=parseInt(this.host.width()),c=parseInt(this.host.height()),d=this.arrowSize,e=this.arrowSize,f=1;this.showArrow||(e=0,d=0,this.dropdownlistArrow.hide(),f=0,this.host.css("cursor","arrow"));var g=b-e-1*f;g>0&&(this.dropdownlistContent[0].style.width=g+"px"),this.rtl&&(this.dropdownlistContent[0].style.width=-1+g+"px"),this.dropdownlistContent[0].style.height=c+"px",this.dropdownlistContent[0].style.left="0px",this.dropdownlistContent[0].style.top="0px",this.dropdownlistArrow[0].style.width=e+1+"px",this.dropdownlistArrow[0].style.height=c+"px",this.dropdownlistArrow[0].style.left=1+g+"px",this.input[0].style.width="100%";var h=this.input.height();0==h&&(h=parseInt(this.input.css("font-size"))+3),this.input[0].className.indexOf("jqx-rc-all")==-1&&this.input.addClass(this.toThemeProperty("jqx-rc-all"));var i=parseInt(c)/2-parseInt(h)/2;if(i>0&&(this.input[0].style.marginTop=parseInt(i)+"px"),this.rtl&&(this.dropdownlistArrow.css("left","0px"),this.dropdownlistContent.css("left",this.dropdownlistArrow.width()),a.jqx.browser.msie&&a.jqx.browser.version<=8&&this.dropdownlistContent.css("left",1+this.dropdownlistArrow.width())),this.multiSelect){this.input.css("float","left"),this.dropdownlistWrapper.parent().css("height","auto"),this.dropdownlistContent.css("height","auto"),this.dropdownlistWrapper.css("height","auto"),this.dropdownlistContent.css("position","relative"),this.dropdownlistContent.css("cursor","text"),this.host.css("height","auto"),this.host.css("min-height",this.height),this.dropdownlistContent.css("min-height",this.height);var c=parseInt(this.host.height());this.dropdownlistArrow.height(c);var j=parseInt(this.host.css("min-height")),i=parseInt(j)/2-parseInt(h)/2;i>0&&this.input.css("margin-top",i)}},destroy:function(){this.source&&this.source.unbindBindingUpdate&&(this.source.unbindBindingUpdate(this.element.id),this.source.unbindBindingUpdate(this.listBoxContainer[0].id),this.source.unbindDownloadComplete(this.element.id),this.source.unbindDownloadComplete(this.listBoxContainer[0].id)),a.jqx.utilities.resize(this.host,null,!0),this.removeHandler(this.listBoxContainer,"select"),this.removeHandler(this.listBoxContainer,"unselect"),this.removeHandler(this.listBoxContainer,"change"),this.removeHandler(this.listBoxContainer,"bindingComplete"),this.removeHandler(this.dropdownlistWrapper,"selectstart"),this.removeHandler(this.dropdownlistWrapper,"mousedown"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.listBoxContainer,"select"),this.removeHandler(this.listBox.content,"click"),this.removeHandlers(),this.removeHandler(this.input,"keyup.textchange"),this.listBoxContainer.jqxListBox("destroy"),this.listBoxContainer.remove(),this.host.removeClass(),this.removeHandler(a(document),"mousedown."+this.id,this.closeOpenedListBox),this.touch&&this.removeHandler(a(document),a.jqx.mobile.getTouchEventName("touchstart")+"."+this.id),this.cinput.remove(),delete this.cinput,this.dropdownlistArrow.remove(),delete this.dropdownlistArrow,this.dropdownlistArrowIcon.remove(),delete this.dropdownlistArrowIcon,delete this.dropdownlistWrapper,delete this.listBoxContainer,delete this.input,delete this.dropdownlistContent,delete this.comboStructure,this.container.remove(),delete this.listBox,delete this.container;var b=a.data(this.element,"jqxComboBox");b&&delete b.instance,this.host.removeData(),this.host.remove(),delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_raiseEvent:function(a,b){void 0==b&&(b={owner:null});var c=this.events[a];args=b,args.owner=this;var d=new jQuery.Event(c);d.owner=this,2!=a&&3!=a&&4!=a&&5!=a||(d.args=b);var e=this.host.trigger(d);return e},propertyChangedHandler:function(b,c,d,e){if(void 0!=b.isInitialized&&0!=b.isInitialized){if("itemHeight"==c&&b.listBoxContainer.jqxListBox({itemHeight:e}),"renderSelectedItem"==c&&b.renderSelection("mouse"),"renderer"==c&&b.listBoxContainer.jqxListBox({renderer:e}),"enableSelection"==c&&b.listBoxContainer.jqxListBox({enableSelection:e}),"enableHover"==c&&b.listBoxContainer.jqxListBox({enableHover:e}),"touchMode"===c&&(b.listBoxContainer.jqxListBox({touchMode:e}),b.touch=a.jqx.mobile.isTouchDevice(),b.touchMode===!0&&(b.touch=!0),b._updateHandlers()),"multiSelect"==c&&(e?b.doMultiSelect(!1):(b.doMultiSelect(!1),b.dropdownlistWrapper.parent().css("height","100%"),b.dropdownlistContent.css("height","100"),b.dropdownlistWrapper.css("height","100"),b.dropdownlistContent.css("position","relative"),b.host.css("min-height",null),b._setSize(),b._arrange())),"showArrow"==c&&(b._arrange(),b.multiSelect&&b.doMultiSelect(!1)),"popupZIndex"==c&&b.listBoxContainer.css({zIndex:b.popupZIndex}),"promptText"==c&&(b.placeHolder=e),"autoOpen"==c&&b._updateHandlers(),"renderer"==c&&(b.listBox.renderer=b.renderer),"itemHeight"==c&&(b.listBox.itemHeight=e),"source"==c&&(b.input.val(""),b.listBoxContainer.jqxListBox({source:b.source}),b.renderSelection("mouse"),null==b.source&&b.clearSelection(),b.multiSelect&&(b.selectedItems=new Array,b._selectedItems=new Array,b.doMultiSelect(!1))),"rtl"==c&&(e?(b.dropdownlistArrow.css("float","left"),b.dropdownlistContent.css("float","right")):(b.dropdownlistArrow.css("float","right"),b.dropdownlistContent.css("float","left")),b.listBoxContainer.jqxListBox({rtl:b.rtl})),"displayMember"!=c&&"valueMember"!=c||(b.listBoxContainer.jqxListBox({displayMember:b.displayMember,valueMember:b.valueMember}),b.renderSelection("mouse")),"autoDropDownHeight"==c&&(b.listBoxContainer.jqxListBox({autoHeight:b.autoDropDownHeight}),b.autoDropDownHeight?b.container.height(b.listBoxContainer.height()+25):(b.listBoxContainer.jqxListBox({height:b.dropDownHeight}),b.container.height(parseInt(b.dropDownHeight)+25)),b.listBox._arrange(),b.listBox._updatescrollbars()),"dropDownHeight"==c&&(b.autoDropDownHeight||(b.listBoxContainer.jqxListBox({height:b.dropDownHeight}),b.container.height(parseInt(b.dropDownHeight)+25))),"dropDownWidth"==c||"scrollBarSize"==c){var f=b.width;"auto"!=b.dropDownWidth&&(f=b.dropDownWidth),b.listBoxContainer.jqxListBox({width:f,scrollBarSize:b.scrollBarSize}),b.container.width(parseInt(f)+25)}if("autoComplete"==c&&b._resetautocomplete(),"checkboxes"==c&&(b.listBoxContainer.jqxListBox({checkboxes:b.checkboxes}),b.checkboxes?(b.input.attr("readonly",!0),a.jqx.aria(b,"aria-readonly",!0)):a.jqx.aria(b,"aria-readonly",!1)),"theme"==c&&null!=e&&(b.listBoxContainer.jqxListBox({theme:e}),b.listBoxContainer.addClass(b.toThemeProperty("jqx-popup")),a.jqx.browser.msie&&b.listBoxContainer.addClass(b.toThemeProperty("jqx-noshadow")),b.dropdownlistContent.removeClass(),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-combobox-content")),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-widget-content")),b.input.removeClass(),b.input.addClass(b.toThemeProperty("jqx-combobox-input")),b.input.addClass(this.toThemeProperty("jqx-widget-content")),b.host.removeClass(),b.host.addClass(b.toThemeProperty("jqx-combobox-state-normal")),b.host.addClass(b.toThemeProperty("jqx-rc-all")),b.host.addClass(b.toThemeProperty("jqx-widget")),b.host.addClass(b.toThemeProperty("jqx-widget-content")),b.dropdownlistArrow.removeClass(),b.dropdownlistArrowIcon.addClass(b.toThemeProperty("jqx-icon-arrow-down")),b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-combobox-arrow-normal")),b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-fill-state-normal"))),"rtl"==c&&(b.render(),b.refresh()),"width"==c||"height"==c){if(b._setSize(),"width"==c&&"auto"==b.dropDownWidth){var f=b.host.width();b.listBoxContainer.jqxListBox({width:f}),b.container.width(parseInt(f)+25)}b._arrange()}"selectedIndex"==c&&(b.listBox.selectIndex(e),b.renderSelection("mouse"))}}})}(jQuery);