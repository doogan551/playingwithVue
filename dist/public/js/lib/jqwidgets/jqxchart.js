!function(a){a.jqx.jqxWidget("jqxChart","",{}),a.extend(a.jqx._jqxChart.prototype,{defineInstance:function(){var b={title:"Title",description:"Description",source:[],seriesGroups:[],categoryAxis:null,xAxis:{},renderEngine:"",enableAnimations:!0,enableAxisTextAnimation:!1,backgroundImage:"",background:"#FFFFFF",padding:{left:5,top:5,right:5,bottom:5},backgroundColor:"#FFFFFF",showBorderLine:!0,borderLineWidth:1,borderLineColor:null,borderColor:null,titlePadding:{left:5,top:5,right:5,bottom:10},showLegend:!0,legendLayout:null,enabled:!0,colorScheme:"scheme01",animationDuration:500,showToolTips:!0,toolTipShowDelay:500,toolTipDelay:500,toolTipHideDelay:4e3,toolTipFormatFunction:null,columnSeriesOverlap:!1,rtl:!1,legendPosition:null,greyScale:!1,axisPadding:5,enableCrosshairs:!1,crosshairsColor:"#888888",crosshairsDashStyle:"2,2",crosshairsLineWidth:1,enableEvents:!0,_itemsToggleState:[],_isToggleRefresh:!1,drawBefore:null,draw:null};a.extend(!0,this,b)},_touchEvents:{mousedown:a.jqx.mobile.getTouchEventName("touchstart"),click:a.jqx.mobile.getTouchEventName("touchstart"),mouseup:a.jqx.mobile.getTouchEventName("touchend"),mousemove:a.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave"},_getEvent:function(a){return this._isTouchDevice?this._touchEvents[a]:a},createInstance:function(b){if(!a.jqx.dataAdapter)throw"jqxdata.js is not loaded";var c=this;c._refreshOnDownloadComlete(),c._isTouchDevice=a.jqx.mobile.isTouchDevice(),c.host.on(c._getEvent("mousemove"),function(b){if(0!=c.enabled){b.preventDefault();var d=b.pageX||b.clientX||b.screenX,e=b.pageY||b.clientY||b.screenY;if(c._isTouchDevice){var f=a.jqx.position(b);d=f.left,e=f.top}var f=c.host.offset();d-=f.left,e-=f.top,c.onmousemove(d,e)}}),c.addHandler(c.host,c._getEvent("mouseleave"),function(a){if(0!=c.enabled){var b=c._mouseX,d=c._mouseY,e=c._plotRect;e&&b>=e.x&&b<=e.x+e.width&&d>=e.y&&d<=e.y+e.height||(c._cancelTooltipTimer(),c._hideToolTip(0),c._unselect())}}),c.addHandler(c.host,"click",function(a){0!=c.enabled&&(!isNaN(c._lastClickTs)&&(new Date).valueOf()-c._lastClickTs<100||(this._hostClickTimer=setTimeout(function(){if(c._isTouchDevice||(c._cancelTooltipTimer(),c._hideToolTip(),c._unselect()),c._pointMarker&&c._pointMarker.element){var a=c.seriesGroups[c._pointMarker.gidx],b=a.series[c._pointMarker.sidx];c._raiseItemEvent("click",a,b,c._pointMarker.iidx)}},100)))});var d=c.element.style;if(d){var e=!1;null!=d.width&&(e|=d.width.toString().indexOf("%")!=-1),null!=d.height&&(e|=d.height.toString().indexOf("%")!=-1),e&&a(window).resize(function(){c.timer&&clearTimeout(c.timer);var b=a.jqx.browser.msie?200:1;c.timer=setTimeout(function(){var a=c.enableAnimations;c.enableAnimations=!1,c.refresh(),c.enableAnimations=a},b)})}},_refreshOnDownloadComlete:function(){var b=this,c=this.source;if(c instanceof a.jqx.dataAdapter){var d=c._options;(void 0==d||void 0!=d&&!d.autoBind)&&(c.autoSync=!1,c.dataBind());var e=this.element.id;if(0==c.records.length){var f=function(){b.ready&&b.ready(),b.refresh()};c.unbindDownloadComplete(e),c.bindDownloadComplete(e,f)}else b.ready&&b.ready();c.unbindBindingUpdate(e),c.bindBindingUpdate(e,function(){b.refresh()})}},propertyChangedHandler:function(a,b,c,d){void 0!=this.isInitialized&&0!=this.isInitialized&&("source"==b&&this._refreshOnDownloadComlete(),this.refresh())},_initRenderer:function(b){if(!a.jqx.createRenderer)throw"Please include a reference to jqxdraw.js";return a.jqx.createRenderer(this,b)},_internalRefresh:function(){var b=this;if(!a.jqx.isHidden(b.host)){b._stopAnimations(),b.renderer&&(b._isToggleRefresh||b._isUpdate)||(b.host.empty(),b._ttEl=void 0,b._initRenderer(b.host));var c=b.renderer;if(c){var d=c.getRect();b._render({x:1,y:1,width:d.width,height:d.height}),c instanceof a.jqx.HTML5Renderer&&c.refresh(),b._isUpdate=!1}}},saveAsPNG:function(a,b,c){return this._saveAsImage("png",a,b,c)},saveAsJPEG:function(a,b,c){return this._saveAsImage("jpeg",a,b,c)},_saveAsImage:function(b,c,d,e){return a.jqx._widgetToImage(this,b,c,d,e)},refresh:function(){this._internalRefresh()},update:function(){this._isUpdate=!0,this._internalRefresh()},_seriesTypes:["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","rangearea","splinerangearea","steprangearea","column","stackedcolumn","stackedcolumn100","rangecolumn","scatter","stackedscatter","stackedscatter100","bubble","stackedbubble","stackedbubble100","pie","donut"],_render:function(b){var c=this,d=c.renderer;c._colorsCache.clear(),!c._isToggleRefresh&&c._isUpdate&&c._renderData&&c._renderDataClone(),c._renderData=[],d.clear(),c._unselect(),c._hideToolTip(0);var e=c.backgroundImage;void 0==e||""==e?c.host.css({"background-image":""}):c.host.css({"background-image":e.indexOf("(")!=-1?e:"url('"+e+"')"}),c._rect=b;var f=c.padding||{left:5,top:5,right:5,bottom:5},g=d.createClipRect(b),h=d.beginGroup();d.setClip(h,g);var i=d.rect(b.x,b.y,b.width-2,b.height-2);if(void 0==e||""==e?d.attr(i,{fill:c.backgroundColor||c.background||"white"}):d.attr(i,{fill:"transparent"}),0!=c.showBorderLine){var j=void 0==c.borderLineColor?c.borderColor:c.borderLineColor;void 0==j&&(j="#888888");var k=this.borderLineWidth;(isNaN(k)||k<0||k>10)&&(k=1),d.attr(i,{"stroke-width":k,stroke:j})}a.isFunction(c.drawBefore)&&c.drawBefore(d,b);var l={x:f.left,y:f.top,width:b.width-f.left-f.right,height:b.height-f.top-f.bottom};c._paddedRect=l;var m=c.titlePadding||{left:2,top:2,right:2,bottom:2};if(c.title&&c.title.length>0){var n=c.toThemeProperty("jqx-chart-title-text",null),o=d.measureText(c.title,0,{"class":n});d.text(c.title,l.x+m.left,l.y+m.top,l.width-(m.left+m.right),o.height,0,{"class":n},!0,"center","center"),l.y+=o.height,l.height-=o.height}if(c.description&&c.description.length>0){var p=c.toThemeProperty("jqx-chart-title-description",null),o=d.measureText(c.description,0,{"class":p});d.text(c.description,l.x+m.left,l.y+m.top,l.width-(m.left+m.right),o.height,0,{"class":p},!0,"center","center"),l.y+=o.height,l.height-=o.height}(c.title||c.description)&&(l.y+=m.bottom+m.top,l.height-=m.bottom+m.top);var q={x:l.x,y:l.y,width:l.width,height:l.height};c._buildStats(q);for(var r=c._isPieOnlySeries(),s=c.seriesGroups,t={},u=0;u<s.length&&!r;u++)if("pie"!=s[u].type&&"donut"!=s[u].type){var v="horizontal"==s[u].orientation,w=s[u].valueAxis;w||(w=s[u].valueAxis={});var x=c._getCategoryAxis(u);if(!x)throw"seriesGroup["+u+"] is missing "+(v?"valueAxis":"xAxis")+" definition";var y=x==c._getCategoryAxis()?-1:u;t[y]=0}var z=c.axisPadding;isNaN(z)&&(z=5);for(var A={left:0,right:0,leftCount:0,rightCount:0},B=[],u=0;u<s.length;u++){var C=s[u];if("pie"!=C.type&&"donut"!=C.type&&1!=C.spider&&1!=C.polar){var v="horizontal"==C.orientation,y=c._getCategoryAxis(u)==c._getCategoryAxis()?-1:u,D=w.axisSize,E={x:0,y:q.y,width:q.width,height:q.height},F=void 0;D&&"auto"!=D||(v?(D=this._renderCategoryAxis(u,E,!0,q).width,1==(1&t[y])?D=0:D>0&&(t[y]|=1),F=c._getCategoryAxis(u).position):(D=c._renderValueAxis(u,E,!0,q).width,C.valueAxis&&(F=C.valueAxis.position))),"left"!=F&&1==c.rtl&&(F="right"),"right"!=F&&(F="left"),A[F+"Count"]>0&&A[F]>0&&D>0&&(A[F]+=z),B.push({width:D,position:F,xRel:A[F]}),A[F]+=D,A[F+"Count"]++}else B.push({width:0,position:0,xRel:0})}for(var G={top:0,bottom:0,topCount:0,bottomCount:0},H=[],u=0;u<s.length;u++){var C=s[u];if("pie"!=C.type&&"donut"!=C.type&&1!=C.spider&&1!=C.polar){var v="horizontal"==C.orientation,x=c._getCategoryAxis(u),y=x==c._getCategoryAxis()?-1:u;F=void 0;var I=x.axisSize;I&&"auto"!=I||(v?(I=c._renderValueAxis(u,{x:0,y:0,width:1e7,height:0},!0,q).height,c.seriesGroups[u].valueAxis&&(F=C.valueAxis.position)):(I=c._renderCategoryAxis(u,{x:0,y:0,width:1e7,height:0},!0).height,2==(2&t[y])?I=0:I>0&&(t[y]|=2),F=c._getCategoryAxis(u).position)),"top"!=F&&(F="bottom"),G[F+"Count"]>0&&G[F]>0&&I>0&&(G[F]+=z),H.push({height:I,position:F,yRel:G[F]}),G[F]+=I,G[F+"Count"]++}else H.push({height:0,position:0,yRel:0})}c._createAnimationGroup("series"),c._plotRect=q;var J=0!=c.showLegend,K=J?c._renderLegend(c.legendLayout?c._rect:l,!0):{width:0,height:0};if(!this.legendLayout||isNaN(this.legendLayout.left)&&isNaN(this.legendLayout.top)||(K={width:0,height:0}),l.height<G.top+G.bottom+K.height||l.width<A.left+A.right)return void d.endGroup();q.height-=G.top+G.bottom+K.height,q.x+=A.left,q.width-=A.left+A.right,q.y+=G.top;var L=[];if(!r)for(var u=(c._getCategoryAxis().tickMarksColor||"#888888",0);u<s.length;u++){var C=s[u];if(1!=C.polar&&1!=C.spider){var v="horizontal"==C.orientation,y=c._getCategoryAxis(u)==c._getCategoryAxis()?-1:u,E={x:q.x,y:0,width:q.width,height:H[u].height};if("top"!=H[u].position?E.y=q.y+q.height+H[u].yRel:E.y=q.y-H[u].yRel-H[u].height,v)c._renderValueAxis(u,E,!1,q);else{if(4==(4&t[y]))continue;if(!c._isGroupVisible(u))continue;L.push(E),c._renderCategoryAxis(u,E,!1,q),t[y]|=4}}}if(J){var M=c.legendLayout?c._rect:l,N=l.x+a.jqx._ptrnd((l.width-K.width)/2),O=q.y+q.height+G.bottom,D=l.width,I=K.height;c.legendLayout&&(isNaN(c.legendLayout.left)||(N=c.legendLayout.left),isNaN(c.legendLayout.top)||(O=c.legendLayout.top),isNaN(c.legendLayout.width)||(D=c.legendLayout.width),isNaN(c.legendLayout.height)||(I=c.legendLayout.height)),N+D>M.x+M.width&&(D=M.x+M.width-N),O+I>M.y+M.height&&(I=M.y+M.height-O),c._renderLegend({x:N,y:O,width:D,height:I})}if(c._hasHorizontalLines=!1,!r)for(var u=0;u<s.length;u++){var C=s[u];if(1!=C.polar&&1!=C.spider){var v="horizontal"==s[u].orientation,E={x:q.x-B[u].xRel-B[u].width,y:q.y,width:B[u].width,height:q.height};if("left"!=B[u].position&&(E.x=q.x+q.width+B[u].xRel),v){if(8==(8&t[c._getCategoryAxis(u)]))continue;if(!c._isGroupVisible(u))continue;L.push(E),c._renderCategoryAxis(u,E,!1,q),t[c._getCategoryAxis(u)]|=8}else c._renderValueAxis(u,E,!1,q)}}if(!(q.width<=0||q.height<=0)){c._plotRect={x:q.x,y:q.y,width:q.width,height:q.height};var P=d.createClipRect({x:q.x,y:q.y,width:q.width,height:q.height}),Q=d.beginGroup();d.setClip(Q,P);for(var u=0;u<s.length;u++){var C=s[u],R=!1;for(var S in c._seriesTypes)if(c._seriesTypes[S]==C.type){R=!0;break}if(!R)throw'jqxChart: invalid series type "'+C.type+'"';if(a.isFunction(C.drawBefore)&&C.drawBefore(d,b,u),1!=C.polar&&1!=C.spider||C.type.indexOf("pie")==-1&&C.type.indexOf("donut")==-1&&c._renderSpiderAxis(u,q),C.bands)for(var T=0;T<C.bands.length;T++)c._renderBand(u,T,q);C.type.indexOf("column")!=-1?c._renderColumnSeries(u,q):C.type.indexOf("pie")!=-1||C.type.indexOf("donut")!=-1?c._renderPieSeries(u,q):C.type.indexOf("line")!=-1||C.type.indexOf("area")!=-1?c._renderLineSeries(u,q):C.type.indexOf("scatter")==-1&&C.type.indexOf("bubble")==-1||c._renderScatterSeries(u,q),a.isFunction(C.draw)&&c.draw(d,b,u)}if(d.endGroup(),0==c.enabled){var U=d.rect(b.x,b.y,b.width,b.height);d.attr(U,{fill:"#777777",opacity:.5,stroke:"#00FFFFFF"})}if(a.isFunction(c.draw)&&c.draw(d,b),d.endGroup(),c._startAnimation("series"),this._renderCategoryAxisRangeSelector)for(var V=[],u=0;u<c.seriesGroups.length;u++){var W=this._getCategoryAxis(u);V.indexOf(W)==-1&&(this._renderCategoryAxisRangeSelector(u,L[u]),V.push(W))}}},_isPieOnlySeries:function(){var a=this.seriesGroups;if(0==a.length)return!1;for(var b=0;b<a.length;b++)if("pie"!=a[b].type&&"donut"!=a[b].type)return!1;return!0},_renderChartLegend:function(b,c,d,e){for(var f=this,g=f.renderer,h={x:c.x+3,y:c.y+3,width:c.width-6,height:c.height-6},i={width:h.width,height:0},j=0,k=0,l=20,m=0,n=10,o=10,p=0,q=0;q<b.length;q++){var r=b[q].css;r||(r=f.toThemeProperty("jqx-chart-legend-text",null)),l=20;var s=b[q].text,t=g.measureText(s,0,{"class":r});t.height>l&&(l=t.height),t.width>p&&(p=t.width),e?(0!=q&&(k+=l),k>h.height&&(k=0,j+=p+o,p=t.width,i.width=j+p)):(0!=j&&(j+=o),j+2*n+t.width>h.width&&t.width<h.width&&(j=0,k+=l,l=20,m=h.width,i.height=k+l));var u=!1;if(t.width>c.width){u=!0;for(var v=c.width,w=s,x=w.split(/\s+/).reverse(),y=[],z="",A=new Array;word=x.pop();){y.push(word),z=y.join(" ");var B=f.renderer.measureText(z,0,{"class":r});B.width>v&&A.length>0&&(y.pop(),y=[word],z=y.join(" ")),A.push({text:z})}t.width=0;for(var C=0,D=0;D<A.length;D++){var E=A[D].text,B=f.renderer.measureText(E,0,{"class":r});t.width=Math.max(t.width,B.width),C+=t.height}t.height=C}var F=h.x+j+t.width<c.x+c.width&&h.y+k+t.height<c.y+c.height;if(f.legendLayout)var F=h.x+j+t.width<f._rect.x+f._rect.width&&h.y+k+t.height<f._rect.y+f._rect.height;if(!d&&F){var G=b[q].seriesIndex,H=b[q].groupIndex,I=b[q].itemIndex,J=b[q].color,K=f._isSerieVisible(H,G,I),L=g.beginGroup(),M=K?b[q].opacity:.1;if(u){for(var w=s,v=c.width,x=w.split(/\s+/).reverse(),y=[],z="",N=0,A=new Array;word=x.pop();){y.push(word),z=y.join(" ");var B=f.renderer.measureText(z,0,{"class":r});B.width>v&&A.length>0&&(y.pop(),N+=B.height,y=[word],z=y.join(" ")),A.push({text:z,dy:N})}for(var D=0;D<A.length;D++){var E=A[D].text;N=A[D].dy;var B=f.renderer.measureText(E,0,{"class":r});e?f.renderer.text(E,h.x+j+1.5*n,h.y+k+N,t.width,l,0,{"class":r},!1,"left","center"):f.renderer.text(E,h.x+j+1.5*n,h.y+k+N,t.width,l,0,{"class":r},!1,"center","center")}var O=g.rect(h.x+j,h.y+k+n/2+N/2,n,n);e&&(k+=N),f.renderer.attr(O,{fill:J,"fill-opacity":M,stroke:J,"stroke-width":1,"stroke-opacity":b[q].opacity})}else{var O=g.rect(h.x+j,h.y+k+n/2,n,n);f.renderer.attr(O,{fill:J,"fill-opacity":M,stroke:J,"stroke-width":1,"stroke-opacity":b[q].opacity}),e?f.renderer.text(s,h.x+j+1.5*n,h.y+k,t.width,t.height+n/2,0,{"class":r},!1,"left","center"):f.renderer.text(s,h.x+j+1.5*n,h.y+k,t.width,l,0,{"class":r},!1,"center","center")}f.renderer.endGroup(),f._setLegendToggleHandler(H,G,I,L)}e||(j+=t.width+2*n,m<j&&(m=j))}if(d)return i.height=a.jqx._ptrnd(k+l+5),i.width=a.jqx._ptrnd(m),i},_isSerieVisible:function(b,c,d){for(;this._itemsToggleState.length<b+1;)this._itemsToggleState.push([]);for(var e=this._itemsToggleState[b];e.length<c+1;)e.push(!!isNaN(d)||[]);var f=e[c];if(isNaN(d))return f;for(a.isArray(f)||(e[c]=f=[]);f.length<d+1;)f.push(!0);return f[d]},_isGroupVisible:function(a){var b=!1,c=this.seriesGroups[a].series;if(!c)return b;for(var d=0;d<c.length;d++)if(this._isSerieVisible(a,d)){b=!0;break}return b},_toggleSerie:function(b,c,d,e){var f=!this._isSerieVisible(b,c,d);void 0!=e&&(f=e);var g=this.seriesGroups[b],h=g.series[c];if(this._raiseEvent("toggle",{state:f,seriesGroup:g,serie:h,elementIndex:d}),isNaN(d))this._itemsToggleState[b][c]=f;else{var i=this._itemsToggleState[b][c];for(a.isArray(i)||(i=[]);i.length<d;)i.push(!0);i[d]=f}this._isToggleRefresh=!0,this.update(),this._isToggleRefresh=!1},showSerie:function(a,b,c){this._toggleSerie(a,b,c,!0)},hideSerie:function(a,b,c){this._toggleSerie(a,b,c,!1)},_setLegendToggleHandler:function(a,b,c,d){var e=this.seriesGroups[a],f=e.series[b],g=f.enableSeriesToggle;if(void 0==g&&(g=0!=e.enableSeriesToggle),g){var h=this;this.renderer.addHandler(d,"click",function(d){d.preventDefault(),h._toggleSerie(a,b,c)})}},_renderLegend:function(a,b){for(var c=this,d=[],e=0;e<c.seriesGroups.length;e++){var f=c.seriesGroups[e];if(0!=f.showLegend)for(var g=0;g<f.series.length;g++){var h=f.series[g];if(0!=h.showLegend){var i,j=c._getSerieSettings(e,g);if("pie"!=f.type&&"donut"!=f.type){var k=h.legendFormatSettings||f.legendFormatSettings,l=h.legendFormatFunction||f.legendFormatFunction;i=c._formatValue(h.displayText||h.dataField||"",k,l,e,g,p);var m=c._getSeriesColors(e,g);d.push({groupIndex:e,seriesIndex:g,text:i,css:h.displayTextClass,color:m.fillColor,opacity:j.opacity})}else for(var n=c._getCategoryAxis(e),k=h.legendFormatSettings||f.legendFormatSettings||n.formatSettings||h.formatSettings||f.formatSettings,l=h.legendFormatFunction||f.legendFormatFunction||n.formatFunction||h.formatFunction||f.formatFunction,o=c._getDataLen(e),p=0;p<o;p++){i=c._getDataValue(p,h.displayText,e),i=c._formatValue(i,k,l,e,g,p);var m=c._getColors(e,g,p);d.push({groupIndex:e,seriesIndex:g,itemIndex:p,text:i,css:h.displayTextClass,color:m.fillColor,opacity:j.opacity})}}}}return c._renderChartLegend(d,a,b,c.legendLayout&&"vertical"==c.legendLayout.flow)},_renderCategoryAxis:function(a,b,c,d){var e=this,f=e._getCategoryAxis(a),g=e.seriesGroups[a],h="horizontal"==g.orientation,i={width:0,height:0};if(!f||0==f.visible||"spider"==g.type)return i;if(!e._isGroupVisible(a))return i;var j=e._alignValuesWithTicks(a);e.rtl&&(f.flip=!0);var k=h?b.height:b.width,l=f.text,m=e._calculateXOffsets(a,k),n=m.axisStats,o=f.rangeSelector,p=0;if(o){if(!this._selectorGetSize)throw new Error("jqxChart: Missing reference to jqxchart.rangeselector.js");p=this._selectorGetSize(f)}var q=n.interval;if(!isNaN(q)){var r,s={visible:0!=f.showGridLines,color:f.gridLinesColor||"#888888",unitInterval:f.gridLinesInterval||q,dashStyle:f.gridLinesDashStyle,offsets:[]},t={visible:0!=f.showTickMarks,color:f.tickMarksColor||"#888888",unitInterval:f.tickMarksInterval||q,dashStyle:f.tickMarksDashStyle,offsets:[]},u=f.textRotationAngle||0,v=n.min,w=n.max,x=m.padding,y=1==f.flip||e.rtl;"date"==f.type?(s.offsets=this._generateDTOffsets(v,w,k,x,s.unitInterval,q,n.dateTimeUnit,j,NaN,!1,y),t.offsets=this._generateDTOffsets(v,w,k,x,t.unitInterval,q,n.dateTimeUnit,j,NaN,!1,y),r=this._generateDTOffsets(v,w,k,x,q,q,n.dateTimeUnit,j,NaN,!0,y)):(s.offsets=this._generateOffsets(v,w,k,x,s.unitInterval,q,j,NaN,!1,y),t.offsets=this._generateOffsets(v,w,k,x,t.unitInterval,q,j,NaN,!1,y),r=this._generateOffsets(v,w,k,x,q,q,j,NaN,!0,y)),0==m.length&&(r=[]);var z,A=f.horizontalTextAlignment,B=e.renderer.getRect();B.width-b.x-b.width,e._getDataLen(a);e._elementRenderInfo&&e._elementRenderInfo.length>a&&(z=e._elementRenderInfo[a].xAxis);var C=[],D=f.formatFunction,E=f.formatSettings;"date"!=f.type||E||D||(D=this._getDefaultDTFormatFn(f.baseUnit||"day"));for(var F=0;F<r.length;F++){var G=r[F].value,H=r[F].offset;if("date"!=f.type&&n.useIndeces&&f.dataField){var I=Math.round(G);G=e._getDataValue(I,f.dataField),void 0==G&&(G="")}var l=e._formatValue(G,E,D,a,void 0,F);void 0!=l&&""!=l||(l=n.useIndeces?(n.min+F).toString():void 0==G?"":G.toString());var J={key:G,text:l,targetX:H,x:H};z&&z.itemOffsets[G]&&(J.x=z.itemOffsets[G].x,J.y=z.itemOffsets[G].y),C.push(J)}var K=f.descriptionClass;K||(K=e.toThemeProperty("jqx-chart-axis-description",null));var L=f["class"];L||(L=e.toThemeProperty("jqx-chart-axis-text",null)),h&&(u-=90);for(var M={text:f.description,style:K,halign:f.horizontalDescriptionAlignment||"center",valign:f.verticalDescriptionAlignment||"center",textRotationAngle:h?-90:0},N={textRotationAngle:u,style:L,halign:A,valign:f.verticalTextAlignment||"center",textRotationPoint:f.textRotationPoint||"auto",textOffset:f.textOffset},O=h&&"right"==f.position||!h&&"top"==f.position,P={rangeLength:m.rangeLength,itemWidth:m.itemWidth,intervalWidth:m.intervalWidth,data:m,rect:b},Q={items:C,renderData:P};e._renderData.length<a+1;)e._renderData.push({});e._renderData[a].xAxis=P;var R=e._getAnimProps(a),S=R.enabled&&C.length<500?R.duration:0;0==e.enableAxisTextAnimation&&(S=0),!c&&o&&(h?(b.width-=p,"right"!=f.position&&(b.x+=p)):(b.height-=p,"top"==f.position&&(b.y+=p)));var T=e._renderAxis(h,O,M,N,{x:b.x,y:b.y,width:b.width,height:b.height},d,q,!1,!0,Q,s,t,c,S);return h?T.width+=p:T.height+=p,T}},_animateAxisText:function(a,b){for(var c=a.items,d=a.textSettings,e=0;e<c.length;e++){var f=c[e];if(f.visible){var g=f.targetX,h=f.targetY;isNaN(f.x)||isNaN(f.y)||(g=f.x+(g-f.x)*b,h=f.y+(h-f.y)*b),f.element&&(this.renderer.removeElement(f.element),f.element=void 0),f.element=this.renderer.text(f.text,g,h,f.width,f.height,d.textRotationAngle,{"class":d.style},!1,d.halign,d.valign,d.textRotationPoint)}}},_getPolarAxisCoords:function(b,c){var d=this.seriesGroups[b],e=this._calcGroupOffsets(b,c).xoffsets;if(e){var f=c.x+a.jqx.getNum([d.offsetX,c.width/2]),g=c.y+a.jqx.getNum([d.offsetY,c.height/2]),h=d.radius;isNaN(h)&&(h=Math.min(c.width,c.height)/2*.6);var i=this._alignValuesWithTicks(b),j=d.startAngle;return isNaN(j)?j=0:(j=(j<0?-1:1)*(Math.abs(j)%360),j=2*Math.PI*j/360),{x:f,y:g,r:h,itemWidth:e.itemWidth,rangeLength:e.rangeLength,valuesOnTicks:i,startAngle:j}}},_toPolarCoord:function(b,c,d,e){var f=2*(d-c.x)*Math.PI/Math.max(1,c.width)+b.startAngle,g=(c.height+c.y-e)*b.r/Math.max(1,c.height),h=b.x+g*Math.cos(f),i=b.y+g*Math.sin(f);return{x:a.jqx._ptrnd(h),y:a.jqx._ptrnd(i)}},_renderSpiderAxis:function(b,c){var d=this,e=d._getCategoryAxis(b);if(e&&0!=e.visible){var f=(d.seriesGroups[b],d._getPolarAxisCoords(b,c));if(f){var g=a.jqx._ptrnd(f.x),h=a.jqx._ptrnd(f.y),i=f.r,j=f.startAngle;if(!(i<1)){i=a.jqx._ptrnd(i);var k=2*Math.PI*i,l=d._calculateXOffsets(b,k);if(l.rangeLength){var m=e.unitInterval;(isNaN(m)||m<1)&&(m=1);var n,o={visible:0!=e.showGridLines,color:e.gridLinesColor||"#888888",unitInterval:e.gridLinesInterval||e.unitInterval||m,dashStyle:e.gridLinesDashStyle,offsets:[]},p={visible:0!=e.showTickMarks,color:e.tickMarksColor||"#888888",unitInterval:e.tickMarksInterval||e.unitInterval||m,dashStyle:e.tickMarksDashStyle,offsets:[]},q=e.horizontalTextAlignment,r=d._alignValuesWithTicks(b),s=d.renderer,t=l.axisStats,u=t.min,v=t.max,w=this._getPaddingSize(l.axisStats,e,r,k,!0,!1),x=1==e.flip||d.rtl;"date"==e.type?(o.offsets=this._generateDTOffsets(u,v,k,w,o.unitInterval,m,e.baseUnit,!1,0,!1,x),p.offsets=this._generateDTOffsets(u,v,k,w,p.unitInterval,m,e.baseUnit,!1,0,!1,x),n=this._generateDTOffsets(u,v,k,w,m,m,e.baseUnit,!1,0,!0,x)):(o.offsets=this._generateOffsets(u,v,k,w,o.unitInterval,m,!0,0,!1,x),p.offsets=this._generateOffsets(u,v,k,w,p.unitInterval,m,!0,0,!1,x),n=this._generateOffsets(u,v,k,w,m,m,!0,0,!1,x));var y,q=e.horizontalTextAlignment,z=d.renderer.getRect();z.width-c.x-c.width,d._getDataLen(b);d._elementRenderInfo&&d._elementRenderInfo.length>b&&(y=d._elementRenderInfo[b].xAxis);for(var A=[],B=0;B<n.length;B++){var C=n[B].offset,D=n[B].value;if("date"!=e.type&&t.useIndeces&&e.dataField){var E=Math.round(D);D=d._getDataValue(E,e.dataField),void 0==D&&(D="")}var F=d._formatValue(D,e.formatSettings,e.formatFunction,b,void 0,B);void 0!=F&&""!=F||(F=t.useIndeces?(t.min+B).toString():void 0==D?"":D.toString());var G={key:D,text:F,targetX:C,x:C};y&&y.itemOffsets[D]&&(G.x=y.itemOffsets[D].x,G.y=y.itemOffsets[D].y),A.push(G)}var H=e.descriptionClass;H||(H=d.toThemeProperty("jqx-chart-axis-description",null));var I=e["class"];I||(I=d.toThemeProperty("jqx-chart-axis-text",null));var F=e.text,J=e.textRotationAngle||0,K="horizontal"==d.seriesGroups[b].orientation;K&&(J-=90);for(var L=({text:e.description,style:H,halign:e.horizontalDescriptionAlignment||"center",valign:e.verticalDescriptionAlignment||"center",textRotationAngle:K?-90:0},{textRotationAngle:J,style:I,halign:q,valign:e.verticalTextAlignment||"center",textRotationPoint:e.textRotationPoint||"auto",textOffset:e.textOffset},K&&"right"==e.position||!K&&"top"==e.position,{rangeLength:l.rangeLength,itemWidth:l.itemWidth});d._renderData.length<b+1;)d._renderData.push({});d._renderData[b].xAxis=L;for(var M={stroke:o.color,fill:"none","stroke-width":1,"stroke-dasharray":o.dashStyle||""},N=(s.circle(g,h,i,M),A.length),O=(2*Math.PI/N,j),B=0;B<A.length;B++){var P=A[B].x,Q=O+2*P*Math.PI/Math.max(1,k);Q=(360-Q/(2*Math.PI)*360)%360,Q<0&&(Q=360+Q);var R=s.measureText(A[B].text,0,{"class":I}),S=this._adjustTextBoxPosition(g,h,R,i+(p.visible?7:2),Q,!1,!1,!0);s.text(A[B].text,S.x,S.y,R.width,R.height,0,{"class":I},!1,"center","center")}if(o.visible)for(var B=0;B<o.offsets.length;B++){var P=o.offsets[B].offset;r||(P-=w.right/2);var Q=O+2*P*Math.PI/Math.max(1,k),T=g+i*Math.cos(Q),U=h+i*Math.sin(Q);s.line(g,h,a.jqx._ptrnd(T),a.jqx._ptrnd(U),M)}if(p.visible)for(var V=5,M={stroke:p.color,fill:"none","stroke-width":1,"stroke-dasharray":p.dashStyle||""},B=0;B<p.offsets.length;B++){var P=p.offsets[B].offset;r||(P-=w.right/2);var Q=O+2*P*Math.PI/Math.max(1,k),W={x:g+i*Math.cos(Q),y:h+i*Math.sin(Q)},X={x:g+(i+V)*Math.cos(Q),y:h+(i+V)*Math.sin(Q)};s.line(a.jqx._ptrnd(W.x),a.jqx._ptrnd(W.y),a.jqx._ptrnd(X.x),a.jqx._ptrnd(X.y),M)}d._renderSpiderValueAxis(b,c)}}}}},_renderSpiderValueAxis:function(b,c){var d=this.seriesGroups[b],e=this._getPolarAxisCoords(b,c);if(e){var f=a.jqx._ptrnd(e.x),g=a.jqx._ptrnd(e.y),h=e.r;e.startAngle;if(!(h<1)){h=a.jqx._ptrnd(h);var i=this.seriesGroups[b].valueAxis;if(i&&0!=i.displayValueAxis&&0!=i.visible){var j=i["class"];j||(j=this.toThemeProperty("jqx-chart-axis-text",null));var k=i.formatSettings,l=d.type.indexOf("stacked")!=-1&&d.type.indexOf("100")!=-1;l&&!k&&(k={sufix:"%"}),this._calcValueAxisItems(b,h);var m=this._stats.seriesGroups[b].mu,n={visible:0!=i.showGridLines,color:i.gridLinesColor||"#888888",unitInterval:i.gridLinesInterval||m||1,dashStyle:i.gridLinesDashStyle},o={stroke:n.color,fill:"none","stroke-width":1,"stroke-dasharray":n.dashStyle||""},p=this._renderData[b].valueAxis,q=p.items;q.length&&this.renderer.line(f,g,f,a.jqx._ptrnd(g-h),o),q=q.reverse();for(var r=this.renderer,s=0;s<q.length-1;s++){var t=q[s],u=i.formatFunction?i.formatFunction(t):this._formatNumber(t,k),v=r.measureText(u,0,{"class":j}),w=f+(0!=i.showTickMarks?3:2),x=g-p.itemWidth*s-v.height;r.text(u,w,x,v.width,v.height,0,{"class":j},!1,"center","center")}var y=1==i.logarithmicScale,z=y?q.length:p.rangeLength;if(aIncrement=2*Math.PI/z,n.visible)for(var o={stroke:n.color,fill:"none","stroke-width":1,"stroke-dasharray":n.dashStyle||""},s=0;s<z;s+=n.unitInterval){var x=a.jqx._ptrnd(h*s/z);r.circle(f,g,x,o)}var A={visible:0!=i.showTickMarks,color:i.tickMarksColor||"#888888",unitInterval:i.tickMarksInterval||m,dashStyle:i.tickMarksDashStyle};if(A.visible){tickMarkSize=5;for(var o={stroke:A.color,fill:"none","stroke-width":1,"stroke-dasharray":A.dashStyle||""},B=f-Math.round(tickMarkSize/2),C=B+tickMarkSize,s=0;s<z;s+=A.unitInterval)if(!n.visible||s%n.unitInterval!=0){var x=a.jqx._ptrnd(g-h*s/z);r.line(a.jqx._ptrnd(B),x,a.jqx._ptrnd(C),x,o)}}}}}},_renderAxis:function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=m.visible?4:0,q=2,r={width:0,height:0},s={width:0,height:0};b?r.height=s.height=f.height:r.width=s.width=f.width,!n&&c&&b&&(f.x-=f.width);var t=k.renderData,u=t.itemWidth;if(void 0!=d.text&&""!=d){var v=d.textRotationAngle,w=this.renderer.measureText(d.text,v,{"class":d.style});s.width=w.width,s.height=w.height,n||this.renderer.text(d.text,f.x+(b?c?-q+2*f.width-s.width:q:0),f.y+(b?0:c?q:f.height-q-s.height),b?s.width:f.width,b?f.height:s.height,v,{"class":d.style},!0,d.halign,d.valign)}var x=0,y=j?-u/2:0;j&&!b&&(e.halign="center");var z=f.x,A=f.y,B=e.textOffset;B&&(isNaN(B.x)||(z+=B.x),isNaN(B.y)||(A+=B.y)),b?(z+=q+(s.width>0?s.width+q:0)+(c?f.width-s.width:0),A+=y):(z+=y,c?(A+=s.height>0?s.height+3*q:2*q,A+=p-(j?p:p/4)):A+=j?p:p/4);var C=0,D=0,E=k.items;t.itemOffsets={},!this._isToggleRefresh&&this._isUpdate||(o=0);for(var F=!1,G=0,H=0;H<E.length;H++,x+=u){var I=E[H].text;isNaN(E[H].targetX)||(x=E[H].targetX);var w=this.renderer.measureText(I,e.textRotationAngle,{"class":e.style});if(w.width>D&&(D=w.width),w.height>C&&(C=w.height),G+=b?C:D,!n){if(b&&x>f.height+2||!b&&x>f.width+2)break;var J=b?z+(c?0==s.width?p:p-q:0):z+x,K=b?A+x:A;t.itemOffsets[E[H].key]={x:J,y:K},F||(!isNaN(E[H].x)||!isNaN(E[H].y)&&o)&&(F=!0),E[H].targetX=J,E[H].targetY=K,E[H].width=b?f.width-2*q-p-(s.width>0?s.width+q:0):u,E[H].height=b?u:f.height-2*q-p-(s.height>0?s.height+q:0),E[H].visible=!i||i&&H%h==0}}if(t.avgWidth=0==E.length?0:G/E.length,!n){var L={items:E,textSettings:e};if(!isNaN(o)&&F||(o=0),this._animateAxisText(L,0==o?1:0),0!=o){var M=this;this._enqueueAnimation("series",void 0,void 0,o,function(a,b,c){M._animateAxisText(b,c)},L)}}r.width+=2*q+p+s.width+D+(b&&s.width>0?q:0),r.height+=2*q+p+s.height+C+(!b&&s.height>0?q:0);var N={},O={stroke:l.color,"stroke-width":1,"stroke-dasharray":l.dashStyle||""};if(!n){var K=a.jqx._ptrnd(f.y+(c?f.height:0));b?this.renderer.line(a.jqx._ptrnd(f.x+f.width),f.y,a.jqx._ptrnd(f.x+f.width),f.y+f.height,O):this.renderer.line(a.jqx._ptrnd(f.x),K,a.jqx._ptrnd(f.x+f.width+1),K,O)}var P=.5;if(!n&&0!=l.visible)for(var Q=l.offsets,H=0;H<Q.length;H++){if(b){if(R=a.jqx._ptrnd(f.y+Q[H].offset),R<f.y-P)break}else if(R=a.jqx._ptrnd(f.x+Q[H].offset),R>f.x+f.width+P)break;b?this.renderer.line(a.jqx._ptrnd(g.x),R,a.jqx._ptrnd(g.x+g.width),R,O):this.renderer.line(R,a.jqx._ptrnd(g.y),R,a.jqx._ptrnd(g.y+g.height),O),N[R]=!0}var O={stroke:m.color,"stroke-width":1,"stroke-dasharray":m.dashStyle||""};if(!n&&m.visible)for(var Q=m.offsets,H=0;H<Q.length;H++){var R=a.jqx._ptrnd(b?f.y+Q[H].offset:f.x+Q[H].offset);if(N[R-1]?R--:N[R+1]&&R++,b){if(R>f.y+f.height+P)break}else if(R>f.x+f.width+P)break;var S=c?p:-p;if(b)this.renderer.line(f.x+f.width,R,f.x+f.width+S,R,O);else{var K=a.jqx._ptrnd(f.y+(c?f.height:0));this.renderer.line(R,K,R,K-S,O)}}return r.width=a.jqx._rup(r.width),r.height=a.jqx._rup(r.height),r},_calcValueAxisItems:function(a,b){var c=this._stats.seriesGroups[a];if(!c||!c.isValid)return!1;var d=this.seriesGroups[a],e=("horizontal"==d.orientation,d.valueAxis),f=0!=e.valuesOnTicks,g=(e.dataField,c.intervals),h=b/g,i=c.min,j=c.mu,k=1==e.logarithmicScale,l=e.logarithmicScaleBase||10,m=d.type.indexOf("stacked")!=-1&&d.type.indexOf("100")!=-1;for(k&&(j=isNaN(e.unitInterval)?1:e.unitInterval),f||(g=Math.max(g-1,1));this._renderData.length<a+1;)this._renderData.push({});this._renderData[a].valueAxis={};var n=this._renderData[a].valueAxis;n.itemWidth=n.intervalWidth=h,n.items=[];for(var o=n.items,p=0;p<=g;p++){var q=0;q=k?m?c.max/Math.pow(l,g-p):i*Math.pow(l,p):f?i+p*j:i+(p+.5)*j,o.push(q)}return n.rangeLength=k&&!m?c.intervals:c.intervals*j,1!=d.valueAxis.flip&&(o=o.reverse()),!0},_renderValueAxis:function(a,b,c,d){var e=this.seriesGroups[a],f="horizontal"==e.orientation,g=e.valueAxis;if(!g)throw"SeriesGroup "+a+" is missing valueAxis definition";var h={width:0,height:0};if(!this._isGroupVisible(a)||this._isPieOnlySeries()||"spider"==e.type)return h;if(!this._calcValueAxisItems(a,f?b.width:b.height)||0==g.displayValueAxis||0==g.visible)return h;var i=g.descriptionClass;i||(i=this.toThemeProperty("jqx-chart-axis-description",null));var j={text:g.description,style:i,halign:g.horizontalDescriptionAlignment||"center",valign:g.verticalDescriptionAlignment||"center",textRotationAngle:f?0:this.rtl?90:-90},k=g.itemsClass;k||(k=this.toThemeProperty("jqx-chart-axis-text",null));var l={style:k,halign:g.horizontalTextAlignment||"center",valign:g.verticalTextAlignment||"center",textRotationAngle:g.textRotationAngle||0,textRotationPoint:g.textRotationPoint||"auto",textOffset:g.textOffset},m=0!=g.valuesOnTicks,n=this._stats.seriesGroups[a],o=n.mu,p=g.formatSettings,q=e.type.indexOf("stacked")!=-1&&e.type.indexOf("100")!=-1;q&&!p&&(p={sufix:"%"});var r=1==g.logarithmicScale;g.logarithmicScaleBase||10;r&&(o=isNaN(g.unitInterval)?1:g.unitInterval);var s,t=[],u=this._renderData[a].valueAxis;this._elementRenderInfo&&this._elementRenderInfo.length>a&&(s=this._elementRenderInfo[a].valueAxis);for(var v=0;v<u.items.length;v++){var w=u.items[v],x=g.formatFunction?g.formatFunction(w):this._formatNumber(w,p),y={key:w,text:x};s&&s.itemOffsets[w]&&(y.x=s.itemOffsets[w].x,y.y=s.itemOffsets[w].y),t.push(y)}var z=g.gridLinesInterval||g.unitInterval;(isNaN(z)||r&&z<o)&&(z=o);var A=f?b.width:b.height,B={visible:0!=g.showGridLines,color:g.gridLinesColor||"#888888",unitInterval:z,dashStyle:g.gridLinesDashStyle},C=n.logarithmic?n.minPow:n.min,D=n.logarithmic?n.maxPow:n.max,E=!1;B.visible&&(B.offsets=this._generateOffsets(C,D,A,{left:0,right:0},B.unitInterval,o,!0,0,!1,E));var F=g.tickMarksInterval||g.unitInterval;(isNaN(F)||r&&F<o)&&(F=o);var G={visible:0!=g.showTickMarks,color:g.tickMarksColor||"#888888",unitInterval:F,dashStyle:g.tickMarksDashStyle};G.visible&&(G.offsets=this._generateOffsets(C,D,A,{left:0,right:0},G.unitInterval,o,!0,0,!1,E));var H=f&&"top"==g.position||!f&&"right"==g.position||!f&&this.rtl&&"left"!=g.position,I={items:t,renderData:u},J=this._getAnimProps(a),K=J.enabled&&t.length<500?J.duration:0;return 0==this.enableAxisTextAnimation&&(K=0),this._renderAxis(!f,H,j,l,b,d,o,r,m,I,B,G,c,K);
},_generateOffsets:function(a,b,c,d,e,f,g,h,i,j){var k=[],l=b-a,m=c-d.left-d.right;if(0==l)return i||g?k.push({offset:d.left+m/2,value:a}):k.push({offset:0,value:a}),k;var n=m/l,o=n*f,p=d.left;g||i||(b+=f);for(var q=a;q<=b;q+=f,p+=o)k.push({offset:p,value:q});if(!g&&k.length>1){isNaN(h)&&(h=i?0:o/2);for(var q=0;q<k.length;q++)k[q].offset-=h,k[q].offset<=2&&(k[q].offset=0),k[q].offset>=c-2&&(k[q].offset=c)}if(e>f){for(var r=[],s=Math.round(e/f),q=0;q<k.length;q++)q%s==0&&r.push({offset:k[q].offset,value:k[q].value});k=r}if(j)for(var q=0;q<k.length;q++)k[q].offset=c-k[q].offset;return k},_generateDTOffsets:function(b,c,d,e,f,g,h,i,j,k,l){h||(h="day");var m=[];if(b>c)return m;if(b==c)return k?m.push({offset:i?d/2:e.left,value:b}):i&&m.push({offset:d/2,value:b}),m;var n=d-e.left-e.right,o=b,p=e.left,q=p;g=Math.max(g,1);var r=g,s=Math.min(1,g);for(g>1&&(g=1);a.jqx._ptrnd(q)<=a.jqx._ptrnd(e.left+n+(i?0:e.right));){m.push({offset:q,value:o});var t=new Date(o.valueOf());"millisecond"==h?t.setMilliseconds(o.getMilliseconds()+g):"second"==h?t.setSeconds(o.getSeconds()+g):"minute"==h?t.setMinutes(o.getMinutes()+g):"hour"==h?t.setHours(o.getHours()+g):"day"==h?t.setDate(o.getDate()+g):"month"==h?t.setMonth(o.getMonth()+g):"year"==h&&t.setFullYear(o.getFullYear()+g),o=t,q=p+(o.valueOf()-b.valueOf())*s/(c.valueOf()-b.valueOf())*n}if(l)for(var u=0;u<m.length;u++)m[u].offset=d-m[u].offset;if(r>1){for(var v=[],u=0;u<m.length;u+=r)v.push({offset:m[u].offset,value:m[u].value});m=v}if(!i&&!k&&m.length>1){var v=[];v.push({offset:0,value:void 0});for(var u=1;u<m.length;u++)v.push({offset:m[u-1].offset+(m[u].offset-m[u-1].offset)/2,value:void 0});var w=v.length;w>1?v.push({offset:v[w-1].offset+(v[w-1].offset-v[w-2].offset)}):v.push({offset:d,value:void 0}),m=v}if(f>g){for(var v=[],x=Math.round(f/r),u=0;u<m.length;u++)u%x==0&&v.push({offset:m[u].offset,value:m[u].value});m=v}return m},_buildStats:function(b){var c={seriesGroups:new Array};this._stats=c;for(var d=0;d<this.seriesGroups.length;d++){var e=this.seriesGroups[d];c.seriesGroups[d]={};var f=c.seriesGroups[d];f.isValid=!0;var g=void 0!=e.valueAxis,h="horizontal"==e.orientation?b.width:b.height,i=!1,j=10;g&&(i=1==e.valueAxis.logarithmicScale,j=e.valueAxis.logarithmicScaleBase,isNaN(j)&&(j=10));var k=-1!=e.type.indexOf("stacked"),l=k&&-1!=e.type.indexOf("100"),m=-1!=e.type.indexOf("range");l&&(f.psums=new Array,f.nsums=new Array);var n=NaN,o=NaN,p=NaN,q=NaN,r=e.baselineValue;isNaN(r)&&(r=i&&!l?1:0);for(var s=this._getDataLen(d),t=0,u=NaN,v=0;v<s&&f.isValid;v++){for(var w=g?e.valueAxis.minValue:1/0,x=g?e.valueAxis.maxValue:-(1/0),y=0,z=0,A=0;A<e.series.length;A++)if(this._isSerieVisible(d,A)){var B=void 0,C=void 0,D=void 0;if(m){var E=this._getDataValueAsNumber(v,e.series[A].dataFieldFrom,d),F=this._getDataValueAsNumber(v,e.series[A].dataFieldTo,d);C=Math.max(E,F),D=Math.min(E,F)}else{if(B=this._getDataValueAsNumber(v,e.series[A].dataField,d),isNaN(B)||i&&B<=0)continue;D=C=B}!(isNaN(x)||C>x)||g&&!isNaN(e.valueAxis.maxValue)&&!(C<=e.valueAxis.maxValue)||(x=Math.max(C,r)),!(isNaN(w)||D<w)||g&&!isNaN(e.valueAxis.minValue)&&!(D>=e.valueAxis.minValue)||(w=Math.min(D,r)),isNaN(B)||(B>r?y+=B:B<r&&(z+=B))}if(!l&&g&&(isNaN(e.valueAxis.maxValue)||(y=Math.min(e.valueAxis.maxValue,y)),isNaN(e.valueAxis.minValue)||(z=Math.max(e.valueAxis.minValue,z))),i&&l)for(var A=0;A<e.series.length;A++)if(this._isSerieVisible(d,A)){var B=this._getDataValueAsNumber(v,e.series[A].dataField,d);if(isNaN(B)||B<=0)u=.01;else{var G=0==y?0:B/y;(isNaN(u)||G<u)&&(u=G)}}else u=.01;var H=y-z;t<H&&(t=H),l&&(f.psums[v]=y,f.nsums[v]=z),(x>o||isNaN(o))&&(o=x),(w<n||isNaN(n))&&(n=w),(y>p||isNaN(p))&&(p=y),(z<q||isNaN(q))&&(q=z)}l&&(p=0==p?0:Math.max(p,-q),q=0==q?0:Math.min(q,-p));var I=g?e.valueAxis.unitInterval:0;I||(I=g?this._calcInterval(k?q:n,k?p:o,Math.max(h/80,2)):k?(p-q)/10:(o-n)/10);var J=NaN,K=0,L=0;if(i){if(l){J=0;var G=1;for(K=L=a.jqx.log(100,j);G>u;)G/=j,K--,J++;n=Math.pow(j,K)}else k&&(o=Math.max(o,p)),L=a.jqx._rnd(a.jqx.log(o,j),1,!0),o=Math.pow(j,L),K=a.jqx._rnd(a.jqx.log(n,j),1,!1),n=Math.pow(j,K);I=j}n<q&&(q=n),o>p&&(p=o);var M=i?n:a.jqx._rnd(k?q:n,I,!1),N=i?o:a.jqx._rnd(k?p:o,I,!0);l&&N>100&&(N=100),l&&!i&&(N=N>0?100:0,M=M<0?-100:0,I=g?e.valueAxis.unitInterval:10,(isNaN(I)||I<=0||I>=100)&&(I=10)),isNaN(N)||isNaN(M)||isNaN(I)||(isNaN(J)&&(J=parseInt(((N-M)/(0==I?1:I)).toFixed())),i&&!l&&(J=L-K,t=Math.pow(j,J)),J<1||(f.min=M,f.max=N,f.logarithmic=i,f.logBase=j,f.base=r,f.minPow=K,f.maxPow=L,f.mu=I,f.maxRange=t,f.intervals=J))}},_getDataLen:function(b){var c=this.source;return void 0!=b&&b!=-1&&this.seriesGroups[b].source&&(c=this.seriesGroups[b].source),c instanceof a.jqx.dataAdapter&&(c=c.records),c?c.length:0},_getDataValue:function(b,c,d){var e=this.source;if(void 0!=d&&d!=-1&&(e=this.seriesGroups[d].source||e),e instanceof a.jqx.dataAdapter&&(e=e.records),!(!e||b<0||b>e.length-1))return a.isFunction(c)?c(b,e):c&&""!=c?e[b][c]:e[b]},_getDataValueAsNumber:function(a,b,c){var d=this._getDataValue(a,b,c);return this._isDate(d)?d.valueOf():("number"!=typeof d&&(d=parseFloat(d)),"number"!=typeof d&&(d=void 0),d)},_renderPieSeries:function(b,c){for(var d=this._getDataLen(b),e=this.seriesGroups[b],f=this._calcGroupOffsets(b,c).offsets,g=0;g<e.series.length;g++){var h=e.series[g],i=this._getSerieSettings(b,g),j=(h.colorScheme||e.colorScheme||this.colorScheme,this._getAnimProps(b,g)),k=j.enabled&&d<5e3&&!this._isToggleRefresh&&1!=this._isVML?j.duration:0;a.jqx.mobile.isMobileBrowser()&&this.renderer instanceof a.jqx.HTML5Renderer&&(k=0);for(var l={rect:c,groupIndex:b,serieIndex:g,settings:i,items:[]},m=0;m<d;m++){var n=f[g][m];if(n.visible){var o=n.fromAngle,p=n.toAngle,q=this.renderer.pieslice(n.x,n.y,n.innerRadius,n.outerRadius,o,0==k?p:o,n.centerOffset),r={element:q,displayValue:n.displayValue,itemIndex:m,visible:n.visible,x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:n.outerRadius,fromAngle:o,toAngle:p,centerOffset:n.centerOffset};l.items.push(r)}}this._animatePieSlices(l,0);var s=this;this._enqueueAnimation("series",q,void 0,k,function(a,b,c){s._animatePieSlices(b,c)},l)}},_sliceSortFunction:function(a,b){return a.fromAngle-b.fromAngle},_animatePieSlices:function(b,c){var d;this._elementRenderInfo&&this._elementRenderInfo.length>b.groupIndex&&this._elementRenderInfo[b.groupIndex].series&&this._elementRenderInfo[b.groupIndex].series.length>b.serieIndex&&(d=this._elementRenderInfo[b.groupIndex].series[b.serieIndex]);for(var e=[],f=0;f<b.items.length;f++){var g=b.items[f];if(g.visible){var h=g.fromAngle,i=g.fromAngle+c*(g.toAngle-g.fromAngle);if(d&&d[g.displayValue]){var j=d[g.displayValue].fromAngle,k=d[g.displayValue].toAngle;h=j+(h-j)*c,i=k+(i-k)*c}e.push({index:f,from:h,to:i})}}d&&e.sort(this._sliceSortFunction);for(var l=NaN,f=0;f<e.length;f++){var g=b.items[e[f].index];g.labelElement&&this.renderer.removeElement(g.labelElement);var h=e[f].from,i=e[f].to;d&&(!isNaN(l)&&h>l&&(h=l),l=i,f==e.length-1&&i!=e[0].from&&(i=360+e[0].from));var m=this.renderer.pieSlicePath(g.x,g.y,g.innerRadius,g.outerRadius,h,i,g.centerOffset);this.renderer.attr(g.element,{d:m});var n=this._getColors(b.groupIndex,b.serieIndex,g.itemIndex,"radialGradient",g.outerRadius),o=b.settings;this.renderer.attr(g.element,{fill:n.fillColor,stroke:n.lineColor,"stroke-width":o.stroke,"fill-opacity":o.opacity,"stroke-opacity":o.opacity,"stroke-dasharray":"none"});var p=this.seriesGroups[b.groupIndex],q=p.series[b.serieIndex];if(1==q.showLabels||!q.showLabels&&1==p.showLabels){var r=h,s=i,t=Math.abs(r-s);t>360&&(r=0,s=360);var u=(r*Math.PI*2/360,s*Math.PI*2/360,t/2+r);u%=360;var v,w=u*Math.PI*2/360;1==q.labelsAutoRotate&&(v=u<90||u>270?360-u:180-u);var x=this._showLabel(b.groupIndex,b.serieIndex,g.itemIndex,{x:0,y:0,width:0,height:0},"center","center",!0,!1,!1,v),y=q.labelRadius||g.outerRadius+Math.max(x.width,x.height);y+=g.centerOffset;var z=a.jqx.getNum([q.offsetX,p.offsetX,b.rect.width/2]),A=a.jqx.getNum([q.offsetY,p.offsetY,b.rect.height/2]),B=b.rect.x+z,C=b.rect.y+A,D=this._adjustTextBoxPosition(B,C,x,y,u,g.outerRadius>y,0!=q.labelLinesAngles,1==q.labelsAutoRotate);g.labelElement=this._showLabel(b.groupIndex,b.serieIndex,g.itemIndex,{x:D.x,y:D.y,width:x.width,height:x.height},"left","top",!1,!1,!1,v),y>g.outerRadius+5&&0!=q.labelLinesEnabled&&(g.labelArrowPath=this._updateLebelArrowPath(g.labelArrowPath,B,C,y,g.outerRadius,w,0!=q.labelLinesAngles,n,o))}1==c&&this._installHandlers(g.element,"pieslice",b.groupIndex,b.serieIndex,g.itemIndex)}},_updateLebelArrowPath:function(b,c,d,e,f,g,h,i,j){var k=a.jqx._ptrnd(c+(e-0)*Math.cos(g)),l=a.jqx._ptrnd(d-(e-0)*Math.sin(g)),m=a.jqx._ptrnd(c+(f+2)*Math.cos(g)),n=a.jqx._ptrnd(d-(f+2)*Math.sin(g)),o="M "+k+","+l+" L"+m+","+n;return h&&(o="M "+k+","+l+" L"+m+","+l+" L"+m+","+n),b?this.renderer.attr(b,{d:o}):b=this.renderer.path(o,{}),this.renderer.attr(b,{fill:"none",stroke:i.lineColor,"stroke-width":j.stroke,"stroke-opacity":j.opacity,"stroke-dasharray":"none"}),b},_adjustTextBoxPosition:function(b,c,d,e,f,g,h,i){var j=f*Math.PI*2/360,k=a.jqx._ptrnd(b+e*Math.cos(j)),l=a.jqx._ptrnd(c-e*Math.sin(j));if(i){var m=d.width,n=d.height,o=Math.atan(n/m)%(2*Math.PI),p=j%(2*Math.PI),q=0,r=0,s=0;p<=o?(s=m/2*Math.cos(j),r=s*Math.sin(j),q=-m/2):p>=o&&p<Math.PI-o?(s=n/2*Math.sin(j),r=n/2,q=-Math.cos(j)*s):p>=Math.PI-o&&p<Math.PI+o?(s=m/2*Math.cos(j),r=-s*Math.sin(j),q=m/2):p>=Math.PI+o&&p<2*Math.PI-o?(s=n/2*Math.sin(j),r=-n/2,q=Math.cos(j)*s):p>=2*Math.PI-o&&p<2*Math.PI&&(s=m/2*Math.cos(j),r=s*Math.sin(j),q=-m/2),e+=Math.abs(s)+3;var k=a.jqx._ptrnd(b+e*Math.cos(j)),l=a.jqx._ptrnd(c-e*Math.sin(j));return k-=d.width/2,l-=d.height/2,{x:k,y:l}}return g?(k-=d.width/2,l-=d.height/2):h?f>=90&&f<270?(l-=d.height/2,k-=d.width):l-=d.height/2:f>=0&&f<45||f>=315&&f<360?l-=d.height/2:f>=45&&f<135?(l-=d.height,k-=d.width/2):f>=135&&f<225?(l-=d.height/2,k-=d.width):f>=225&&f<315&&(k-=d.width/2),{x:k,y:l}},_getColumnGroupsCount:function(a){var b=0;a=a||"vertical";for(var c=this.seriesGroups,d=0;d<c.length;d++){var e=c[d].orientation||"vertical";c[d].type.indexOf("column")!=-1&&e==a&&b++}return b},_getColumnGroupIndex:function(a){for(var b=0,c=this.seriesGroups[a].orientation||"vertical",d=0;d<a;d++){var e=this.seriesGroups[d],f=e.orientation||"vertical";e.type.indexOf("column")!=-1&&f==c&&b++}return b},_renderBand:function(a,b,c){var d=this.seriesGroups[a];if(d.bands&&!(d.bands.length<=b)){var e=c;"horizontal"==d.orientation&&(e={x:c.y,y:c.x,width:c.height,height:c.width});var f=this._calcGroupOffsets(a,e);if(f&&!(f.length<=a)){var g=d.bands[b],h=f.bands[b],i=h.from,j=h.to,k=Math.abs(i-j),l={x:e.x,y:Math.min(i,j),width:e.width,height:k};if("horizontal"==d.orientation){var m=l.x;l.x=l.y,l.y=m,m=l.width,l.width=l.height,l.height=m}var n=this.renderer.rect(l.x,l.y,l.width,l.height),o=g.color||"#AAAAAA",p=g.opacity;(isNaN(p)||p<0||p>1)&&(p=.5),this.renderer.attr(n,{fill:o,"fill-opacity":p,stroke:o,"stroke-opacity":p,"stroke-width":0})}}},_renderColumnSeries:function(b,c){var d=this.seriesGroups[b];if(d.series&&0!=d.series.length){var e=d.type.indexOf("stacked")!=-1,f=(e&&d.type.indexOf("100")!=-1,d.type.indexOf("range")!=-1,this._getDataLen(b),d.columnsGapPercent);(isNaN(f)||f<0||f>100)&&(f=25);var g=d.seriesGapPercent;(isNaN(g)||g<0||g>100)&&(g=10);var h="horizontal"==d.orientation,i=c;h&&(i={x:c.y,y:c.x,width:c.height,height:c.width});var j=this._calcGroupOffsets(b,i);if(j&&0!=j.xoffsets.length){var k=this._getColumnGroupsCount(d.orientation),l=this._getColumnGroupIndex(b);1==this.columnSeriesOverlap&&(k=1,l=0);var m,n=!0;1!=d.polar&&1!=d.spider||(m=this._getPolarAxisCoords(b,i),f=0,g=0);for(var o={groupIndex:b,rect:c,vertical:!h,seriesCtx:[],renderData:j,polarAxisCoords:m},p=this._getGroupGradientType(b),q=0;q<d.series.length;q++){var r=d.series[q],s=r.columnsMaxWidth||d.columnsMaxWidth,t=(r.dataField,this._getAnimProps(b,q)),u=t.enabled&&!this._isToggleRefresh&&j.xoffsets.length<100?t.duration:0,v=0,w=j.xoffsets.itemWidth;n&&(v-=w/2),v+=w*(l/k),w/=k;var y=v+w,z=y-v,A=(y-v)/(1+f/100),B=!e&&d.series.length>1?A*g/100/(d.series.length-1):0,C=A-B*(d.series.length-1);A<1&&(A=1);var D=0;!e&&d.series.length>1&&(C/=d.series.length,D=q);var E=v+(z-A)/2+D*(B+C);if(D==d.series.length&&(C=z-v+A-x),!isNaN(s)){var F=Math.min(C,s);E+=(C-F)/2,C=F}var G=this._isSerieVisible(b,q),H=this._getSerieSettings(b,q),I=this._getColors(b,q,NaN,this._getGroupGradientType(b),4),J=[];if(a.isFunction(r.colorFunction)&&!m)for(var K=j.xoffsets.first;K<=j.xoffsets.last;K++)J.push(this._getColors(b,q,K,p,4));var L={seriesIndex:q,serieColors:I,itemsColors:J,settings:H,columnWidth:C,xAdjust:E,isVisible:G};o.seriesCtx.push(L)}this._animateColumns(o,0==u?1:0);var M=this;this._enqueueAnimation("series",void 0,void 0,u,function(a,b,c){M._animateColumns(b,c)},o)}}},_getColumnOffsets:function(a,b,c,d,e,f){for(var g=this.seriesGroups[b],h=[],i=0;i<c.length;i++){var j=c[i],k=j.seriesIndex,l=(g.series[k],a.offsets[k][d].from),m=a.offsets[k][d].to,n=a.xoffsets.data[d],o=void 0,p=j.isVisible;if(p||(m=l),p&&this._elementRenderInfo&&this._elementRenderInfo.length>b){var q=a.xoffsets.xvalues[d];o=this._elementRenderInfo[b].series[k][q],!o||isNaN(o.from)||isNaN(o.to)||(l=o.from+(l-o.from)*f,m=o.to+(m-o.to)*f,n=o.xoffset+(n-o.xoffset)*f)}o||(m=l+(m-l)*(e?1:f)),isNaN(l)&&(l=0),isNaN(m)&&(m=isNaN(l)?0:l),h.push({from:l,to:m,xOffset:n})}if(e&&h.length>1&&!(this._elementRenderInfo&&this._elementRenderInfo.length>b)){for(var r=0,s=0,t=0;t<h.length;t++)h[t].to>=h[t].from?s+=h[t].to-h[t].from:r+=h[t].from-h[t].to;r*=f,s*=f;for(var u=0,v=0,t=0;t<h.length;t++)if(h[t].to>=h[t].from){var w=h[t].to-h[t].from;w+v>s&&(w=Math.max(0,s-v),h[t].to=h[t].from+w),v+=w}else{var w=h[t].from-h[t].to;w+u>r&&(w=Math.max(0,r-u),h[t].to=h[t].from-w),u+=w}}return h},_columnAsPieSlice:function(b,c,d,e,f){var g=this._toPolarCoord(e,d,f.x,f.y),h=this._toPolarCoord(e,d,f.x,f.y+f.height),i=(this._toPolarCoord(e,d,f.x+f.width,f.y),a.jqx._ptdist(e.x,e.y,h.x,h.y)),j=a.jqx._ptdist(e.x,e.y,g.x,g.y),k=d.width,l=-(360*(f.x-d.x))/k,m=-(360*(f.x+f.width-d.x))/k,n=e.startAngle;if(n=360*n/(2*Math.PI),l-=n,m-=n,void 0!=b[c]){var o=this.renderer.pieSlicePath(e.x,e.y,i,j,m,l,0);this.renderer.attr(b[c],{d:o})}else b[c]=this.renderer.pieslice(e.x,e.y,i,j,m,l,0);return{fromAngle:m,toAngle:l,innerRadius:i,outerRadius:j}},_animateColumns:function(b,c){for(var d=b.groupIndex,e=this.seriesGroups[d],f=b.renderData,g=e.type.indexOf("stacked")!=-1,h=b.polarAxisCoords,i=(this._getGroupGradientType(d),f.xoffsets.first);i<=f.xoffsets.last;i++)for(var j=this._getColumnOffsets(f,d,b.seriesCtx,i,g,c),k=0;k<b.seriesCtx.length;k++){var l=b.seriesCtx[k],m=l.seriesIndex,n=(e.series[m],j[k].from),o=j[k].to,p=j[k].xOffset;l.elements||(l.elements={}),l.labelElements||(l.labelElements={});var q=l.elements,r=l.labelElements,s=(b.vertical?b.rect.x:b.rect.y)+l.xAdjust,t=l.settings,u=0!=l.itemsColors.length?l.itemsColors[i-f.xoffsets.first]:l.serieColors,v=this._isSerieVisible(d,m);if(v||g){var w=a.jqx._ptrnd(s+p),x={x:w,width:l.columnWidth},y=!0;b.vertical?(x.y=n,x.height=o-n,x.height<0&&(x.y+=x.height,x.height=-x.height,y=!1)):(x.x=n<o?n:o,x.width=Math.abs(n-o),x.y=w,x.height=l.columnWidth);var z=n-o;if(!isNaN(z)){if(z=Math.abs(z),void 0==q[i]&&(h?this._columnAsPieSlice(q,i,b.rect,h,x):q[i]=this.renderer.rect(x.x,x.y,b.vertical?x.width:0,b.vertical?0:x.height),this.renderer.attr(q[i],{fill:u.fillColor,"fill-opacity":t.opacity,"stroke-opacity":t.opacity,stroke:u.lineColor,"stroke-width":t.stroke,"stroke-dasharray":t.dashStyle})),z<1&&1!=c?this.renderer.attr(q[i],{display:"none"}):this.renderer.attr(q[i],{display:"block"}),h){var A=this._columnAsPieSlice(q,i,b.rect,h,x),u=this._getColors(d,m,void 0,"radialGradient",A.outerRadius);this.renderer.attr(q[i],{fill:u.fillColor,"fill-opacity":t.opacity,"stroke-opacity":t.opacity,stroke:u.lineColor,"stroke-width":t.stroke,"stroke-dasharray":t.dashStyle})}else 1==b.vertical?this.renderer.attr(q[i],{x:x.x,y:x.y,height:z}):this.renderer.attr(q[i],{x:x.x,y:x.y,width:z});this.renderer.removeElement(r[i]),!v||0==z&&c<1||(r[i]=this._showLabel(d,m,i,x,void 0,void 0,!1,!1,y),1==c&&this._installHandlers(q[i],"column",d,m,i))}}}},_renderScatterSeries:function(b,c){var d=this.seriesGroups[b];if(d.series&&0!=d.series.length){var e=d.type.indexOf("bubble")!=-1,f="horizontal"==d.orientation,g=c;f&&(g={x:c.y,y:c.x,width:c.height,height:c.width});var h=this._calcGroupOffsets(b,g);if(h&&0!=h.xoffsets.length){var i,j=g.width;(d.polar||d.spider)&&(i=this._getPolarAxisCoords(b,g),j=2*i.r);for(var k=(this._alignValuesWithTicks(b),this._getGroupGradientType(b)),l=0;l<d.series.length;l++){var m=this._getSerieSettings(b,l),n=d.series[l],o=n.dataField,p=a.isFunction(n.colorFunction),q=this._getColors(b,l,NaN,k),r=NaN,s=NaN;if(e)for(var t=h.xoffsets.first;t<=h.xoffsets.last;t++){var u=this._getDataValueAsNumber(t,n.radiusDataField,b);if("number"!=typeof u)throw"Invalid radiusDataField value at ["+t+"]";isNaN(u)||((isNaN(r)||u<r)&&(r=u),(isNaN(s)||u>s)&&(s=u))}var v=n.minRadius;isNaN(v)&&(v=j/50);var w=n.maxRadius;isNaN(w)&&(w=j/25),v>w&&(w=v);for(var x=n.radius||5,y=this._getAnimProps(b,l),z=y.enabled&&!this._isToggleRefresh&&h.xoffsets.length<5e3?y.duration:0,A={groupIndex:b,seriesIndex:l,"fill-opacity":m.opacity,"stroke-opacity":m.opacity,"stroke-width":m.stroke,"stroke-dasharray":m.dashStyle,items:[],polarAxisCoords:i},t=h.xoffsets.first;t<=h.xoffsets.last;t++){var u=this._getDataValueAsNumber(t,o,b);if("number"==typeof u){var B=h.xoffsets.data[t],C=h.offsets[l][t].to,D=h.xoffsets.xvalues[t];if(!isNaN(B)&&!isNaN(C)){if(f){var E=B;B=C,C=E+c.y}else B+=c.x;var F=x;if(e){var G=this._getDataValueAsNumber(t,n.radiusDataField,b);if("number"!=typeof G)continue;F=v+(w-v)*(G-r)/Math.max(1,s-r),isNaN(F)&&(F=v)}var H=NaN,I=NaN,J=0;if(void 0!=D&&this._elementRenderInfo&&this._elementRenderInfo.length>b){var K=this._elementRenderInfo[b].series[l][D];if(K&&!isNaN(K.to)){if(H=K.to,I=K.xoffset,J=x,f){var E=I;I=H,H=E+c.y}else I+=c.x;e&&(J=v+(w-v)*(K.valueRadius-r)/Math.max(1,s-r),isNaN(J)&&(J=v))}}p&&(q=this._getColors(b,l,t,k)),A.items.push({from:J,to:F,itemIndex:t,fill:q.fillColor,stroke:q.lineColor,x:B,y:C,xFrom:I,yFrom:H})}}}this._animR(A,0);var L=this;this._enqueueAnimation("series",void 0,void 0,z,function(a,b,c){L._animR(b,c)},A)}}}},_animR:function(b,c){for(var d=b.items,e=0;e<d.length;e++){var f=d[e],g=f.x,h=f.y,i=Math.round((f.to-f.from)*c+f.from);if(isNaN(f.yFrom)||(h=f.yFrom+(h-f.yFrom)*c),isNaN(f.xFrom)||(g=f.xFrom+(g-f.xFrom)*c),b.polarAxisCoords){var j=this._toPolarCoord(b.polarAxisCoords,this._plotRect,g,h);g=j.x,h=j.y}g=a.jqx._ptrnd(g),h=a.jqx._ptrnd(h),i=a.jqx._ptrnd(i);var k=f.element;k||(k=this.renderer.circle(g,h,i),this.renderer.attr(k,{fill:f.fill,"fill-opacity":b["fill-opacity"],"stroke-opacity":b["fill-opacity"],stroke:f.stroke,"stroke-width":b["stroke-width"],"stroke-dasharray":b["stroke-dasharray"]}),f.element=k),this._isVML?this.renderer.updateCircle(k,void 0,void 0,i):this.renderer.attr(k,{r:i,cy:h,cx:g}),f.labelElement&&this.renderer.removeElement(f.labelElement),f.labelElement=this._showLabel(b.groupIndex,b.seriesIndex,f.itemIndex,{x:g-i,y:h-i,width:2*i,height:2*i}),c>=1&&this._installHandlers(k,"circle",b.groupIndex,b.seriesIndex,f.itemIndex)}},_showToolTip:function(b,c,d,e,f){var g=this,h=g._getCategoryAxis(d);if(!g._ttEl||d!=g._ttEl.gidx||e!=g._ttEl.sidx||f!=g._ttEl.iidx){var i=g.seriesGroups[d],j=i.series[e],k=g.enableCrosshairs&&!(i.polar||i.spider);g._pointMarker?(b=parseInt(g._pointMarker.x+5),c=parseInt(g._pointMarker.y-5)):k=!1;var l=k&&0==g.showToolTips;b=a.jqx._ptrnd(b),c=a.jqx._ptrnd(c);var m=void 0==g._ttEl;if(0!=i.showToolTips&&0!=j.showToolTips){var n=j.toolTipFormatSettings||i.toolTipFormatSettings,o=j.toolTipFormatFunction||i.toolTipFormatFunction||g.toolTipFormatFunction,p=g._getColors(d,e,f),q=g._getDataValue(f,h.dataField,d);void 0!=h.dataField&&""!=h.dataField||(q=f),"date"==h.type&&(q=g._castAsDate(q));var r="";if(a.isFunction(o)){var s={};i.type.indexOf("range")==-1?s=g._getDataValue(f,j.dataField,d):(s.from=g._getDataValue(f,j.dataFieldFrom,d),s.to=g._getDataValue(f,j.dataFieldTo,d)),r=o(s,f,j,i,q,h)}else{r=g._getFormattedValue(d,e,f,n,o);var t=h.toolTipFormatSettings||h.formatSettings,u=h.toolTipFormatFunction||h.formatFunction;u||t||"date"!=h.type||(u=this._getDefaultDTFormatFn(h.baseUnit||"day"));var v=g._formatValue(q,t,u);"pie"!=i.type&&"donut"!=i.type?r=(j.displayText||j.dataField||"")+", "+v+": "+r:(q=g._getDataValue(f,j.displayText||j.dataField,d),v=g._formatValue(q,t,u),r=v+": "+r)}var w=j.toolTipClass||i.toolTipClass||this.toThemeProperty("jqx-chart-tooltip-text",null),x=j.toolTipBackground||i.toolTipBackground||"#FFFFFF",y=j.toolTipLineColor||i.toolTipLineColor||p.lineColor;if(g._ttEl||(g._ttEl={}),g._ttEl.sidx=e,g._ttEl.gidx=d,g._ttEl.iidx=f,rect=g.renderer.getRect(),k){var z=a.jqx._ptrnd(g._pointMarker.x),A=a.jqx._ptrnd(g._pointMarker.y);if(g._ttEl.vLine&&g._ttEl.hLine)g.renderer.attr(g._ttEl.vLine,{x1:z,x2:z}),g.renderer.attr(g._ttEl.hLine,{y1:A,y2:A});else{var B=g.crosshairsColor||"#888888";g._ttEl.vLine=g.renderer.line(z,g._plotRect.y,z,g._plotRect.y+g._plotRect.height,{stroke:B,"stroke-width":g.crosshairsLineWidth||1,"stroke-dasharray":g.crosshairsDashStyle||""}),g._ttEl.hLine=g.renderer.line(g._plotRect.x,A,g._plotRect.x+g._plotRect.width,A,{stroke:B,"stroke-width":g.crosshairsLineWidth||1,"stroke-dasharray":g.crosshairsDashStyle||""})}}if(!l&&0!=g.showToolTips){var C=m?document.createElement("div"):g._ttEl.box,D={left:0,top:0};m&&(C.style.position="absolute",C.style.cursor="default",C.style.overflow="hidden",a(C).addClass("jqx-rc-all jqx-button"),a(C).css("z-index",9999999),a(document.body).append(C)),C.style.backgroundColor=x,C.style.borderColor=y,g._ttEl.box=C,g._ttEl.txt=r;var E="<span class='"+w+"'>"+r+"</span>",F=g._ttEl.tmp;if(m&&(g._ttEl.tmp=F=document.createElement("div"),F.style.position="absolute",F.style.cursor="default",F.style.overflow="hidden",F.style.display="none",F.style.zIndex=999999,F.style.backgroundColor=x,F.style.borderColor=y,a(F).addClass("jqx-rc-all jqx-button"),g.host.append(F)),a(F).html(E),!r||0==r.length)return void a(C).fadeTo(0,0);var G={width:a(F).width(),height:a(F).height()};if(G.width=G.width+5,G.height=G.height+6,b=Math.max(b,rect.x),c=Math.max(c-G.height,rect.y),G.width>rect.width||G.height>rect.height)return;b+D.left+G.width>rect.x+rect.width-5&&(b=rect.x+rect.width-G.width-D.left-5),c+D.top+G.height>rect.y+rect.height-5&&(c=rect.y+rect.height-G.height-5);var H=g.host.coord();m&&(a(C).fadeOut(0,0),C.style.left=D.left+b+H.left+"px",C.style.top=D.top+c+H.top+"px"),a(C).html(E),a(C).clearQueue(),a(C).animate({left:D.left+b+H.left,top:D.top+c+H.top,opacity:1},300,"easeInOutCirc"),a(C).fadeTo(400,1)}}}},_hideToolTip:function(b){this._ttEl&&(this._ttEl.box&&(0==b?a(this._ttEl.box).hide():a(this._ttEl.box).fadeOut()),this._hideCrosshairs(),this._ttEl.gidx=void 0)},_hideCrosshairs:function(){this._ttEl&&(this._ttEl.vLine&&(this.renderer.removeElement(this._ttEl.vLine),this._ttEl.vLine=void 0),this._ttEl.hLine&&(this.renderer.removeElement(this._ttEl.hLine),this._ttEl.hLine=void 0))},_showLabel:function(a,b,c,d,e,f,g,h,i,j){var k=this.seriesGroups[a],l=k.series[b],m={width:0,height:0};if(0==l.showLabels||!l.showLabels&&!k.showLabels)return g?m:void 0;if(d.width<0||d.height<0)return g?m:void 0;var n=l.labelClass||k.labelClass||this.toThemeProperty("jqx-chart-label-text",null),o=l.labelAngle||l.labelsAngle||k.labelAngle||k.labelsAngle||0;isNaN(j)||(o=j);var p=l.labelOffset||l.labelsOffset||k.labelOffset||k.labelsOffset||{},q={x:p.x,y:p.y};isNaN(q.x)&&(q.x=0),isNaN(q.y)&&(q.y=0),e=e||l.labelsHorizontalAlignment||k.labelsHorizontalAlignment||"center",f=f||l.labelsVerticalAlignment||k.labelsVerticalAlignment||"center";var r=this._getFormattedValue(a,b,c),s=d.width,t=d.height;if(1==h&&"center"!=e&&(e="right"==e?"left":"right"),1==i&&"center"!=f&&"middle"!=f&&(f="top"==f?"bottom":"top",q.y*=-1),m=this.renderer.measureText(r,o,{"class":n}),g)return m;var u=0;s>0&&(""==e||"center"==e?u+=(s-m.width)/2:"right"==e&&(u+=s-m.width));var v=0;t>0&&(""==f||"center"==f?v+=(t-m.height)/2:"bottom"==f&&(v+=t-m.height)),u+=d.x+q.x,v+=d.y+q.y;var w=this._plotRect;u<=w.x&&(u=w.x+2),v<=w.y&&(v=w.y+2);var x={width:Math.max(m.width,1),height:Math.max(m.height,1)};v+x.height>=w.y+w.height&&(v=w.y+w.height-x.height-2),u+x.width>=w.x+w.width&&(u=w.x+w.width-x.width-2);var y=this.renderer.text(r,u,v,m.width,m.height,o,{"class":n},!1,"center","center");return this.renderer.attr(y,{"class":n}),this._isVML&&(this.renderer.removeElement(y),this.renderer.getContainer()[0].appendChild(y)),y},_getAnimProps:function(a,b){var c=this.seriesGroups[a],d=isNaN(b)?void 0:c.series[b],e=1==this.enableAnimations;c.enableAnimations&&(e=1==c.enableAnimations),d&&d.enableAnimations&&(e=1==d.enableAnimations);var f=this.animationDuration;isNaN(f)&&(f=1e3);var g=c.animationDuration;if(isNaN(g)||(f=g),d){var h=d.animationDuration;isNaN(h)||(f=h)}return f>5e3&&(f=1e3),{enabled:e,duration:f}},_isColorTransition:function(a,b,c,d){if(d-1<c.xoffsets.first)return!1;var e=this._getColors(a,b,d,this._getGroupGradientType(a)),f=this._getColors(a,b,d-1,this._getGroupGradientType(a));return e.fillColor!=f.fillColor},_renderLineSeries:function(b,c){var d=this.seriesGroups[b];if(d.series&&0!=d.series.length){var e=d.type.indexOf("area")!=-1,f=d.type.indexOf("stacked")!=-1,g=f&&d.type.indexOf("100")!=-1,h=d.type.indexOf("spline")!=-1,i=d.type.indexOf("step")!=-1,j=d.type.indexOf("range")!=-1,k=1==d.polar||1==d.spider;if(k&&(i=!1),!i||!h){var l=this._getDataLen(b),m=(c.width/l,"horizontal"==d.orientation),n=1==this._getCategoryAxis(b).flip,o=c;m&&(o={x:c.y,y:c.x,width:c.height,height:c.width});var p=this._calcGroupOffsets(b,o);if(p&&0!=p.xoffsets.length){this._linesRenderInfo||(this._linesRenderInfo={}),this._linesRenderInfo[b]={};for(var q=d.series.length-1;q>=0;q--){var r=this._getSerieSettings(b,q),s={groupIndex:b,serieIndex:q,swapXY:m,isArea:e,isSpline:h,isRange:j,isPolar:k,settings:r,segments:[],pointsLength:0},t=this._isSerieVisible(b,q);if(t){var u=d.series[q],v=a.isFunction(u.colorFunction),w=p.xoffsets.first,x=w,y=this._getColors(b,q,NaN,this._getGroupGradientType(b));do{var z=[],A=[],B=[],C=0,D=NaN,E=NaN,F=NaN;if(!(p.xoffsets.length<1)){for(var G=this._getAnimProps(b,q),H=G.enabled&&!this._isToggleRefresh&&p.xoffsets.length<1e4&&1!=this._isVML?G.duration:0,I=w,J=!1,K=(this._getColors(b,q,w,this._getGroupGradientType(b)),w);K<=p.xoffsets.last;K++){w=K;var L=p.xoffsets.data[K],M=p.xoffsets.xvalues[K];if(!isNaN(L)){L=Math.max(L,1),C=L;var N=p.offsets[q][K].to,O=p.offsets[q][K].from;if(isNaN(N)||isNaN(O)){if("connect"==u.emptyPointsDisplay)continue;if("zero"!=u.emptyPointsDisplay){J=!0;break}isNaN(N)&&(N=p.baseOffset),isNaN(O)&&(O=p.baseOffset)}if(v&&this._isColorTransition(b,q,p,w)&&z.length>1){w--;break}if(this._elementRenderInfo&&this._elementRenderInfo.length>b&&this._elementRenderInfo[b].series.length>q){var P=this._elementRenderInfo[b].series[q][M],F=a.jqx._ptrnd(P?P.to:void 0),Q=a.jqx._ptrnd(o.x+(P?P.xoffset:void 0));B.push(m?{y:Q,x:F,index:K}:{x:Q,y:F,index:K})}x=K,r.stroke<2&&(N-o.y<=1&&(N=o.y+1),O-o.y<=1&&(O=o.y+1),o.y+o.height-N<=1&&(N=o.y+o.height-1),o.y+o.height-N<=1&&(O=o.y+o.height-1)),!e&&g&&(N<=o.y&&(N=o.y+1),N>=o.y+o.height&&(N=o.y+o.height-1),O<=o.y&&(O=o.y+1),O>=o.y+o.height&&(O=o.y+o.height-1)),L=Math.max(L,1),C=L+o.x,!i||isNaN(D)||isNaN(E)||E!=N&&z.push(m?{y:C,x:a.jqx._ptrnd(E)}:{x:C,y:a.jqx._ptrnd(E)}),z.push(m?{y:C,x:a.jqx._ptrnd(N),index:K}:{x:C,y:a.jqx._ptrnd(N),index:K}),A.push(m?{y:C,x:a.jqx._ptrnd(O),index:K}:{x:C,y:a.jqx._ptrnd(O),index:K}),D=C,E=N,isNaN(F)&&(F=N)}}if(0!=z.length){var R=z[z.length-1].index;v&&(y=this._getColors(b,q,R,this._getGroupGradientType(b)));var S=o.x+p.xoffsets.data[I],T=o.x+p.xoffsets.data[x];if(e&&1==d.alignEndPointsWithIntervals){if(S>o.x&&(S=o.x),T<o.x+o.width&&(T=o.x+o.width),n){var U=S;S=T,T=U}}T=a.jqx._ptrnd(T),S=a.jqx._ptrnd(S);var V=p.baseOffset;F=a.jqx._ptrnd(F);var W=a.jqx._ptrnd(N)||V;j&&(z=z.concat(A.reverse())),s.pointsLength+=z.length;var X={lastItemIndex:R,colorSettings:y,pointsArray:z,pointsStart:B,left:S,right:T,pyStart:F,pyEnd:W,yBase:V,labelElements:[],symbolElements:[]};s.segments.push(X)}else w++}}while(w<p.xoffsets.length-1||J);this._linesRenderInfo[b][q]=s}else this._linesRenderInfo[b][q]=s}var Y=this._linesRenderInfo[b],Z=[];for(var K in Y)Z.push(Y[K]);Z=Z.sort(function(a,b){return a.serieIndex-b.serieIndex}),e&&f&&Z.reverse();for(var K=0;K<Z.length;K++){var s=Z[K];this._animateLine(s,0==H?1:0);var $=this;this._enqueueAnimation("series",void 0,void 0,H,function(a,b,c){$._animateLine(b,c)},s)}}}}},_animateLine:function(a,b){for(var c=a.settings,d=a.groupIndex,e=a.serieIndex,f=this.seriesGroups[d],g=f.series[e],h=this._getSymbol(d,e),i=1==g.showLabels||f.showLabels&&0!=g.showLabels,j=0,k=0;k<a.segments.length;k++){var l=a.segments[k],m=this._calculateLine(d,a.pointsLength,j,l.pointsArray,l.pointsStart,l.yBase,b,a.isArea,a.swapXY);if(j+=l.pointsArray.length,""!=m){var n=m.split(" "),o=(n.length,m);o=""!=o?this._buildLineCmd(m,a.isRange,l.left,l.right,l.pyStart,l.pyEnd,l.yBase,a.isArea,a.isPolar,a.isSpline,a.swapXY):"M 0 0";var p=l.colorSettings;if(l.pathElement?this.renderer.attr(l.pathElement,{d:o}):(l.pathElement=this.renderer.path(o,{"stroke-width":c.stroke,stroke:p.lineColor,"stroke-opacity":c.opacity,"fill-opacity":c.opacity,"stroke-dasharray":c.dashStyle,fill:a.isArea?p.fillColor:"none"}),this._installHandlers(l.pathElement,"path",d,e,l.lastItemIndex)),l.labelElements){for(var q=0;q<l.labelElements.length;q++)this.renderer.removeElement(l.labelElements[q]);l.labelElements=[]}if(l.symbolElements){for(var q=0;q<l.symbolElements.length;q++)this.renderer.removeElement(l.symbolElements[q]);l.symbolElements=[]}if(l.pointsArray.length==n.length&&("none"!=h||i))for(var r=g.symbolSize,q=0;q<n.length;q++){var s=n[q].split(",");if(s={x:parseFloat(s[0]),y:parseFloat(s[1])},"none"!=h){var t=this._getColors(d,e,l.pointsArray[q].index,this._getGroupGradientType(d)),u=this._drawSymbol(h,s.x,s.y,t.fillColorSymbol,t.lineColorSymbol,1,c.opacity,r);l.symbolElements.push(u)}if(i){var v=(q>0?n[q-1]:n[q]).split(",");v={x:parseFloat(v[0]),y:parseFloat(v[1])};var w=(q<n.length-1?n[q+1]:n[q]).split(",");w={x:parseFloat(w[0]),y:parseFloat(w[1])},s=this._adjustLineLabelPosition(d,e,l.pointsArray[q].index,s,v,w);var x=this._showLabel(d,e,l.pointsArray[q].index,{x:s.x,y:s.y,width:0,height:0});l.labelElements.push(x)}}if(1==b&&"none"!=h)for(var q=0;q<l.symbolElements.length;q++)this._installHandlers(l.symbolElements[q],"symbol",d,e,l.pointsArray[q].index)}}},_adjustLineLabelPosition:function(a,b,c,d,e,f){var g=this._showLabel(a,b,c,{width:0,height:0},"","",!0),h={x:0,y:0};return d.y==e.y&&d.x==e.x?h=f.y<d.y?{x:d.x,y:d.y+g.height}:{x:d.x,y:d.y-g.height}:d.y==f.y&&d.x==f.x&&(h=e.y<d.y?{x:d.x,y:d.y+g.height}:{x:d.x,y:d.y-g.height}),h=d.y>e.y&&d.y>f.y?{x:d.x,y:d.y+g.height}:{x:d.x,y:d.y-g.height}},_calculateLine:function(b,c,d,e,f,g,h,i,j){var k=this.seriesGroups[b],l=void 0;1!=k.polar&&1!=k.spider||(l=this._getPolarAxisCoords(b,this._plotRect));var m="",n=e.length;if(!i&&0==f.length){var o=c*h;n=o-d}for(var p=NaN,q=0;q<n+1&&q<e.length;q++){q>0&&(m+=" ");var r=e[q].y,s=e[q].x,t=i?g:r,u=s;if(f&&f.length>q&&(t=f[q].y,u=f[q].x,(isNaN(t)||isNaN(u))&&(t=r,u=s)),p=u,n<=e.length&&q>0&&q==n&&(u=e[q-1].x,t=e[q-1].y),j?(s=a.jqx._ptrnd((s-t)*(i?h:1)+t),r=a.jqx._ptrnd(r)):(s=a.jqx._ptrnd((s-u)*h+u),r=a.jqx._ptrnd((r-t)*h+t)),l){var v=this._toPolarCoord(l,this._plotRect,s,r);s=v.x,r=v.y}m+=s+","+r,1!=e.length||i||(m+=" "+(s+2)+","+(r+2))}return m},_buildLineCmd:function(a,b,c,d,e,f,g,h,i,j,k){var l=a;if(h&&!i&&!b){var m=k?g+","+c:c+","+g,n=k?g+","+d:d+","+g;l=m+" "+a+" "+n}j&&(l=this._getBezierPoints(l));var o=l.split(" "),p=o[0].replace("C","");return l=h&&!i?b?"M "+p+" L "+p+(j?"":" L "+p+" ")+l:"M "+m+" L "+p+" "+l:j?"M "+p+" "+l:"M "+p+" L "+p+" "+l,i&&(l+=" Z"),l},_getSerieSettings:function(a,b){var c=this.seriesGroups[a],d=c.type.indexOf("area")!=-1,e=c.type.indexOf("line")!=-1,f=c.series[b],g=f.dashStyle||c.dashStyle||"",h=f.opacity||c.opacity;
(isNaN(h)||h<0||h>1)&&(h=1);var i=f.lineWidth;return isNaN(i)&&"auto"!=i&&(i=c.lineWidth),("auto"==i||isNaN(i)||i<0||i>15)&&(i=d?2:e?3:1),{stroke:i,opacity:h,dashStyle:g}},_getColors:function(b,c,d,e,f){var g=this.seriesGroups[b],h=g.series[c],i=h.useGradient;void 0==i&&(i=h.useGradientColors),void 0==i&&(i=g.useGradient),void 0==i&&(i=g.useGradientColors),void 0==i&&(i=!0);var j=this._getSeriesColors(b,c,d);j.fillColor||(j.fillColor=color,j.fillColorSelected=a.jqx.adjustColor(color,1.1),j.lineColor=j.symbolColor=a.jqx.adjustColor(color,.9),j.lineColorSelected=j.symbolColorSelected=a.jqx.adjustColor(color,.9));var k=[[0,1.4],[100,1]],l=[[0,1],[25,1.1],[50,1.4],[100,1]],m=[[0,1.3],[90,1.2],[100,1]],n=NaN;if(isNaN(f)||(n=2==f?k:l),i)if("verticalLinearGradient"==e)j.fillColor=this.renderer._toLinearGradient(j.fillColor,!0,n||k),j.fillColorSelected=this.renderer._toLinearGradient(j.fillColorSelected,!0,n||k);else if("horizontalLinearGradient"==e)j.fillColor=this.renderer._toLinearGradient(j.fillColor,!1,n||l),j.fillColorSelected=this.renderer._toLinearGradient(j.fillColorSelected,!1,n||l);else if("radialGradient"==e){var o=void 0,n=k;("pie"==g.type||"donut"==g.type||g.polar)&&void 0!=d&&this._renderData[b]&&this._renderData[b].offsets[c]&&(o=this._renderData[b].offsets[c][d],n=m),j.fillColor=this.renderer._toRadialGradient(j.fillColor,n,o),j.fillColorSelected=this.renderer._toRadialGradient(j.fillColorSelected,n,o)}return j},_installHandlers:function(a,b,c,d,e){if(!this.enableEvents)return!1;var f=this,g=this.seriesGroups[c],h=this.seriesGroups[c].series[d],i=g.type.indexOf("line")!=-1||g.type.indexOf("area")!=-1;i||(this.renderer.addHandler(a,"mousemove",function(a){a.preventDefault();var b=a.pageX||a.clientX||a.screenX,g=a.pageY||a.clientY||a.screenY,h=f.host.offset();b-=h.left,g-=h.top,f._mouseX==b&&f._mouseY==g||f._ttEl&&f._ttEl.gidx==c&&f._ttEl.sidx==d&&f._ttEl.iidx==e||f._startTooltipTimer(c,d,e)}),this.renderer.addHandler(a,"mouseout",function(a){!isNaN(f._lastClickTs)&&(new Date).valueOf()-f._lastClickTs<100||(a.preventDefault(),void 0!=e&&f._cancelTooltipTimer(),i||f._unselect())})),this.renderer.addHandler(a,"mouseover",function(g){g.preventDefault(),f._select(a,b,c,d,e,e)}),this.renderer.addHandler(a,"click",function(a){clearTimeout(f._hostClickTimer),f._lastClickTs=(new Date).valueOf(),i&&"symbol"!=b&&"pointMarker"!=b||(g.type.indexOf("column")!=-1&&f._unselect(),isNaN(e)||f._raiseItemEvent("click",g,h,e))})},_getHorizontalOffset:function(b,c,d,e){var f=this._plotRect,g=this._getDataLen(b);if(0==g)return{index:void 0,value:d};var h=this._calcGroupOffsets(b,this._plotRect);if(0==h.xoffsets.length)return{index:void 0,value:void 0};var i,j=d,k=e,l=this.seriesGroups[b];if((l.polar||l.spider)&&(i=this._getPolarAxisCoords(b,f)),"horizontal"==l.orientation&&!i){var m=j;j=k,k=m}for(var n,o,p,q,r=(1==this._getCategoryAxis(b).flip,h.xoffsets.first);r<=h.xoffsets.last;r++){var s=h.xoffsets.data[r],t=h.offsets[c][r].to,u=0;if(i){var v=this._toPolarCoord(i,f,s+f.x,t);s=v.x,t=v.y,u=a.jqx._ptdist(j,k,s,t)}else s+=f.x,t+=f.y,u=Math.abs(j-s);(isNaN(n)||n>u)&&(n=u,o=r,p=s,q=t)}return{index:o,value:h.xoffsets.data[o],polarAxisCoords:i,x:p,y:q}},onmousemove:function(b,c){if((this._mouseX!=b||this._mouseY!=c)&&(this._mouseX=b,this._mouseY=c,this._selected)){var d=this._selected.group,e=this._selected.series,f=this.seriesGroups[d],g=f.series[e],h=this._plotRect;if(this.renderer&&(h=this.renderer.getRect(),h.x+=5,h.y+=5,h.width-=10,h.height-=10),b<h.x||b>h.x+h.width||c<h.y||c>h.y+h.height)return this._hideToolTip(),void this._unselect();var i="horizontal"==f.orientation,h=this._plotRect;if(f.type.indexOf("line")!=-1||f.type.indexOf("area")!=-1){var j=this._getHorizontalOffset(d,this._selected.series,b,c),k=j.index;if(void 0==k)return;if(this._selected.item==k)return;for(var l=this._linesRenderInfo[d][e].segments,m=0;k>l[m].lastItemIndex;)if(m++,m>=l.length)return;var n=l[m].pathElement,o=l[m].lastItemIndex;this._unselect(!1),this._select(n,"path",d,e,k,o);var p=this._getSymbol(this._selected.group,this._selected.series);"none"==p&&(p="circle");var q=this._calcGroupOffsets(d,h),r=q.offsets[this._selected.series][k].to,s=r;f.type.indexOf("range")!=-1&&(s=q.offsets[this._selected.series][k].from);var t=i?b:c;if(c=!isNaN(s)&&Math.abs(t-s)<Math.abs(t-r)?s:r,isNaN(c))return;if(b=j.value,i){var u=b;b=c,c=u+h.y}else b+=h.x;if(j.polarAxisCoords&&(b=j.x,c=j.y),c=a.jqx._ptrnd(c),b=a.jqx._ptrnd(b),this._pointMarker&&this._pointMarker.element&&(this.renderer.removeElement(this._pointMarker.element),this._pointMarker.element=void 0),isNaN(b)||isNaN(c))return;var v=this._getSeriesColors(d,e,k),w=g.opacity;(isNaN(w)||w<0||w>1)&&(w=f.opacity),(isNaN(w)||w<0||w>1)&&(w=1);var x=g.symbolSizeSelected;isNaN(x)&&(x=g.symbolSize),(isNaN(x)||x>50||x<0)&&(x=f.symbolSize),(isNaN(x)||x>50||x<0)&&(x=6),this._pointMarker={type:p,x:b,y:c,gidx:d,sidx:e,iidx:k},this._pointMarker.element=this._drawSymbol(p,b,c,v.fillColorSymbolSelected,v.lineColorSymbolSelected,1,w,x),this._installHandlers(this._pointMarker.element,"pointMarker",d,e,k),this._startTooltipTimer(d,this._selected.series,k)}}},_drawSymbol:function(a,b,c,d,e,f,g,h){var i,j=h||6,k=j/2;switch(a){case"none":return;case"circle":i=this.renderer.circle(b,c,j/2);break;case"square":j-=1,k=j/2,i=this.renderer.rect(b-k,c-k,j,j);break;case"diamond":var l="M "+(b-k)+","+c+" L"+b+","+(c-k)+" L"+(b+k)+","+c+" L"+b+","+(c+k)+" Z";i=this.renderer.path(l);break;case"triangle_up":var l="M "+(b-k)+","+(c+k)+" L "+(b+k)+","+(c+k)+" L "+b+","+(c-k)+" Z";i=this.renderer.path(l);break;case"triangle_down":var l="M "+(b-k)+","+(c-k)+" L "+b+","+(c+k)+" L "+(b+k)+","+(c-k)+" Z";i=this.renderer.path(l);break;case"triangle_left":var l="M "+(b-k)+","+c+" L "+(b+k)+","+(c+k)+" L "+(b+k)+","+(c-k)+" Z";i=this.renderer.path(l);break;case"triangle_right":var l="M "+(b-k)+","+(c-k)+" L "+(b-k)+","+(c+k)+" L "+(b+k)+","+c+" Z";i=this.renderer.path(l);break;default:i=this.renderer.circle(b,c,j)}return this.renderer.attr(i,{fill:d,stroke:e,"stroke-width":f,"stroke-opacity":g,"fill-opacity":g}),i},_getSymbol:function(a,b){var c=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"],d=this.seriesGroups[a],e=d.series[b],f=void 0;return void 0!=e.symbolType&&(f=e.symbolType),void 0==f&&(f=d.symbolType),"default"==f?c[b%c.length]:void 0!=f?f:"none"},_startTooltipTimer:function(a,b,c){this._cancelTooltipTimer();var d=this,e=(d.seriesGroups[a],this.toolTipShowDelay||this.toolTipDelay);(isNaN(e)||e>1e4||e<0)&&(e=500),(this._ttEl||1==this.enableCrosshairs&&0==this.showToolTips)&&(e=0),clearTimeout(this._tttimerHide),0==e&&d._showToolTip(d._mouseX,d._mouseY-3,a,b,c),this._tttimer=setTimeout(function(){0!=e&&d._showToolTip(d._mouseX,d._mouseY-3,a,b,c);var f=d.toolTipHideDelay;isNaN(f)&&(f=4e3),d._tttimerHide=setTimeout(function(){d._hideToolTip(),d._unselect()},f)},e)},_cancelTooltipTimer:function(){clearTimeout(this._tttimer)},_getGroupGradientType:function(a){var b=this.seriesGroups[a];return b.type.indexOf("area")!=-1?"horizontal"==b.orientation?"horizontalLinearGradient":"verticalLinearGradient":b.type.indexOf("column")!=-1?b.polar?"radialGradient":"horizontal"==b.orientation?"verticalLinearGradient":"horizontalLinearGradient":b.type.indexOf("scatter")!=-1||b.type.indexOf("bubble")!=-1||b.type.indexOf("pie")!=-1||b.type.indexOf("donut")!=-1?"radialGradient":void 0},_select:function(a,b,c,d,e,f){if(this._selected){if(this._selected.item==e&&this._selected.series==d&&this._selected.group==c)return;this._unselect()}this._selected={element:a,type:b,group:c,series:d,item:e,iidxBase:f};var g=this.seriesGroups[c],h=g.series[d],i=g.type.indexOf("line")!=-1&&g.type.indexOf("area")==-1,j=this._getColors(c,d,f||e,this._getGroupGradientType(c)),k=j.fillColorSelected;i&&(k="none");var l=this._getSerieSettings(c,d),m="symbol"==b?j.lineColorSymbolSelected:j.lineColorSelected;k="symbol"==b?j.fillColorSymbolSelected:k;var n=l.stroke;this.renderer.attr(a,{stroke:m,fill:k,"stroke-width":n}),this._raiseItemEvent("mouseover",g,h,e)},_unselect:function(){var a=this;if(a._selected){var b=a._selected.group,c=a._selected.series,d=a._selected.item,e=a._selected.iidxBase,f=a._selected.type,g=a.seriesGroups[b],h=g.series[c],i=g.type.indexOf("line")!=-1&&g.type.indexOf("area")==-1,j=a._getColors(b,c,e||d,a._getGroupGradientType(b)),k=j.fillColor;i&&(k="none");var l=a._getSerieSettings(b,c),m="symbol"==f?j.lineColorSymbol:j.lineColor;k="symbol"==f?j.fillColorSymbol:k;var n=l.stroke;this.renderer.attr(a._selected.element,{stroke:m,fill:k,"stroke-width":n}),a._selected=void 0,isNaN(d)||a._raiseItemEvent("mouseout",g,h,d)}a._pointMarker&&(a._pointMarker.element&&(a.renderer.removeElement(a._pointMarker.element),a._pointMarker.element=void 0),a._pointMarker=void 0,a._hideCrosshairs())},_raiseItemEvent:function(b,c,d,e){for(var f=d[b]||c[b],g=0;g<this.seriesGroups.length&&this.seriesGroups[g]!=c;g++);if(g!=this.seriesGroups.length){var h={event:b,seriesGroup:c,serie:d,elementIndex:e,elementValue:this._getDataValue(e,d.dataField,g)};f&&a.isFunction(f)&&f(h),this._raiseEvent(b,h)}},_raiseEvent:function(b,c){var d=new a.Event(b);d.owner=this,d.args=c;var e=this.host.trigger(d);return e},_calcInterval:function(a,b,c){var d=Math.abs(b-a),e=d/c,f=[1,2,3,4,5,10,15,20,25,50,100],g=[.5,.25,.125,.1],h=.1,i=f;e<1&&(i=g,h=10);var j=0;do{j=0,e>=1?h*=10:h/=10;for(var k=1;k<i.length&&Math.abs(i[j]*h-e)>Math.abs(i[k]*h-e);k++)j=k}while(j==i.length-1);return i[j]*h},_renderDataClone:function(){if(this._renderData&&!this._isToggleRefresh)for(var a=this._elementRenderInfo=[],b=0;b<this._renderData.length;b++){for(this._getCategoryAxis(b).dataField;a.length<=b;)a.push({});var c=a[b],d=this._renderData[b];if(d.offsets){if(d.valueAxis){c.valueAxis={itemOffsets:{}};for(var e in d.valueAxis.itemOffsets)c.valueAxis.itemOffsets[e]=d.valueAxis.itemOffsets[e]}if(d.xAxis){c.xAxis={itemOffsets:{}};for(var e in d.xAxis.itemOffsets)c.xAxis.itemOffsets[e]=d.xAxis.itemOffsets[e]}c.series=[];for(var f=c.series,g=this.seriesGroups[b].type,h=g.indexOf("pie")!=-1||g.indexOf("donut")!=-1,i=0;i<d.offsets.length;i++){f.push({});for(var j=0;j<d.offsets[i].length;j++)if(h){var k=d.offsets[i][j];f[i][k.displayValue]={value:k.value,x:k.x,y:k.y,fromAngle:k.fromAngle,toAngle:k.toAngle}}else f[i][d.xoffsets.xvalues[j]]={value:d.offsets[i][j].value,valueFrom:d.offsets[i][j].valueFrom,valueRadius:d.offsets[i][j].valueRadius,xoffset:d.xoffsets.data[j],from:d.offsets[i][j].from,to:d.offsets[i][j].to}}}}},_calcGroupOffsets:function(b,c){for(var d=this.seriesGroups[b];this._renderData.length<b+1;)this._renderData.push({});if(null!=this._renderData[b]&&void 0!=this._renderData[b].offsets)return this._renderData[b];if(d.type.indexOf("pie")!=-1||d.type.indexOf("donut")!=-1)return this._calcPieSeriesGroupOffsets(b,c);if(!d.valueAxis||!d.series||0==d.series.length)return this._renderData[b];var e=1==d.valueAxis.flip,f=1==d.valueAxis.logarithmicScale,g=d.valueAxis.logarithmicScaleBase||10,h=new Array,i=d.type.indexOf("stacked")!=-1,j=i&&d.type.indexOf("100")!=-1,k=d.type.indexOf("range")!=-1,l=d.type.indexOf("column")!=-1,m=this._getDataLen(b),n=d.baselineValue||d.valueAxis.baselineValue||0;(k||l&&i||j)&&(n=0);var o=this._stats.seriesGroups[b];if(o&&o.isValid){n>o.max&&(n=o.max),n<o.min&&(n=o.min);var p=j||f?o.maxRange:o.max-o.min,q=o.min,r=o.max,s=c.height/(f?o.intervals:p),t=0;j?q*r<0?(p/=2,t=-(p+n)*s):t=-n*s:t=-(n-q)*s,e?t=c.y-t:t+=c.y+c.height;var u,v,w=new Array,x=new Array,y=new Array;f&&(u=a.jqx.log(r,g)-a.jqx.log(n,g),i&&(u=o.intervals,n=j?0:q),v=o.intervals-u,e||(t=c.y+u/o.intervals*c.height)),t=a.jqx._ptrnd(t);var z=q*r<0?c.height/2:c.height,A=[],B=[];if(d.bands)for(var C=0;C<d.bands.length;C++){var D=d.bands[C].minValue,E=d.bands[C].maxValue;isNaN(D)&&(D=n),isNaN(E)&&(E=n);var F=0,G=0;f?(F=(a.jqx.log(D,g)-a.jqx.log(n,g))*s,G=(a.jqx.log(E,g)-a.jqx.log(n,g))*s):(F=(D-n)*s,G=(E-n)*s),this._isVML&&(F=Math.round(F),G=Math.round(G)),e?B.push({from:t+G,to:t+F}):B.push({from:t-G,to:t-F})}for(var H=[],I=l||!l&&!i||j||f,C=0;C<d.series.length;C++){!i&&f&&(A=[]);var J=d.series[C].dataField,K=d.series[C].dataFieldFrom,L=d.series[C].dataFieldTo,M=d.series[C].radiusDataField;h.push(new Array);for(var N=this._isSerieVisible(b,C),O=0;O<m;O++){for(;H.length<=O;)H.push(0);var P=NaN;k&&(P=this._getDataValueAsNumber(O,K,b),isNaN(P)&&(P=n));var Q=NaN;Q=k?this._getDataValueAsNumber(O,L,b):this._getDataValueAsNumber(O,J,b);var R=this._getDataValueAsNumber(O,M,b);if(N||(Q=NaN),isNaN(Q)||f&&Q<=0)h[C].push({from:void 0,to:void 0});else{var S;I?S=Q>=n?w:x:H[O]=Q=H[O]+Q;var T=s*(Q-n);if(k&&(T=s*(Q-P)),f){for(;A.length<=O;)A.push({p:{value:0,height:0},n:{value:0,height:0}});var U=k?P:n,V=Q>U?A[O].p:A[O].n;V.value+=Q,j?(Q=V.value/(o.psums[O]+o.nsums[O])*100,T=(a.jqx.log(Q,g)-o.minPow)*s):(T=a.jqx.log(V.value,g)-a.jqx.log(U,g),T*=s),T-=V.height,V.height+=T}var W=t;if(k){var X=0;X=f?(a.jqx.log(P,g)-a.jqx.log(n,g))*s:(P-n)*s,W+=e?X:-X}if(i){if(j&&!f){var Y=o.psums[O]-o.nsums[O];Q>n?(T=o.psums[O]/Y*z,0!=o.psums[O]&&(T*=Q/o.psums[O])):(T=o.nsums[O]/Y*z,0!=o.nsums[O]&&(T*=Q/o.nsums[O]))}I&&(isNaN(S[O])&&(S[O]=W),W=S[O])}isNaN(y[O])&&(y[O]=0);var Z=y[O];T=Math.abs(T);var $=T;if(h_new=this._isVML?Math.round(T):a.jqx._ptrnd(T)-1,T=Math.abs(T-h_new)>.5?Math.round(T):h_new,Z+=T-$,i||(Z=0),Math.abs(Z)>.5&&(Z>0?(T-=1,Z-=1):(T+=1,Z+=1)),y[O]=Z,C==d.series.length-1&&j){for(var _=0,aa=0;aa<C;aa++)_+=Math.abs(h[aa][O].to-h[aa][O].from);if(_+=T,_<z)if(T>.5)T=a.jqx._ptrnd(T+z-_);else for(var aa=C-1;aa>=0;){var ba=Math.abs(h[aa][O].to-h[aa][O].from);if(ba>1){h[aa][O].from>h[aa][O].to&&(h[aa][O].from+=z-_);break}aa--}}e&&(T*=-1);var ca=Q<n;k&&(ca=P>Q);var da=isNaN(P)?Q:{from:P,to:Q};ca?(I&&(S[O]+=T),h[C].push({from:W,to:W+T,value:da,valueFrom:P,valueRadius:R})):(I&&(S[O]-=T),h[C].push({from:W,to:W-T,value:da,valueFrom:P,valueRadius:R}))}}}var ea=this._renderData[b];return ea.baseOffset=t,ea.offsets=h,ea.bands=B,ea.xoffsets=this._calculateXOffsets(b,c.width),this._renderData[b]}},_calcPieSeriesGroupOffsets:function(b,c){for(var d=this._getDataLen(b),e=this.seriesGroups[b],f=this._renderData[b]={},g=f.offsets=[],h=0;h<e.series.length;h++){var i=e.series[h],j=i.minAngle;(isNaN(j)||j<0||j>360)&&(j=0);var k=i.maxAngle;(isNaN(k)||k<0||k>360)&&(k=360);var l=k-j,m=i.initialAngle||0;m<j&&(m=j),m>k&&(m=k);var n=m,o=i.radius||.4*Math.min(c.width,c.height);isNaN(o)&&(o=1);var p=i.innerRadius||0;(isNaN(p)||p>=o)&&(p=0);var q=i.centerOffset||0,r=a.jqx.getNum([i.offsetX,e.offsetX,c.width/2]),s=a.jqx.getNum([i.offsetY,e.offsetY,c.height/2]);g.push([]);for(var t=0,u=0,v=0;v<d;v++){var w=this._getDataValueAsNumber(v,i.dataField,b);isNaN(w)||(this._isSerieVisible(b,h,v)||1==i.hiddenPointsDisplay)&&(w>0?t+=w:u+=w)}var x=t-u;0==x&&(x=1);for(var v=0;v<d;v++){var w=this._getDataValueAsNumber(v,i.dataField,b);if(isNaN(w))g[h].push({});else{var y=i.displayText||i.displayField,z=this._getDataValue(v,y,b);void 0==z&&(z=v);var A=0,B=this._isSerieVisible(b,h,v);(B||1==i.hiddenPointsDisplay)&&(A=Math.abs(w)/x*l);var C=c.x+r,D=c.y+s,E=q;a.isFunction(q)&&(E=q({seriesIndex:h,seriesGroupIndex:b,itemIndex:v})),isNaN(E)&&(E=0);var F={key:b+"_"+h+"_"+v,value:w,displayValue:z,x:C,y:D,fromAngle:n,toAngle:n+A,centerOffset:E,innerRadius:p,outerRadius:o,visible:B};g[h].push(F),n+=A}}}return f},_isPointSeriesOnly:function(){for(var a=0;a<this.seriesGroups.length;a++){var b=this.seriesGroups[a];if(b.type.indexOf("line")==-1&&b.type.indexOf("area")==-1&&b.type.indexOf("scatter")==-1&&b.type.indexOf("bubble")==-1)return!1}return!0},_hasColumnSeries:function(){for(var a=0;a<this.seriesGroups.length;a++){var b=this.seriesGroups[a];if(b.type.indexOf("column")!=-1)return!0}return!1},_alignValuesWithTicks:function(a){var b=this._isPointSeriesOnly(),c=this.seriesGroups[a],d=this._getCategoryAxis(a),e=void 0==d.valuesOnTicks?b:0!=d.valuesOnTicks;return void 0==a?e:void 0==c.valuesOnTicks?e:c.valuesOnTicks},_getYearsDiff:function(a,b){return b.getFullYear()-a.getFullYear()},_getMonthsDiff:function(a,b){return 12*(b.getFullYear()-a.getFullYear())+b.getMonth()-a.getMonth()},_getDateDiff:function(b,c,d,e){var f=0;switch("year"!=d&&"month"!=d&&(f=c.valueOf()-b.valueOf()),d){case"year":f=this._getYearsDiff(b,c);break;case"month":f=this._getMonthsDiff(b,c);break;case"day":f/=864e5;break;case"hour":f/=36e5;break;case"minute":f/=6e4;break;case"second":f/=1e3;break;case"millisecond":}return"year"!=d&&"month"!=d&&0!=e&&(f=a.jqx._rnd(f,1,!0)),f},_getAsDate:function(a,b){return a=this._castAsDate(a),"month"==b?new Date(a.getFullYear(),a.getMonth(),1):"year"==b?new Date(a.getFullYear(),0,1):"day"==b?new Date(a.getFullYear(),a.getMonth(),a.getDate()):a},_getCategoryAxisStats:function(a,b,c){for(var d,e,f=this._getDataLen(a),g="date"==b.type||"time"==b.type,h=g?this._castAsDate(b.minValue):this._castAsNumber(b.minValue),i=g?this._castAsDate(b.maxValue):this._castAsNumber(b.maxValue),j=h,k=i,l=void 0==b.type||"auto"==b.type,m=l||"basic"==b.type,n=0,o=0,p=0;p<f&&b.dataField;p++){var q=this._getDataValue(p,b.dataField,a);q=g?this._castAsDate(q):this._castAsNumber(q),isNaN(q)||(g?n++:o++,(isNaN(d)||q<d)&&(d=q),(isNaN(e)||q>=e)&&(e=q))}l&&(!g&&o==f||g&&n==f)&&(m=!1),m&&(d=0,e=f-1),isNaN(j)&&(j=d),isNaN(k)&&(k=e),g?(j=new Date(j),k=new Date(k),this._isDate(j)||(j=this._isDate(k)?k:new Date),this._isDate(k)||(k=this._isDate(j)?j:new Date)):(isNaN(j)&&(j=0),isNaN(k)&&(k=m?f-1:j)),void 0==d&&(d=j),void 0==e&&(e=k);var r,s;if(g){if(r=b.baseUnit,!r){r="day";var t=k.valueOf()-j.valueOf();r=t<1e3?"second":t<36e5?"minute":t<864e5?"hour":t<2592e6?"day":t<31104e6?"month":"year"}s="hour"==r||"minute"==r||"second"==r||"millisecond"==r}var u=b.unitInterval;return(isNaN(u)||u<=0)&&(u=this._estAxisInterval(j,k,a,c,r)),{min:j,max:k,dsRange:{min:d,max:e},useIndeces:m,isDateTime:g,isTimeUnit:s,dateTimeUnit:r,interval:u}},_getDefaultDTFormatFn:function(a){var b,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b="year"==a||"month"==a||"day"==a?function(a){return a.getDate()+"-"+c[a.getMonth()]+"-"+a.getFullYear()}:function(a){return a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}},_estimateDTIntCnt:function(a,b,c,d){var e=0,f=new Date(a),g=new Date(b);if(c<=0)return 1;for(;f.valueOf()<g.valueOf();)"millisecond"==d?f.setMilliseconds(f.getMilliseconds()+c):"second"==d?f.setSeconds(f.getSeconds()+c):"minute"==d?f.setMinutes(f.getMinutes()+c):"hour"==d?f.setHours(f.getHours()+c):"day"==d?f.setDate(f.getDate()+c):"month"==d?f.setMonth(f.getMonth()+c):"year"==d&&f.setFullYear(f.getFullYear()+c),e++;return e},_estAxisInterval:function(a,b,c,d,e){var f=[1,2,5,10,15,20,50,100,200,500],g=0,h=d/50;if(this._renderData&&this._renderData.length>c&&this._renderData[c].xAxis&&!isNaN(this._renderData[c].xAxis.avgWidth)){var i=Math.max(1,this._renderData[c].xAxis.avgWidth);0!=i&&(h=.9*d/i)}if(h<=1)return 1;for(var j=0;;){var k=g>=f.length?Math.pow(10,3+g-f.length):f[g];if(j=this._isDate(a)&&this._isDate(b)?this._estimateDTIntCnt(a,b,k,e):(b-a)/k,j<=h)return k;g++}},_getPaddingSize:function(b,c,d,e,f,g){var h=b.min,i=b.max,j=b.interval,k=b.dateTimeUnit;if(f)return{left:0,right:e/Math.max(1,i-h+1)*j};if(d&&!g)return{left:0,right:0};if(this._isDate(h)&&this._isDate(i)){var l=this._estimateDTIntCnt(h,i,Math.min(j,i-h),k),m=e/Math.max(2,l);return{left:m/2,right:m/2}}var l=Math.max(1,i-h);if(1==l)return n=e/4,{left:n,right:n};var m=e/l,n=m*j/2;g&&(n=Math.max(n,m/2));var o=e-2*n;a.jqx._rnd(o/Math.max(1,m*j),1,!1);m=o/l;var p=n-m*j/2;return n-=p,{left:n,right:n}},_calculateXOffsets:function(b,c){var d=this.seriesGroups[b],e=this._getCategoryAxis(b),f=new Array,g=new Array,h=this._getDataLen(b),i=this._getCategoryAxisStats(b,e,c),j=i.min,k=i.max,l=i.isDateTime,m=i.isTimeUnit,n=this._hasColumnSeries(),o=d.polar||d.spider,p=this._alignValuesWithTicks(b),q=this._getPaddingSize(i,e,p,c,o,n),r=k-j;0==r&&(r=1);var s=c-q.left-q.right;o&&p&&(q.left=q.right=0);for(var t=-1,u=-1,v=0;v<h;v++){var w=void 0===e.dataField?v:this._getDataValue(v,e.dataField,b);if(i.useIndeces){if(v<j||v>k){f.push(NaN),g.push(void 0);continue}f.push(a.jqx._ptrnd(q.left+(v-j)/r*s)),g.push(w),t==-1&&(t=v),(u==-1||u<v)&&(u=v)}else if(w=l?this._castAsDate(w):this._castAsNumber(w),isNaN(w)||w<j||w>k)f.push(NaN),g.push(void 0);else{var x=0;!l||l&&m?(diffFromMin=w-j,x=(w-j)*s/r):x=(w.valueOf()-j.valueOf())/(k.valueOf()-j.valueOf())*s,x=a.jqx._ptrnd(q.left+x),f.push(x),g.push(w),t==-1&&(t=v),(u==-1||u<v)&&(u=v)}}if(1==e.flip)for(var v=0;v<f.length;v++)isNaN(f[v])||(f[v]=c-f[v]);m&&(r=this._getDateDiff(j,k,e.baseUnit),r=a.jqx._rnd(r,1,!1));var y=Math.max(1,l?f.length:r),z=s/y;return t==u&&(f[t]=q.left+s/2),{axisStats:i,data:f,xvalues:g,first:t,last:u,length:u==-1?0:u-t+1,itemWidth:z,intervalWidth:z*i.interval,rangeLength:r,useIndeces:i.useIndeces,padding:q}},_getCategoryAxis:function(a){return void 0==a||this.seriesGroups.length<=a?this.categoryAxis||this.xAxis:this.seriesGroups[a].categoryAxis||this.seriesGroups[a].xAxis||this.categoryAxis||this.xAxis},_isGreyScale:function(a,b){var c=this.seriesGroups[a],d=c.series[b];return 1==d.greyScale||0!=d.greyScale&&(1==c.greyScale||0!=c.greyScale&&1==this.greyScale)},_getSeriesColors:function(b,c,d){var e=this._getSeriesColorsInternal(b,c,d);if(this._isGreyScale(b,c))for(var f in e)e[f]=a.jqx.toGreyScale(e[f]);return e},_getColorFromScheme:function(a,b,c){var d="#000000",e=this.seriesGroups[a],f=e.series[b];if("pie"==e.type||"donut"==e.type){var g=this._getDataLen(a);d=this._getItemColorFromScheme(f.colorScheme||e.colorScheme||this.colorScheme,b*g+c,a,b)}else{for(var h=0,i=0;i<=a;i++)for(var j in this.seriesGroups[i].series){if(i==a&&j==b)break;h++}var k=this.colorScheme;if(e.colorScheme&&(k=e.colorScheme,sidex=seriesIndex),void 0!=k&&""!=k||(k=this.colorSchemes[0].name),!k)return d;for(var i=0;i<this.colorSchemes.length;i++){var l=this.colorSchemes[i];if(l.name==k){for(;h>l.colors.length;)h-=l.colors.length,++i>=this.colorSchemes.length&&(i=0),l=this.colorSchemes[i];d=l.colors[h%l.colors.length]}}}return d},_colorsCache:{get:function(a){if(this._store[a])return this._store[a]},set:function(a,b){this._size<1e4&&(this._store[a],this._size++)},clear:function(){this._store={},this._size=0},_size:0,_store:{}},_getSeriesColorsInternal:function(b,c,d){var e=b+"_"+c+"_"+(isNaN(d)?"NaN":d);if(this._colorsCache.get(e))return this._colorsCache.get(e);var f=this.seriesGroups[b],g=f.series[c],h={lineColor:"#222222",lineColorSelected:"#151515",lineColorSymbol:"#222222",lineColorSymbolSelected:"#151515",fillColor:"#222222",fillColorSelected:"#333333",fillColorSymbol:"#222222",fillColorSymbolSelected:"#333333"},i=void 0;if(a.isFunction(g.colorFunction)){var j=isNaN(d)?NaN:this._getDataValue(d,g.dataField,b);if(f.type.indexOf("range")!=-1){var k=this._getDataValue(d,g.dataFieldFrom,b),l=this._getDataValue(d,g.dataFieldTo,b);j={from:k,to:l}}if(i=g.colorFunction(j,d,g,f),"object"==typeof i)for(var m in i)h[m]=i[m];else h.fillColor=i}else{for(var m in h)g.key&&(h[m]=g[m]);g.fillColor||g.color?g.fillColor=g.fillColor||g.color:h.fillColor=this._getColorFromScheme(b,c,d)}var n={fillColor:{baseColor:"fillColor",adjust:1},fillColorSelected:{baseColor:"fillColor",adjust:1.1},fillColorSymbol:{baseColor:"fillColor",adjust:1},fillColorSymbolSelected:{baseColor:"fillColorSymbol",adjust:2},lineColor:{baseColor:"fillColor",adjust:.9},lineColorSelected:{baseColor:"lineColor",adjust:.8},lineColorSymbol:{baseColor:"lineColor",adjust:1},lineColorSymbolSelected:{baseColor:"lineColorSelected",adjust:1}};for(var m in h)"object"==typeof i&&i[m]||(g[m]?h[m]=g[m]:h[m]=a.jqx.adjustColor(h[n[m].baseColor],n[m].adjust));return this._colorsCache.set(e,h),h},_getItemColorFromScheme:function(b,c,d,e){void 0!=b&&""!=b||(b=this.colorSchemes[0].name);for(var f=0;f<this.colorSchemes.length&&b!=this.colorSchemes[f].name;f++);for(var g=0;g<=c;){f==this.colorSchemes.length&&(f=0);var h=this.colorSchemes[f].colors.length;if(!(g+h<=c)){var i=this.colorSchemes[f].colors[c-g];return this._isGreyScale(d,e)&&0==i.indexOf("#")&&(i=a.jqx.toGreyScale(i)),i}g+=h,f++}},getColorScheme:function(a){for(var b in this.colorSchemes)if(this.colorSchemes[b].name==a)return this.colorSchemes[b].colors},addColorScheme:function(a,b){for(var c in this.colorSchemes)if(this.colorSchemes[c].name==a)return void(this.colorSchemes[c].colors=b);this.colorSchemes.push({name:a,colors:b})},removeColorScheme:function(a){for(var b in this.colorSchemes)if(this.colorSchemes[b].name==a){this.colorSchemes.splice(b,1);break}},colorSchemes:[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]}],_formatValue:function(b,c,d,e,f,g){if(void 0==b)return"";if(this._isObject(b)&&!d)return"";if(d){if(!a.isFunction(d))return b.toString();try{return d(b,g,f,e)}catch(h){return h.message}}return this._isNumber(b)?this._formatNumber(b,c):this._isDate(b)?this._formatDate(b,c):c?(c.prefix||"")+b.toString()+(c.sufix||""):b.toString()},_getFormattedValue:function(b,c,d,e,f){var g=this.seriesGroups[b],h=g.series[c],i="",j=e,k=f;if(k||(k=h.formatFunction||g.formatFunction),j||(j=h.formatSettings||g.formatSettings),!h.formatFunction&&h.formatSettings&&(k=void 0),g.type.indexOf("range")!=-1){var l=this._getDataValue(d,h.dataFieldFrom,b),m=this._getDataValue(d,h.dataFieldTo,b);if(k&&a.isFunction(k))try{return k({from:l,to:m},d,h,g)}catch(n){return n.message}void 0!=l&&(i=this._formatValue(l,j,k,b,c,d)),void 0!=m&&(i+=", "+this._formatValue(m,j,k,b,c,d))}else{var o=this._getDataValue(d,h.dataField,b);void 0!=o&&(i=this._formatValue(o,j,k,b,c,d))}return i||""},_isNumberAsString:function(b){if("string"!=typeof b)return!1;b=a.trim(b);for(var c=0;c<b.length;c++){var d=b.charAt(c);if(!(d>="0"&&d<="9"||","==d||"."==d||"-"==d&&0==c||"("==d&&0==c||")"==d&&c==b.length-1))return!1}return!0},_castAsDate:function(b){if(b instanceof Date&&!isNaN(b))return b;if("string"==typeof b){var c=new Date(b);if(isNaN(c))if(a.jqx.dataFormat){var d=a.jqx.dataFormat.tryparsedate(b);c=d?d:this._parseISO8601Date(b)}else c=this._parseISO8601Date(b);else b.indexOf(":")==-1&&c.setHours(0,0,0,0);if(void 0!=c&&!isNaN(c))return c}},_parseISO8601Date:function(a){var b=a.split(" ");if(b.length<0)return NaN;var c=b[0].split("-"),d=2==b.length?b[1].split(":"):"",e=c[0],f=c.length>1?c[1]-1:0,g=c.length>2?c[2]:1,h=d[1],i=d.length>1?d[1]:0,h=d.length>2?d[2]:0,j=d.length>3?d[3]:0;return new Date(e,f,g,h,i,j)},_castAsNumber:function(a){if(a instanceof Date&&!isNaN(a))return a.valueOf();if("string"==typeof a)if(this._isNumber(a))a=parseFloat(a);else if(!/[a-zA-Z]/.test(a)){var b=new Date(a);void 0!=b&&(a=b.valueOf())}return a},_isNumber:function(a){return"string"==typeof a&&this._isNumberAsString(a)&&(a=parseFloat(a)),"number"==typeof a&&isFinite(a)},_isDate:function(a){return a instanceof Date&&!isNaN(a.getDate())},_isBoolean:function(a){return"boolean"==typeof a},_isObject:function(b){return b&&("object"==typeof b||a.isFunction(b))||!1},_formatDate:function(a,b){return a.toString()},_formatNumber:function(a,b){if(!this._isNumber(a))return a;b=b||{};var c=b.decimalSeparator||".",d=b.thousandsSeparator||"",e=b.prefix||"",f=b.sufix||"",g=b.decimalPlaces;isNaN(g)&&(g=100*a!=100*parseInt(a)?2:0);var h=b.negativeWithBrackets||!1,i=a<0;i&&h&&(a*=-1);var j,k=a.toString(),l=Math.pow(10,g);if(k=(Math.round(a*l)/l).toString(),isNaN(k)&&(k=""),j=k.lastIndexOf("."),g>0)for(j<0?(k+=c,j=k.length-1):"."!==c&&(k=k.replace(".",c));k.length-1-j<g;)k+="0";j=k.lastIndexOf(c),j=j>-1?j:k.length;for(var m=k.substring(j),n=0,o=j;o>0;o--,n++)n%3===0&&o!==j&&(!i||o>1||i&&h)&&(m=d+m),m=k.charAt(o-1)+m;return k=m,i&&h&&(k="("+k+")"),e+k+f},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:!1},_getBezierPoints:function(b){for(var c=[],d=b.split(" "),e=0;e<d.length;e++){var f=d[e].split(",");c.push({x:parseFloat(f[0]),y:parseFloat(f[1])})}var g="";if(c.length<3)for(var e=0;e<c.length;e++)g+=(e>0?" ":"")+c[e].x+","+c[e].y;else for(var e=0;e<c.length-1;e++){var h=[];0==e?(h.push(c[e]),h.push(c[e]),h.push(c[e+1]),h.push(c[e+2])):c.length-2==e?(h.push(c[e-1]),h.push(c[e]),h.push(c[e+1]),h.push(c[e+1])):(h.push(c[e-1]),h.push(c[e]),h.push(c[e+1]),h.push(c[e+2]));var i=[],j=e>3?9:5,k=0==e?81:j,l={x:(-h[0].x+k*h[1].x+h[2].x)/k,y:(-h[0].y+k*h[1].y+h[2].y)/k};0==e&&(k=j);var m={x:(h[1].x+k*h[2].x-h[3].x)/k,y:(h[1].y+k*h[2].y-h[3].y)/k};i.push({x:h[1].x,y:h[1].y}),i.push(l),i.push(m),i.push({x:h[2].x,y:h[2].y}),g+="C"+a.jqx._ptrnd(i[1].x)+","+a.jqx._ptrnd(i[1].y)+" "+a.jqx._ptrnd(i[2].x)+","+a.jqx._ptrnd(i[2].y)+" "+a.jqx._ptrnd(i[3].x)+","+a.jqx._ptrnd(i[3].y)+" "}return g},_animTickInt:50,_createAnimationGroup:function(a){this._animGroups||(this._animGroups={}),this._animGroups[a]={animations:[],startTick:NaN}},_startAnimation:function(a){var b=new Date,c=b.getTime();this._animGroups[a].startTick=c,this._runAnimation(),this._enableAnimTimer()},_enqueueAnimation:function(a,b,c,d,e,f,g){d<0&&(d=0),void 0==g&&(g="easeInOutSine"),this._animGroups[a].animations.push({key:b,properties:c,duration:d,fn:e,context:f,easing:g})},_stopAnimations:function(){clearTimeout(this._animtimer),this._animtimer=void 0,this._animGroups=void 0},_enableAnimTimer:function(){if(!this._animtimer){var a=this;this._animtimer=setTimeout(function(){a._runAnimation()},this._animTickInt)}},_runAnimation:function(b){if(this._animGroups){var c=new Date,d=c.getTime(),e={};for(var f in this._animGroups){for(var g=this._animGroups[f].animations,h=this._animGroups[f].startTick,i=0,j=0;j<g.length;j++){var k=g[j],l=d-h;k.duration>i&&(i=k.duration);var m=k.duration>0?l/k.duration:1,n=m;if(k.easing&&0!=k.duration&&(n=a.easing[k.easing](m,l,0,1,k.duration)),m>1&&(m=1,n=1),k.fn)k.fn(k.key,k.context,n);else{for(var o={},f=0;f<k.properties.length;f++){var p=k.properties[f],q=0;q=1==m?p.to:easeParecent*(p.to-p.from)+p.from,o[p.key]=q}this.renderer.attr(k.key,o)}}h+i>d&&(e[f]={startTick:h,animations:g})}this._animGroups=e,this.renderer instanceof a.jqx.HTML5Renderer&&this.renderer.refresh();
}this._animtimer=null;for(var f in this._animGroups){this._enableAnimTimer();break}}})}(jQuery),function(a){a.jqx.jqxWidget("jqxDraw","",{}),a.extend(a.jqx._jqxDraw.prototype,{defineInstance:function(){var b={renderEngine:""};a.extend(!0,this,b);var c=["clear","on","off","removeElement","attr","getAttr","line","circle","rect","path","pieslice","text","measureText"];for(var d in c)this._addFn(a.jqx._jqxDraw.prototype,c[d])},_addFn:function(a,b){a[b]||(a[b]=function(){return this.renderer[b].apply(this.renderer,arguments)})},createInstance:function(a){},_initRenderer:function(b){return a.jqx.createRenderer(this,b)},_internalRefresh:function(){var b=this;if(!a.jqx.isHidden(b.host)){b.renderer||(b.host.empty(),b._initRenderer(b.host));var c=b.renderer;if(c){var d=c.getRect();b._render({x:1,y:1,width:d.width,height:d.height}),c instanceof a.jqx.HTML5Renderer&&c.refresh()}}},_saveAsImage:function(b,c,d,e){return a.jqx._widgetToImage(this,b,c,d,e)},_render:function(a){var b=this;b.renderer;b._plotRect=a},refresh:function(){this._internalRefresh()},getSize:function(){var a=this._plotRect;return{width:a.width,height:a.height}},saveAsPNG:function(a,b,c){return this._saveAsImage("png",a,b,c)},saveAsJPEG:function(a,b,c){return this._saveAsImage("jpeg",a,b,c)}})}(jQuery),function(a){a.jqx.toGreyScale=function(b){if(b.indexOf("#")==-1)return b;var c=a.jqx.cssToRgb(b);c[0]=c[1]=c[2]=Math.round(.3*c[0]+.59*c[1]+.11*c[2]);var d=a.jqx.rgbToHex(c[0],c[1],c[2]);return"#"+d[0]+d[1]+d[2]},a.jqx.adjustColor=function(b,c){if("string"!=typeof b)return"#000000";if(b.indexOf("#")==-1)return b;var d=a.jqx.cssToRgb(b),e=a.jqx.rgbToHsl(d);e[2]=Math.min(1,e[2]*c),e[1]=Math.min(1,e[1]*c*1.1),d=a.jqx.hslToRgb(e);for(var b="#",f=0;f<3;f++){var g=Math.round(d[f]);g=a.jqx.decToHex(g),1==g.toString().length&&(b+="0"),b+=g}return b.toUpperCase()},a.jqx.decToHex=function(a){return a.toString(16)},a.jqx.hexToDec=function(a){return parseInt(a,16)},a.jqx.rgbToHex=function(b,c,d){return[a.jqx.decToHex(b),a.jqx.decToHex(c),a.jqx.decToHex(d)]},a.jqx.hexToRgb=function(b,c,d){return[a.jqx.hexToDec(b),a.jqx.hexToDec(c),a.jqx.hexToDec(d)]},a.jqx.cssToRgb=function(b){return b.indexOf("rgb")<=-1?a.jqx.hexToRgb(b.substring(1,3),b.substring(3,5),b.substring(5,7)):b.substring(4,b.length-1).split(",")},a.jqx.hslToRgb=function(c){var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]);if(0==e)r=g=b=f;else{var h=f<.5?f*(1+e):f+e-f*e,i=2*f-h;r=a.jqx.hueToRgb(i,h,d+1/3),g=a.jqx.hueToRgb(i,h,d),b=a.jqx.hueToRgb(i,h,d-1/3)}return[255*r,255*g,255*b]},a.jqx.hueToRgb=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},a.jqx.rgbToHsl=function(a){var b,c,d=parseFloat(a[0])/255,e=parseFloat(a[1])/255,f=parseFloat(a[2])/255,g=Math.max(d,e,f),h=Math.min(d,e,f),i=(g+h)/2;if(g==h)b=c=0;else{var j=g-h;switch(c=i>.5?j/(2-g-h):j/(g+h),g){case d:b=(e-f)/j+(e<f?6:0);break;case e:b=(f-d)/j+2;break;case f:b=(d-e)/j+4}b/=6}return[b,c,i]},a.jqx.swap=function(a,b){var c=a;a=b,b=c},a.jqx.getNum=function(b){if(a.isArray(b)){for(var c=0;c<b.length;c++)if(!isNaN(b[c]))return b[c]}else if(isNaN(b))return 0;return 0},a.jqx._ptdist=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},a.jqx._ptrnd=function(b){if(!document.createElementNS)return Math.round(b)==b?b:a.jqx._rnd(b,1,!1,!0);var c=a.jqx._rnd(b,.5,!1,!0);return.5!=Math.abs(c-Math.round(c))?c>b?c-.5:c+.5:c},a.jqx._rup=function(a){var b=Math.round(a);return a>b&&b++,b},a.jqx.log=function(a,b){return Math.log(a)/(b?Math.log(b):1)},a.jqx._mod=function(a,b){var c=Math.abs(a>b?b:a),d=1;if(0!=c)for(;c*d<100;)d*=10;return a*=d,b*=d,a%b/d},a.jqx._rnd=function(b,c,d,e){if(isNaN(b))return b;var f=b-(1==e?b%c:a.jqx._mod(b,c));return b==f?f:(d?b>f&&(f+=c):f>b&&(f-=c),f)},a.jqx.commonRenderer={pieSlicePath:function(a,b,c,d,e,f,g){d||(d=1);var h=Math.abs(e-f),i=h>180?1:0;h>=360&&(f=e+359.99);var j=e*Math.PI*2/360,k=f*Math.PI*2/360,l=a,m=a,n=b,o=b,p=!isNaN(c)&&c>0;if(p&&(g=0),g+c>0){if(g>0){var q=h/2+e,r=q*Math.PI*2/360;a+=g*Math.cos(r),b-=g*Math.sin(r)}if(p){var s=c;l=a+s*Math.cos(j),n=b-s*Math.sin(j),m=a+s*Math.cos(k),o=b-s*Math.sin(k)}}var t=a+d*Math.cos(j),u=a+d*Math.cos(k),v=b-d*Math.sin(j),w=b-d*Math.sin(k),x="";return p?(x="M "+m+","+o,x+=" a"+c+","+c,x+=" 0 "+i+",1 "+(l-m)+","+(n-o),x+=" L"+t+","+v,x+=" a"+d+","+d,x+=" 0 "+i+",0 "+(u-t)+","+(w-v)):(x="M "+u+","+w,x+=" a"+d+","+d,x+=" 0 "+i+",1 "+(t-u)+","+(v-w),x+=" L"+a+","+b+" Z"),x},measureText:function(b,c,d,e,f){var g=f._getTextParts(b,c,d),h=g.width,i=g.height;0==e&&(i/=.6);var j={};if(isNaN(c)&&(c=0),0==c)j={width:a.jqx._rup(h),height:a.jqx._rup(i)};else{var k=c*Math.PI*2/360,l=Math.abs(Math.sin(k)),m=Math.abs(Math.cos(k)),n=Math.abs(h*l+i*m),o=Math.abs(h*m+i*l);j={width:a.jqx._rup(o),height:a.jqx._rup(n)}}return e&&(j.textPartsInfo=g),j},alignTextInRect:function(b,c,d,e,f,g,h,i,j,k){var l=j*Math.PI*2/360,m=Math.sin(l),n=Math.cos(l),o=f*m,p=f*n;"center"==h||""==h||"undefined"==h?b+=d/2:"right"==h&&(b+=d),"center"==i||"middle"==i||""==i||"undefined"==i?c+=e/2:"bottom"==i?c+=e-g/2:"top"==i&&(c+=g/2),k=k||"";var q="middle";k.indexOf("top")!=-1?q="top":k.indexOf("bottom")!=-1&&(q="bottom");var r="center";return k.indexOf("left")!=-1?r="left":k.indexOf("right")!=-1&&(r="right"),"center"==r?(b-=p/2,c-=o/2):"right"==r&&(b-=p,c-=o),"top"==q?(b-=g*m,c+=g*n):"middle"==q&&(b-=g*m/2,c+=g*n/2),b=a.jqx._rup(b),c=a.jqx._rup(c),{x:b,y:c}}},a.jqx.svgRenderer=function(){},a.jqx.svgRenderer.prototype={_svgns:"http://www.w3.org/2000/svg",init:function(a){var b="<table id=tblChart cellspacing='0' cellpadding='0' border='0' align='left' valign='top'><tr><td colspan=2 id=tdTop></td></tr><tr><td id=tdLeft></td><td><div class='chartContainer' onselectstart='return false;'></div></td></tr></table>";a.append(b),this.host=a;var c=a.find(".chartContainer");c[0].style.width=a.width()+"px",c[0].style.height=a.height()+"px";try{var d=document.createElementNS(this._svgns,"svg");d.setAttribute("id","svgChart"),d.setAttribute("version","1.1"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("overflow","hidden"),c[0].appendChild(d),this.canvas=d}catch(e){return!1}return this._id=(new Date).getTime(),this.clear(),this._layout(),this._runLayoutFix(),!0},refresh:function(){},_runLayoutFix:function(){this._fixLayout()},_fixLayout:function(){var b=a(this.canvas).position(),c=parseFloat(b.left)==parseInt(b.left),d=parseFloat(b.top)==parseInt(b.top);if(a.jqx.browser.msie){for(var c=!0,d=!0,e=this.host,f=0,g=0;e&&e.position&&e[0].parentNode;){var h=e.position();f+=parseFloat(h.left)-parseInt(h.left),g+=parseFloat(h.top)-parseInt(h.top),e=e.parent()}c=parseFloat(f)==parseInt(f),d=parseFloat(g)==parseInt(g)}c||(this.host.find("#tdLeft")[0].style.width="0.5px"),d||(this.host.find("#tdTop")[0].style.height="0.5px")},_layout:function(){var b=(a(this.canvas).offset(),this.host.find(".chartContainer"));this._width=Math.max(a.jqx._rup(this.host.width())-1,0),this._height=Math.max(a.jqx._rup(this.host.height())-1,0),b[0].style.width=this._width,b[0].style.height=this._height,this._fixLayout()},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var a=this.host.find(".chartContainer");return a},clear:function(){for(;this.canvas.childElementCount>0;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)},removeElement:function(a){if(void 0!=a){this.removeHandler(a);try{for(;a.firstChild;)this.removeElement(a.firstChild);a.parentNode?a.parentNode.removeChild(a):this.canvas.removeChild(a)}catch(b){}}},_openGroups:[],beginGroup:function(){var a=this._activeParent(),b=document.createElementNS(this._svgns,"g");return a.appendChild(b),this._openGroups.push(b),b},endGroup:function(){0!=this._openGroups.length&&this._openGroups.pop()},_activeParent:function(){return 0==this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(a){var b=document.createElementNS(this._svgns,"clipPath"),c=document.createElementNS(this._svgns,"rect");return this.attr(c,{x:a.x,y:a.y,width:a.width,height:a.height,fill:"none"}),this._clipId=this._clipId||0,b.id="cl"+this._id+"_"+(++this._clipId).toString(),b.appendChild(c),this._defs.appendChild(b),b},setClip:function(a,b){return this.attr(a,{"clip-path":"url(#"+b.id+")"})},_clipId:0,addHandler:function(b,c,d){a(b).on?a(b).on(c,d):a(b).bind(c,d)},removeHandler:function(b,c,d){a(b).off?a(b).off(c,d):a(b).unbind(c,d)},on:function(a,b,c){this.addHandler(a,b,c)},off:function(a,b,c){this.removeHandler(a,b,c)},shape:function(a,b){var c=document.createElementNS(this._svgns,a);if(c){for(var d in b)c.setAttribute(d,b[d]);return this._activeParent().appendChild(c),c}},_getTextParts:function(b,c,d){var e={width:0,height:0,parts:[]},f=.6,g=b.toString().split("<br>"),h=this._activeParent(),i=document.createElementNS(this._svgns,"text");this.attr(i,d);for(var j=0;j<g.length;j++){var k=g[j],l=i.ownerDocument.createTextNode(k);i.appendChild(l),h.appendChild(i);var m;try{m=i.getBBox()}catch(n){}var o=a.jqx._rup(m.width),p=a.jqx._rup(m.height*f);i.removeChild(l),e.width=Math.max(e.width,o),e.height+=p+(j>0?4:0),e.parts.push({width:o,height:p,text:k})}return h.removeChild(i),e},_measureText:function(b,c,d,e){return a.jqx.commonRenderer.measureText(b,c,d,e,this)},measureText:function(a,b,c){return this._measureText(a,b,c,!1)},text:function(b,c,d,e,f,g,h,i,j,k,l){var m,n=this._measureText(b,g,h,!0),o=n.textPartsInfo,p=o.parts;if(j||(j="center"),k||(k="center"),(p.length>1||i)&&(m=this.beginGroup()),i){var q=this.createClipRect({x:a.jqx._rup(c)-1,y:a.jqx._rup(d)-1,width:a.jqx._rup(e)+2,height:a.jqx._rup(f)+2});this.setClip(m,q)}var r=this._activeParent(),s=0,t=0;s=o.width,t=o.height,(isNaN(e)||e<=0)&&(e=s),(isNaN(f)||f<=0)&&(f=t);var u=e||0,v=f||0;if(!g||0==g){d+=t,"center"==k||"middle"==k?d+=(v-t)/2:"bottom"==k&&(d+=v-t),e||(e=s),f||(f=t);for(var r=this._activeParent(),w=0,x=p.length-1;x>=0;x--){var y=document.createElementNS(this._svgns,"text");this.attr(y,h),this.attr(y,{cursor:"default"});var z=y.ownerDocument.createTextNode(p[x].text);y.appendChild(z);var A=c,B=p[x].width,C=p[x].height;"center"==j?A+=(u-B)/2:"right"==j&&(A+=u-B),this.attr(y,{x:a.jqx._rup(A),y:a.jqx._rup(d+w),width:a.jqx._rup(B),height:a.jqx._rup(C)}),r.appendChild(y),w-=p[x].height+4}return m?(this.endGroup(),m):y}var D=a.jqx.commonRenderer.alignTextInRect(c,d,e,f,s,t,j,k,g,l);c=D.x,d=D.y;var E=this.shape("g",{transform:"translate("+c+","+d+")"}),F=this.shape("g",{transform:"rotate("+g+")"});E.appendChild(F);for(var w=0,x=p.length-1;x>=0;x--){var G=document.createElementNS(this._svgns,"text");this.attr(G,h),this.attr(G,{cursor:"default"});var z=G.ownerDocument.createTextNode(p[x].text);G.appendChild(z);var A=0,B=p[x].width,C=p[x].height;"center"==j?A+=(o.width-B)/2:"right"==j&&(A+=o.width-B),this.attr(G,{x:a.jqx._rup(A),y:a.jqx._rup(w),width:a.jqx._rup(B),height:a.jqx._rup(C)}),F.appendChild(G),w-=C+4}return r.appendChild(E),m&&this.endGroup(),E},line:function(a,b,c,d,e){var f=this.shape("line",{x1:a,y1:b,x2:c,y2:d});return this.attr(f,e),f},path:function(a,b){var c=this.shape("path");return c.setAttribute("d",a),b&&this.attr(c,b),c},rect:function(b,c,d,e,f){b=a.jqx._ptrnd(b),c=a.jqx._ptrnd(c),d=a.jqx._rup(d),e=a.jqx._rup(e);var g=this.shape("rect",{x:b,y:c,width:d,height:e});return f&&this.attr(g,f),g},circle:function(a,b,c,d){var e=this.shape("circle",{cx:a,cy:b,r:c});return d&&this.attr(e,d),e},pieSlicePath:function(b,c,d,e,f,g,h){return a.jqx.commonRenderer.pieSlicePath(b,c,d,e,f,g,h)},pieslice:function(a,b,c,d,e,f,g,h){var i=this.pieSlicePath(a,b,c,d,e,f,g),j=this.shape("path");return j.setAttribute("d",i),h&&this.attr(j,h),j},attr:function(a,b){if(a&&b)for(var c in b)"textContent"==c?a.textContent=b[c]:a.setAttribute(c,b[c])},getAttr:function(a,b){return a.getAttribute(b)},_gradients:{},_toLinearGradient:function(b,c,d){var e="grd"+this._id+b.replace("#","")+(c?"v":"h"),f="url(#"+e+")";if(this._gradients[f])return f;var g=document.createElementNS(this._svgns,"linearGradient");this.attr(g,{x1:"0%",y1:"0%",x2:c?"0%":"100%",y2:c?"100%":"0%",id:e});for(var h in d){var i=document.createElementNS(this._svgns,"stop"),j="stop-color:"+a.jqx.adjustColor(b,d[h][1]);this.attr(i,{offset:d[h][0]+"%",style:j}),g.appendChild(i)}return this._defs.appendChild(g),this._gradients[f]=!0,f},_toRadialGradient:function(b,c,d){var e="grd"+this._id+b.replace("#","")+"r"+(void 0!=d?d.key:""),f="url(#"+e+")";if(this._gradients[f])return f;var g=document.createElementNS(this._svgns,"radialGradient");void 0==d?this.attr(g,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:e}):this.attr(g,{cx:d.x,cy:d.y,r:d.outerRadius,id:e,gradientUnits:"userSpaceOnUse"});for(var h in c){var i=document.createElementNS(this._svgns,"stop"),j="stop-color:"+a.jqx.adjustColor(b,c[h][1]);this.attr(i,{offset:c[h][0]+"%",style:j}),g.appendChild(i)}return this._defs.appendChild(g),this._gradients[f]=!0,f}},a.jqx.vmlRenderer=function(){},a.jqx.vmlRenderer.prototype={init:function(b){var c="<div class='chartContainer' style=\"position:relative;overflow:hidden;\"><div>";b.append(c),this.host=b;var d=b.find(".chartContainer");d[0].style.width=b.width()+"px",d[0].style.height=b.height()+"px";var e=!0;try{for(var f=0;f<document.namespaces.length;f++)if("v"==document.namespaces[f].name&&"urn:schemas-microsoft-com:vml"==document.namespaces[f].urn){e=!1;break}}catch(g){return!1}return a.jqx.browser.msie&&parseInt(a.jqx.browser.version)<9&&document.childNodes&&document.childNodes.length>0&&document.childNodes[0].data&&document.childNodes[0].data.indexOf("DOCTYPE")!=-1?(e&&document.namespaces.add("v","urn:schemas-microsoft-com:vml"),this._ie8mode=!0):e&&(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().cssText="v\\:* { behavior: url(#default#VML); display: inline-block; }"),this.canvas=d[0],this._width=Math.max(a.jqx._rup(d.width()),0),this._height=Math.max(a.jqx._rup(d.height()),0),d[0].style.width=this._width+2,d[0].style.height=this._height+2,this._id=(new Date).getTime(),this.clear(),!0},refresh:function(){},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var a=this.host.find(".chartContainer");return a},clear:function(){for(;this.canvas.childElementCount>0;)this.removeHandler(this.canvas.firstElementChild),this.canvas.removeChild(this.canvas.firstElementChild);this._gradients={},this._defaultParent=void 0},removeElement:function(a){null!=a&&(this.removeHandler(a),a.parentNode.removeChild(a))},_openGroups:[],beginGroup:function(){var a=this._activeParent(),b=document.createElement("v:group");return b.style.position="absolute",b.coordorigin="0,0",b.coordsize=this._width+","+this._height,b.style.left=0,b.style.top=0,b.style.width=this._width,b.style.height=this._height,a.appendChild(b),this._openGroups.push(b),b},endGroup:function(){0!=this._openGroups.length&&this._openGroups.pop()},_activeParent:function(){return 0==this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(a){var b=document.createElement("div");return b.style.height=a.height+1+"px",b.style.width=a.width+1+"px",b.style.position="absolute",b.style.left=a.x+"px",b.style.top=a.y+"px",b.style.overflow="hidden",this._clipId=this._clipId||0,b.id="cl"+this._id+"_"+(++this._clipId).toString(),this._activeParent().appendChild(b),b},setClip:function(a,b){},_clipId:0,addHandler:function(b,c,d){a(b).on?a(b).on(c,d):a(b).bind(c,d)},removeHandler:function(b,c,d){a(b).off?a(b).off(c,d):a(b).unbind(c,d)},on:function(a,b,c){this.addHandler(a,b,c)},off:function(a,b,c){this.removeHandler(a,b,c)},_getTextParts:function(b,c,d){var e={width:0,height:0,parts:[]},f=.6,g=b.toString().split("<br>"),h=this._activeParent(),i=document.createElement("v:textbox");this.attr(i,d),h.appendChild(i);for(var j=0;j<g.length;j++){var k=g[j],l=document.createElement("span");l.appendChild(document.createTextNode(k)),i.appendChild(l),d&&d["class"]&&(l.className=d["class"]);var m=a(i),n=a.jqx._rup(m.width()),o=a.jqx._rup(m.height()*f);if(0==o&&a.jqx.browser.msie&&parseInt(a.jqx.browser.version)<9){var p=m.css("font-size");p&&(o=parseInt(p),isNaN(o)&&(o=0))}i.removeChild(l),e.width=Math.max(e.width,n),e.height+=o+(j>0?2:0),e.parts.push({width:n,height:o,text:k})}return h.removeChild(i),e},_measureText:function(b,c,d,e){return c=Math.abs(c)>45?90:0,a.jqx.commonRenderer.measureText(b,c,d,e,this)},measureText:function(a,b,c){return this._measureText(a,b,c,!1)},text:function(b,c,d,e,f,g,h,i,j,k){var l;h&&h.stroke&&(l=h.stroke),void 0==l&&(l="black");var m=this._measureText(b,g,h,!0),n=m.textPartsInfo,o=n.parts,p=m.width,q=m.height;(isNaN(e)||0==e)&&(e=p),(isNaN(f)||0==f)&&(f=q);var r;if(j||(j="center"),k||(k="center"),(o.length>0||i)&&(r=this.beginGroup()),i){var s=this.createClipRect({x:a.jqx._rup(c),y:a.jqx._rup(d),width:a.jqx._rup(e),height:a.jqx._rup(f)});this.setClip(r,s)}var t=this._activeParent(),u=e||0,v=f||0;g=Math.abs(g)>45?90:0;var w=0,x=0;"center"==j?w+=(u-p)/2:"right"==j&&(w+=u-p),"center"==k?x=(v-q)/2:"bottom"==k&&(x=v-q),0==g?(d+=q+x,c+=w):(c+=p+w,d+=x);for(var y,z=0,A=o.length-1;A>=0;A--){var B=o[A],C=(p-B.width)/2;0==g&&"left"==j?C=0:0==g&&"right"==j?C=p-B.width:90==g&&(C=(q-B.width)/2);var D=z-B.height;x=90==g?C:D,w=90==g?D:C,y=document.createElement("v:textbox"),y.style.position="absolute",y.style.left=a.jqx._rup(c+w),y.style.top=a.jqx._rup(d+x),y.style.width=a.jqx._rup(B.width),y.style.height=a.jqx._rup(B.height),90==g&&(y.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=3)");var E=document.createElement("span");E.appendChild(document.createTextNode(B.text)),h&&h["class"]&&(E.className=h["class"]),y.appendChild(E),t.appendChild(y),z-=B.height+(A>0?2:0)}return r?(this.endGroup(),t):y},shape:function(a,b){var c=document.createElement(this._createElementMarkup(a));if(c){for(var d in b)c.setAttribute(d,b[d]);return this._activeParent().appendChild(c),c}},line:function(a,b,c,d,e){var f="M "+a+","+b+" L "+c+","+d+" X E",g=this.path(f);return this.attr(g,e),g},_createElementMarkup:function(a){var b="<v:"+a+' style=""></v:'+a+">";return this._ie8mode&&(b=b.replace('style=""','style="behavior: url(#default#VML);"')),b},path:function(a,b){var c=document.createElement(this._createElementMarkup("shape"));return c.style.position="absolute",c.coordsize=this._width+" "+this._height,c.coordorigin="0 0",c.style.width=parseInt(this._width),c.style.height=parseInt(this._height),c.style.left="0px",c.style.top="0px",c.setAttribute("path",a),this._activeParent().appendChild(c),b&&this.attr(c,b),c},rect:function(b,c,d,e,f){b=a.jqx._ptrnd(b),c=a.jqx._ptrnd(c),d=a.jqx._rup(d),e=a.jqx._rup(e);var g=this.shape("rect",f);return g.style.position="absolute",g.style.left=b,g.style.top=c,g.style.width=d,g.style.height=e,g.strokeweight=0,f&&this.attr(g,f),g},circle:function(b,c,d,e){var f=this.shape("oval");return b=a.jqx._ptrnd(b-d),c=a.jqx._ptrnd(c-d),d=a.jqx._rup(d),f.style.position="absolute",f.style.left=b,f.style.top=c,f.style.width=2*d,f.style.height=2*d,e&&this.attr(f,e),f},updateCircle:function(b,c,d,e){void 0==c&&(c=parseFloat(b.style.left)+parseFloat(b.style.width)/2),void 0==d&&(d=parseFloat(b.style.top)+parseFloat(b.style.height)/2),void 0==e&&(e=parseFloat(b.width)/2),c=a.jqx._ptrnd(c-e),d=a.jqx._ptrnd(d-e),e=a.jqx._rup(e),b.style.left=c,b.style.top=d,b.style.width=2*e,b.style.height=2*e},pieSlicePath:function(b,c,d,e,f,g,h){e||(e=1);var i=Math.abs(f-g);i>360&&(f=0,g=360);var j=f*Math.PI*2/360,k=g*Math.PI*2/360,l=b,m=b,n=c,o=c,p=!isNaN(d)&&d>0;if(p&&(h=0),h>0){var q=i/2+f,r=q*Math.PI*2/360;b+=h*Math.cos(r),c-=h*Math.sin(r)}if(p){var s=d;l=a.jqx._ptrnd(b+s*Math.cos(j)),n=a.jqx._ptrnd(c-s*Math.sin(j)),m=a.jqx._ptrnd(b+s*Math.cos(k)),o=a.jqx._ptrnd(c-s*Math.sin(k))}var t=(a.jqx._ptrnd(b+e*Math.cos(j)),a.jqx._ptrnd(b+e*Math.cos(k))),u=(a.jqx._ptrnd(c-e*Math.sin(j)),a.jqx._ptrnd(c-e*Math.sin(k)));e=a.jqx._ptrnd(e),d=a.jqx._ptrnd(d),b=a.jqx._ptrnd(b),c=a.jqx._ptrnd(c);var v=Math.round(65535*f),w=Math.round(65536*(g-f));d<0&&(d=1);var x="";return p?(x="M"+l+" "+n,x+=" AE "+b+" "+c+" "+d+" "+d+" "+v+" "+w,x+=" L "+t+" "+u,v=Math.round(65535*(f-g)),w=Math.round(65536*g),x+=" AE "+b+" "+c+" "+e+" "+e+" "+w+" "+v,x+=" L "+l+" "+n):(x="M"+b+" "+c,x+=" AE "+b+" "+c+" "+e+" "+e+" "+v+" "+w),x+=" X E"},pieslice:function(a,b,c,d,e,f,g,h){var i=this.pieSlicePath(a,b,c,d,e,f,g),j=this.path(i,h);return h&&this.attr(j,h),j},_keymap:[{svg:"fill",vml:"fillcolor"},{svg:"stroke",vml:"strokecolor"},{svg:"stroke-width",vml:"strokeweight"},{svg:"stroke-dasharray",vml:"dashstyle"},{svg:"fill-opacity",vml:"fillopacity"},{svg:"stroke-opacity",vml:"strokeopacity"},{svg:"opacity",vml:"opacity"},{svg:"cx",vml:"style.left"},{svg:"cy",vml:"style.top"},{svg:"height",vml:"style.height"},{svg:"width",vml:"style.width"},{svg:"x",vml:"style.left"},{svg:"y",vml:"style.top"},{svg:"d",vml:"v"},{svg:"display",vml:"style.display"}],_translateParam:function(a){for(var b in this._keymap)if(this._keymap[b].svg==a)return this._keymap[b].vml;return a},attr:function(a,b){if(a&&b)for(var c in b){var d=this._translateParam(c);"fillcolor"==d&&b[c].indexOf("grd")!=-1?a.type=b[c]:"fillcolor"==d&&"transparent"==b[c]?(a.style.filter="alpha(opacity=0)",a["-ms-filter"]="progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"):"opacity"==d||"fillopacity"==d?a.fill&&(a.fill.opacity=b[c]):"textContent"==d?a.children[0].innerText=b[c]:"dashstyle"==d?a.dashstyle=b[c].replace(","," "):d.indexOf("style.")==-1?a[d]=b[c]:a.style[d.replace("style.","")]=b[c]}},getAttr:function(a,b){var c=this._translateParam(b);return"opacity"==c||"fillopacity"==c?a.fill?a.fill.opacity:1:c.indexOf("style.")==-1?a[c]:a.style[c.replace("style.","")]},_gradients:{},_toRadialGradient:function(a,b,c){return a},_toLinearGradient:function(b,c,d){if(this._ie8mode)return b;var e="grd"+b.replace("#","")+(c?"v":"h"),f="#"+e;if(this._gradients[f])return f;var g=document.createElement(this._createElementMarkup("fill"));g.type="gradient",g.method="linear",g.angle=c?0:90;var h="";for(var i in d)i>0&&(h+=", "),h+=d[i][0]+"% "+a.jqx.adjustColor(b,d[i][1]);g.colors=h;var j=document.createElement(this._createElementMarkup("shapetype"));return j.appendChild(g),j.id=e,this.canvas.appendChild(j),f}},a.jqx.HTML5Renderer=function(){},a.jqx.ptrnd=function(a){if(.5==Math.abs(Math.round(a)-a))return a;var b=Math.round(a);return b<a&&(b-=1),b+.5},a.jqx.HTML5Renderer.prototype={_elements:{},init:function(a){try{this.host=a,this.host.append("<canvas id='__jqxCanvasWrap' style='width:100%; height: 100%;'/>"),this.canvas=a.find("#__jqxCanvasWrap"),this.canvas[0].width=a.width(),this.canvas[0].height=a.height(),this.ctx=this.canvas[0].getContext("2d")}catch(b){return!1}return!0},getContainer:function(){if(this.canvas&&1==this.canvas.length)return this.canvas},getRect:function(){return{x:0,y:0,width:this.canvas[0].width-1,height:this.canvas[0].height-1}},beginGroup:function(){},endGroup:function(){},setClip:function(){},createClipRect:function(a){},addHandler:function(a,b,c){},removeHandler:function(a,b,c){},on:function(a,b,c){this.addHandler(a,b,c)},off:function(a,b,c){this.removeHandler(a,b,c)},clear:function(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0},removeElement:function(a){void 0!=a&&this._elements[a.id]&&delete this._elements[a.id]},_maxId:0,shape:function(a,b){var c={type:a,id:this._maxId++};for(var d in b)c[d]=b[d];return this._elements[c.id]=c,c},attr:function(a,b){for(var c in b)a[c]=b[c]},rect:function(a,b,c,d,e){if(isNaN(a))throw'Invalid value for "x"';if(isNaN(b))throw'Invalid value for "y"';if(isNaN(c))throw'Invalid value for "width"';if(isNaN(d))throw'Invalid value for "height"';var f=this.shape("rect",{x:a,y:b,width:c,height:d});return e&&this.attr(f,e),f},path:function(a,b){var c=this.shape("path",b);return this.attr(c,{d:a}),c},line:function(a,b,c,d,e){return this.path("M "+a+","+b+" L "+c+","+d,e)},circle:function(a,b,c,d){var e=this.shape("circle",{x:a,y:b,r:c});return d&&this.attr(e,d),e},pieSlicePath:function(b,c,d,e,f,g,h){return a.jqx.commonRenderer.pieSlicePath(b,c,d,e,f,g,h)},pieslice:function(a,b,c,d,e,f,g,h){var i=this.path(this.pieSlicePath(a,b,c,d,e,f,g),h);return this.attr(i,{x:a,y:b,innerRadius:c,outerRadius:d,angleFrom:e,angleTo:f}),i},_getCSSStyle:function(a){var b=document.styleSheets;try{for(var c=0;c<b.length;c++)for(var d=0;b[c].cssRules&&d<b[c].cssRules.length;d++)if(b[c].cssRules[d].selectorText.indexOf(a)!=-1)return b[c].cssRules[d].style}catch(e){}return{}},_getTextParts:function(b,c,d){var e="Arial",f="10pt",g="";if(d&&d["class"]){var h=this._getCSSStyle(d["class"]);h.fontSize&&(f=h.fontSize),h.fontFamily&&(e=h.fontFamily),h.fontWeight&&(g=h.fontWeight)}this.ctx.font=g+" "+f+" "+e;for(var i={width:0,height:0,parts:[]},j=.6,k=b.toString().split("<br>"),l=0;l<k.length;l++){var m=k[l],n=this.ctx.measureText(m).width,o=document.createElement("span");o.font=this.ctx.font,o.textContent=m,document.body.appendChild(o);var p=o.offsetHeight*j;document.body.removeChild(o),i.width=Math.max(i.width,a.jqx._rup(n)),i.height+=p+(l>0?4:0),i.parts.push({width:n,height:p,text:m})}return i},_measureText:function(b,c,d,e){return a.jqx.commonRenderer.measureText(b,c,d,e,this)},measureText:function(a,b,c){return this._measureText(a,b,c,!1)},text:function(a,b,c,d,e,f,g,h,i,j,k){var l=this.shape("text",{text:a,x:b,y:c,width:d,height:e,angle:f,clip:h,halign:i,valign:j,rotateAround:k});if(g&&this.attr(l,g),l.fontFamily="Arial",l.fontSize="10pt",l.fontWeight="",l.color="#000000",g&&g["class"]){var m=this._getCSSStyle(g["class"]);l.fontFamily=m.fontFamily||l.fontFamily,l.fontSize=m.fontSize||l.fontSize,l.fontWeight=m.fontWeight||l.fontWeight,l.color=m.color||l.color}var n=this._measureText(a,0,g,!0);return this.attr(l,{textPartsInfo:n.textPartsInfo,textWidth:n.width,textHeight:n.height}),(d<=0||isNaN(d))&&this.attr(l,{width:n.width}),(e<=0||isNaN(e))&&this.attr(l,{height:n.height}),l},_toLinearGradient:function(b,c,d){if(this._renderers._gradients[b])return b;for(var e=[],f=0;f<d.length;f++)e.push({percent:d[f][0]/100,color:a.jqx.adjustColor(b,d[f][1])});var g="gr"+this._gradientId++;return this.createGradient(g,c?"vertical":"horizontal",e),g},_toRadialGradient:function(b,c){if(this._renderers._gradients[b])return b;for(var d=[],e=0;e<c.length;e++)d.push({percent:c[e][0]/100,color:a.jqx.adjustColor(b,c[e][1])});var f="gr"+this._gradientId++;return this.createGradient(f,"radial",d),f},_gradientId:0,createGradient:function(a,b,c){this._renderers.createGradient(a,b,c)},_renderers:{_gradients:{},createGradient:function(a,b,c){this._gradients[a]={orientation:b,colorStops:c}},setStroke:function(a,b){a.strokeStyle=b.stroke||"transparent",a.lineWidth=b["stroke-width"]||1,b["fill-opacity"]?a.globalAlpha=b["fill-opacity"]:a.globalAlpha=1,a.setLineDash&&(b["stroke-dasharray"]?a.setLineDash(b["stroke-dasharray"].split(",")):a.setLineDash([]))},setFillStyle:function(b,c){if(b.fillStyle="transparent",c["fill-opacity"]?b.globalAlpha=c["fill-opacity"]:b.globalAlpha=1,c.fill&&c.fill.indexOf("#")==-1&&this._gradients[c.fill]){var d,e="horizontal"!=this._gradients[c.fill].orientation,f="radial"==this._gradients[c.fill].orientation,g=a.jqx.ptrnd(c.x),h=a.jqx.ptrnd(c.y),i=a.jqx.ptrnd(c.x+(e?0:c.width)),j=a.jqx.ptrnd(c.y+(e?c.height:0));"circle"!=c.type&&"path"!=c.type||!f||(x=a.jqx.ptrnd(c.x),y=a.jqx.ptrnd(c.y),r1=c.innerRadius||0,r2=c.outerRadius||c.r||0,d=b.createRadialGradient(x,y,r1,x,y,r2)),f||((isNaN(g)||isNaN(i)||isNaN(h)||isNaN(j))&&(g=0,h=0,i=e?0:b.canvas.width,j=e?b.canvas.height:0),d=b.createLinearGradient(g,h,i,j));for(var k=this._gradients[c.fill].colorStops,l=0;l<k.length;l++)d.addColorStop(k[l].percent,k[l].color);b.fillStyle=d}else c.fill&&(b.fillStyle=c.fill)},rect:function(b,c){0!=c.width&&0!=c.height&&(b.fillRect(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.width,c.height),b.strokeRect(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.width,c.height))},circle:function(b,c){0!=c.r&&(b.beginPath(),b.arc(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.r,0,2*Math.PI,!1),b.closePath(),b.fill(),b.stroke())},_parsePoint:function(a){var b=this._parseNumber(a),c=this._parseNumber(a);return{x:b,y:c}},_parseNumber:function(a){for(var b=!1,c=this._pos;c<a.length;c++)if(a[c]>="0"&&a[c]<="9"||"."==a[c]||"-"==a[c]&&!b)b=!0;else{if(b||" "!=a[c]&&","!=a[c])break;this._pos++}var d=parseFloat(a.substring(this._pos,c));if(!isNaN(d))return this._pos=c,d},_pos:0,_cmds:"mlcaz",_lastCmd:"",_isRelativeCmd:function(b){return a.jqx.string.contains(this._cmds,b)},_parseCmd:function(b){for(var c=this._pos;c<b.length;c++){if(a.jqx.string.containsIgnoreCase(this._cmds,b[c]))return this._pos=c+1,this._lastCmd=b[c],this._lastCmd;if(" "!=b[c]){if(b[c]>="0"&&b[c]<="9"){if(this._pos=c,""==this._lastCmd)break;return this._lastCmd}}else this._pos++}},_toAbsolutePoint:function(a){return{x:this._currentPoint.x+a.x,y:this._currentPoint.y+a.y}},_currentPoint:{x:0,y:0},path:function(a,b){var c=b.d;this._pos=0,this._lastCmd="";var d=void 0;this._currentPoint={x:0,y:0},a.beginPath();for(;this._pos<c.length;){var e=this._parseCmd(c);if(void 0==e)break;if("M"!=e&&"m"!=e)if("L"!=e&&"l"!=e)if("A"!=e&&"a"!=e)if("Z"!=e&&"z"!=e||void 0==d)if("C"!=e&&"c"!=e);else{var f=this._parsePoint(c),g=this._parsePoint(c),h=this._parsePoint(c);a.bezierCurveTo(f.x,f.y,g.x,g.y,h.x,h.y),this._currentPoint=h}else a.lineTo(d.x,d.y),this._currentPoint=d;else{var i=this._parseNumber(c),j=this._parseNumber(c),k=this._parseNumber(c)*(Math.PI/180),l=this._parseNumber(c),m=this._parseNumber(c),n=this._parsePoint(c);if(this._isRelativeCmd(e)&&(n=this._toAbsolutePoint(n)),0==i||0==j)continue;var o=this._currentPoint,p={x:Math.cos(k)*(o.x-n.x)/2+Math.sin(k)*(o.y-n.y)/2,y:-Math.sin(k)*(o.x-n.x)/2+Math.cos(k)*(o.y-n.y)/2},q=Math.pow(p.x,2)/Math.pow(i,2)+Math.pow(p.y,2)/Math.pow(j,2);q>1&&(i*=Math.sqrt(q),j*=Math.sqrt(q));var r=(l==m?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(j,2)-Math.pow(i,2)*Math.pow(p.y,2)-Math.pow(j,2)*Math.pow(p.x,2))/(Math.pow(i,2)*Math.pow(p.y,2)+Math.pow(j,2)*Math.pow(p.x,2)));isNaN(r)&&(r=0);var s={x:r*i*p.y/j,y:r*-j*p.x/i},t={x:(o.x+n.x)/2+Math.cos(k)*s.x-Math.sin(k)*s.y,y:(o.y+n.y)/2+Math.sin(k)*s.x+Math.cos(k)*s.y},u=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},v=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(u(a)*u(b))},w=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(v(a,b))},x=w([1,0],[(p.x-s.x)/i,(p.y-s.y)/j]),y=[(p.x-s.x)/i,(p.y-s.y)/j],z=[(-p.x-s.x)/i,(-p.y-s.y)/j],A=w(y,z);v(y,z)<=-1&&(A=Math.PI),v(y,z)>=1&&(A=0),0==m&&A>0&&(A-=2*Math.PI),1==m&&A<0&&(A+=2*Math.PI);var v=i>j?i:j,B=i>j?1:i/j,C=i>j?j/i:1;a.translate(t.x,t.y),a.rotate(k),a.scale(B,C),a.arc(0,0,v,x,x+A,1-m),a.scale(1/B,1/C),a.rotate(-k),a.translate(-t.x,-t.y)}else{var D=this._parsePoint(c);if(void 0==D)break;a.lineTo(D.x,D.y),this._currentPoint=D}else{var D=this._parsePoint(c);if(void 0==D)break;a.moveTo(D.x,D.y),this._currentPoint=D,void 0==d&&(d=D)}}a.fill(),a.stroke(),a.closePath()},text:function(b,c){var d=a.jqx.ptrnd(c.x),e=a.jqx.ptrnd(c.y),f=a.jqx.ptrnd(c.width),g=a.jqx.ptrnd(c.height),h=c.halign,i=c.valign,j=c.angle,k=c.rotateAround,l=c.textPartsInfo,m=l.parts,n=c.clip;void 0==n&&(n=!0),b.save(),h||(h="center"),i||(i="center"),n&&(b.rect(d,e,f,g),b.clip());var o=c.textWidth,p=c.textHeight,q=f||0,r=g||0;if(b.fillStyle=c.color,b.font=c.fontWeight+" "+c.fontSize+" "+c.fontFamily,!j||0==j){e+=p,"center"==i||"middle"==i?e+=(r-p)/2:"bottom"==i&&(e+=r-p),f||(f=o),g||(g=p);for(var s=0,t=m.length-1;t>=0;t--){var u=m[t],v=d,w=m[t].width;m[t].height;"center"==h?v+=(q-w)/2:"right"==h&&(v+=q-w),b.fillText(u.text,v,e+s),s-=u.height+(t>0?4:0)}return void b.restore()}var x=a.jqx.commonRenderer.alignTextInRect(d,e,f,g,o,p,h,i,j,k);d=x.x,e=x.y;var y=j*Math.PI*2/360;b.translate(d,e),b.rotate(y);for(var s=0,z=l.width,t=m.length-1;t>=0;t--){var v=0;"center"==h?v+=(z-m[t].width)/2:"right"==h&&(v+=z-m[t].width),
b.fillText(m[t].text,v,s),s-=m[t].height+4}b.restore()}},refresh:function(){this.ctx.clearRect(0,0,this.canvas[0].width,this.canvas[0].height);for(var a in this._elements){var b=this._elements[a];this._renderers.setFillStyle(this.ctx,b),this._renderers.setStroke(this.ctx,b),this._renderers[this._elements[a].type](this.ctx,b)}}},a.jqx.createRenderer=function(b,c){var d=b,e=d.renderer=null;if(document.createElementNS&&"HTML5"!=d.renderEngine&&"VML"!=d.renderEngine&&(e=new a.jqx.svgRenderer,!e.init(c))){if("SVG"==d.renderEngine)throw"Your browser does not support SVG";return null}if(null==e&&"HTML5"!=d.renderEngine){if(e=new a.jqx.vmlRenderer,!e.init(c)){if("VML"==d.renderEngine)throw"Your browser does not support VML";return null}d._isVML=!0}if(null==e&&("HTML5"==d.renderEngine||void 0==d.renderEngine)&&(e=new a.jqx.HTML5Renderer,!e.init(c)))throw"Your browser does not support HTML5 Canvas";return d.renderer=e,e},a.jqx._widgetToImage=function(b,c,d,e,f){var g=b;if(!g)return!1;void 0!=d&&""!=d||(d="image."+c);var h=g.renderEngine,i=g.enableAnimations;if(g.enableAnimations=!1,g.renderEngine="HTML5",g.renderEngine!=h)try{g.refresh()}catch(j){return g.renderEngine=h,g.refresh(),g.enableAnimations=i,!1}var k=g.renderer.getContainer()[0],l=a.jqx.exportImage(k,c,d,e,f);return g.renderEngine!=h&&(g.renderEngine=h,g.refresh(),g.enableAnimations=i),l},a.jqx.exportImage=function(b,c,d,e,f){if(!b)return!1;if(void 0!=d&&""!=d||(d="image."+c),void 0==e||""==e)throw"Please specifiy export server";var g=!0;try{if(b){var h=b.toDataURL("image/"+c);if(h=h.replace("data:image/"+c+";base64,",""),f)a.ajax({dataType:"string",url:e,type:"POST",data:{content:h,fname:d},async:!1,success:function(a,b,c){g=!0},error:function(a,b,c){g=!1}});else{var i=document.createElement("form");i.method="POST",i.action=e,i.style.display="none",document.body.appendChild(i);var j=document.createElement("input");j.name="fname",j.value=d,j.style.display="none";var k=document.createElement("input");k.name="content",k.value=h,k.style.display="none",i.appendChild(j),i.appendChild(k),i.submit(),document.body.removeChild(i),g=!0}}}catch(l){g=!1}return g}}(jQuery);