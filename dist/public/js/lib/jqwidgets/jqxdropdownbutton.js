!function(a){a.jqx.jqxWidget("jqxDropDownButton","",{}),a.extend(a.jqx._jqxDropDownButton.prototype,{defineInstance:function(){this.disabled=!1,this.width=null,this.height=null,this.arrowSize=19,this.enableHover=!0,void 0==this.openDelay&&(this.openDelay=250),void 0==this.closeDelay&&(this.closeDelay=300),this.animationType="default",this.enableBrowserBoundsDetection=!1,this.dropDownHorizontalAlignment="left",this.popupZIndex=2e4,this.autoOpen=!1,this.rtl=!1,this.initContent=null,this.dropDownWidth=null,this.dropDownHeight=null,this.focusable=!0,this.touchMode=!1,this.aria={"aria-disabled":{name:"disabled",type:"boolean"}},this.events=["open","close","opening","closing"]},createInstance:function(b){this.width||(this.width=200),this.height||(this.height=25),this.isanimating=!1;var c=a("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropDownButtonWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropDownButtonContent' unselectable='on' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'/><div id='dropDownButtonArrow' unselectable='on'  style='background-color: transparent; border: none; float: right; position: relative;'><div unselectable='on'></div></div></div></div>");this.host.attr("tabindex")?(c.attr("tabindex",this.host.attr("tabindex")),this.host.removeAttr("tabindex")):c.attr("tabindex",0),this.focusable||c.removeAttr("tabIndex"),a.jqx.aria(this),this.popupContent=this.host.children(),this.host.attr("role","button"),0==this.popupContent.length?(this.popupContent=a("<div>"+this.host.text()+"</div>"),this.popupContent.css("display","block"),this.element.innerHTML=""):this.popupContent.detach();var d=this;this.addHandler(this.host,"loadContent",function(a){d._arrange()});try{var e="dropDownButtonPopup"+this.element.id,f=a(a.find("#"+e));f.length>0&&f.remove(),a.jqx.aria(this,"aria-haspopup",!0),a.jqx.aria(this,"aria-owns",e);var g=a("<div class='dropDownButton' style='overflow: hidden; left: 0px; top: 0px; position: absolute;' id='dropDownButtonPopup"+this.element.id+"'></div>");g.addClass(this.toThemeProperty("jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-dropdownbutton-popup")),g.addClass(this.toThemeProperty("jqx-popup")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.css("z-index",this.popupZIndex),a.jqx.browser.msie&&g.addClass(this.toThemeProperty("jqx-noshadow")),this.popupContent.appendTo(g),g.appendTo(document.body),this.container=g,this.container.css("visibility","hidden")}catch(h){}this.touch=a.jqx.mobile.isTouchDevice(),this.dropDownButtonStructure=c,this.host.append(c),this.dropDownButtonWrapper=this.host.find("#dropDownButtonWrapper"),this.firstDiv=this.dropDownButtonWrapper.parent(),this.dropDownButtonArrow=this.host.find("#dropDownButtonArrow"),this.arrow=a(this.dropDownButtonArrow.children()[0]),this.dropDownButtonContent=this.host.find("#dropDownButtonContent"),this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-dropdownlist-content")),this.dropDownButtonWrapper.addClass(this.toThemeProperty("jqx-disableselect")),this.rtl&&this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-rtl"));var i=this;this.host.parents()&&this.addHandler(this.host.parents(),"scroll.dropdownbutton"+this.element.id,function(a){var b=i.isOpened();b&&i.close()}),this.addHandler(this.dropDownButtonWrapper,"selectstart",function(){return!1}),this.dropDownButtonWrapper[0].id="dropDownButtonWrapper"+this.element.id,this.dropDownButtonArrow[0].id="dropDownButtonArrow"+this.element.id,this.dropDownButtonContent[0].id="dropDownButtonContent"+this.element.id;var i=this;this.propertyChangeMap.disabled=function(b,c,d,e){e?(b.host.addClass(i.toThemeProperty("jqx-dropdownlist-state-disabled")),b.host.addClass(i.toThemeProperty("jqx-fill-state-disabled")),b.dropDownButtonContent.addClass(i.toThemeProperty("jqx-dropdownlist-content-disabled"))):(b.host.removeClass(i.toThemeProperty("jqx-dropdownlist-state-disabled")),b.host.removeClass(i.toThemeProperty("jqx-fill-state-disabled")),b.dropDownButtonContent.removeClass(i.toThemeProperty("jqx-dropdownlist-content-disabled"))),a.jqx.aria(b,"aria-disabled",b.disabled)},this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-disabled")));var j=this.toThemeProperty("jqx-rc-all")+" "+this.toThemeProperty("jqx-fill-state-normal")+" "+this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-widget-content")+" "+this.toThemeProperty("jqx-dropdownlist-state-normal");if(this.host.addClass(j),this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this.arrow.addClass(this.toThemeProperty("jqx-icon")),this._setSize(),this.render(),a.jqx.browser.msie&&a.jqx.browser.version<8&&(this.container.css("display","none"),this.host.parents(".jqx-window").length>0)){var k=this.host.parents(".jqx-window").css("z-index");g.css("z-index",k+10),this.container.css("z-index",k+10)}},setContent:function(a){this.dropDownButtonContent.children().remove(),this.dropDownButtonContent[0].innerHTML="",this.dropDownButtonContent.append(a)},val:function(a){return 0==arguments.length||"object"==typeof a?this.dropDownButtonContent.text():void this.dropDownButtonContent.html(a)},getContent:function(){return this.dropDownButtonContent.children().length>0?this.dropDownButtonContent.children():this.dropDownButtonContent.text()},_setSize:function(){null!=this.width&&this.width.toString().indexOf("px")!=-1?this.host[0].style.width=this.width:void 0==this.width||isNaN(this.width)||(this.host[0].style.width=parseInt(this.width)+"px"),null!=this.height&&this.height.toString().indexOf("px")!=-1?this.host[0].style.height=this.height:void 0==this.height||isNaN(this.height)||(this.host[0].style.height=parseInt(this.height)+"px");var b=!1;null!=this.width&&this.width.toString().indexOf("%")!=-1&&(b=!0,this.host.width(this.width)),null!=this.height&&this.height.toString().indexOf("%")!=-1&&(b=!0,this.host.height(this.height));var c=this;b&&this.refresh(!1),a.jqx.utilities.resize(this.host,function(){c._arrange()})},isOpened:function(){var b=this,c=a.data(document.body,"openedJQXButton"+this.element.id);return null!=c&&c==b.popupContent},focus:function(){try{this.host.focus()}catch(a){}},render:function(){this.removeHandlers();var b=this,c=!1;this.touch||(this.addHandler(this.host,"mouseenter",function(){!b.disabled&&b.enableHover&&(c=!0,b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-hover")),b.arrow.addClass(b.toThemeProperty("jqx-icon-arrow-down-hover")),b.host.addClass(b.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.host,"mouseleave",function(){!b.disabled&&b.enableHover&&(b.host.removeClass(b.toThemeProperty("jqx-dropdownlist-state-hover")),b.host.removeClass(b.toThemeProperty("jqx-fill-state-hover")),b.arrow.removeClass(b.toThemeProperty("jqx-icon-arrow-down-hover")),c=!1)})),b.autoOpen&&(this.addHandler(this.host,"mouseenter",function(){var a=b.isOpened();!a&&b.autoOpen&&(b.open(),b.host.focus())}),this.addHandler(a(document),"mousemove."+b.element.id,function(a){var c=b.isOpened();if(c&&b.autoOpen){var d=b.host.coord(),e=d.top,f=d.left,g=b.container.coord(),h=g.left,i=g.top;canClose=!0,a.pageY>=e&&a.pageY<=e+b.host.height()&&a.pageX>=f&&a.pageX<f+b.host.width()&&(canClose=!1),a.pageY>=i&&a.pageY<=i+b.container.height()&&a.pageX>=h&&a.pageX<h+b.container.width()&&(canClose=!1),canClose&&b.close()}})),this.addHandler(this.dropDownButtonWrapper,"mousedown",function(a){if(!b.disabled){var c="visible"==b.container.css("visibility");if(!b.isanimating){if(c)return b.close(),!1;b.open(),b.focusable||a.preventDefault&&a.preventDefault()}}}),this.touch&&this.addHandler(a(document),a.jqx.mobile.getTouchEventName("touchstart")+"."+this.element.id,b.closeOpenedDropDown,{me:this,popup:this.container,id:this.element.id}),this.addHandler(a(document),"mousedown."+this.element.id,b.closeOpenedDropDown,{me:this,popup:this.container,id:this.element.id}),this.addHandler(this.host,"keydown",function(a){var c="visible"==b.container.css("visibility");return"none"==b.host.css("display")||("13"==a.keyCode&&(b.isanimating||c&&b.close()),115==a.keyCode?(b.isanimating||(b.isOpened()?b.isOpened()&&b.close():b.open()),!1):(a.altKey&&"block"==b.host.css("display")&&(38==a.keyCode?b.isOpened()&&b.close():40==a.keyCode&&(b.isOpened()||b.open())),void("27"==a.keyCode&&(b.ishiding||(b.close(),void 0!=b.tempSelectedIndex&&b.selectIndex(b.tempSelectedIndex))))))}),this.addHandler(this.firstDiv,"focus",function(){b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-focus")),b.host.addClass(b.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.firstDiv,"blur",function(){b.host.removeClass(b.toThemeProperty("jqx-dropdownlist-state-focus")),b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"))})},removeHandlers:function(){var b=this;this.removeHandler(this.dropDownButtonWrapper,"mousedown"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.firstDiv,"focus"),this.removeHandler(this.firstDiv,"blur"),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave"),this.autoOpen&&(this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave")),this.removeHandler(a(document),"mousemove."+b.element.id)},_findPos:function(b){for(;b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b.nextSibling;var c=a(b).coord(!0);return[c.left,c.top]},testOffset:function(b,c,d){var e=b.outerWidth(),f=b.outerHeight(),g=a(window).width()+a(window).scrollLeft(),h=a(window).height()+a(window).scrollTop();if(c.left+e>g&&e>this.host.width()){var i=this.host.coord().left,j=e-this.host.width();c.left=i-j+2}return c.left<0&&(c.left=parseInt(this.host.coord().left)+"px"),c.top+f>h&&(c.top-=Math.abs(f+d)),c},_getBodyOffset:function(){var b=0,c=0;return"0px"!=a("body").css("border-top-width")&&(b=parseInt(a("body").css("border-top-width")),isNaN(b)&&(b=0)),"0px"!=a("body").css("border-left-width")&&(c=parseInt(a("body").css("border-left-width")),isNaN(c)&&(c=0)),{left:c,top:b}},open:function(){a.jqx.aria(this,"aria-expanded",!0);var b=this;if((null==this.dropDownWidth||"auto"==this.dropDownWidth)&&null!=this.width&&this.width.indexOf&&this.width.indexOf("%")!=-1){var c=this.host.width();this.container.width(parseInt(c))}b._raiseEvent("2");var d,e=this.popupContent,f=(a(window).scrollTop(),a(window).scrollLeft(),parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px"),g=parseInt(Math.round(this.host.coord(!0).left));d=g+"px";var h=a.jqx.mobile.isSafariMobileBrowser()||a.jqx.mobile.isWindowsPhone(),i=a.jqx.utilities.hasTransform(this.host);this.ishiding=!1,this.tempSelectedIndex=this.selectedIndex,(i||null!=h&&h)&&(d=a.jqx.mobile.getLeftPos(this.element),f=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),"0px"!=a("body").css("border-top-width")&&(f=parseInt(f)-this._getBodyOffset().top+"px"),"0px"!=a("body").css("border-left-width")&&(d=parseInt(d)-this._getBodyOffset().left+"px")),e.stop(),this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected")),this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));var j=!1;a.jqx.browser.msie&&a.jqx.browser.version<8&&(j=!0),j&&this.container.css("display","block"),this.container.css("left",d),this.container.css("top",f);var k=!1,l=function(){if("right"==this.dropDownHorizontalAlignment||this.rtl){var a=this.container.width(),b=Math.abs(a-this.host.width());a>this.host.width()?this.container.css("left",parseInt(Math.round(g))-b+"px"):this.container.css("left",parseInt(Math.round(g))+b+"px")}};if(l.call(this),this.enableBrowserBoundsDetection){var m=this.testOffset(e,{left:parseInt(this.container.css("left")),top:parseInt(f)},parseInt(this.host.outerHeight()));parseInt(this.container.css("top"))!=m.top?(k=!0,this.container.height(e.outerHeight()),e.css("top",23),this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){if(e.outerHeight()!=b.container.height()){var a=b.testOffset(e,{left:parseInt(b.container.css("left")),top:parseInt(f)},parseInt(b.host.outerHeight()));b.container.css("top",a.top),b.container.height(e.outerHeight())}},50)):e.css("top",0),this.container.css("top",m.top),parseInt(this.container.css("left"))!=m.left&&this.container.css("left",m.left)}if("none"==this.animationType)this.container.css("visibility","visible"),a.data(document.body,"openedJQXButtonParent",b),a.data(document.body,"openedJQXButton"+this.element.id,e),e.css("margin-top",0),e.css("opacity",1),this._raiseEvent("0"),l.call(b);else{this.container.css("visibility","visible");var n=e.outerHeight();b.isanimating=!0,"fade"==this.animationType?(e.css("margin-top",0),e.css("opacity",0),e.animate({opacity:1},this.openDelay,function(){a.data(document.body,"openedJQXButtonParent",b),a.data(document.body,"openedJQXButton"+b.element.id,e),b.ishiding=!1,b.isanimating=!1,b._raiseEvent("0")}),l.call(b)):(e.css("opacity",1),k?e.css("margin-top",n):e.css("margin-top",-n),l.call(b),e.animate({"margin-top":0},this.openDelay,function(){a.data(document.body,"openedJQXButtonParent",b),a.data(document.body,"openedJQXButton"+b.element.id,e),b.ishiding=!1,b.isanimating=!1,b._raiseEvent("0")}))}k?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),this.container.addClass(this.toThemeProperty("jqx-rc-b-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),this.container.addClass(this.toThemeProperty("jqx-rc-t-expanded"))),this.focusable&&(this.firstDiv.focus(),setTimeout(function(){b.firstDiv.focus()},10)),this.container.addClass(this.toThemeProperty("jqx-fill-state-focus")),this.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-focus")),this.host.addClass(b.toThemeProperty("jqx-fill-state-focus"))},close:function(){a.jqx.aria(this,"aria-expanded",!1);var b=this.popupContent,c=this.container,d=this;d._raiseEvent("3");var e=!1;if(a.jqx.browser.msie&&a.jqx.browser.version<8&&(e=!0),this.isOpened()){if(a.data(document.body,"openedJQXButton"+this.element.id,null),"none"==this.animationType)this.container.css("visibility","hidden"),e&&this.container.css("display","none");else if(!d.ishiding){d.isanimating=!0,b.stop();var f=b.outerHeight();b.css("margin-top",0);var g=-f;parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(g=f),"fade"==this.animationType?(b.css({opacity:1}),b.animate({opacity:0},this.closeDelay,function(){c.css("visibility","hidden"),d.isanimating=!1,d.ishiding=!1,e&&c.css("display","none")})):b.animate({"margin-top":g},this.closeDelay,function(){c.css("visibility","hidden"),d.isanimating=!1,d.ishiding=!1,e&&c.css("display","none")})}this.ishiding=!0,this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),this.container.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.container.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),this.container.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-focus")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this._raiseEvent("1")}},closeOpenedDropDown:function(b){var c=b.data.me,d=a(b.target);if(a(b.target).ischildof(b.data.me.host))return!0;if(a(b.target).ischildof(b.data.me.popupContent))return!0;var e=!1;return a.each(d.parents(),function(){if("undefined"!=this.className&&this.className.indexOf&&this.className.indexOf("dropDownButton")!=-1)return e=!0,!1}),e||c.close(),!0},refresh:function(){this._arrange()},_arrange:function(){var a=parseInt(this.host.width()),b=parseInt(this.host.height()),c=(this.arrowSize,this.arrowSize),d=3,e=a-c-2*d;if(e>0&&(this.dropDownButtonContent[0].style.width=e+"px"),this.dropDownButtonContent[0].style.height=parseInt(b)+"px",this.dropDownButtonContent[0].style.left="0px",this.dropDownButtonContent[0].style.top="0px",this.dropDownButtonArrow[0].style.width=parseInt(c)+"px",this.dropDownButtonArrow[0].style.height=parseInt(b)+"px",this.rtl&&(this.dropDownButtonArrow.css("float","left"),this.dropDownButtonContent.css("float","right"),this.dropDownButtonContent.css("left",-d)),null!=this.dropDownWidth)if(this.dropDownWidth.toString().indexOf("%")>=0){var a=parseInt(this.dropDownWidth)*this.host.width()/100;this.container.width(a)}else this.container.width(this.dropDownWidth);null!=this.dropDownHeight&&this.container.height(this.dropDownHeight)},destroy:function(){this.removeHandler(this.dropDownButtonWrapper,"selectstart"),this.removeHandler(this.dropDownButtonWrapper,"mousedown"),this.removeHandler(this.host,"keydown"),this.host.removeClass(),this.removeHandler(a(document),"mousedown."+this.element.id,self.closeOpenedDropDown),this.host.remove(),this.container.remove()},_raiseEvent:function(a,b){void 0==b&&(b={owner:null}),2!=a||this.contentInitialized||this.initContent&&(this.initContent(),this.contentInitialized=!0);var c=this.events[a];args=b,args.owner=this;var d=new jQuery.Event(c);d.owner=this,2!=a&&3!=a&&4!=a||(d.args=b);var e=this.host.trigger(d);return e},resize:function(a,b){this.width=a,this.height=b,this._setSize(),this._arrange()},propertyChangedHandler:function(b,c,d,e){void 0!=this.isInitialized&&0!=this.isInitialized&&("rtl"==c&&(e?(b.dropDownButtonArrow.css("float","left"),b.dropDownButtonContent.css("float","right")):(b.dropDownButtonArrow.css("float","right"),b.dropDownButtonContent.css("float","left"))),"autoOpen"==c&&b.render(),"theme"==c&&null!=e&&a.jqx.utilities.setTheme(d,e,b.host),"width"!=c&&"height"!=c||(b._setSize(),b._arrange()))}})}(jQuery);