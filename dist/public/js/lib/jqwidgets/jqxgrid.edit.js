!function(a){a.extend(a.jqx._jqxGrid.prototype,{_handledblclick:function(b,c){if(null!=b.target&&!c.disabled&&!a(b.target).ischildof(this.columnsheader)){var d;if(b.which?d=3==b.which:b.button&&(d=2==b.button),!d){var e;if(b.which?e=2==b.which:b.button&&(e=1==b.button),!e){var f=this.showheader?this.columnsheader.height()+2:0,g=this._groupsheader()?this.groupsheader.height():0,h=this.showtoolbar?this.toolbarheight:0;g+=h;var i=this.host.offset(),j=b.pageX-i.left,k=b.pageY-f-i.top-g,l=this._hittestrow(j,k);if(l){var m=l.row,n=l.index,o=b.target.className,p=this.table[0].rows[n];if(null!=p){c.mousecaptured=!0,c.mousecaptureposition={left:b.pageX,top:b.pageY-g};for(var q=this.hScrollInstance,r=q.value,s=0,t=(this.groupable?this.groups.length:0,0);t<p.cells.length;t++){var u=parseInt(a(this.columnsrow[0].cells[t]).css("left")),v=u-r;c.columns.records[t].pinned&&(v=u);var w=this._getcolumnat(t);if(null==w||!w.hidden){var x=v+a(this.columnsrow[0].cells[t]).width();if(x>=j&&j>=v){s=t;break}}}if(null!=m){var w=this._getcolumnat(s);o.indexOf("jqx-grid-group-expand")==-1&&o.indexOf("jqx-grid-group-collapse")==-1&&m.boundindex!=-1&&c.begincelledit(c.getboundindex(m),w.datafield,w.defaulteditorvalue)}}}}}}},_getpreveditablecolumn:function(a){for(var b=this;a>0;){a--;var c=b.getcolumnat(a);if(!c)return null;if(c.editable&&!c.hidden)return c}return null},_getnexteditablecolumn:function(a){for(var b=this;a<this.columns.records.length;){a++;var c=b.getcolumnat(a);if(!c)return null;if(c.editable&&!c.hidden)return c}return null},_handleeditkeydown:function(b,c){if(c.handlekeyboardnavigation){var d=c.handlekeyboardnavigation(b);if(1==d)return!0}var e=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(c.showfilterrow&&c.filterable&&this.filterrow&&a(b.target).ischildof(this.filterrow))return!0;if(c.pageable&&a(b.target).ischildof(this.pager))return!0;if(this.showtoolbar&&a(b.target).ischildof(this.toolbar))return!0;if(this.showstatusbar&&a(b.target).ischildof(this.statusbar))return!0;if(this.rowdetails&&a(b.target).ischildof(this.content.find("[role='rowgroup']")))return!0;if(this.editcell){if("selectedrow"===this.editmode)return 13===e?this.endrowedit(this.editcell.row,!1):27===e&&this.endrowedit(this.editcell.row,!0),9!==e;if(null==this.editcell.columntype||"textbox"==this.editcell.columntype||"numberinput"==this.editcell.columntype||"combobox"==this.editcell.columntype||"datetimeinput"==this.editcell.columntype){if(e>=33&&e<=40&&"multiplecellsadvanced"==c.selectionmode){var f="textbox"==this.editcell.columntype||null==this.editcell.columntype?this.editcell.editor:this.editcell.editor.find("input"),g=c._selection(f),h=f.val().length;g.length>0&&"datetimeinput"!=this.editcell.columntype&&(c._cancelkeydown=!0),g.start>0&&37==e&&(c._cancelkeydown=!0),g.start<h&&39==e&&"datetimeinput"!=this.editcell.columntype&&(c._cancelkeydown=!0),"datetimeinput"==this.editcell.columntype&&39==e&&g.start+g.length<h&&(c._cancelkeydown=!0)}}else"dropdownlist"==this.editcell.columntype?(37==e||39==e&&"multiplecellsadvanced"==c.selectionmode)&&(c._cancelkeydown=!1):"multiplecellsadvanced"==this.selectionmode&&"textbox"!=this.editcell.columntype&&"numberinput"!=this.editcell.columntype&&(c._cancelkeydown=!0);if(32==e&&"checkbox"==c.editcell.columntype){var i=c.getcolumn(c.editcell.datafield);if(i.editable){var j=!c.getcellvalue(c.editcell.row,c.editcell.column);if(i.cellbeginedit){var k=i.cellbeginedit(c.editcell.row,i.datafield,i.columntype,!j);if(0==k)return!1}return c.setcellvalue(c.editcell.row,c.editcell.column,j,!0),c._raiseEvent(18,{rowindex:c.editcell.row,datafield:c.editcell.column,oldvalue:!j,value:j,columntype:"checkbox"}),!1}}if(9==e){var l=this.editcell.row,m=this.editcell.column,n=m,o=c._getcolumnindex(m),p=!1,q=c.getrowvisibleindex(l);if(this.editchar="",0!=this.editcell.validated){if(b.shiftKey){var i=c._getpreveditablecolumn(o);i&&(m=i.datafield,p=!0,c.selectionmode.indexOf("cell")!=-1&&(c.selectprevcell(l,n),setTimeout(function(){c.ensurecellvisible(q,m)},10)))}else{var i=c._getnexteditablecolumn(o);i&&(m=i.datafield,p=!0,c.selectionmode.indexOf("cell")!=-1&&(c.selectnextcell(l,n),c._oldselectedcell=c.selectedcell,setTimeout(function(){c.ensurecellvisible(q,m)},10)))}if(!p)return null!=this.editcell&&(c.endcelledit(l,m,!1),this._renderrows(this.virtualsizeinfo)),!0;c.begincelledit(l,m),null!=this.editcell&&"checkbox"==this.editcell.columntype&&this._renderrows(this.virtualsizeinfo)}return!1}if(13==e){var r=this.selectedcell;if(r)var s=this.getrowvisibleindex(r.rowindex);if(this.endcelledit(this.editcell.row,this.editcell.column,!1,!0),"multiplecellsadvanced"==this.selectionmode){var t=c.getselectedcell();if(null!=t&&c.selectcell&&null==this.editcell&&t.rowindex+1<this.dataview.totalrecords)if(this.sortcolumn!=t.datafield){var q=this.getrowvisibleindex(t.rowindex),u=this.dataview.loadedrecords[q+1];if(u&&(!this.pageable||this.pageable&&q+1<(this.dataview.pagenum+1)*this.pagesize)){this.clearselection(!1),this.selectcell(this.getboundindex(u),t.datafield);var t=this.getselectedcell();this.ensurecellvisible(u.visibleindex,t.datafield)}}else if(null!=r){var v=this.dataview.loadedrecords[s+1];if(v)if(!this.pageable||this.pageable&&s+1<this.pagesize)this.clearselection(!1),this.selectcell(this.getboundindex(v),t.datafield);else if(this.pageable&&s+1>=this.pagesize){this.clearselection(!1);var v=this.dataview.loadedrecords[s];this.selectcell(this.getboundindex(v),t.datafield)}}}return!1}if(27==e)return this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),!1}else{var w=!1;if(113==e&&(w=!0),!b.ctrlKey&&!b.altKey){if(e>=48&&e<=57&&(this.editchar=String.fromCharCode(e),w=!0),e>=65&&e<=90){this.editchar=String.fromCharCode(e);var x=!1;b.shiftKey?x=b.shiftKey:b.modifiers&&(x=!!(4&b.modifiers)),x||(this.editchar=this.editchar.toLowerCase()),w=!0}else e>=96&&e<=105&&(this.editchar=e-96,this.editchar=this.editchar.toString(),w=!0);var y=a(".jqx-grid").length;w=w&&(1==y||y>1&&c.focused);var z=a.data(document.body,"jqxgrid.edit");if(void 0!==z&&""!==z&&(13===e||w)&&z!=c.element.id)return!0}if((13==e||w)&&c.getselectedrowindex){var l=c.getselectedrowindex();switch(c.selectionmode){case"singlerow":case"multiplerows":case"multiplerowsextended":if(l>=0){for(var m="",A=0;A<c.columns.records.length;A++){var i=c.getcolumnat(A);if(i.editable){m=i.datafield;break}}c.begincelledit(l,m)}break;case"singlecell":case"multiplecells":case"multiplecellsextended":var t=c.getselectedcell();if(null!=t){var i=c._getcolumnbydatafield(t.datafield);"checkbox"!=i.columntype&&c.begincelledit(t.rowindex,t.datafield)}break;case"multiplecellsadvanced":var t=c.getselectedcell();if(null!=t)if(13==e){if(c.selectcell&&t.rowindex+1<c.dataview.totalrecords){var q=this.getrowvisibleindex(t.rowindex),u=this.dataview.loadedrecords[q+1];if(u){this.clearselection(!1),this.selectcell(this.getboundindex(u),t.datafield);var t=this.getselectedcell();this.ensurecellvisible(u.visibleindex,t.datafield)}}}else"selectedrow"!==c.editmode&&c.begincelledit(t.rowindex,t.datafield)}return!1}if(46==e){var B=c.getselectedcells();if(c.selectionmode.indexOf("cell")==-1&&c._getcellsforcopypaste&&(B=c._getcellsforcopypaste()),null!=B&&B.length>0){for(var C=0;C<B.length;C++){var t=B[C];if(t.datafield){var i=c.getcolumn(t.datafield),D=c.getcellvalue(t.rowindex,t.datafield);if(""!==D&&i.editable&&c.enablekeyboarddelete){var E=null;if("checkbox"==i.columntype&&(i.threestatecheckbox||(E=!1)),i.cellbeginedit){var k=i.cellbeginedit(t.rowindex,i.datafield,i.columntype,E);if(0==k)return!1}if(c._raiseEvent(17,{rowindex:t.rowindex,datafield:t.datafield,value:D}),C==B.length-1?(c.setcellvalue(t.rowindex,t.datafield,E,!0),i.displayfield!=i.datafield&&c.setcellvalue(t.rowindex,i.displayfield,E,!0)):(c.setcellvalue(t.rowindex,t.datafield,E,!1),i.displayfield!=i.datafield&&c.setcellvalue(t.rowindex,i.displayfield,E,!0)),i.cellendedit){i.cellendedit(t.rowindex,i.datafield,i.columntype,E)}c._raiseEvent(18,{rowindex:t.rowindex,datafield:t.datafield,oldvalue:D,value:E})}}}return this.dataview.updateview(),this._renderrows(this.virtualsizeinfo),!1}}if(32==e){var t=c.getselectedcell();if(null!=t){var i=c.getcolumn(t.datafield);if("checkbox"==i.columntype&&i.editable){var j=!c.getcellvalue(t.rowindex,t.datafield);if(i.cellbeginedit){var k=i.cellbeginedit(t.rowindex,i.datafield,i.columntype,!j);if(0==k)return!1}return c._raiseEvent(17,{rowindex:t.rowindex,datafield:t.datafield,value:!j,columntype:"checkbox"}),c.setcellvalue(t.rowindex,t.datafield,j,!0),c._raiseEvent(18,{rowindex:t.rowindex,datafield:t.datafield,oldvalue:!j,value:j,columntype:"checkbox"}),!1}}}}return!0},begincelledit:function(b,c,d,e,f){var g=this.getcolumn(c);if(this._cellscache=new Array,null!=c&&"number"!=g.columntype&&"button"!=g.columntype){if(this.groupable){if(this.groups.indexOf(c)>=0)return;if(this.groups.indexOf(g.displayfield)>=0)return}if(void 0==this.editrow){if(this.editcell){if(this.editcell.row==b&&this.editcell.column==c)return!0;if("selectedrow"===this.editmode&&this.editcell.row==b)return;var h=this.endcelledit(this.editcell.row,this.editcell.column,!1,!0,!1);if(0==h)return}var i="checkbox"==g.columntype||"button"==g.columntype;if(this.host.removeClass("jqx-disableselect"),this.content.removeClass("jqx-disableselect"),g.editable){if(g.cellbeginedit){var j=this.getcell(b,c),k=g.cellbeginedit(b,c,g.columntype,null!=j?j.value:null);if(0==k)return}var l=this.getrowvisibleindex(b);if(this.editcell=this.getcell(b,c),this.editcell&&(this.editcell.visiblerowindex=l,!this.editcell.editing)){if(i||(this.editcell.editing=!0),this.editcell.columntype=g.columntype,this.editcell.defaultvalue=d,void 0!=g.defaultvalue&&(this.editcell.defaultvalue=g.defaultvalue),this.editcell.init=!0,"checkbox"!=g.columntype&&"selectedrow"!=this.editmode&&this._raiseEvent(17,{rowindex:b,datafield:g.datafield,value:this.editcell.value,columntype:g.columntype}),a.data(document.body,"jqxgrid.edit",this.element.id),!i){var m=this.getrowvisibleindex(b);e!==!1&&this.ensurecellvisible(m,g.datafield),f!==!1&&this._renderrows(this.virtualsizeinfo)}if(this.editcell)return this.editcell.init=!1,!0}}else{if(!this.editcell)return;this.editcell.editor=null,this.editcell.editing=!1,f!==!1&&this._renderrows(this.virtualsizeinfo),this.editcell=null}}}},getScrollTop:function(){if(this._py)return pageYOffset;if(this._py="undefined"!=typeof pageYOffset,this._py)return pageYOffset;var a=document.body,b=document.documentElement;return b=b.clientHeight?b:a,b.scrollTop},getScrollLeft:function(){if("undefined"!=typeof pageXOffset)return pageXOffset;var a=document.body,b=document.documentElement;return b=b.clientHeight?b:a,b.scrollLeft},endcelledit:function(b,c,d,e,f){if(void 0!=b&&void 0!=c||(this.editcell&&(b=this.editcell.row,c=this.editcell.column),void 0==d&&(d=!0)),this.editcell){var g=this.getcolumn(c),h=this;if("selectedrow"===h.editmode)return void this.endrowedit(b,d);var i=function(){if(0!=f){if(h.isTouchDevice())return;if(!h.isNestedGrid){var a=h.getScrollTop(),b=h.getScrollLeft();try{h.element.focus(),h.content.focus(),a!=h.getScrollTop()&&window.scrollTo(b,a),setTimeout(function(){h.element.focus(),h.content.focus(),a!=h.getScrollTop()&&window.scrollTo(b,a)},10)}catch(c){}}}};if("checkbox"==g.columntype||"button"==g.columntype)return this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1,this.editcell=null),!0;var j=this._geteditorvalue(g),k=function(a){if(a._hidecelleditor(),g.cellendedit&&g.cellendedit(b,c,g.columntype,a.editcell.value,j),a.editchar=null,g.displayfield!=g.datafield){var d=a.getcellvalue(a.editcell.row,g.displayfield),f=a.editcell.value;oldvalue={value:f,label:d}}else oldvalue=a.editcell.value;a._raiseEvent(18,{rowindex:b,datafield:c,displayfield:g.displayfield,oldvalue:j,value:j,columntype:g.columntype}),a.editcell.editor=null,a.editcell.editing=!1,a.editcell=null,(e||void 0==e)&&a._renderrows(a.virtualsizeinfo),i(),a.enablebrowserselection||(a.host.addClass("jqx-disableselect"),a.content.addClass("jqx-disableselect"))};if(d)return k(this),!1;if(this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()),g.cellvaluechanging){var l=g.cellvaluechanging(b,c,g.columntype,this.editcell.value,j);void 0!=l&&(j=l)}if(g.validation){var m=this.getcell(b,c);try{var n=g.validation(m,j),o=this.gridlocalization.validationstring;void 0!=n.message&&(o=n.message);var p="boolean"==typeof n?n:n.result;if(!p)return void 0!=n.showmessage&&1!=n.showmessage||this._showvalidationpopup(b,c,o),this.editcell.validated=!1,!1}catch(q){return this._showvalidationpopup(b,c,this.gridlocalization.validationstring),this.editcell.validated=!1,!1}}if(g.displayfield!=g.datafield){var r=this.getcellvalue(this.editcell.row,g.displayfield),s=this.editcell.value;oldvalue={value:s,label:r}}else oldvalue=this.editcell.value;if(g.cellendedit){var t=g.cellendedit(b,c,g.columntype,this.editcell.value,j);if(0==t)return this._raiseEvent(18,{rowindex:b,datafield:c,displayfield:g.displayfield,oldvalue:oldvalue,value:oldvalue,columntype:g.columntype}),k(this),!1}return this._raiseEvent(18,{rowindex:b,datafield:c,displayfield:g.displayfield,oldvalue:oldvalue,value:j,columntype:g.columntype}),this._hidecelleditor(!1),void 0!=this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1),this.editcell=null,this.editchar=null,this.setcellvalue(b,c,j,e),this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),a.jqx.browser.msie||i(),a.data(document.body,"jqxgrid.edit",""),!0}},beginrowedit:function(b){var c=this;c._oldselectedrow=b,this._cellscache=new Array;var d=!1;if("selectedrow"!=this.editmode&&(d=!0),d){var e=this.editmode;this.editmode="selectedrow"}a.each(this.columns.records,function(a,d){if(c.editable&&this.editable){var e=c.getcell(b,this.datafield);c.begincelledit(b,this.datafield,null,!1,!1),c._raiseEvent(17,{rowindex:b,datafield:this.datafield,value:e.value,columntype:this.columntype})}}),c.editcell&&(c.editcell.init=!0),this._renderrows(this.virtualsizeinfo),d&&(this.editmode=e)},endrowedit:function(b,c){var d=this;if(!this.editcell)return!1;if(void 0==this.editcell.editor)return!1;var e=!1;if("selectedrow"!=this.editmode&&(e=!0),e){var f=this.editmode;this.editmode="selectedrow"}var g=!1,h={};this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());for(var i=0;i<this.columns.records.length;i++){var j=this.columns.records[i];if(j.editable&&!j.hidden&&"checkbox"!=j.columntype){var k=this._geteditorvalue(j),l=function(a){a._hidecelleditor();var c=a.getcellvalue(a.editcell.row,j.displayfield);if(j.cellendedit&&j.cellendedit(b,o,j.columntype,c,k),a.editchar=null,j.displayfield!=j.datafield){var d=a.getcellvalue(a.editcell.row,j.displayfield),e=c;m={value:e,label:d}}else m=c;a._raiseEvent(18,{rowindex:b,datafield:o,displayfield:j.displayfield,oldvalue:c,value:c,columntype:j.columntype}),a.editcell.editing=!1};if(c)l(this);else{if(j.cellvaluechanging){var m=this.getcellvalue(this.editcell.row,j.displayfield),n=j.cellvaluechanging(b,o,j.columntype,m,k);void 0!=n&&(k=n)}var o=j.datafield;if(j.validation){var p=this.getcell(b,j.datafield);try{var q=j.validation(p,k),r=this.gridlocalization.validationstring;void 0!=q.message&&(r=q.message);var s="boolean"==typeof q?q:q.result;if(!s){void 0!=q.showmessage&&1!=q.showmessage||this._showvalidationpopup(b,o,r),g=!0,this.editcell[j.datafield].validated=!1;continue}}catch(t){this._showvalidationpopup(b,o,this.gridlocalization.validationstring),this.editcell[j.datafield].validated=!1,g=!0;continue}}if(j.displayfield!=j.datafield){var u=this.getcellvalue(this.editcell.row,j.displayfield),v=this.editcell.value;m={value:v,label:u}}else m=this.getcellvalue(this.editcell.row,j.displayfield);h[j.datafield]={newvalue:k,oldvalue:m}}}}var w={},x={};if(!g){this._hidecelleditor(!1);for(var i=0;i<this.columns.records.length;i++){var j=this.columns.records[i],o=j.datafield;if(!j.hidden&&j.editable)if("checkbox"!=j.columntype){if(h[j.datafield]){var k=h[j.datafield].newvalue,m=h[j.datafield].oldvalue;if(j.cellendedit){var y=j.cellendedit(b,o,j.columntype,m,k);if(0==y){this._raiseEvent(18,{rowindex:b,datafield:o,displayfield:j.displayfield,oldvalue:m,value:m,columntype:j.columntype}),l(this);continue}}this.source.updaterow||this._raiseEvent(18,{rowindex:b,datafield:j.datafield,displayfield:j.displayfield,oldvalue:m,value:k,columntype:j.columntype}),w[j.datafield]=k,x[j.datafield]=m}}else{var k=this.getcellvalue(b,j.displayfield);this._raiseEvent(18,{rowindex:b,datafield:j.datafield,displayfield:j.displayfield,oldvalue:k,value:k,columntype:j.columntype})}}var z=this.getrowid(b),A=this.getrowdata(b);if(a.each(w,function(a,b){if(b&&void 0!=b.label){var c=d.getcolumn(a);A[c.displayfield]=b.label,A[c.datafield]=b.value}else A[a]=b}),this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),a.data(document.body,"jqxgrid.edit",""),this.editcell=null,this.editchar=null,this.source.updaterow){var B=!1,d=this,s=function(c){var e=d.source.updaterow;d.source.updaterow=null,0==c?(a.each(x,function(a,b){if(b&&void 0!=b.label){var c=d.getcolumn(a);A[c.displayfield]=b.label,A[c.datafield]=b.value}else A[a]=b}),d.updaterow(z,A)):d.updaterow(z,A);for(var f=0;f<d.columns.records.length;f++){var g=d.columns.records[f];g.datafield;d._raiseEvent(18,{rowindex:b,datafield:g.datafield,displayfield:g.displayfield,oldvalue:x[g.datafield],value:A[g.displayfield],columntype:g.columntype})}d.source.updaterow=e};try{B=this.source.updaterow(z,A,s),void 0==B&&(B=!0)}catch(t){return void(B=!1)}}else this.updaterow(z,A),this._renderrows(this.virtualsizeinfo)}return e&&(this.editmode=f),g},_selection:function(a){if("selectionStart"in a[0]){var b=a[0],c=b.selectionEnd-b.selectionStart;return{start:b.selectionStart,end:b.selectionEnd,length:c,text:b.value}}var d=document.selection.createRange();if(null==d)return{start:0,end:b.value.length,length:0};var e=a[0].createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e);var c=d.text.length;return{start:f.text.length,end:f.text.length+d.text.length,length:c,text:d.text}},_setSelection:function(a,b,c){if("selectionStart"in c[0])c[0].focus(),c[0].setSelectionRange(a,b);else{var d=c[0].createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",a),d.select()}},findRecordIndex:function(a,b,c){var c=c;if(b)for(var d=c.length,e=0;e<d;e++){var f=c[e],g=f.label;if(a==g)return e}return-1},_destroyeditors:function(){var b=this;this.columns.records&&(a.each(this.columns.records,function(c,d){var e=a.trim(this.datafield).split(" ").join("");switch(this.columntype){case"dropdownlist":var f=b.editors["dropdownlist_"+e];f&&(f.jqxDropDownList("destroy"),b.editors["dropdownlist_"+e]=null);break;case"combobox":var g=b.editors["combobox_"+e];g&&(g.jqxComboBox("destroy"),b.editors["combobox_"+e]=null);break;case"datetimeinput":var h=b.editors["datetimeinput_"+this.datafield];h&&(h.jqxDateTimeInput("destroy"),b.editors["datetimeinput_"+e]=null);break;case"numberinput":var i=b.editors["numberinput_"+e];i&&(i.jqxNumberInput("destroy"),b.editors["numberinput_"+e]=null);break;case"custom":case"template":if(this.destroycustomeditor&&(this.destroycustomeditor(b.editors["customeditor_"+e]),b.editors["customeditor_"+e]=null),this.destrotemplateeditor)for(var j=b.getrows.length(),k=0;k<j;k++)this.destrotemplateeditor(b.editors["templateeditor_"+e+"_"+k]),b.editors["templateeditor_"+e+"_"+k]=null;break;case"textbox":default:var l=b.editors["textboxeditor_"+e];l&&(b.removeHandler(l,"keydown"),b.editors["textbox_"+e]=null)}}),b.editors=new Array)},_showcelleditor:function(b,c,d,e,f){if(void 0!=d&&null!=this.editcell&&("checkbox"!=c.columntype||!c.editable)){void 0==f&&(f=!0),"selectedrow"==this.editmode&&(this.editchar="",f=!1);var g=c.datafield,h=a(d),i=this,j=this.editcell.editor,k=this.getcellvalue(b,g),l=this.getcelltext(b,g),m=this.hScrollInstance,n=m.value,o=parseInt(n);this.columns.records.indexOf(c);this.editcell.element=d,0==this.editcell.validated&&this._showvalidationpopup();var p=function(a){i.hScrollInstance.isScrolling()||i.vScrollInstance.isScrolling()||f&&(i.isTouchDevice()||(a.focus(),0!=i.gridcontent[0].scrollTop&&(i.scrolltop(Math.abs(i.gridcontent[0].scrollTop)),i.gridcontent[0].scrollTop=0),0!=i.gridcontent[0].scrollLeft&&(i.gridcontent[0].scrollLeft=0)))};switch(c.columntype){case"dropdownlist":if(this.host.jqxDropDownList){d.innerHTML="";var q=a.trim(c.datafield).split(" ").join(""),r=a.trim(c.displayfield).split(" ").join("");q.indexOf(".")!=-1&&(q=q.replace(".","")),r.indexOf(".")!=-1&&(r=r.replace(".",""));var s=this.editors["dropdownlist_"+q];if(j=void 0==s?a("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='dropdownlisteditor'></div>"):s,j.css("top",a(d).parent().position().top),this.oldhscroll?j.css("left",-o+parseInt(a(d).position().left)):j.css("left",parseInt(a(d).position().left)),c.pinned&&j.css("left",o+parseInt(a(d).position().left)),void 0==s){j.prependTo(this.table),j[0].id="dropdownlisteditor"+this.element.id+q;var t=!!this.source._source,u=null;if(t){var v={localdata:this.source.records,datatype:this.source.datatype,async:!1};u=new a.jqx.dataAdapter(v,{autoBind:!1,async:!1,uniqueDataFields:[r],autoSort:!0,autoSortField:r})}else u=new a.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[r],async:!1,autoSort:!0,autoSortField:r});var w=!c.createeditor;j.jqxDropDownList({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:u,rtl:this.rtl,autoDropDownHeight:w,theme:this.theme,width:h.width()-2,height:h.height()-2,displayMember:r,valueMember:g}),this.editors["dropdownlist_"+q]=j,c.createeditor&&c.createeditor(b,k,j)}c._requirewidthupdate&&j.jqxDropDownList({width:h.width()-2});var x=j.jqxDropDownList("listBox").visibleItems;c.createeditor||(x.length<8?j.jqxDropDownList("autoDropDownHeight",!0):j.jqxDropDownList("autoDropDownHeight",!1));var k=this.getcellvalue(b,r),y=this.findRecordIndex(k,r,x);if(e&&(""!=k?j.jqxDropDownList("selectIndex",y,!0):j.jqxDropDownList("selectIndex",-1)),!this.editcell)return;void 0!=this.editcell.defaultvalue&&j.jqxDropDownList("selectIndex",this.editcell.defaultvalue,!0),f&&j.jqxDropDownList("focus")}break;case"combobox":if(this.host.jqxComboBox){d.innerHTML="";var q=a.trim(c.datafield).split(" ").join(""),r=a.trim(c.displayfield).split(" ").join("");q.indexOf(".")!=-1&&(q=q.replace(".","")),r.indexOf(".")!=-1&&(r=r.replace(".",""));var z=this.editors["combobox_"+q];if(j=void 0==z?a("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='comboboxeditor'></div>"):z,j.css("top",a(d).parent().position().top),this.oldhscroll?j.css("left",-o+parseInt(a(d).position().left)):j.css("left",parseInt(a(d).position().left)),c.pinned&&j.css("left",o+parseInt(a(d).position().left)),void 0==z){j.prependTo(this.table),j[0].id="comboboxeditor"+this.element.id+q;var t=!!this.source._source,u=null;if(t){var v={localdata:this.source.records,datatype:this.source.datatype,async:!1};u=new a.jqx.dataAdapter(v,{autoBind:!1,async:!1,uniqueDataFields:[r],autoSort:!0,autoSortField:r})}else u=new a.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[r],async:!1,autoSort:!0,autoSortField:r});var w=!c.createeditor;j.jqxComboBox({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:u,rtl:this.rtl,autoDropDownHeight:w,theme:this.theme,width:h.width()-2,height:h.height()-2,displayMember:r,valueMember:g}),j.removeAttr("tabindex"),j.find("div").removeAttr("tabindex"),this.editors["combobox_"+q]=j,c.createeditor&&c.createeditor(b,k,j)}c._requirewidthupdate&&j.jqxComboBox({width:h.width()-2});var x=j.jqxComboBox("listBox").visibleItems;c.createeditor||(x.length<8?j.jqxComboBox("autoDropDownHeight",!0):j.jqxComboBox("autoDropDownHeight",!1));var k=this.getcellvalue(b,r),y=this.findRecordIndex(k,r,x);if(e&&(""!=k?(j.jqxComboBox("selectIndex",y,!0),j.jqxComboBox("val",k)):(j.jqxComboBox("selectIndex",-1),j.jqxComboBox("val",k))),!this.editcell)return;void 0!=this.editcell.defaultvalue&&j.jqxComboBox("selectIndex",this.editcell.defaultvalue,!0),this.editchar&&this.editchar.length>0&&j.jqxComboBox("input").val(this.editchar),f&&setTimeout(function(){if(p(j.jqxComboBox("input")),j.jqxComboBox("_setSelection",0,0),i.editchar)j.jqxComboBox("_setSelection",1,1),i.editchar=null;else{var a=j.jqxComboBox("input").val();j.jqxComboBox("_setSelection",0,a.length)}},10)}break;case"datetimeinput":if(this.host.jqxDateTimeInput){d.innerHTML="";var q=a.trim(c.datafield).split(" ").join("");q.indexOf(".")!=-1&&(q=q.replace(".",""));var A=this.editors["datetimeinput_"+q];if(j=void 0==A?a("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='datetimeeditor'></div>"):A,j.show(),j.css("top",a(d).parent().position().top),this.oldhscroll?j.css("left",-o+parseInt(a(d).position().left)):j.css("left",parseInt(a(d).position().left)),c.pinned&&j.css("left",o+parseInt(a(d).position().left)),void 0==A){j.prependTo(this.table),j[0].id="datetimeeditor"+this.element.id+q;var B={calendar:this.gridlocalization};j.jqxDateTimeInput({enableBrowserBoundsDetection:!0,localization:B,_editor:!0,theme:this.theme,rtl:this.rtl,width:h.width(),height:h.height(),formatString:c.cellsformat}),this.editors["datetimeinput_"+q]=j,c.createeditor&&c.createeditor(b,k,j)}if(c._requirewidthupdate&&j.jqxDateTimeInput({width:h.width()-2}),e){if(""!=k&&null!=k){var C=new Date(k);"Invalid Date"==C&&this.source.getvaluebytype&&(C=this.source.getvaluebytype(k,{name:c.datafield,type:"date"})),j.jqxDateTimeInput("setDate",C)}else j.jqxDateTimeInput("setDate",null);void 0!=this.editcell.defaultvalue&&j.jqxDateTimeInput("setDate",this.editcell.defaultvalue)}f&&setTimeout(function(){p(j.jqxDateTimeInput("dateTimeInput"))},10)}break;case"numberinput":if(this.host.jqxNumberInput){d.innerHTML="";var q=a.trim(c.datafield).split(" ").join("");q.indexOf(".")!=-1&&(q=q.replace(".",""));var D=this.editors["numberinput_"+q];if(j=void 0==D?a("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='numbereditor'></div>"):D,j.show(),j.css("top",a(d).parent().position().top),this.oldhscroll?j.css("left",-o+parseInt(a(d).position().left)):j.css("left",parseInt(a(d).position().left)),c.pinned&&j.css("left",o+parseInt(a(d).position().left)),void 0==D){j.prependTo(this.table),j[0].id="numbereditor"+this.element.id+q;var E="",F="left",G=2;c.cellsformat?c.cellsformat.indexOf("c")!=-1?(E=this.gridlocalization.currencysymbol,F=this.gridlocalization.currencysymbolposition,F="before"==F?"left":"right",c.cellsformat.length>1&&(G=parseInt(c.cellsformat.substring(1),10))):c.cellsformat.indexOf("p")!=-1&&(E=this.gridlocalization.percentsymbol,F="right",c.cellsformat.length>1&&(G=parseInt(c.cellsformat.substring(1),10))):G=0,j.jqxNumberInput({decimalSeparator:this.gridlocalization.decimalseparator,decimalDigits:G,inputMode:"simple",theme:this.theme,rtl:this.rtl,width:h.width()-1,height:h.height()-1,spinButtons:!0,symbol:E,symbolPosition:F}),this.editors["numberinput_"+q]=j,c.createeditor&&c.createeditor(b,k,j)}if(c._requirewidthupdate&&j.jqxNumberInput({width:h.width()-2}),e){if(""!=k&&null!=k){var H=k;j.jqxNumberInput("setDecimal",H)}else j.jqxNumberInput("setDecimal",0);if(void 0!=this.editcell.defaultvalue&&j.jqxNumberInput("setDecimal",this.editcell.defaultvalue),this.editchar&&this.editchar.length>0){var I=parseInt(this.editchar);isNaN(I)||j.jqxNumberInput("setDecimal",I)}f&&setTimeout(function(){if(p(j.jqxNumberInput("numberInput")),j.jqxNumberInput("_setSelectionStart",0),i.editchar)c.cellsformat.length>0?j.jqxNumberInput("_setSelectionStart",2):j.jqxNumberInput("_setSelectionStart",1),i.editchar=null;else{var a=j.jqxNumberInput("spinButtons");if(a){var b=j.jqxNumberInput("numberInput").val();i._setSelection(j.jqxNumberInput("numberInput")[0],b.length,b.length)}else{var b=j.jqxNumberInput("numberInput").val();i._setSelection(j.jqxNumberInput("numberInput")[0],0,b.length)}}},10)}}break;case"custom":d.innerHTML="";var q=a.trim(c.datafield).split(" ").join("");q.indexOf(".")!=-1&&(q=q.replace(".",""));var J=this.editors["customeditor_"+q+"_"+b];if(j=void 0==J?a("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='customeditor'></div>"):J,j.show(),j.css("top",a(d).parent().position().top),this.oldhscroll?j.css("left",-o+parseInt(a(d).position().left)):j.css("left",parseInt(a(d).position().left)),c.pinned&&j.css("left",o+parseInt(a(d).position().left)),void 0==J){j.prependTo(this.table),j[0].id="customeditor"+this.element.id+q+"_"+b,this.editors["customeditor_"+q+"_"+b]=j;var K=h.width()-1,L=h.height()-1;j.width(K),j.height(L),c.createeditor&&c.createeditor(b,k,j,l,K,L,this.editchar)}c._requirewidthupdate&&j.width(h.width()-2);break;case"template":d.innerHTML="";var q=a.trim(c.datafield).split(" ").join("");q.indexOf(".")!=-1&&(q=q.replace(".",""));var M=this.editors["templateeditor_"+q];if(j=void 0==M?a("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='templateeditor'></div>"):M,j.show(),j.css("top",a(d).parent().position().top),this.oldhscroll?j.css("left",-o+parseInt(a(d).position().left)):j.css("left",parseInt(a(d).position().left)),c.pinned&&j.css("left",o+parseInt(a(d).position().left)),void 0==M){j.prependTo(this.table),j[0].id="templateeditor"+this.element.id+q,this.editors["templateeditor_"+q]=j;var K=h.width()-1,L=h.height()-1;j.width(K),j.height(L),c.createeditor&&c.createeditor(b,k,j,l,K,L,this.editchar)}c._requirewidthupdate&&j.width(h.width()-2);break;case"textbox":default:d.innerHTML="",j=this.editors["textboxeditor_"+c.datafield]||a("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox' id='textboxeditor'/>"),j[0].id="textboxeditor"+this.element.id+c.datafield,j.appendTo(h),this.rtl&&j.css("direction","rtl"),(e||""==j[0].className)&&(j.addClass(this.toThemeProperty("jqx-input")),j.addClass(this.toThemeProperty("jqx-widget-content")),this.editchar&&this.editchar.length>0?j.val(this.editchar):(""!=c.cellsformat&&(k=this.getcelltext(b,g)),void 0==k&&(k=""),j.val(k)),void 0!=this.editcell.defaultvalue&&j.val(this.editcell.defaultvalue),j.width(h.width()+1),j.height(h.height()+1),c.createeditor&&c.createeditor(b,k,j),""!=c.cellsformat&&(c.cellsformat.indexOf("p")==-1&&c.cellsformat.indexOf("c")==-1&&c.cellsformat.indexOf("n")==-1&&c.cellsformat.indexOf("f")==-1||this.editors["textboxeditor_"+c.datafield]||j.keydown(function(a){var b=a.charCode?a.charCode:a.keyCode?a.keyCode:0,d=String.fromCharCode(b),e=parseInt(d);if(isNaN(e))return!0;if(i._selection(j).length>0)return!0;var f="",g=j.val();if(c.cellsformat.length>1){var h=parseInt(c.cellsformat.substring(1));isNaN(h)&&(h=0)}else var h=0;if(h>0&&g.indexOf(i.gridlocalization.decimalseparator)!=-1&&i._selection(j).start>g.indexOf(i.gridlocalization.decimalseparator))return!0;for(var k=0;k<g.length-h;k++){var l=g.substring(k,k+1);null!=l.match(/^[0-9]+$/)&&(f+=l)}return!(f.length>=11)&&void 0}))),this.editors["textboxeditor_"+c.datafield]=j,e&&f&&setTimeout(function(){p(j),i.editchar?(i._setSelection(j[0],1,1),i.editchar=null):i._setSelection(j[0],0,j.val().length)},25)}e&&c.initeditor&&c.initeditor(b,k,j,l,this.editchar),j&&(j[0].style.zIndex=1+d.style.zIndex,a.jqx.browser.msie&&a.jqx.browser.version<8&&(j[0].style.zIndex=1+this.columns.records.length+d.style.zIndex),j.css("display","block"),this.editcell.editor=j,this.editcell[g]?this.editcell[g].editor=j:(this.editcell[g]={},this.editcell[g].editor=j)),
i.isTouchDevice()||setTimeout(function(){i.content&&(i.content[0].scrollTop=0,i.content[0].scrollLeft=0),i.gridcontent&&(i.gridcontent[0].scrollLeft=0,i.gridcontent[0].scrollTop=0)},10)}},_setSelection:function(a,b,c){try{if("selectionStart"in a)a.setSelectionRange(b,c);else{var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}}catch(e){}},_hideeditors:function(){if(null!=this.editcells){var a=this;for(var b in this.editcells)a.editcell=a.editcells[b],a._hidecelleditor()}},_hidecelleditor:function(a){if(this.editcell){if("selectedrow"===this.editmode){for(var b=0;b<this.columns.records.length;b++){var c=this.columns.records[b];if(this.editcell[c.datafield]&&this.editcell[c.datafield].editor){this.editcell[c.datafield].editor.hide();var d=this.editcell[c.datafield].editor;switch(c.columntype){case"dropdownlist":d.jqxDropDownList({closeDelay:0}),d.jqxDropDownList("hideListBox"),d.jqxDropDownList({closeDelay:300});break;case"combobox":d.jqxComboBox({closeDelay:0}),d.jqxComboBox("hideListBox"),d.jqxComboBox({closeDelay:300});break;case"datetimeinput":d.jqxDateTimeInput("isOpened")&&(d.jqxDateTimeInput({closeDelay:0}),d.jqxDateTimeInput("hideCalendar"),d.jqxDateTimeInput({closeDelay:300}))}}}return void(this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()))}if("checkbox"!=this.editcell.columntype){if(this.editcell.editor)switch(this.editcell.editor.hide(),this.editcell.columntype){case"dropdownlist":this.editcell.editor.jqxDropDownList({closeDelay:0}),this.editcell.editor.jqxDropDownList("hideListBox"),this.editcell.editor.jqxDropDownList({closeDelay:300});break;case"combobox":this.editcell.editor.jqxComboBox({closeDelay:0}),this.editcell.editor.jqxComboBox("hideListBox"),this.editcell.editor.jqxComboBox({closeDelay:300});break;case"datetimeinput":var e=this.editcell.editor;e.jqxDateTimeInput("isOpened")&&(e.jqxDateTimeInput({closeDelay:0}),e.jqxDateTimeInput("hideCalendar"),e.jqxDateTimeInput({closeDelay:300}))}this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()),this.isNestedGrid||0!=a&&this.element.focus()}}},_geteditorvalue:function(b){var c=new String;if(!this.editcell)return null;var d=this.editcell.editor;if("selectedrow"==this.editmode&&this.editcell[b.datafield])var d=this.editcell[b.datafield].editor;if(d){switch(b.columntype){case"textbox":default:if(c=d.val(),""!=b.cellsformat){var e="string",f=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(f){var g="";a.each(f,function(){if(this.name==b.displayfield)return this.type&&(g=this.type),!1}),g&&(e=g)}var h="number"===e||"float"===e||"int"===e||"integer"===e,i="date"===e||"time"===e;if(h||"string"===e&&(b.cellsformat.indexOf("p")!=-1||b.cellsformat.indexOf("c")!=-1||b.cellsformat.indexOf("n")!=-1||b.cellsformat.indexOf("f")!=-1)){if(""===c&&b.nullable)return"";c.indexOf(this.gridlocalization.currencysymbol)>-1&&(c=c.replace(this.gridlocalization.currencysymbol,""));var j=function(a,b,c){var d=a;if(b==c)return a;for(var e=d.indexOf(b);e!=-1;)d=d.replace(b,c),e=d.indexOf(b);return d};c=j(c,this.gridlocalization.thousandsseparator,""),c=c.replace(this.gridlocalization.decimalseparator,"."),c.indexOf(this.gridlocalization.percentsymbol)>-1&&(c=c.replace(this.gridlocalization.percentsymbol,""));for(var k="",l=0;l<c.length;l++){var m=c.substring(l,l+1);"-"===m&&(k+="-"),"."===m&&(k+="."),null!=m.match(/^[0-9]+$/)&&(k+=m)}c=k,c=c.replace(/ /g,""),c=new Number(c),isNaN(c)&&(c="")}if(i||"string"===e&&(b.cellsformat.indexOf("H")!=-1||b.cellsformat.indexOf("m")!=-1||b.cellsformat.indexOf("M")!=-1||b.cellsformat.indexOf("y")!=-1||b.cellsformat.indexOf("h")!=-1||b.cellsformat.indexOf("d")!=-1)){if(""===c&&b.nullable)return"";var n=c;c=new Date(c),"Invalid Date"!=c&&null!=c||(a.jqx.dataFormat&&(c=a.jqx.dataFormat.tryparsedate(n,this.gridlocalization)),"Invalid Date"!=c&&null!=c||(c=""))}}b.displayfield!=b.datafield&&(c={label:c,value:c});break;case"checkbox":d.jqxCheckBox&&(c=d.jqxCheckBox("checked"));break;case"datetimeinput":if(d.jqxDateTimeInput){if(d.jqxDateTimeInput({isEditing:!1}),d.jqxDateTimeInput("_validateValue"),c=d.jqxDateTimeInput("getDate"),null==c)return null;c=new Date(c.toString()),b.displayfield!=b.datafield&&(c={label:c,value:c})}break;case"dropdownlist":if(d.jqxDropDownList){var o=d.jqxDropDownList("selectedIndex"),p=d.jqxDropDownList("listBox").getVisibleItem(o);c=b.displayfield!=b.datafield?p?{label:p.label,value:p.value}:"":p?p.label:"",null==c&&(c="")}break;case"combobox":if(d.jqxComboBox){if(c=d.jqxComboBox("val"),b.displayfield!=b.datafield){var p=d.jqxComboBox("getSelectedItem");null!=p&&(c={label:p.label,value:p.value})}null==c&&(c="")}break;case"numberinput":if(d.jqxNumberInput){this.touchdevice&&d.jqxNumberInput("_doTouchHandling");var q=d.jqxNumberInput("getDecimal");c=new Number(q),c=parseFloat(c),isNaN(c)&&(c=0),b.displayfield!=b.datafield&&(c={label:c,value:c})}}b.geteditorvalue&&(c="selectedrow"==this.editmode?b.geteditorvalue(this.editcell.row,this.getcellvalue(this.editcell.row,b.datafield),d):b.geteditorvalue(this.editcell.row,this.editcell.value,d))}return c},hidevalidationpopups:function(){this.popups&&(a.each(this.popups,function(){this.validation.remove(),this.validationrow.remove()}),this.popups=new Array),this.validationpopup&&(this.validationpopuparrow.hide(),this.validationpopup.hide())},showvalidationpopup:function(b,c,d){if(void 0==d)var d=this.gridlocalization.validationstring;var e=a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),f=a("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");e.html(d),f.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),e.addClass(this.toThemeProperty("jqx-grid-validation")),e.addClass(this.toThemeProperty("jqx-rc-all")),e.prependTo(this.table),f.prependTo(this.table);var g=this.hScrollInstance,h=g.value,i=parseInt(h),j=this.getcolumn(c).uielement,k=a(this.hittestinfo[b].visualrow);e.css("top",parseInt(k.position().top)+30+"px");var l=parseInt(e.css("top"));f.css("top",l-12),f.removeClass(),f.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var m=!1;l>=this._gettableheight()&&(f.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),f.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),l=parseInt(k.position().top)-this.rowsheight-5,l<0&&(l=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),m=!0),e.css("top",l+"px"),f.css("top",l+e.outerHeight()-9));var n=-i+parseInt(a(j).position().left);f.css("left",i+n+30);var o=e.width();if(o+n>this.host.width()-20){var p=o+n-this.host.width()+40;n-=p}m?e.css("left",i+parseInt(a(j).position().left)-e.outerWidth()):e.css("left",i+n),e.show(),f.show(),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:e,validationrow:f}},_showvalidationpopup:function(b,c,d){var e=this.editcell,f=this.editcell.editor;if("selectedrow"==this.editmode){var e=this.editcell[c];e&&e.editor&&(f=e.editor,e.element=f)}if(f&&!(this.validationpopup&&a.jqx.isHidden(this.validationpopup)&&(this.validationpopup.remove&&(this.validationpopup.remove(),this.validationpopuparrow.remove()),this.validationpopup=null,this.validationpopuparrow=null,void 0===c&&void 0===d&&this.editors&&0===this.editors.length))){if(this.validationpopup)this.validationpopup.html(d);else{var g=a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),h=a("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");g.html(d),h.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),g.addClass(this.toThemeProperty("jqx-grid-validation")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.prependTo(this.table),h.prependTo(this.table),this.validationpopup=g,this.validationpopuparrow=h}var i=this.hScrollInstance,j=i.value,k=parseInt(j);this.validationpopup.css("top",parseInt(a(e.element).parent().position().top)+(this.rowsheight+5)+"px");var l=parseInt(this.validationpopup.css("top"));this.validationpopuparrow.css("top",l-12),this.validationpopuparrow.removeClass(),this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var m=this._gettableheight(),n=!1;l>=m&&(this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),l=parseInt(a(e.element).parent().position().top)-this.rowsheight-5,l<0&&(l=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),n=!0),this.validationpopup.css("top",l+"px"),this.validationpopuparrow.css("top",l+this.validationpopup.outerHeight()-9));var o=-k+parseInt(a(e.element).position().left);this.validationpopuparrow.css("left",k+o+30);var p=this.validationpopup.width();if(p+o>this.host.width()-20){var q=p+o-this.host.width()+40;o-=q}n?this.validationpopup.css("left",k+parseInt(a(e.element).position().left)-this.validationpopup.outerWidth()):this.validationpopup.css("left",k+o),this.validationpopup.show(),this.validationpopuparrow.show()}}})}(jQuery);