!function(a,b,c,d){function e(a,b,d){return[d+a*c.cos(b),d+a*c.sin(b)]}function f(a,b,c){return i(a,[b,b])<=c}function g(a,b,c,d){var e=function(a,b,c){return(a[0]-c[0])*(b[1]-c[1])-(b[0]-c[0])*(a[1]-c[1])},f=e(a,b,c)<0,g=e(a,c,d)<0,h=e(a,d,b)<0;return f===g&&g===h}function h(a,b){return-1/((b[1]-a[1])/(b[0]-a[0]))}function i(a,b){var d=a[0]-b[0],e=a[1]-b[1];return c.sqrt(d*d+e*e)}function j(a,b){return b*b===1/0?[a[0],a[1]+1]:[a[0]+1,b+a[1]]}function k(a,b,c,d){var e=(d[1]-c[1])*(b[0]-a[0])-(d[0]-c[0])*(b[1]-a[1]),f=(d[0]-c[0])*(a[1]-c[1])-(d[1]-c[1])*(a[0]-c[0]),g=f/e;return[a[0]+g*(b[0]-a[0]),a[1]+g*(b[1]-a[1])]}function l(a,b,c,d){var e,f=4*(b+c*a.width);for(e=0;e<4;e++)a.data[f+e]=d[e]}function m(a,b,c,d){var e,f=k(d,[d[0]+20,d[1]],a,b),g=k(d,[d[0]+20,d[1]],a,c);return e=d[0]<f[0]?255:d[0]>g[0]?0:(g[0]-d[0])/(g[0]-f[0])*255,[e,e,e,255]}function n(b,d){var e=b.getContext("2d"),f=a("<canvas>").attr("width",d).attr("height",d)[0],g=f.getContext("2d");if(!aa.J){aa.J=e.createImageData(80,80);var h,i,j,k,m,n,o,p,q=180/c.PI,r=function(a){return a%=360,a>=240?0:a>=180?255*((240-a)/60):a>=60?255:255*(a/60)};for(i=0;i<80;i++)for(k=i-40,j=0;j<80;j++)m=j-40,h=c.atan2(k,m)*q+270,n=r(h+120),o=r(h),p=r(h+240),l(aa.J,i,j,[n,o,p,255])}e.putImageData(aa.J,0,0),g.scale(d/80,d/80),g.drawImage(b,0,0),e.drawImage(f,0,0)}function o(b){var d=b.L,e=b.s[1].getContext("2d");n(b.s[1],d);var f=[d/2,d/2];e[X]="destination-out",e[Y]="rgba(0,0,0,1)",e.lineWidth=b.G,e.beginPath(),e.arc(f[0],f[1],b.H-b.G/2,0,2*c.PI,!0),e.closePath(),e.fill();var g=a("<canvas/>").attr("width",d).attr("height",d)[0],h=g.getContext("2d");h[V](0,0,d,d),h[X]="destination-out",h.beginPath(),h.arc(f[0],f[1],b.H+b.G/2,0,2*c.PI,!0),h.closePath(),h.fill(),e.drawImage(g,0,0),e=b.s[0].getContext("2d"),e.lineWidth=b.G-2,e.shadowColor=b.a.shadowColor,e.shadowBlur=b.a.shadow,e.beginPath(),e.arc(f[0],f[1],b.H,0,2*c.PI,!0),e.closePath(),e.stroke()}function p(a){var b=a.Color.getHsl().h,d=a.s[2],e=d.getContext("2d");e.clearRect(0,0,a.L,a.L);var f,g=-c.PI/2,h=s(a,g);if(!a.z){var i,j,k=e.createImageData(a.L,a.L),n=function(a,b){return{start:c.round(c.min(a[0][b]-3,a[1][b]-3,a[2][b]-3)),end:c.round(c.max(a[0][b]+3,a[1][b]+3,a[2][b]+3))}},o=n(h,0),p=n(h,1);for(i=h[0][0]-3;i<=o.end;i++)for(j=p.start+(1.7*(i-h[0][0])|0)-3;j<=p.end;j++)l(k,i,j,m(h[0],h[1],h[2],[i,j]));for(i=o.start;i<=h[0][0]-3;i++)for(j=p.start-(1.7*(i-h[0][0])|0)-3;j<=p.end;j++)l(k,i,j,m(h[0],h[1],h[2],[i,j]));f=a.t.getContext("2d"),f.putImageData(k,0,0);var q=f.createLinearGradient(0,p.start,0,p.end);q[U](1,"rgba(0,0,0,0)"),q[U](0,"rgba(0,0,0,1)"),f[W]=q,f[X]="destination-out",f[V](o.start,p.start,o.end,p.end),f[X]="source-over"}g=(1-b)*c.PI*2,h=s(a,g),e[W]=new $({h:b,s:1,l:.5}).getHexString(),e[V](0,0,a.L,a.L),e.save(),e.translate(a.L/2,a.L/2),e.rotate(g+c.PI/2),e.translate(-a.L/2,-a.L/2),e.drawImage(a.t,0,0),e.restore(),e.beginPath(),e.moveTo(0,0),e.lineTo(h[1][0],h[1][1]),e.lineTo(h[0][0],h[0][1]),e.lineTo(h[2][0],h[2][1]),e.lineTo(h[1][0],h[1][1]),e.lineTo(0,0),e.lineTo(0,a.L),e.lineTo(a.L,a.L),e.lineTo(a.L,0),e.lineTo(0,0),e.closePath(),e[X]="destination-out",e[W]="rgba(0,0,0,1)",e.fill();var r=function(b,c){var d=1/(a.L/2)*2;return a.L/2*d+h[b][c]*(1-d)};e[X]="destination-over",e.beginPath(),e.moveTo(r(0,0),r(0,1)),e.lineTo(r(1,0),r(1,1)),e.lineTo(r(2,0),r(2,1)),e.closePath(),e[W]="rgba(0,0,0,1)",e.shadowColor=a.a.shadowColor,e.shadowBlur=a.a.shadow,e.fill(),e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e[X]="source-over"}function q(b){var d=b.s[3],f=d.getContext("2d");f.clearRect(0,0,b.L,b.L);var g=(1-b.Color.getHsl().h)*c.PI*2,l=s(b,g),m=e(b.H,g,b.L/2),n=[l[1][0]*b.Color.getHsl().l+(1-b.Color.getHsl().l)*l[2][0],l[1][1]*b.Color.getHsl().l+(1-b.Color.getHsl().l)*l[2][1]],o=h(l[1],l[2]),p=j(n,o),q=k(n,p,l[1],l[2]),r=i(l[1],l[2]),t=i(l[2],q),u=l[2];t>=r/2&&(u=l[1]);var v=k(n,p,l[0],u);n=[v[0]*b.Color.getHsl().s+(1-b.Color.getHsl().s)*q[0],v[1]*b.Color.getHsl().s+(1-b.Color.getHsl().s)*q[1]],a.each([m,n],function(a,b){f[Y]="#fff",f.lineWidth=1.5,f.beginPath(),f.arc(b[0],b[1],6,0,2*c.PI,!0),f.closePath(),f.stroke(),f.lineWidth=2,f[Y]="rgba(0,0,0,1)",f.beginPath(),f.arc(b[0],b[1],4.5,0,2*c.PI,!0),f.closePath(),f.stroke()})}function r(a,b){var c=b.getContext("2d");c.clearRect(0,0,b.width,b.height),a.n.css("border-bottom-color")?c[Y]=a.n.css("border-bottom-color"):c[Y]="#444",c.lineWidth=1,c.lineCap="round",c.beginPath(),c.moveTo(0,18),c.lineTo(18,0),c.moveTo(7,18),c.lineTo(18,7),c.moveTo(13,18),c.lineTo(18,13),c.closePath(),c.stroke()}function s(a,b){var d,f=[];for(d=0;d<3;d++)f[d]=e(a.r,b,a.L/2),b-=2*c.PI/3;return f}function t(a,b){var d=M(a,b,a.d),e=c.atan2(d[0]-a.L/2,d[1]-a.L/2)*(180/c.PI)+270,f=a.Color.getHsla();a.Color.setColor({h:e/360,s:f.s,l:f.l,a:f.a}),p(a),q(a),a.D(a)}function u(a,b,c){var d=a.Color.getHsla();a.Color.setColor({h:d.h,s:b,l:c,a:d.a}),q(a),a.D(a)}function v(a){a.a.autosave&&w(a),a.a.preview&&a.j.find("div").css("background",a.Color.getRgbaString()),a.e.trigger(a.a.eventPrefix+"update")}function w(a){var b="";b="function"==typeof a.a.color2str?a.a.color2str.call(null,a.Color):a.Color.getHexString(),"function"==typeof a.a.save?a.a.save.call(a.e[0],b):a.e.val(b).html(b)}function x(a,b){var c;c="function"==typeof a.a.load?a.a.load.call(a.e):a.e.val()||a.e.html(),"function"==typeof a.a.str2color?a.Color=new $(a.a.str2color.call(null,c)):a.Color=new $(c),a.a.preview&&a.j&&a.j.find("div").css("background",a.Color.getRgbaString()),b&&(p(a),q(a))}function y(a,b){if(a.I)return clearTimeout(a.I),void(a.I=0);a.z?(x(a),p(a),q(a)):D(a),"undefined"!=typeof b?(b=parseInt(b,10),(b<0||isNaN(b))&&(b=a.a.speed)):b=a.a.speed;var c=a.e.triggerHandler(a.a.eventPrefix+"beforeShow");if("undefined"==typeof c||c){K(a),P(a);var d="fade"===a.K?"fadeIn":"slideDown";a.n[d].call(a.n,b,function(){K(a),a.a.resizable&&r(a,a.l[0]),a.e.trigger(a.a.eventPrefix+"show")}),a.o&&a.o.setHeight(a.b.height())}}function z(a,b){a.I=setTimeout(function(){if(!a.k||!a.k.find("select:focus").length){a.I=0,"undefined"!=typeof b?(b=parseInt(b,10),(b<0||isNaN(b))&&(b=a.a.speed)):b=a.a.speed;var c=a.e.triggerHandler(a.a.eventPrefix+"beforeHide");if("undefined"==typeof c||c){var d="fade"===a.K?"fadeOut":"slideUp";a.n[d].call(a.n,b,function(){K(a),a.e.trigger(a.a.eventPrefix+"hide")})}}},100)}function A(a,b){var d=(1-a.Color.getHsl().h)*c.PI*2,e=s(a,d),f=M(a,b,a.d),h=f;if(!g(f,e[0],e[1],e[2])){var j,k=[];for(j=0;j<3;j++)k[j]=i(e[j],f);var l=c.max.apply(null,k);for(j=0;j<3;j++)if(k[j]===l){h=B(f,e,k,j);break}}var m=C(e[0],e[1],e[2],h,a.Color.getHsl().h);u(a,m.s,m.l)}function B(a,b,d,e){var f=[0,1,2],g=[1,0,1],h=[2,2,0],j=k(a,b[f[e]],b[g[e]],b[h[e]]);if(i(j,b[f[e]])>=i(b[0],b[1])){var l,m=c.min.apply(null,d);for(l=0;l<3;l++)if(d[l]===m){j=b[l];break}}return j}function C(a,b,c,d,e){var f=h(b,c),g=j(d,f),l=k(d,g,b,c),m=i(b,c),n=i(c,l),o=c;n>=m/2&&(o=b),f=h(a,o),g=j(d,f);var p=k(d,l,a,o),q=i(l,d),r=i(l,p),s=q/r;return isNaN(s)&&(s=0),{h:e,s:s,l:n/m}}function D(a){o(a),p(a),q(a),a.z=1,a.e.trigger(a.a.eventPrefix+"ready")}function E(a,b){var d=M(a,b,a.d);(a.a.panel||a.a.panelAlpha)&&(d[0]-=a.o.getWidth());var e=J(a,c.max(d[0],d[1])+c.max(a.C[0],a.C[1]));F(a,e),a.e.trigger(a.a.eventPrefix+"resize")}function F(a,b){a.b.width(b).height(b+a.j.outerHeight()),a.a.panel||a.a.panelAlpha?(a.n.width(a.o.getWidth()+a.b.width()),a.o.setHeight(a.b.height())):a.n.width(a.b.width()),a.d.width(b).height(b),I(a,b),P(a)}function G(a,b){b!==a.L&&(a.z=0,a.L=b,a.r=b/2-15-a.a.ringwidth,a.G=a.a.ringwidth,a.H=a.L/2-a.G/2-10,a.s.each(function(){this.width=b,this.height=b}).add(a.b),a.t.width=b,a.t.height=b,F(a,b),D(a))}function H(a){a.preventDefault()}function I(a,b){if(a.a.roundcorners){b=b||a.L;var c="0px 0px 0px "+b/2+"px";!a.a.resizable&&!a.a.panel&&!a.a.panelAlpha&&(c="0px 0px "+b/2+"px "+b/2+"px"),a.n.css({"-webkit-border-radius":c,"border-radius":c})}}function J(a,b){return b|=0,a.a.maxWidth<a.a.minWidth&&(a.a.maxWidth=a.a.minWidth),b>a.a.maxWidth?b=a.a.maxWidth:b<a.a.minWidth&&(b=a.a.minWidth),b+=b%2}function K(c){var d=c.e.offset(),e=c.c.offset();if(!c.F){c.c.css({top:0,left:0});var f=a(R).scrollTop(),g=c.n.height(),h=d.top-f,i=f+a(b).height()-d.top-c.e.outerHeight();i<g&&h>i?(c.n.css({top:d.top-g}),c.l&&c.l.hide(),c.n.css({"-webkit-border-radius":"","border-radius":""})):(c.n.css({top:d.top+c.e.outerHeight()}),c.l&&c.l.show(),I(c));var j=a(R).scrollLeft(),k=d.left-j-2,l=d.left+c.n.width()-(j+a(b).width());if(l>0&&k>0){var m=2;m+=k<l?k:l,c.n.css({left:d.left-m})}else c.n.css({left:d.left})}c.e.is(":visible")?(c.f.show().css("top",d.top-e.top+(c.e.outerHeight()-c.f.height())/2),"left"===c.a.iconpos?c.f.css("left",d.left-e.left-c.f.outerWidth()-2):c.f.css("left",d.left-e.left+c.e.outerWidth()+2)):c.f.hide()}function L(b,c){var e,f=d[b],g=["rgb","hsl","cmyk"];if("undefined"!=typeof c)if("panelMode"===b)a.inArray(c,g)&&(f=c);else if("panelModes"===b)a.each(c,function(b,d){a.inArray(d,g)||delete c[b]}),f=c;else if("panelChannelWidth"===b)e=parseInt(c)||0,e>=10&&e<=40&&(f=e+e%2);else if("panelChannelMargin"===b)e=parseInt(c)||0,e>=0&&e<=50&&(f=e+e%2);else if("panel"===b||"panelAlpha"===b)f=!!c;else if("shadowColor"===b&&"string"==typeof c&&c.length)f=new $(c).getRgbaString();else if("effect"===b)f="slide"===c?"slide":"fade";else if("iconpos"===b)f="left"===c?"left":"right";else if("target"===b){if(f=null,"string"==typeof c||"object"==typeof c){var h=a(c);h&&"object"==typeof h[0]&&(f=h)}}else"icon"===b&&"string"==typeof c&&c.length?f=c:"iconalt"===b&&"string"==typeof c&&c.length?f=c:"pickerClass"===b&&"string"==typeof c&&c.length?f=c:b.match(/^autoshow|autosave|resizable|preview|roundcorners$/)?f=!!c:b.match(/^minWidth|maxWidth$/)?(e=parseInt(c,10)||0,f=e>100?e:100):b.match(/^speed|width|shadow|ringwidth$/)?(e=parseInt(c,10)||0,f=e>0?e:0):new RegExp("^"+T+"$").test(b)||/^save|load|str2color|color2str$/.test(b)?"function"==typeof c&&(f=c):"eventPrefix"===b&&"string"==typeof c&&/^\w*$/.test(c)&&(f=c);return f}function M(a,b,c){var d,e,f=0,g=0,h=b.originalEvent,i=h.touches||h.changedTouches;if(a?(d=c.parent().offset(),e=a.j.outerHeight()):(d=c.offset(),e=0),i)f=i[0].pageX-d.left,g=i[0].pageY-d.top-e;else if(b.pageX){var j=h.clientX+R.body.scrollLeft,k=h.clientY+R.body.scrollTop;R.documentElement&&(j+=R.documentElement.scrollLeft,k+=R.documentElement.scrollTop),f=j-d.left,g=k-d.top-e}return[f,g]}function N(a){return a.n.width()}function O(a){return a.n.height()}function P(a){var b=a.i.height();a.g.height(b),a.h.css("top","-"+b+"px").height(b);var c=a.g[0].getContext("2d");a.g[0].height=b,a.g[0].width=500,a.g.css("width","500px");var d=R.createElement("canvas");d.height=10,d.width=10;var e=d.getContext("2d");e[W]="#ccc",e[V](0,0,10,10),e[W]="#888",e[V](0,0,5,5),e[V](5,5,5,5);var f=c.createPattern(d,"repeat");c[W]=f,c[V](0,0,a.L,b)}function Q(a,b){return a.each(b)}var R=b.document,S="chromoselector",T="create|ready|update|destroy|show|beforeShow|hide|beforeHide|resize|resizeStart|resizeStop",U="addColorStop",V="fillRect",W="fillStyle",X="globalCompositeOperation",Y="strokeStyle",Z=function(){return function(a,b){b=b||4;var c,d,e,f=function(){e?(a.apply({},d),e=0,c=setTimeout(f,b)):c=0};return function(){d=arguments,e=1,c||f()}}}(),$=function(){function a(a){var c=this,q={r:0,g:0,b:0,a:1},r={h:0,s:0,l:0,a:1},s=!1;c.getRgba=function(){return q},c.getRgb=function(){return b(q)},c.getHsla=function(){return s?r:f(q)},c.getHsl=function(){return s?e(r):d(q)},c.getCmyk=function(){return g(q)},c.getRgbaString=function(){return i(q)},c.getRgbString=function(){return h(q)},c.getHexaString=function(){return k(q)},c.getHexString=function(){return j(q)},c.getHslaString=function(){return m(q)},c.getHslString=function(){return l(q)},c.getCmykString=function(){return n(q)},c.getTextColor=function(){return o(q)},c.setColor=function(a){var b=p(a,q,r,s);return q=b.rgba,r=b.hsla,s=b.isHsl,c},c.setAlpha=function(a){return a=parseFloat(a),!isNaN(a)&&a>=0&&a<=1&&(q.a=a,r.a=a),c},c.getAlpha=function(){return q.a},c.setColor(a)}function b(a){var b={};return b.r=a.r,b.g=a.g,b.b=a.b,b}function d(a){var b={},c=v(a);return b.h=c.h,b.s=c.s,b.l=c.l,b}function e(a){var b={};return b.h=a.h,b.s=a.s,b.l=a.l,b}function f(a){return v(a)}function g(a){return x(a)}function h(a){return"rgb("+z(255*a.r)+","+z(255*a.g)+","+z(255*a.b)+")"}function i(a){return"rgba("+z(255*a.r)+","+z(255*a.g)+","+z(255*a.b)+","+z(100*a.a)/100+")"}function j(a){return s(a)}function k(a){var b=z(255*a.a),c=b.toString(16);return b<16&&(c="0"+c),s(a)+c}function l(a){var b=v(a);return"hsl("+z(360*b.h)+","+z(100*b.s)+"%,"+z(100*b.l)+"%)"}function m(a){var b=v(a);return"hsla("+z(360*b.h)+","+z(100*b.s)+"%,"+z(100*b.l)+"%,"+z(100*b.a)/100+")"}function n(a){var b=x(a);return"device-cmyk("+z(100*b.c)/100+","+z(100*b.m)/100+","+z(100*b.y)/100+","+z(100*b.k)/100+")"}function o(b){var c=.2126*b.r+.7152*b.g+.0722*b.b;return new a(c<.35?"#fff":"#000")}function p(b,d,e,f){var g,h,i,j;if("string"==typeof b){if(b=b.replace(/\s+/g,""),/^#/.test(b))/^#([0-9a-f]{3}){1,2}$/i.test(b)?(4===b.length&&(b=b.replace(/[0-9a-f]/gi,q)),d=t(b),d.a=1,f=!1):/^#([0-9a-f]{4}){1,2}$/i.test(b)&&(5===b.length&&(b=b.replace(/[0-9a-f]/gi,q)),d=u(b),f=!1);else if(/^rgba/.test(b)){if(g=b.match(/^rgba\((\d+%?),(\d+%?),(\d+%?),(\.\d+|\d+\.?\d*)\)$/),g&&5===g.length){for(g.shift(),i=g.pop()/1,i>1?i=1:i<0&&(i=0),h=0;h<g.length;h++)g[h].indexOf("%")!==-1?g[h]=g[h].substr(0,g[h].length-1)/100:g[h]=g[h]/255,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);d.r=g[0],d.g=g[1],d.b=g[2],d.a=i,f=!1}}else if(/^rgb/.test(b)){if(g=b.match(/^rgb\((\d+%?),(\d+%?),(\d+%?)\)$/),g&&4===g.length){for(g.shift(),h=0;h<g.length;h++)g[h].indexOf("%")!==-1?g[h]=g[h].substr(0,g[h].length-1)/100:g[h]=g[h]/255,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);d.r=g[0],d.g=g[1],d.b=g[2],d.a=1,f=!1}}else if(/^hsla/.test(b)){if(g=b.match(/^hsla\((\d+),(\d+%),(\d+%),(\.\d+|\d+\.?\d*)\)$/),g&&5===g.length&&(g.shift(),j=g.shift()/360,j-=c.floor(j),j<0&&(j=1+j),i=g.pop()/1,i>1?i=1:i<0&&(i=0),2===g.length)){for(h=0;h<g.length;h++)g[h]=g[h].substr(0,g[h].length-1)/100,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);f=!0,e={h:j,s:g[0],l:g[1],a:i}}}else if(/^hsl/.test(b)){if(g=b.match(/^hsl\((\d+),(\d+%),(\d+%)\)$/),g&&4===g.length){for(g.shift(),j=g.shift()/360,j-=c.floor(j),j<0&&(j=1+j),h=0;h<g.length;h++)g[h]=g[h].substr(0,g[h].length-1)/100,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);f=!0,e={h:j,s:g[0],l:g[1],a:1}}}else if(/^device-cmyk/.test(b)&&(g=b.match(/^device-cmyk\((\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*)\)$/),g&&5===g.length)){for(g.shift(),h=0;h<g.length;h++)g[h]=g[h]/1,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);d=y({c:g[0],m:g[1],y:g[2],k:g[3]}),f=!1}}else if(b instanceof a){var k=b.getRgba();r(b,"rgba")&&(d=k,f=!1)}else if("object"==typeof b){for(h in b)b.hasOwnProperty(h)&&(b[h]=parseFloat(b[h]));r(b,"sl")&&!isNaN(b.h)?(f=!0,b.h=b.h-c.floor(b.h),b.h<0&&(b.h=1+b.h),e=b,i=1,r(b,"a")&&(i=b.a),e.a=i):r(b,"rgb")?(d=b,i=1,r(b,"a")&&(i=b.a),d.a=i,f=!1):r(b,"cmyk")&&(d=y(b),d.a=1,f=!1)}return f?{rgba:w(e),hsla:e,isHsl:f}:{rgba:d,hsla:v(d),isHsl:f}}function q(a){return a+a}function r(a,b){var c,d,e=b.split("");for(c in e)if(e.hasOwnProperty(c)&&(d=parseFloat(a[b[c]]),isNaN(d)||d<0||d>1))return 0;return 1}function s(a){for(var b,c,d="",e=0;e<3;e++)c=z(255*a[["r","g","b"][e]]),b=c.toString(16),c<16&&(b="0"+b),d+=b;return"#"+d}function t(a){for(var b=0,c={};b<3;b++)c[b]=parseInt("0x"+a.substring(2*b+1,2*b+3),16)/255;return{r:c[0],g:c[1],b:c[2]}}function u(a){for(var b=0,c={};b<4;b++)c[b]=parseInt("0x"+a.substring(2*b+1,2*b+3),16)/255;return{r:c[0],g:c[1],b:c[2],a:c[3]}}function v(a){var b,d,e=a.r,f=a.g,g=a.b,h=c.max(e,f,g),i=c.min(e,f,g),j=(h+i)/2;if(h===i)b=d=0;else{var k=h-i;switch(d=j>.5?k/(2-h-i):k/(h+i),h){case e:b=(f-g)/k+(f<g?6:0);break;case f:b=(g-e)/k+2;break;case g:b=(e-f)/k+4}b/=6}return{h:b,s:d,l:j,a:a.a}}function w(a){var b,c,d;if(0===a.s)b=c=d=a.l;else{var e,f=function(a,b,c){return c<0?c+=1:c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a};e=a.l<.5?a.l*(1+a.s):a.l+a.s-a.l*a.s;var g=2*a.l-e;b=f(g,e,a.h+1/3),c=f(g,e,a.h),d=f(g,e,a.h-1/3)}return{r:b,g:c,b:d,a:a.a}}function x(a){if(a.r===a.g&&a.g===a.b)return{c:0,m:0,y:0,k:1-a.r};var b=c.min(1-a.r,1-a.g,1-a.b);return{c:(1-a.r-b)/(1-b),m:(1-a.g-b)/(1-b),y:(1-a.b-b)/(1-b),k:b}}function y(a){return{r:1-c.min(1,a.c*(1-a.k)+a.k),g:1-c.min(1,a.m*(1-a.k)+a.k),b:1-c.min(1,a.y*(1-a.k)+a.k),a:1}}var z=c.round;return a}(),_=function(){return function(d,e,f,g,h,i,j,k,l,m,n){var o=this,p=function(){var a=D;return g&&(a+=j+k),h?D+j:"cmyk"===F?a+4*j+3*k:a+3*j+2*k},q=function(b,c,d){var e=a.extend({},b);return e[c]=d,new $(e)},r=function(){return aa.createLinearGradient(0,P-j/2-10,0,j/2+10)},s=function(a,b){C=r(),C[U](0,a.getHexString()),C[U](1,b.getHexString()),aa[Y]=C},t=function(){C=r(),C[U](0,"#f00"),C[U](1/6,"#ff0"),C[U](2/6,"#0f0"),C[U](.5,"#0ff"),C[U](4/6,"#00f"),C[U](5/6,"#f0f"),C[U](1,"#f00"),aa[Y]=C},u=function(a){C=r(),C[U](0,"#000"),C[U](.5,a.getHexString()),C[U](1,"#fff"),aa[Y]=C},v=function(a){C=r(),C[U](0,a.getHexString()),C[U](1,"#000"),aa[Y]=C},w=function(){aa.clearRect(0,0,p(),P),z();var b,c,d,e,f=10,i=0,l=function(){aa.beginPath(),aa.moveTo(f+j/2,j/2+10),aa.lineTo(f+j/2,P-j/2-10),aa.lineWidth=j,aa.lineCap="round",aa.stroke()};if(g){var m=R.createElement("canvas");m.height=10,m.width=10;var n=m.getContext("2d");n[W]="#ccc",n[V](0,0,10,10),n[W]="#888",n[V](0,0,5,5),n[V](5,5,5,5);var o=aa.createPattern(m,"repeat");aa[Y]=o,l(),C=r(),C[U](0,new $(E).setAlpha(0).getRgbaString()),C[U](1,E.getHexString()),aa[Y]=C,l(),f+=j+k,i=1}h?x():"rgb"===F?(a.each(G,function(a,d){b=q(E.getRgb(),d,0),c=q(E.getRgb(),d,1),s(b,c),l(),f+=j+k,i++}),x(E.getRgb())):"hsl"===F?(t(),l(),i++,f+=j+k,b=q(E.getHsl(),"s",0),c=q(E.getHsl(),"s",1),s(b,c),l(),i++,f+=j+k,d=a.extend({},E.getHsl()),d.l=.5,u(new $(d)),l(),x(E.getHsl())):"cmyk"===F&&(a.each("cmy".split(""),function(a,d){b=q(E.getCmyk(),d,0),c=q(E.getCmyk(),d,1),s(b,c),l(),f+=j+k,i++}),e=a.extend({},E.getCmyk()),e.k=0,e=new $(e),v(e),l(),x(E.getCmyk()))},x=function(b){var d,e,f,i=10,l=function(a,b,f){aa[Y]=a,aa.lineWidth=b,aa.beginPath(),aa.arc(d,e,f,0,2*c.PI,!0),aa.closePath(),aa.stroke()};g&&(d=i+j/2,f=P-j-20,e=f-f*E.getAlpha()+j/2+10,i+=j+k,l("#fff",1.5,6),l("#000",2,4.5)),h||a.each(b,function(a,b){d=i+j/2,f=P-j-20,e=f-f*b+j/2+10,l("#fff",1.5,6),l("#000",2,4.5),i+=j+k})},y=function(a){aa.shadowColor=n,aa.shadowBlur=m,aa.beginPath(),aa.moveTo(a,j/2+10),aa.lineTo(a,P-j/2-10),aa.lineWidth=j-2,aa[Y]="rgba(0,0,0,1)",aa.lineCap="round",aa.stroke(),aa.shadowBlur=0},z=function(){if(m>0){var b,c=10;g&&(b=c+j/2,y(b),c+=j+k),h||a.each(G,function(){b=c+j/2,y(b),c+=j+k})}},A=function(){var b=0;if(g||h?T.append(a("<div />").text("A").width(j).css({"padding-left":10})):h||(T.append(a("<div />").text(G[0].toUpperCase()).width(j).css({"padding-left":10})),b++),!h)for(;b<G.length;b++)T.append(a("<div />").text(G[b].toUpperCase()).width(j).css({"padding-left":k}))},B=Z(function(a){var b=M(!1,a,Q),e=P-j-D,f=e-c.round(b[1]-j/2-D/2);f<0?f=0:f>e&&(f=e);var i=f/e;if(g&&0===J)E.setAlpha(i);else if(!h){var k=J;g&&k--;var l="get"+F.charAt(0).toUpperCase()+F.slice(1),m=E[l]();m[G[k]]=i,m.a=E.getAlpha(),E=new $(m)}w(),d.trigger(S)});o.getColor=function(){return E},o.getWidth=function(){return p()},o.setAlpha=function(a){return E.setAlpha(a),o},o.setColor=function(a){return E=new $(a),w(),o},o.setHeight=function(a){return aa.clearRect(0,0,p(),P),X=T.outerHeight(!0),N.width(p()-20),P=a-N.outerHeight(!0)-X,Q.attr("height",P),w(),o},o.setMode=function(b){return a.inArray(b,L)>=0&&(N.val(b),F=b,G=b.split(""),Q.attr("width",p()),w(),l&&(T.width(p()).children().remove(),A()),N.width(p()-20)),o};var C,D=20,E=new $,F="rgb",G=F.split(""),I=0,J=0,K=0,L=["rgb","hsl","cmyk"],N=a("<select/>");if(!h&&f.length){var O="<option/>";a.each(f,function(b,c){N.append(a(O).html(c))}),d.append(N),K=N.outerHeight(!0)}var P=i-K,Q=a("<canvas/>").attr("width",p()).attr("height",P).css("display","block");d.append(Q);var T=a(),X=0;l&&(T=a("<div />").addClass("ui-panel-labels").width(p()),A(),d.append(T));var _=Q[0],aa=_.getContext("2d");o.setMode(e),h||N.change(function(){o.setMode(a(":selected",this).val())}),d.add(T.find("div")).bind("mousedown touchstart",function(b){a(this).is(b.target)&&H(b)}),Q.bind("mousedown touchstart",function(b){H(b),J=0;for(var c=10,d=M(!1,b,a(this));J<5&&!I;)d[0]>c&&d[0]<c+j?(I=1,B(b)):(J++,c+=j+k)}).bind("mousemove touchmove",function(a){var b=M(!1,a,Q),c=Q.width(),d=D/2;if(b[0]>d&&b[1]>d&&b[0]<c-d&&b[1]<Q.height()-d)for(var e=d;e<c;){if(b[0]>e&&b[0]<j+e){Q.css("cursor","crosshair");break}Q.css("cursor",""),e+=j+k}else Q.css("cursor","")}),a([b,R]).bind("mousemove touchmove",function(a){I&&(H(a),B(a))}).bind("mouseup touchend",function(a){I&&(H(a),I=0,B(a))})}}(),aa={},ba=function(d,e){var h=this;h.z=0,h.a=e,h.w=0,h.u=Z(t),h.y=0,h.x=Z(A),h.B=0,h.A=Z(E),h.D=Z(v,100),h.E=Z(function(a,b){a.Color.setColor(b),p(a),q(a),a.D(a)}),h.a.ringwidth>h.a.minWidth/4&&(h.a.ringwidth=c.floor(h.a.minWidth/4)),h.I=0,h.e=d,x(h),h.L=J(h,h.a.width),h.G=h.a.ringwidth,h.H=h.L/2-h.G/2-10,h.r=h.L/2-15-h.a.ringwidth;var i='<canvas width="'+h.L+'" height="'+h.L+'"></canvas>',j="";h.a.target&&h.a.target.length?(h.F=1,h.c=h.a.target,j="ui-cs-static"):(h.F=0,h.c=a("<div/>").prependTo("body").css({width:0,height:0,position:"absolute",overflow:"visible"})),h.d=a("<div/>").addClass("ui-cs-widget").css({position:"relative"}).width(h.L).height(h.L).html(i+i+i+i),h.b=a("<div/>").append(h.d).width(h.L).addClass("ui-cs-container"),h.m=a("<div/>").addClass("ui-cs-supercontainer").append(h.b),h.n=a("<div/>").addClass("ui-cs-chromoselector").addClass(h.a.pickerClass).addClass(j).append(h.m),(h.a.panel||h.a.panelAlpha)&&(h.k=a("<div/>").addClass("ui-cs-panel"),h.m.append(h.k),h.o=new _(h.k,h.a.panelMode,h.a.panelModes,h.a.panelAlpha,(!h.a.panel),100,h.a.panelChannelWidth,h.a.panelChannelMargin,(!0),h.a.shadow,h.a.shadowColor),h.o.setColor(h.Color.getRgba()),h.k.bind(S,function(){h.E(h,h.o.getColor().getHsla())}),h.e.bind(h.a.eventPrefix+"update",function(){h.o.setColor(h.Color.getHsla())}),h.k.find("select").blur(function(){z(h)}).change(function(){h.n.width(h.o.getWidth()+h.b.width())})),h.a.icon?(h.f=a("<a/>",{href:"#",tabindex:"999"}).addClass("ui-cs-icon").css("position","absolute").append(a("<img/>",{alt:h.a.iconalt,src:h.a.icon}).load(function(){a(this).parent().height(a(this).height()),a(this).parent().width(a(this).width()),K(h)})),h.c.append(h.f)):h.f=a([]),h.a.resizable&&(h.l=a("<canvas />").height(20).width(20).attr("height",20).attr("width",20).addClass("ui-cs-resizer").css({position:"absolute",bottom:"0px",right:"0px"}),r(h,h.l[0]),h.m.append(h.l)),h.m.append(a("<div/>").css("clear","both")),h.i=a("<div/>").addClass("ui-cs-preview-widget").css("overflow","hidden").css("background",h.Color.getRgbaString());var k=new $(h.a.shadowColor);k.setAlpha(k.getAlpha()-.1);var l="0 0 "+c.max(0,h.a.shadow-2)+"px 0 "+k.getRgbaString();if(h.j=a("<div/>").addClass("ui-cs-preview-container").append(h.i.append(a("<canvas/>").css({display:"block"})).css("box-shadow",l).css("-webkit-box-shadow",l)),h.a.preview&&h.b.prepend(h.j),h.h=a("<div/>").addClass("ui-cs-preview-color").css("width","100%").css("background-color",h.Color.getRgbaString()).css("position","relative"),h.i.append(h.h),h.g=h.i.find("canvas"),P(h),I(h),h.d.height(h.L).add(h.b).width(h.L),h.a.panel||h.a.panelAlpha?h.n.width(h.o.getWidth()+h.b.width()):h.n.width(h.b.width()),h.c.append(h.n.hide()),h.s=h.d.find("canvas").css({position:"absolute",width:"100%",height:"100%"}),h.t=a(i)[0],h.K="fade","slide"===h.a.effect&&(h.K="slide"),h.a.autoshow){h.a.lazy?h.e.bind("mouseover."+S,function(){h.z||D(h),h.e.unbind("mouseover."+S)}):D(h);var m=h.e;h.f.length&&(m=h.f),m.bind("focus click",function(a){H(a),h.z||D(h),y(h)}).blur(function(){z(h)}),h.e.keydown(function(a){27===a.keyCode&&z(h)})}h.e.keyup(function(){h.e.trigger(h.a.eventPrefix+"update"),x(h),p(h),q(h)}),h.a.resizable&&h.l.bind("mousedown touchstart",function(a){H(a);var b=M(h,a,h.d);h.e.trigger(h.a.eventPrefix+"resizeStart"),h.B=1,h.C=[h.L-b[0],h.L-b[1]]}),h.b.bind("mousedown touchstart",function(a){H(a);var b=M(h,a,h.d);if(f(b,h.L/2,h.H+h.G)&&!f(b,h.L/2,h.H-h.G))h.w=1,h.u(h,a);else{var d=(1-h.Color.getHsl().h)*c.PI*2,e=s(h,d);g(b,e[0],e[1],e[2])&&(h.y=1,h.x(h,a))}}).bind("mousemove touchmove",function(a){var b=M(h,a,h.d);if(f(b,h.L/2,h.H+h.G/2)&&!f(b,h.L/2,h.H-h.G/2))h.d.css("cursor","crosshair");else{var d=(1-h.Color.getHsl().h)*c.PI*2,e=s(h,d);g(b,e[0],e[1],e[2])?h.d.css("cursor","crosshair"):h.d.css("cursor","")}}),a([b,R]).bind("mousemove touchmove",function(a){h.w?(H(a),h.u(h,a)):h.y?(H(a),h.x(h,a)):h.B&&(H(a),h.A(h,a))}).bind("mouseup touchend",function(a){h.w?(H(a),h.w=0,t(h,a)):h.y?(H(a),h.y=0,A(h,a)):h.B&&(H(a),h.B=0,G(h,h.d.width()),K(h),h.e.trigger(h.a.eventPrefix+"resizeStop"))}).bind("resize scroll",function(a){(a.target===b||a.target===R)&&K(h)}),setTimeout(function(){K(h)},4)},ca={init:function(b){var c={};return b=b?b:{},a.each(d,function(a){c[a]=L(a,b[a])}),Q(this,function(){var b=a(this);if(!b.data(S)){b.data(S,new ba(b,c));var d=T.split("|");a.each(d,function(a){var e=d[a],f=c[e];"function"==typeof f&&b.bind(c.eventPrefix+e+"."+S,f)}),b.trigger(c.eventPrefix+"create")}})},show:function(b){return Q(this,function(){y(a(this).data(S),b)})},hide:function(b){return Q(this,function(){z(a(this).data(S),b)})},save:function(){return Q(this,function(){w(a(this).data(S))})},load:function(){return Q(this,function(){x(a(this).data(S),1)})},setColor:function(b){return Q(this,function(){var c=a(this).data(S);c.E(c,b)})},getColor:function(){return this.data(S).Color},getWidth:function(){return N(a(this).data(S))},getHeight:function(){return O(a(this).data(S))},resize:function(b){return Q(this,function(){var c=a(this).data(S);c.e.trigger(c.a.eventPrefix+"resizeStart"),G(c,b),K(c),c.e.trigger(c.a.eventPrefix+"resize").trigger(c.a.eventPrefix+"resizeStop")})},reflow:function(){return Q(this,function(){K(a(this).data(S))})},api:function(){var a={},b=this;return a.show=function(a){return ca.show.call(b,a),this},a.hide=function(a){return ca.hide.call(b,a),this},a.save=function(){return ca.save.call(b),this},a.load=function(){return ca.load.call(b),this},a.getColor=function(){return ca.getColor.call(b)},a.getWidth=function(){return ca.getWidth.call(b)},a.getHeight=function(){return ca.getHeight.call(b)},a.setColor=function(a){return ca.setColor.call(b,a),this},a.destroy=function(){ca.destroy.call(b)},a.resize=function(a){return ca.resize.call(b,a),this},a.reflow=function(){return ca.reflow.call(b),this},a},destroy:function(){return Q(this,function(){var b=a(this).data(S);b.F&&b.b.siblings().length?b.b.remove():b.c.remove(),a(this).removeData(S).trigger(b.a.eventPrefix+"destroy").unbind("."+S)})}};a.fn[S]=function(b){var c=1;try{var d=R.createElement("canvas"),e=d.getContext("2d");e.createImageData(5,5)}catch(f){c=0}return c?ca[b]?ca[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery."+S):ca.init.apply(this,arguments):"getColor"===b?new $:"getWidth"===b||"getHeight"===b?0:this},a.fn[S].defaults=function(a,b){return"undefined"==typeof b?d[a]:(d[a]=L(a,b),this)},a.fn[S].Color=$}(jQuery,window,Math,{autoshow:!0,autosave:!0,pickerClass:"",speed:400,minWidth:120,maxWidth:400,width:180,ringwidth:18,resizable:!0,shadow:6,shadowColor:"rgba(0,0,0,0.6)",preview:!0,panel:!1,panelAlpha:!1,panelChannelWidth:18,panelChannelMargin:12,panelMode:"rgb",panelModes:["rgb","hsl","cmyk"],roundcorners:!0,effect:"fade",icon:null,iconalt:"Open Color Picker",iconpos:"right",lazy:!0,target:null,eventPrefix:"",create:null,ready:null,destroy:null,update:null,beforeShow:null,show:null,beforeHide:null,hide:null,resize:null,resizeStart:null,resizeStop:null,save:null,load:null,str2color:null,color2str:null});