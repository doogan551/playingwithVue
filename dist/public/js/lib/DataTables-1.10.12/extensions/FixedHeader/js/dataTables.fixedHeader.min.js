!function(a){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){var e=a.fn.dataTable,f=0,g=function(c,d){if(!(this instanceof g))throw"FixedHeader must be initialised with the 'new' keyword.";!0===d&&(d={}),c=new e.Api(c),this.c=a.extend(!0,{},g.defaults,d),this.s={dt:c,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:a(b).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:c.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+f++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:a(c.table().header()),tbody:a(c.table().body()),tfoot:a(c.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var h=c.settings()[0];if(h._fixedHeader)throw"FixedHeader already initialised on table "+h.nTable.id;h._fixedHeader=this,this._constructor()};return a.extend(g.prototype,{enable:function(a){this.s.enable=a,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(a){return a!==d&&(this.c.headerOffset=a,this.update()),this.c.headerOffset},footerOffset:function(a){return a!==d&&(this.c.footerOffset=a,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var c=this,d=this.s.dt;a(b).on("scroll"+this.s.namespace,function(){c._scroll()}).on("resize"+this.s.namespace,function(){c.s.position.windowHeight=a(b).height(),c.update()});var e=a(".fh-fixedHeader");!this.c.headerOffset&&e.length&&(this.c.headerOffset=e.outerHeight()),e=a(".fh-fixedFooter"),!this.c.footerOffset&&e.length&&(this.c.footerOffset=e.outerHeight()),d.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",function(){c.update()}),d.on("destroy.dtfc",function(){d.off(".dtfc"),a(b).off(c.s.namespace)}),this._positions(),this._scroll()},_clone:function(b,c){var d=this.s.dt,e=this.dom[b],f="header"===b?this.dom.thead:this.dom.tfoot;!c&&e.floating?e.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(e.floating&&(e.placeholder.remove(),this._unsize(b),e.floating.children().detach(),e.floating.remove()),e.floating=a(d.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(f).appendTo("body"),e.placeholder=f.clone(!1),e.host.prepend(e.placeholder),this._matchWidths(e.placeholder,e.floating))},_matchWidths:function(b,c){var d=function(c){return a(c,b).map(function(){return a(this).width()}).toArray()},e=function(b,d){a(b,c).each(function(b){a(this).css({width:d[b],minWidth:d[b]})})},f=d("th"),d=d("td");e("th",f),e("td",d)},_unsize:function(b){var c=this.dom[b].floating;c&&("footer"===b||"header"===b&&!this.s.autoWidth)?a("th, td",c).css({width:"",minWidth:""}):c&&"header"===b&&a("th, td",c).css("min-width","")},_horizontal:function(a,b){var c=this.dom[a],d=this.s.position,e=this.s.scrollLeft;c.floating&&e[a]!==b&&(c.floating.css("left",d.left-b),e[a]=b)},_modeChange:function(b,d,e){var f=this.dom[d],g=this.s.position,h=a.contains(this.dom["footer"===d?"tfoot":"thead"][0],c.activeElement)?c.activeElement:null;"in-place"===b?(f.placeholder&&(f.placeholder.remove(),f.placeholder=null),this._unsize(d),"header"===d?f.host.prepend(this.dom.thead):f.host.append(this.dom.tfoot),f.floating&&(f.floating.remove(),f.floating=null)):"in"===b?(this._clone(d,e),f.floating.addClass("fixedHeader-floating").css("header"===d?"top":"bottom",this.c[d+"Offset"]).css("left",g.left+"px").css("width",g.width+"px"),"footer"===d&&f.floating.css("top","")):"below"===b?(this._clone(d,e),f.floating.addClass("fixedHeader-locked").css("top",g.tfootTop-g.theadHeight).css("left",g.left+"px").css("width",g.width+"px")):"above"===b&&(this._clone(d,e),f.floating.addClass("fixedHeader-locked").css("top",g.tbodyTop).css("left",g.left+"px").css("width",g.width+"px")),h&&h!==c.activeElement&&h.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[d+"Mode"]=b},_positions:function(){var b=this.s.dt.table(),c=this.s.position,d=this.dom,b=a(b.node()),e=b.children("thead"),f=b.children("tfoot"),d=d.tbody;c.visible=b.is(":visible"),c.width=b.outerWidth(),c.left=b.offset().left,c.theadTop=e.offset().top,c.tbodyTop=d.offset().top,c.theadHeight=c.tbodyTop-c.theadTop,f.length?(c.tfootTop=f.offset().top,c.tfootBottom=c.tfootTop+f.outerHeight(),c.tfootHeight=c.tfootBottom-c.tfootTop):(c.tfootTop=c.tbodyTop+d.outerHeight(),c.tfootBottom=c.tfootTop,c.tfootHeight=c.tfootTop)},_scroll:function(b){var d,e=a(c).scrollTop(),f=a(c).scrollLeft(),g=this.s.position;this.s.enable&&(this.c.header&&(d=!g.visible||e<=g.theadTop-this.c.headerOffset?"in-place":e<=g.tfootTop-g.theadHeight-this.c.headerOffset?"in":"below",(b||d!==this.s.headerMode)&&this._modeChange(d,"header",b),this._horizontal("header",f)),this.c.footer&&this.dom.tfoot.length)&&(e=!g.visible||e+g.windowHeight>=g.tfootBottom+this.c.footerOffset?"in-place":g.windowHeight+e>g.tbodyTop+g.tfootHeight+this.c.footerOffset?"in":"above",(b||e!==this.s.footerMode)&&this._modeChange(e,"footer",b),this._horizontal("footer",f))}}),g.version="3.1.2",g.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},a.fn.dataTable.FixedHeader=g,a.fn.DataTable.FixedHeader=g,a(c).on("init.dt.dtfh",function(b,c){if("dt"===b.namespace){var d=c.oInit.fixedHeader,f=e.defaults.fixedHeader;!d&&!f||c._fixedHeader||(f=a.extend({},f,d),!1!==d&&new g(c,f))}}),e.Api.register("fixedHeader()",function(){}),e.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(a){(a=a._fixedHeader)&&a.update()})}),e.Api.register("fixedHeader.enable()",function(a){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.enable(a===d||a)})}),e.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(a){(a=a._fixedHeader)&&a.enable(!1)})}),a.each(["header","footer"],function(a,b){e.Api.register("fixedHeader."+b+"Offset()",function(a){var c=this.context;return a===d?c.length&&c[0]._fixedHeader?c[0]._fixedHeader[b+"Offset"]():d:this.iterator("table",function(c){(c=c._fixedHeader)&&c[b+"Offset"](a)})})}),g});