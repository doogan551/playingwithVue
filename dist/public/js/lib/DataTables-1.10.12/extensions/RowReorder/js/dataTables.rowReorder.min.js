!function(a){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c){var d=a.fn.dataTable,e=function(b,c){if(!d.versionCheck||!d.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=a.extend(!0,{},d.defaults.rowReorder,e.defaults,c),this.s={bodyTop:null,dt:new d.Api(b),getDataFn:d.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:d.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0},this.dom={clone:null,dtScroll:a("div.dataTables_scrollBody",this.s.dt.table().container())};var f=this.s.dt.settings()[0],g=f.rowreorder;return g?g:(f.rowreorder=this,void this._constructor())};return a.extend(e.prototype,{_constructor:function(){var b=this,c=this.s.dt,d=a(c.table().node());"static"===d.css("position")&&d.css("position","relative"),a(c.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(d){var e=a(this).closest("tr");if(c.row(e).any())return b._mouseDown(d,e),!1}),c.on("destroy.rowReorder",function(){a(c.table().container()).off(".rowReorder"),c.off(".rowReorder")})},_cachePositions:function(){var c=this.s.dt,d=a(c.table().node()).find("thead").outerHeight(),e=a.unique(c.rows({page:"current"}).nodes().toArray()),f=a.map(e,function(b){return a(b).position().top-d}),e=a.map(f,function(b,d){return f.length<d-1?(b+f[d+1])/2:(b+b+a(c.row(":last-child").node()).outerHeight())/2});this.s.middles=e,this.s.bodyTop=a(c.table().body()).offset().top,this.s.windowHeight=a(b).height()},_clone:function(b){var c=a(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(b.clone(!1)),d=b.outerWidth(),e=b.outerHeight(),f=b.children().map(function(){return a(this).width()});c.width(d).height(e).find("tr").children().each(function(a){this.style.width=f[a]+"px"}),c.appendTo("body"),this.dom.clone=c},_clonePosition:function(a){var b=this.s.start,c=this._eventToPage(a,"Y")-b.top,a=this._eventToPage(a,"X")-b.left,d=this.c.snapX;this.dom.clone.css({top:c+b.offsetTop,left:!0===d?b.offsetLeft:"number"==typeof d?b.offsetLeft+d:a+b.offsetLeft})},_emitEvent:function(b,c){this.s.dt.iterator("table",function(d){a(d.nTable).triggerHandler(b+".dt",c)})},_eventToPage:function(a,b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0]["page"+b]:a["page"+b]},_mouseDown:function(d,e){var f=this,g=this.s.dt,h=this.s.start,i=e.offset();h.top=this._eventToPage(d,"Y"),h.left=this._eventToPage(d,"X"),h.offsetTop=i.top,h.offsetLeft=i.left,h.nodes=a.unique(g.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(d),this.dom.target=e,e.addClass("dt-rowReorder-moving"),a(c).on("mouseup.rowReorder touchend.rowReorder",function(a){f._mouseUp(a)}).on("mousemove.rowReorder touchmove.rowReorder",function(a){f._mouseMove(a)}),a(b).width()===a(c).width()&&a(c.body).addClass("dt-rowReorder-noOverflow"),g=this.dom.dtScroll,this.s.scroll={windowHeight:a(b).height(),windowWidth:a(b).width(),dtTop:g.length?g.offset().top:null,dtLeft:g.length?g.offset().left:null,dtHeight:g.length?g.outerHeight():null,dtWidth:g.length?g.outerWidth():null}},_mouseMove:function(b){this._clonePosition(b);for(var c=this._eventToPage(b,"Y")-this.s.bodyTop,d=this.s.middles,e=null,f=this.s.dt,g=f.table().body(),h=0,i=d.length;h<i;h++)if(c<d[h]){e=h;break}null===e&&(e=d.length),null!==this.s.lastInsert&&this.s.lastInsert===e||(0===e?this.dom.target.prependTo(g):(c=a.unique(f.rows({page:"current"}).nodes().toArray()),e>this.s.lastInsert?this.dom.target.insertAfter(c[e-1]):this.dom.target.insertBefore(c[e])),this._cachePositions(),this.s.lastInsert=e),this._shiftScroll(b)},_mouseUp:function(){var b,d,e=this.s.dt,f=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),a(c).off(".rowReorder"),a(c.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;var g=this.s.start.nodes,h=a.unique(e.rows({page:"current"}).nodes().toArray()),i={},j=[],k=[],l=this.s.getDataFn,m=this.s.setDataFn;for(b=0,d=g.length;b<d;b++)if(g[b]!==h[b]){var n=e.row(h[b]).id(),o=e.row(h[b]).data(),p=e.row(g[b]).data();n&&(i[n]=l(p)),j.push({node:h[b],oldData:l(o),newData:l(p),newPosition:b,oldPosition:a.inArray(h[b],g)}),k.push(h[b])}if(g=[j,{dataSrc:f,nodes:k,values:i,triggerRow:e.row(this.dom.target)}],this._emitEvent("row-reorder",g),this.c.editor&&this.c.editor.edit(k,!1,{submit:"changed"}).multiSet(f,i).submit(),this.c.update){for(b=0,d=j.length;b<d;b++)i=e.row(j[b].node).data(),m(i,j[b].newData),e.columns().every(function(){this.dataSrc()===f&&e.cell(j[b].node,this.index()).invalidate("data")});this._emitEvent("row-reordered",g),e.draw(!1)}},_shiftScroll:function(a){var b,d,e=this,f=this.s.scroll,g=!1,h=a.pageY-c.body.scrollTop;65>h?b=-5:h>f.windowHeight-65&&(b=5),null!==f.dtTop&&a.pageY<f.dtTop+65?d=-5:null!==f.dtTop&&a.pageY>f.dtTop+f.dtHeight-65&&(d=5),b||d?(f.windowVert=b,f.dtVert=d,g=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&g&&(this.s.scrollInterval=setInterval(function(){if(f.windowVert&&(c.body.scrollTop=c.body.scrollTop+f.windowVert),f.dtVert){var a=e.dom.dtScroll[0];f.dtVert&&(a.scrollTop=a.scrollTop+f.dtVert)}},20))}}),e.defaults={dataSrc:0,editor:null,selector:"td:first-child",snapX:!1,update:!0},e.version="1.1.2",a.fn.dataTable.RowReorder=e,a.fn.DataTable.RowReorder=e,a(c).on("init.dt.dtr",function(b,c){if("dt"===b.namespace){var f=c.oInit.rowReorder,g=d.defaults.rowReorder;(f||g)&&(g=a.extend({},f,g),!1!==f&&new e(c,g))}}),e});