!function(a){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){var e=a.fn.dataTable,f=0,g=function(b,c){if(!e.versionCheck||!e.versionCheck("1.10.8"))throw"Warning: AutoFill requires DataTables 1.10.8 or greater";this.c=a.extend(!0,{},e.defaults.autoFill,g.defaults,c),this.s={dt:new e.Api(b),namespace:".autoFill"+f++,scroll:{},scrollInterval:null,handle:{height:0,width:0}},this.dom={handle:a('<div class="dt-autofill-handle"/>'),select:{top:a('<div class="dt-autofill-select top"/>'),right:a('<div class="dt-autofill-select right"/>'),bottom:a('<div class="dt-autofill-select bottom"/>'),left:a('<div class="dt-autofill-select left"/>')},background:a('<div class="dt-autofill-background"/>'),list:a('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null,offsetParent:null},this._constructor()};return a.extend(g.prototype,{_constructor:function(){var b=this,d=this.s.dt,e=a("div.dataTables_scrollBody",this.s.dt.table().container());e.length&&(this.dom.dtScroll=e,"static"===e.css("position")&&e.css("position","relative")),this._focusListener(),this.dom.handle.on("mousedown",function(a){return b._mousedown(a),!1}),d.on("destroy.autoFill",function(){d.off(".autoFill"),a(d.table().body()).off(b.s.namespace),a(c.body).off(b.s.namespace)})},_attach:function(b){var c=this.s.dt,d=c.cell(b).index(),e=this.dom.handle,f=this.s.handle,g=a("div.dataTables_scrollBody",this.s.dt.table().container()),h=0,i=0;d&&-1!==c.columns(this.c.columns).indexes().indexOf(d.column)?(this.dom.offsetParent||(this.dom.offsetParent=a(b).offsetParent()),f.height&&f.width||(e.appendTo("body"),f.height=e.outerHeight(),f.width=e.outerWidth()),d=a(b).position(),g.length&&this.dom.offsetParent[0]!==c.table().node()&&(i=g.scrollTop(),h=g.scrollLeft()),this.dom.attachedTo=b,e.css({top:d.top+b.offsetHeight-f.height+i,left:d.left+b.offsetWidth-f.width+h}).appendTo(this.dom.offsetParent)):this._detach()},_actionSelector:function(b){var c=this,d=this.s.dt,e=g.actions,f=[];if(a.each(e,function(a,c){c.available(d,b)&&f.push(a)}),1===f.length&&!1===this.c.alwaysAsk){var h=e[f[0]].execute(d,b);this._update(h,b)}else{var i=this.dom.list.children("ul").empty();f.push("cancel"),a.each(f,function(f,h){i.append(a("<li/>").append('<div class="dt-autofill-question">'+e[h].option(d,b)+"<div>").append(a('<div class="dt-autofill-button">').append(a('<button class="'+g.classes.btn+'">'+d.i18n("autoFill.button","&gt;")+"</button>").on("click",function(){var f=e[h].execute(d,b,a(this).closest("li"));c._update(f,b),c.dom.background.remove(),c.dom.list.remove()}))))}),this.dom.background.appendTo("body"),this.dom.list.appendTo("body"),this.dom.list.css("margin-top",-1*(this.dom.list.outerHeight()/2))}},_detach:function(){this.dom.attachedTo=null,this.dom.handle.detach()},_drawSelection:function(b){var c=this.s.dt,d=this.s.start,e=a(this.dom.start),f=a(b),g={row:c.rows({page:"current"}).nodes().indexOf(f.parent()[0]),column:f.index()};if(c.cell(f).any()&&-1!==c.columns(this.c.columns).indexes().indexOf(g.column)){this.s.end=g;var h,i,b=d.row<g.row?e:f;h=d.row<g.row?f:e,i=d.column<g.column?e:f,e=d.column<g.column?f:e,b=b.position().top,i=i.position().left,d=h.position().top+h.outerHeight()-b,e=e.position().left+e.outerWidth()-i,(h=this.dom.dtScroll)&&this.dom.offsetParent[0]!==c.table().node()&&(b+=h.scrollTop(),i+=h.scrollLeft()),c=this.dom.select,c.top.css({top:b,left:i,width:e}),c.left.css({top:b,left:i,height:d}),c.bottom.css({top:b+d,left:i,width:e}),c.right.css({top:b,left:i+e,height:d})}},_editor:function(a){var b=this.s.dt,c=this.c.editor;if(c){for(var e={},f=[],g=c.fields(),h=0,i=a.length;h<i;h++)for(var j=0,k=a[h].length;j<k;j++){var l=a[h][j],m=b.settings()[0].aoColumns[l.index.column],n=m.editField;if(n===d)for(var m=m.mData,o=0,p=g.length;o<p;o++){var q=c.field(g[o]);if(q.dataSrc()===m){n=q.name();break}}if(!n)throw"Could not automatically determine field data. Please see https://datatables.net/tn/11";e[n]||(e[n]={}),m=b.row(l.index.row).id(),e[n][m]=l.set,f.push(l.index)}c.bubble(f,!1).multiSet(e).submit()}},_emitEvent:function(b,c){this.s.dt.iterator("table",function(d){a(d.nTable).triggerHandler(b+".dt",c)})},_focusListener:function(){var b=this,d=this.s.dt,e=this.s.namespace,f=null!==this.c.focus?this.c.focus:d.settings()[0].keytable?"focus":"hover";"focus"===f?d.on("key-focus.autoFill",function(a,c,d){b._attach(d.node())}).on("key-blur.autoFill",function(){b._detach()}):"click"===f?(a(d.table().body()).on("click"+e,"td, th",function(){b._attach(this)}),a(c.body).on("click"+e,function(c){a(c.target).parents().filter(d.table().body()).length||b._detach()})):a(d.table().body()).on("mouseenter"+e,"td, th",function(){b._attach(this)}).on("mouseleave"+e,function(c){a(c.relatedTarget).hasClass("dt-autofill-handle")||b._detach()})},_mousedown:function(d){var e=this,f=this.s.dt;this.dom.start=this.dom.attachedTo,this.s.start={row:f.rows({page:"current"}).nodes().indexOf(a(this.dom.start).parent()[0]),column:a(this.dom.start).index()},a(c.body).on("mousemove.autoFill",function(a){e._mousemove(a)}).on("mouseup.autoFill",function(a){e._mouseup(a)});var f=this.dom.select,g=a(this.s.dt.table().body()).offsetParent();f.top.appendTo(g),f.left.appendTo(g),f.right.appendTo(g),f.bottom.appendTo(g),this._drawSelection(this.dom.start,d),this.dom.handle.css("display","none"),d=this.dom.dtScroll,this.s.scroll={windowHeight:a(b).height(),windowWidth:a(b).width(),dtTop:d?d.offset().top:null,dtLeft:d?d.offset().left:null,dtHeight:d?d.outerHeight():null,dtWidth:d?d.outerWidth():null}},_mousemove:function(a){var b=a.target.nodeName.toLowerCase();"td"!==b&&"th"!==b||(this._drawSelection(a.target,a),this._shiftScroll(a))},_mouseup:function(){a(c.body).off(".autoFill");var b=this.s.dt,e=this.dom.select;e.top.remove(),e.left.remove(),e.right.remove(),e.bottom.remove(),this.dom.handle.css("display","block");var e=this.s.start,f=this.s.end;if(e.row!==f.row||e.column!==f.column){for(var g=this._range(e.row,f.row),e=this._range(e.column,f.column),f=[],h=b.settings()[0],i=h.aoColumns,j=0;j<g.length;j++)f.push(a.map(e,function(a){var a=b.cell(":eq("+g[j]+")",a+":visible",{page:"current"}),c=a.data(),e=a.index(),f=i[e.column].editField;return f!==d&&(c=h.oApi._fnGetObjectDataFn(f)(b.row(e.row).data())),{cell:a,data:c,label:a.data(),index:e}}));this._actionSelector(f),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null}},_range:function(a,b){var c,d=[];if(a<=b)for(c=a;c<=b;c++)d.push(c);else for(c=a;c>=b;c--)d.push(c);return d},_shiftScroll:function(a){var b,d,e,f,g=this,h=this.s.scroll,i=!1,j=a.pageY-c.body.scrollTop,k=a.pageX-c.body.scrollLeft;65>j?b=-5:j>h.windowHeight-65&&(b=5),65>k?d=-5:k>h.windowWidth-65&&(d=5),null!==h.dtTop&&a.pageY<h.dtTop+65?e=-5:null!==h.dtTop&&a.pageY>h.dtTop+h.dtHeight-65&&(e=5),null!==h.dtLeft&&a.pageX<h.dtLeft+65?f=-5:null!==h.dtLeft&&a.pageX>h.dtLeft+h.dtWidth-65&&(f=5),b||d||e||f?(h.windowVert=b,h.windowHoriz=d,h.dtVert=e,h.dtHoriz=f,i=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&i&&(this.s.scrollInterval=setInterval(function(){if(h.windowVert&&(c.body.scrollTop=c.body.scrollTop+h.windowVert),h.windowHoriz&&(c.body.scrollLeft=c.body.scrollLeft+h.windowHoriz),h.dtVert||h.dtHoriz){var a=g.dom.dtScroll[0];h.dtVert&&(a.scrollTop=a.scrollTop+h.dtVert),h.dtHoriz&&(a.scrollLeft=a.scrollLeft+h.dtHoriz)}},20))},_update:function(a,b){if(!1!==a){var c,d=this.s.dt;if(this._emitEvent("preAutoFill",[d,b]),this._editor(b),null!==this.c.update?this.c.update:!this.c.editor){for(var e=0,f=b.length;e<f;e++)for(var g=0,h=b[e].length;g<h;g++)c=b[e][g],c.cell.data(c.set);d.draw(!1)}this._emitEvent("autoFill",[d,b])}}}),g.actions={increment:{available:function(b,c){return a.isNumeric(c[0][0].label)},option:function(a){return a.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(b,c,d){for(var b=1*c[0][0].data,d=1*a("input",d).val(),e=0,f=c.length;e<f;e++)for(var g=0,h=c[e].length;g<h;g++)c[e][g].set=b,b+=d}},fill:{available:function(){return!0},option:function(a,b){return a.i18n("autoFill.fill","Fill all cells with <i>"+b[0][0].label+"</i>")},execute:function(a,b){for(var c=b[0][0].data,d=0,e=b.length;d<e;d++)for(var f=0,g=b[d].length;f<g;f++)b[d][f].set=c}},fillHorizontal:{available:function(a,b){return 1<b.length&&1<b[0].length},option:function(a){return a.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(a,b){for(var c=0,d=b.length;c<d;c++)for(var e=0,f=b[c].length;e<f;e++)b[c][e].set=b[c][0].data}},fillVertical:{available:function(a,b){return 1<b.length&&1<b[0].length},option:function(a){return a.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(a,b){for(var c=0,d=b.length;c<d;c++)for(var e=0,f=b[c].length;e<f;e++)b[c][e].set=b[0][e].data}},cancel:{available:function(){return!1},option:function(a){return a.i18n("autoFill.cancel","Cancel")},execute:function(){return!1}}},g.version="2.1.2",g.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null},g.classes={btn:"btn"},a(c).on("preInit.dt.autofill",function(b,c){if("dt"===b.namespace){var d=c.oInit.autoFill,f=e.defaults.autoFill;(d||f)&&(f=a.extend({},d,f),!1!==d&&new g(c,f))}}),e.AutoFill=g,e.AutoFill=g});