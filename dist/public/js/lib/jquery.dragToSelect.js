!function(a){jQuery.fn.dragToSelect=function(b){var c=jQuery(this),d=c;do{if(/auto|scroll|hidden/.test(d.css("overflow")))break;d=d.parent()}while(d[0].parentNode);if("disable"==b)return d.addClass(f.disabledClass),this;if("enable"==b)return d.removeClass(f.disabledClass),this;var e="object"==typeof b?b:{},f=jQuery.extend({className:"jquery-drag-to-select",classSelecting:"jquery-drag-to-select-selecting",activeClass:"active",disabledClass:"disabled",selectedClass:"selected",scrollTH:10,percentCovered:25,selectables:!1,autoScroll:!1,selectOnMove:!1,onShow:function(){return!0},onHide:function(){return!0},onRefresh:function(){return!0}},e),g=function(){var a=d.offset();return{left:a.left,top:a.top,width:d.outerWidth(),height:d.outerHeight()}},h={left:0,top:0},i=jQuery("<div/>").appendTo(d).attr("class",f.className).css("position","absolute"),j=function(a){if(!d.is("."+f.disabledClass)){h.left=a.pageX-g().left+d[0].scrollLeft,h.top=a.pageY-g().top+d[0].scrollTop;var b={left:h.left+"px",top:h.top+"px",width:"1px",height:"1px"};i.addClass(f.activeClass).css(b),f.onShow()}},k=function(a){if(i.is("."+f.activeClass)&&!d.is("."+f.disabledClass)){var b=a.pageX-g().left+d[0].scrollLeft,c=a.pageY-g().top+d[0].scrollTop,e=b,j=c,k=h.left-e,l=h.top-j;b>h.left&&(e=h.left,k=b-h.left),c>h.top&&(j=h.top,l=c-h.top);var m={left:e+"px",top:j+"px",width:k+"px",height:l+"px"};i.css(m),f.onRefresh()}},l=function(a){i.is("."+f.activeClass)&&!d.is("."+f.disabledClass)&&f.onHide(i)!==!1&&i.removeClass(f.activeClass)},m=function(a){i.is("."+f.activeClass)&&!d.is("."+f.disabledClass)&&(a.pageY+f.scrollTH>g().top+g().height&&(d[0].scrollTop+=f.scrollTH),a.pageY-f.scrollTH<g().top&&(d[0].scrollTop-=f.scrollTH),a.pageX+f.scrollTH>g().left+g().width&&(d[0].scrollLeft+=f.scrollTH),a.pageX-f.scrollTH<g().left&&(d[0].scrollLeft-=f.scrollTH))},n=function(){if(i.is("."+f.activeClass)&&!d.is("."+f.disabledClass)){var b=c.find(f.selectables),e=i.offset(),g={left:e.left,top:e.top,width:i.width(),height:i.height()};b.each(function(b){var c=a(this),d=c.offset(),e={left:d.left,top:d.top,width:c.width(),height:c.height()};o(g,e)>f.percentCovered?c.addClass(f.selectedClass):c.removeClass(f.selectedClass)})}},o=function(a,b){if(a.left<=b.left&&a.top<=b.top&&a.left+a.width>=b.left+b.width&&a.top+a.height>b.top+b.height)return 100;a.right=a.left+a.width,a.bottom=a.top+a.height,b.right=b.left+b.width,b.bottom=b.top+b.height;var c=Math.max(a.left,b.left),d=Math.min(a.right,b.right),e=Math.max(a.top,b.top),f=Math.min(a.bottom,b.bottom);if(f>=e&&d>=c){var g=(d-c)*(f-e)/(b.width*b.height)*100;return g}return 0};i.mousemove(function(a){k(a),f.selectables&&f.selectOnMove&&n(),f.autoScroll&&m(a),a.preventDefault()}).mouseup(function(a){f.selectables&&n(),l(a),a.preventDefault()}),jQuery.fn.disableTextSelect&&d.disableTextSelect();var p=function(a){k(a),f.selectables&&f.selectOnMove&&n(),f.autoScroll&&m(a),a.preventDefault()},q=function(b){f.selectables&&n(),l(b),a(document.body).off("mousemove",p),a(document.body).off("mouseup",q),d.removeClass(f.classSelecting),b.preventDefault()};return d.mousedown(function(b){1==b.which&&(b.pageX-g().left+d.scrollLeft()>d.innerWidth()||b.pageY-g().top+d.scrollTop()>d.innerHeight()||(d.addClass(f.classSelecting),a("."+f.className).length<=0&&(i=jQuery("<div/>").appendTo(d).attr("class",f.className).css("position","absolute")),a(document.body).on("mousemove",p),a(document.body).on("mouseup",q),j(b),b.preventDefault()))}),this}}(jQuery);