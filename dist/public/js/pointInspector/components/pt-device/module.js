define(["knockout","text!./view.html","bannerJS"],function(a,b,c){function d(b){this.root=b,this.config=b.utility.config,this.point=b.point,this.data=b.point.data,this.utility=b.utility,this.Enums=this.config.Enums,this.apiEndpoint=b.apiEndpoint,this.isInEditMode=b.isInEditMode,this.systemEnumObject=b.utility.workspace.systemEnumObjects;var c=this.Enums["Device Model Types"];if([c["MicroScan 5 UNV"]["enum"],c["MicroScan 5 xTalk"]["enum"],c["SCADA Vio"]["enum"]].indexOf(this.data["Model Type"].eValue())<0)for(var d in this.Enums["Time Zones"])this.Enums["Time Zones"][d]["enum"]===this.systemEnumObject.telemetry["Time Zone"]&&(this.data["Time Zone"].eValue(this.systemEnumObject.telemetry["Time Zone"]),this.data["Time Zone"].Value(d));this.deviceTime=a.observable(""),this.tabTriggers={involvement:a.observable(!1),notifications:a.observable(!1),permissions:a.observable(!1)},b.tabTriggers=this.tabTriggers,b.initDOM()}return d.prototype.initialize=function(a){function b(b){b.value();return e.removeClass("btn-warning"),f.removeClass("fa-refresh fa-spin").addClass(g[a].icon),b.error()?void c.showBanner(b.error(),"Ok",null,"#D50000"):void c.showBanner(g[a].msg,null,5e3)}var d=this,e=$(event.target),f=e.find("i.fa"),g=[{icon:"fa-reply",msg:"Reset successful"},{icon:"fa-flash",msg:"Warm restart successful"},{icon:"fa-cogs",msg:"Device loaded succssfully"}],h={upi:d.data._id(),logData:{user:d.utility.workspace.user(),point:{_id:d.data._id(),Security:d.data.Security(),Name:d.data.Name(),name1:d.data.name1(),name2:d.data.name2(),name3:d.data.name3(),name4:d.data.name4(),"Point Type":{eValue:d.data["Point Type"].eValue()}}}};d.root.authorize(d.data,d.root.permissionLevels.CONTROL)&&(a="number"!=typeof a?1:a,h.state=a,e.addClass("btn-warning"),f.removeClass(g[a].icon).addClass("fa-refresh fa-spin"),d.point.issueCommand("Device Initialize",h,b))},d.prototype.getDeviceTime=function(){function a(a){return a.error()?void c.showBanner(a.error(),"Ok",null,"#D50000"):void b.deviceTime(a.value())}var b=this;b.point.issueCommand("Device Time",{upi:b.data._id()},a)},d.prototype.dispose=function(){},{viewModel:d,template:b}});