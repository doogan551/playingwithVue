define(["knockout","text!./view.html","bannerJS"],function(a,b,c){function d(b){this.point=b.point,this.data=b.point.data,this.utility=b.utility,this.apiEndpoint=b.apiEndpoint,this.isInEditMode=b.isInEditMode,this.modal={error:a.observable(""),showModal:a.observable(!1),value:a.observable(""),cancel:function(){},submit:function(){}},this.tabTriggers={involvement:a.observable(!1),notifications:a.observable(!1),permissions:a.observable(!1)},b.tabTriggers=this.tabTriggers,b.initDOM()}$("body"),$(".viewOverlay");return d.prototype.setValue=function(a,b){function d(a){return h.removeClass("btn-warning"),i.removeClass("fa-refresh fa-spin"),a.error()?(c.showBanner("Reset value unsuccessful. "+a.error(),"Ok",null,"#D50000"),h.addClass("btn-danger"),void i.addClass("fa-warning")):(h.addClass("btn-success"),void i.addClass("fa-check"))}var e,f,g=this,h=$(b.target),i=h.find("i.fa"),j=$(".modal"),k=j.find(".btnSubmit"),l=this.modal,m={user:g.utility.workspace.user(),point:{_id:g.data._id(),Security:g.data.Security(),Name:g.data.Name(),name1:g.data.name1(),name2:g.data.name2(),name3:g.data.name3(),name4:g.data.name4(),"Point Type":{eValue:g.data["Point Type"].eValue()}},newValue:{Value:0}};j.one("hide.bs.modal",function(a){f.dispose()}),j.one("shown.bs.modal",function(a){e=j.find(".val:first"),l.value.valueHasMutated(),e.focus()}),f=l.value.subscribe(function(a){""===$.trim(a)?k.prop("disabled",!0):k.prop("disabled",!1)}),l.value(""),l.submit=function(){m.newValue.Value=l.value(),g.point.issueCommand("Command Point",{upi:g.data._id(),Value:l.value(),logData:m},d),l.showModal(!1),h.removeClass("btn-danger btn-success").addClass("btn-warning"),i.removeClass("fa-pencil-square-o fa-check fa-warning").addClass("fa-refresh fa-spin")},l.showModal(!0)},d.prototype.dispose=function(){},{viewModel:d,template:b}});