!function(a){"use strict";a.kg||(a.kg={}),a.kg.numberOfGrids=0,a.kg.eventStorage={};var b="__kg_selected__",c=8,d=6,e="asc",f="desc",g="_kg_field_",h="_kg_depth_",i="_kg_hidden_",j="_kg_column_",k=/<.+>/;a.kg.moveSelectionHandler=function(b,d){if(a.kg.utils.isNullOrUndefined(b)||a.kg.utils.isNullOrUndefined(b.config.selectedItems))return!0;var e=d.which||d.keyCode,f=38===e?-1:40===e?1:null;if(!f)return!0;var g=b.renderedRows(),h=g.indexOf(b.selectionService.lastClickedRow)+f;return h<0||h>=g.length||(b.selectionService.ChangeSelection(g[h],d),h>g.length-c?b.$viewport.scrollTop(b.$viewport.scrollTop()+b.config.rowHeight*c):h<c&&b.$viewport.scrollTop(b.$viewport.scrollTop()-b.config.rowHeight*c),!1)},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),a.kg.utils={visualLength:function(a){var b=document.getElementById("testDataLength");return b||(b=document.createElement("SPAN"),b.id="testDataLength",b.style.visibility="hidden",document.body.appendChild(b)),$(b).css("font",$(a).css("font")),b.innerHTML=$(a).text(),b.offsetWidth},forIn:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)},evalProperty:function(a,b){var c=ko.utils.unwrapObservable(a),d=b.split("."),e=0,f=ko.utils.unwrapObservable(c[d[e]]),g=d.length;for(e++;f&&e<g;)f=ko.utils.unwrapObservable(f[d[e]]),e++;return f},endsWith:function(a,b){return!(!a||!b||"string"!=typeof a)&&a.indexOf(b,a.length-b.length)!==-1},isNullOrUndefined:function(a){return void 0===a||null===a},getElementsByClassName:function(a){for(var b=[],c=new RegExp("\\b"+a+"\\b"),d=document.getElementsByTagName("*"),e=0;e<d.length;e++){var f=d[e].className;c.test(f)&&b.push(d[e])}return b},getTemplatePromise:function(a){return $.ajax(a)},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),ieVersion:function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:void 0}()},$.extend(a.kg.utils,{isIe6:function(){return 6===a.kg.utils.ieVersion}(),isIe7:function(){return 7===a.kg.utils.ieVersion}(),isIe:function(){return void 0!==a.kg.utils.ieVersion}()}),a.kg.defaultGridTemplate=function(){return'<div data-bind="css: {\'ui-widget\': jqueryUITheme, \'kgNoSelect\' : disableTextSelection}"><div class="kgTopPanel" data-bind="css: {\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}, style: $data.topPanelStyle"><div class="kgGroupPanel" data-bind="visible: $data.showGroupPanel, style: headerStyle"><div class="kgGroupPanelDescription" data-bind="visible: configGroups().length == 0">Drag a column header here and drop it to group by that column</div><ul data-bind="visible: configGroups().length > 0, foreach: configGroups" class="kgGroupList"><li class="kgGroupItem"><span class="kgGroupElement"><div class="kgGroupName"><span data-bind="text: displayName"></span><span data-bind="click: function(data) { $root.removeGroup($index()) }" class="kgRemoveGroup">x</span></div><span data-bind="visible: $index() < ($root.configGroups().length - 1)" class="kgGroupArrow"></span></span></li></ul></div><div class="kgHeaderContainer" data-bind="style: headerStyle"><div class="kgHeaderScroller" data-bind="style: headerScrollerStyle, kgHeaderRow: $data" ></div></div><div class="kgHeaderButton" data-bind="visible: ($data.showColumnMenu || $data.showFilter), click: toggleShowMenu"><div class="kgHeaderButtonArrow"></div></div><div data-bind="visible: showMenu" class="kgColMenu"><div data-bind="visible: showFilter"><input placeholder="Seach Field:Value" type="text" data-bind="value: filterText, valueUpdate: \'afterkeydown\'"/></div><div data-bind="visible: showColumnMenu"><span class="kgMenuText">Choose Columns:</span><ul class="kgColList" data-bind="foreach: nonAggColumns"><li class="kgColListItem"><label style="position: relative;"><input type="checkbox" class="kgColListCheckbox" data-bind="checked: visible"/><span data-bind="text: displayName, click: toggleVisible"></span><a title="Group By" data-bind="attr: {\'class\': groupedByClass }, visible: (field != \'✔\'), click: $parent.groupBy"></a><span class="kgGroupingNumber" data-bind="visible: groupIndex() > 0, text: groupIndex"></span></label></li></ul></div></div></div><div class="kgViewport" data-bind="css: {\'ui-widget-content\': jqueryUITheme}, style: viewportStyle"><div class="kgCanvas" data-bind="style: canvasStyle"><div data-bind="foreach: renderedRows" style="position: absolute;"><div data-bind="style: { \'top\': offsetTop, \'height\': $parent.rowHeight + \'px\' }, click: toggleSelected, css: {\'selected\': selected, \'even\': isEven , \'odd\': isOdd, \'ui-state-default\': $parent.jqueryUITheme && isOdd, \'ui-state-active\':$parent.jqueryUITheme && isEven}, kgRow: $data" class="kgRow"></div></div></div></div><div class="kgFooterPanel" data-bind="css: {\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}, style: footerStyle"><div class="kgTotalSelectContainer" data-bind="visible: footerVisible"><div class="kgFooterTotalItems" data-bind="css: {\'kgNoMultiSelect\': !multiSelect}" ><span class="kgLabel">Total Items: <span data-bind="text: maxRowsDisplay"></span></span><span data-bind="visible: filterText().length > 0" class="kgLabel">(Showing: <span data-bind="text: totalFilteredItemsLength"></span>)</span></div><div class="kgFooterSelectedItems" data-bind="visible: multiSelect"><span class="kgLabel">Selected Items: <span data-bind="text: selectedItemCount"></span></span></div></div><div class="kgPagerContainer" style="float: right; margin-top: 10px;" data-bind="visible: (footerVisible && enablePaging), css: {\'kgNoMultiSelect\': !multiSelect}"><div style="float:left; margin-right: 10px;" class="kgRowCountPicker"><span style="float: left; margin-top: 3px;" class="kgLabel">Page Size:</span><select style="float: left;height: 27px; width: 100px" data-bind="value: pagingOptions.pageSize, options: pagingOptions.pageSizes"></select></div><div style="float:left; margin-right: 10px; line-height:25px;" class="kgPagerControl" style="float: left; min-width: 135px;"><button class="kgPagerButton" data-bind="click: pageToFirst, disable: cantPageBackward()" title="First Page"><div class="kgPagerFirstTriangle"><div class="kgPagerFirstBar"></div></div></button><button class="kgPagerButton" data-bind="click: pageBackward, disable: cantPageBackward()" title="Previous Page"><div class="kgPagerFirstTriangle kgPagerPrevTriangle"></div></button><input class="kgPagerCurrent" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0px 4px;" data-bind="value: pagingOptions.currentPage, valueUpdate: \'afterkeydown\'"/><button class="kgPagerButton" data-bind="click: pageForward, disable: cantPageForward()" title="Next Page"><div class="kgPagerLastTriangle kgPagerNextTriangle"></div></button><button class="kgPagerButton" data-bind="click: pageToLast, disable: cantPageForward()" title="Last Page"><div class="kgPagerLastTriangle"><div class="kgPagerLastBar"></div></div></button></div></div></div></div>'},a.kg.defaultRowTemplate=function(){return"<div data-bind=\"style: { cursor : canSelectRows ? 'pointer' : 'default' }, foreach: $grid.visibleColumns, css: { 'ui-widget-content': $grid.jqueryUITheme }\"><div data-bind=\"attr: { 'class': cellClass() + ' kgCell col' + $index() }, kgCell: $data\"></div></div>"},a.kg.defaultCellTemplate=function(){return"<div data-bind=\"attr: { 'class': 'kgCellText colt' + $index()}, html: $data.getProperty($parent)\"></div>"},a.kg.aggregateTemplate=function(){return'<div data-bind="click: toggleExpand, style: {\'left\': offsetLeft()}" class="kgAggregate"><span class="kgAggregateText" data-bind="html: $data.label">(<span data-bind="html: totalChildren"></span> Items)</span><div data-bind="attr: {\'class\' : aggClass }"></div></div>'},a.kg.defaultHeaderRowTemplate=function(){return"<div data-bind=\"foreach: visibleColumns\"><div data-bind=\"kgHeaderCell: $data, attr: { 'class': 'kgHeaderCell col' + $index() }\"></div></div>"},a.kg.defaultHeaderCellTemplate=function(){return"<div data-bind=\"style: { cursor : sortable() ? 'pointer' : 'default' }, click: sort, css: {'kgSorted': !noSortVisible }, attr: {'class': 'kgHeaderSortColumn ' + headerClass()}\"><div data-bind=\"attr: { 'class': 'colt' + $index() + ' kgHeaderText' }, html: displayName\"></div><div class=\"kgSortButtonDown\" data-bind=\"visible: showSortButtonDown\"></div><div class=\"kgSortButtonUp\" data-bind=\"visible: showSortButtonUp\"></div><div data-bind=\"visible: resizable, click: gripClick, mouseEvents: { mouseDown: gripOnMouseDown }\" class=\"kgHeaderGrip\" ></div></div>"},ko.bindingHandlers.koGrid=function(){return{init:function(b,c,d,e,f){var g=c(),h=$(b);g.gridDim=new a.kg.Dimension({outerHeight:ko.observable(h.height()),outerWidth:ko.observable(h.width())});var i=new a.kg.Grid(g),j=$(a.kg.defaultGridTemplate());return g.data.subscribe(function(){i.$$selectionPhase||(i.searchProvider.evalFilter(),i.refreshDomSizes())}),ko.isObservable(g.columnDefs)&&g.columnDefs.subscribe(function(a){i.columns([]),i.config.columnDefs=a,i.buildColumns(),i.configureColumnWidths()}),h.addClass("koGrid").addClass(i.gridId.toString()),h.append(j),i.$userViewModel=f.$data,ko.applyBindings(i,j[0]),a.kg.domUtilityService.AssignGridContainers(h,i),i.configureColumnWidths(),i.refreshDomSizes(),i.eventProvider=new a.kg.EventProvider(i),$.each(i.config.plugins,function(a,b){"function"==typeof b.onGridInit&&b.onGridInit(i)}),a.kg.domUtilityService.BuildStyles(i),{controlsDescendantBindings:!0}}}}(),ko.bindingHandlers.kgRow=function(){return{init:function(b,c,d,e,f){var g,h=c(),i=h.$grid=f.$parent;g=h.isAggRow?a.kg.aggregateTemplate():i.rowTemplate;var j=function(a){var c=$(a);h.$userViewModel=f.$parent.$userViewModel,ko.applyBindings(h,c[0]),$(b).html(c)};return g.then?g.then(function(a){j(a)}):j(g),{controlsDescendantBindings:!0}}}}(),ko.bindingHandlers.kgCell=function(){return{init:function(a,b,c,d,e){e.$userViewModel=e.$parent.$userViewModel;var f=function(b){var c=$(b);ko.applyBindings(e,c[0]),$(a).html(c)};return d.cellTemplate.then?d.cellTemplate.then(function(a){f(a)}):f(d.cellTemplate),{controlsDescendantBindings:!0}}}}(),ko.bindingHandlers.kgHeaderRow=function(){return{init:function(a,b,c,d,e){e.$userViewModel=e.$data.$userViewModel;var f=function(b){var c=$(b);ko.applyBindings(e,c[0]),$(a).html(c)};return d.headerRowTemplate.then?d.headerRowTemplate.then(function(a){f(a)}):f(d.headerRowTemplate),{controlsDescendantBindings:!0}}}}(),ko.bindingHandlers.kgHeaderCell=function(){return{init:function(a,b,c,d,e){var f=e.extend({$grid:e.$parent,$userViewModel:e.$parent.$userViewModel}),g=function(b){var c=$(b);ko.applyBindings(f,c[0]),$(a).html(c)};return d.headerCellTemplate.then?d.headerCellTemplate.then(function(a){g(a)}):g(d.headerCellTemplate),{controlsDescendantBindings:!0}}}}(),ko.bindingHandlers.mouseEvents=function(){return{init:function(a,b,c,d,e){var f=b();f.mouseDown&&$(a).mousedown(f.mouseDown)}}}(),a.kg.Aggregate=function(a,b){var c=this;c.index=0,c.offsetTop=ko.observable(0),c.entity=a,c.label=ko.observable(a.gLabel),c.field=a.gField,c.depth=a.gDepth,c.parent=a.parent,c.children=a.children,c.aggChildren=a.aggChildren,c.aggIndex=a.aggIndex,c.collapsed=ko.observable(!0),c.isAggRow=!0,c.offsetLeft=ko.observable((25*a.gDepth).toString()+"px"),c.aggLabelFilter=a.aggLabelFilter,c.toggleExpand=function(){var a=c.collapsed();c.collapsed(!a),c.notifyChildren()},c.setExpand=function(a){c.collapsed(a),c.notifyChildren()},c.notifyChildren=function(){$.each(c.aggChildren,function(a,b){if(b.entity[i]=c.collapsed(),c.collapsed()){var d=c.collapsed();b.setExpand(d)}}),$.each(c.children,function(a,b){b[i]=c.collapsed()}),b.rowCache=[];var a=!1;$.each(b.aggCache,function(b,d){if(a){var e=30*c.children.length,f=c.collapsed();d.offsetTop(f?d.offsetTop()-e:d.offsetTop()+e)}else b==c.aggIndex&&(a=!0)}),b.renderedChange()},c.aggClass=ko.computed(function(){return c.collapsed()?"kgAggArrowCollapsed":"kgAggArrowExpanded"}),c.totalChildren=ko.computed(function(){if(c.aggChildren.length>0){var a=0,b=function(c){c.aggChildren.length>0?$.each(c.aggChildren,function(a,c){b(c)}):a+=c.children.length};return b(c),a}return c.children.length}),c.selected=ko.observable(!1),c.isEven=ko.observable(!1),c.isOdd=ko.observable(!1),c.toggleSelected=function(){return!0}},a.kg.Column=function(b,c){var d=this,g=b.colDef,h=500,i=0,j=null;d.eventTaget=void 0,d.width=g.width,d.groupIndex=ko.observable(0),d.isGroupedBy=ko.observable(!1),d.groupedByClass=ko.computed(function(){return d.isGroupedBy()?"kgGroupedByIcon":"kgGroupIcon"}),d.sortable=ko.observable(!1),d.resizable=ko.observable(!1),d.minWidth=g.minWidth?g.minWidth:50,d.maxWidth=g.maxWidth?g.maxWidth:9e3,d.headerRowHeight=b.headerRowHeight,d.displayName=ko.observable(g.displayName||g.field),d.index=b.index,d.isAggCol=b.isAggCol,d.cellClass=ko.observable(g.cellClass||""),d.cellFilter=g.cellFilter||g.cellFormatter,d.field=g.field,d.aggLabelFilter=g.cellFilter||g.cellFormatter||g.aggLabelFilter||g.aggLabelFormatter,d._visible=ko.observable(a.kg.utils.isNullOrUndefined(g.visible)||g.visible),d.visible=ko.computed({read:function(){return d._visible()},write:function(a){d.toggleVisible(a)}}),b.enableSort&&d.sortable(a.kg.utils.isNullOrUndefined(g.sortable)||g.sortable),b.enableResize&&d.resizable(a.kg.utils.isNullOrUndefined(g.resizable)||g.resizable),d.sortDirection=ko.observable(void 0),d.sortingAlgorithm=g.sortFn,d.headerClass=ko.observable(g.headerClass),d.headerCellTemplate=g.headerCellTemplate||a.kg.defaultHeaderCellTemplate(),d.cellTemplate=g.cellTemplate||a.kg.defaultCellTemplate(),g.cellTemplate&&!k.test(g.cellTemplate)&&(d.cellTemplate=a.kg.utils.getTemplatePromise(g.cellTemplate)),g.headerCellTemplate&&!k.test(g.headerCellTemplate)&&(d.headerCellTemplate=a.kg.utils.getTemplatePromise(g.headerCellTemplate)),d.getProperty=function(a){var b;return b=d.cellFilter?d.cellFilter(a.getProperty(d.field)):a.getProperty(d.field)},d.toggleVisible=function(b){var e;e=a.kg.utils.isNullOrUndefined(b)||"object"==typeof b?!d._visible():b,d._visible(e),a.kg.domUtilityService.BuildStyles(c)},d.showSortButtonUp=ko.computed(function(){return d.sortable?d.sortDirection()===f:d.sortable}),d.showSortButtonDown=ko.computed(function(){return d.sortable?d.sortDirection()===e:d.sortable}),d.noSortVisible=ko.computed(function(){return!d.sortDirection()}),d.sort=function(){if(!d.sortable())return!0;var a=d.sortDirection()===e?f:e;return d.sortDirection(a),b.sortCallback(d,a),!1},d.gripClick=function(a,c){c.stopPropagation(),i++,1===i?j=setTimeout(function(){i=0},h):(clearTimeout(j),b.resizeOnDataCallback(d),i=0)},d.gripOnMouseDown=function(b){return b.stopPropagation(),b.ctrlKey?(d.toggleVisible(),a.kg.domUtilityService.BuildStyles(c),c.config.columnsChanged(c.columns.peek()),!0):(d.eventTaget=b.target.parentElement,d.eventTaget.style.cursor="col-resize",d.startMousePosition=b.clientX,d.origWidth=d.width,$(document).mousemove(d.onMouseMove),$(document).mouseup(d.gripOnMouseUp),!1)},d.onMouseMove=function(b){b.stopPropagation();var e=b.clientX-d.startMousePosition,f=e+d.origWidth;return d.width=f<d.minWidth?d.minWidth:f>d.maxWidth?d.maxWidth:f,a.kg.domUtilityService.BuildStyles(c),!1},d.gripOnMouseUp=function(a){return a.stopPropagation(),$(document).off("mousemove"),$(document).off("mouseup"),d.eventTaget.style.cursor=d.sortable()?"pointer":"default",d.eventTaget=void 0,c.config.columnsChanged(c.columns.peek()),!1}},a.kg.Dimension=function(a){this.outerHeight=null,this.outerWidth=null,$.extend(this,a)},a.kg.EventProvider=function(b){var c=this;c.colToMove=void 0,c.groupToMove=void 0,c.assignEvents=function(){b.config.jqueryUIDraggable?(b.$groupPanel.droppable({addClasses:!1,drop:function(a){c.onGroupDrop(a)}}),$(document).ready(c.setDraggables)):(b.$groupPanel.on("mousedown",c.onGroupMouseDown).on("dragover",c.dragOver).on("drop",c.onGroupDrop),b.$headerScroller.on("mousedown",c.onHeaderMouseDown).on("dragover",c.dragOver).on("drop",c.onHeaderDrop),b.config.enableRowReordering&&b.$viewport.on("mousedown",c.onRowMouseDown).on("dragover",c.dragOver).on("drop",c.onRowDrop),c.setDraggables()),b.columns.subscribe(c.setDraggables)},c.dragOver=function(a){a.preventDefault()},c.setDraggables=function(){b.config.jqueryUIDraggable?b.$root.find(".kgHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:!1,start:function(a){c.onHeaderMouseDown(a)}}).droppable({drop:function(a){c.onHeaderDrop(a)}}):(b.$root.find(".kgHeaderSortColumn").attr("draggable","true"),navigator.userAgent.indexOf("MSIE")!=-1&&b.$root.find(".kgHeaderSortColumn").bind("selectstart",function(){return this.dragDrop(),!1}))},c.onGroupMouseDown=function(a){var d=$(a.target);if("kgRemoveGroup"!=d[0].className){var e=ko.dataFor(d[0]);e&&(b.config.jqueryUIDraggable||d.attr("draggable","true"),c.groupToMove={header:d,groupName:e,index:e.groupIndex()-1})}else c.groupToMove=void 0},c.onGroupDrop=function(a){var d,e;c.groupToMove?(d=$(a.target).closest(".kgGroupElement"),"kgGroupPanel"==d.context.className?(b.configGroups.splice(c.groupToMove.index,1),b.configGroups.push(c.groupToMove.groupName)):(e=ko.dataFor(d[0]),e&&c.groupToMove.index!=e.groupIndex()&&(b.configGroups.splice(c.groupToMove.index,1),b.configGroups.splice(e.groupIndex(),0,c.groupToMove.groupName))),c.groupToMove=void 0,b.fixGroupIndexes()):(b.configGroups.indexOf(c.colToMove.col)==-1&&(d=$(a.target).closest(".kgGroupElement"),"kgGroupPanel"==d.context.className||"kgGroupPanelDescription"==d.context.className?b.groupBy(c.colToMove.col):(e=ko.dataFor(d[0]),e&&b.removeGroup(e.groupIndex()))),c.colToMove=void 0)},c.onHeaderMouseDown=function(a){var b=$(a.target).closest(".kgHeaderSortColumn");if(!b[0])return!0;var d=ko.dataFor(b[0]);return d&&(c.colToMove={header:b,col:d}),!0},c.onHeaderDrop=function(d){if(!c.colToMove)return!0;var e=$(d.target).closest(".kgHeaderSortColumn");if(!e[0])return!0;var f=ko.dataFor(e[0]);if(f){if(c.colToMove.col==f)return!0;var g=b.columns.peek();g.splice(c.colToMove.col.index,1),g.splice(f.index,0,c.colToMove.col),b.fixColumnIndexes(),b.columns(g),a.kg.domUtilityService.BuildStyles(b),c.colToMove=void 0}return!0},c.onRowMouseDown=function(b){var c=$(b.target).closest(".kgRow");if(c[0]){var d=ko.dataFor(c[0]);d&&(c.attr("draggable","true"),a.kg.eventStorage.rowToMove={targetRow:c,scope:d})}},c.onRowDrop=function(c){var d=$(c.target).closest(".kgRow"),e=ko.dataFor(d[0]);if(e){var f=a.kg.eventStorage.rowToMove;if(f.scope==e)return;var g=b.sortedData(),h=g.indexOf(f.scope.entity),i=g.indexOf(e.entity);b.sortedData.splice(h,1),b.sortedData.splice(i,0,f.scope.entity),b.searchProvider.evalFilter(),a.kg.eventStorage.rowToMove=void 0}},c.assignGridEventHandlers=function(){b.$viewport.scroll(function(a){var c=a.target.scrollLeft,d=a.target.scrollTop;b.adjustScrollLeft(c),b.adjustScrollTop(d)}),b.$viewport.off("keydown"),b.$viewport.on("keydown",function(c){return a.kg.moveSelectionHandler(b,c)}),b.config.tabIndex===-1?(b.$viewport.attr("tabIndex",a.kg.numberOfGrids),a.kg.numberOfGrids++):b.$viewport.attr("tabIndex",b.config.tabIndex),$(a).resize(function(){a.kg.domUtilityService.UpdateGridLayout(b),b.config.maintainColumnRatios&&b.configureColumnWidths()})},c.assignGridEventHandlers(),c.assignEvents()},a.kg.RowFactory=function(d){var e=this;e.rowCache=[],e.aggCache={},e.parentCache=[],e.dataChanged=!0,e.parsedData=[],e.rowConfig={},e.selectionService=d.selectionService,e.rowHeight=30,e.numberOfAggregates=0,e.groupedData=void 0,e.rowHeight=d.config.rowHeight,e.rowConfig={canSelectRows:d.config.canSelectRows,rowClasses:d.config.rowClasses,selectedItems:d.config.selectedItems,selectWithCheckboxOnly:d.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:d.config.beforeSelectionChange,afterSelectionChangeCallback:d.config.afterSelectionChange},e.renderedRange=new a.kg.Range(0,d.minRowsToRender()+c),e.buildEntityRow=function(c,d){var f=e.rowCache[d];return f||(f=new a.kg.Row(c,e.rowConfig,e.selectionService),f.rowIndex(d+1),f.offsetTop((e.rowHeight*d).toString()+"px"),f.selected(c[b]),e.rowCache[d]=f),f},e.buildAggregateRow=function(b,c){var d=e.aggCache[b.aggIndex];return d||(d=new a.kg.Aggregate(b,e),e.aggCache[b.aggIndex]=d),d.index=c+1,d.offsetTop((e.rowHeight*c).toString()+"px"),d},e.UpdateViewableRange=function(a){e.renderedRange=a,e.renderedChange()},e.filteredDataChanged=function(){d.lateBoundColumns&&d.filteredData().length>1&&(d.config.columnDefs=void 0,d.buildColumns(),d.lateBoundColumns=!1),e.dataChanged=!0,e.rowCache=[],d.config.groups.length>0&&e.getGrouping(d.config.groups),e.UpdateViewableRange(e.renderedRange)},e.renderedChange=function(){if(!e.groupedData||d.config.groups.length<1)return e.renderedChangeNoGroups(),void d.refreshDomSizes();e.parentCache=[];var a=[],b=e.parsedData.filter(function(a){return a[i]===!1}).slice(e.renderedRange.topRow,e.renderedRange.bottomRow);$.each(b,function(b,c){var d;d=c.isAggRow?e.buildAggregateRow(c,e.renderedRange.topRow+b):e.buildEntityRow(c,e.renderedRange.topRow+b),a.push(d)}),d.setRenderedRows(a),d.refreshDomSizes()},e.renderedChangeNoGroups=function(){var a=[],b=d.filteredData.slice(e.renderedRange.topRow,e.renderedRange.bottomRow);$.each(b,function(b,c){var d=e.buildEntityRow(c,e.renderedRange.topRow+b);a.push(d)}),d.setRenderedRows(a)},e.parseGroupData=function(a){if(a.values)$.each(a.values,function(a,b){e.parentCache[e.parentCache.length-1].children.push(b),e.parsedData.push(b)});else for(var b in a)if(b!=g&&b!=h&&b!=j&&a.hasOwnProperty(b)){var c=e.buildAggregateRow({gField:a[g],gLabel:b,gDepth:a[h],isAggRow:!0,_kg_hidden_:!1,children:[],aggChildren:[],aggIndex:e.numberOfAggregates,aggLabelFilter:a[j].aggLabelFilter},0);e.numberOfAggregates++,c.parent=e.parentCache[c.depth-1],c.parent&&(c.parent.collapsed(!1),c.parent.aggChildren.push(c)),e.parsedData.push(c.entity),e.parentCache[c.depth]=c,e.parseGroupData(a[b])}},e.getGrouping=function(b){e.aggCache=[],e.rowCache=[],e.numberOfAggregates=0,e.groupedData={};var c=d.filteredData(),f=b.length,k=d.columns();$.each(c,function(c,l){l[i]=!0;var m=e.groupedData;$.each(b,function(b,c){!k[b].isAggCol&&b<=f&&(d.columns.splice(l.gDepth,0,new a.kg.Column({colDef:{field:"",width:25,sortable:!1,resizable:!1,headerCellTemplate:'<div class="kgAggHeader"></div>'},isAggCol:!0,index:l.gDepth,headerRowHeight:d.config.headerRowHeight})),a.kg.domUtilityService.BuildStyles(d));var e=k.filter(function(a){return a.field==c})[0],i=a.kg.utils.evalProperty(l,c);e.cellFilter&&(i=e.cellFilter(i)),i=i?i.toString():"null",m[i]||(m[i]={}),m[g]||(m[g]=c),m[h]||(m[h]=b),m[j]||(m[j]=e),m=m[i]}),m.values||(m.values=[]),m.values.push(l)}),d.fixColumnIndexes(),e.parsedData.length=0,e.parseGroupData(e.groupedData)},d.config.groups.length>0&&d.filteredData().length>0&&e.getGrouping(d.config.groups)},a.kg.Grid=function(e){var f={rowHeight:30,columnWidth:100,headerRowHeight:30,footerRowHeight:55,footerVisible:!0,displayFooter:void 0,canSelectRows:!0,selectAllState:ko.observable(!1),data:ko.observableArray([]),columnDefs:void 0,selectedItems:ko.observableArray([]),displaySelectionCheckbox:!0,selectWithCheckboxOnly:!1,useExternalSorting:!1,sortInfo:ko.observable(void 0),multiSelect:!0,tabIndex:-1,enableColumnResize:!0,enableSorting:!0,maintainColumnRatios:void 0,beforeSelectionChange:function(){return!0},afterSelectionChange:function(){},columnsChanged:function(){},rowTemplate:void 0,headerRowTemplate:void 0,jqueryUITheme:!1,jqueryUIDraggable:!1,plugins:[],keepLastSelected:!0,groups:[],showGroupPanel:!1,enableRowReordering:!1,showColumnMenu:!0,showFilter:!0,disableTextSelection:!0,filterOptions:{filterText:ko.observable(""),useExternalFilter:!1},enablePaging:!1,pagingOptions:{pageSizes:ko.observableArray([250,500,1e3]),pageSize:ko.observable(250),totalServerItems:ko.observable(0),currentPage:ko.observable(1)}},g=this;g.maxCanvasHt=ko.observable(0),g.config=$.extend(f,e),g.config.columnDefs=ko.utils.unwrapObservable(e.columnDefs),g.gridId="ng"+a.kg.utils.newId(),g.$root=null,g.$groupPanel=null,g.$topPanel=null,g.$headerContainer=null,g.$headerScroller=null,g.$headers=null,g.$viewport=null,g.$canvas=null,g.rootDim=g.config.gridDim,g.sortInfo=ko.isObservable(g.config.sortInfo)?g.config.sortInfo:ko.observable(g.config.sortInfo),g.sortedData=g.config.data,g.lateBindColumns=!1,g.filteredData=ko.observableArray([]),g.lastSortedColumn=void 0,g.showFilter=g.config.showFilter,g.filterText=g.config.filterOptions.filterText,g.disableTextSelection=ko.observable(g.config.disableTextSelection),g.calcMaxCanvasHeight=function(){return g.configGroups().length>0?g.rowFactory.parsedData.filter(function(a){return a[i]===!1}).length*g.config.rowHeight:g.filteredData().length*g.config.rowHeight},g.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0},g.setRenderedRows=function(a){g.renderedRows(a),g.refreshDomSizes()},g.minRowsToRender=function(){var a=g.viewportDimHeight()||1;return Math.floor(a/g.config.rowHeight)},g.refreshDomSizes=function(){g.rootDim.outerWidth(g.elementDims.rootMaxW),g.rootDim.outerHeight(g.elementDims.rootMaxH),g.maxCanvasHt(g.calcMaxCanvasHeight())},g.buildColumnDefsFromData=function(){var c=g.sortedData();if(g.config.columnDefs||(g.config.columnDefs=[]),!c||!c[0])return void(g.lateBoundColumns=!0);var d;d=c[0],a.kg.utils.forIn(d,function(a,c){c!=b&&g.config.columnDefs.push({field:c})})},g.buildColumns=function(){var b=g.config.columnDefs,c=[];b||(g.buildColumnDefsFromData(),b=g.config.columnDefs),g.config.displaySelectionCheckbox&&g.config.canSelectRows&&b.splice(0,0,{field:"✔",width:g.elementDims.rowSelectedCellW,sortable:!1,resizable:!1,headerCellTemplate:'<input class="kgSelectionHeader" type="checkbox" data-bind="visible: $grid.multiSelect, checked: $grid.allSelected"/>',cellTemplate:'<div class="kgSelectionCell"><input class="kgSelectionCheckbox" type="checkbox" data-bind="checked: $parent.selected" /></div>'}),b.length>0&&($.each(b,function(b,d){var e=new a.kg.Column({colDef:d,index:b,headerRowHeight:g.config.headerRowHeight,sortCallback:g.sortData,resizeOnDataCallback:g.resizeOnData,enableResize:g.config.enableColumnResize,enableSort:g.config.enableSorting},g);c.push(e);var f=g.config.groups.indexOf(d.field);f!=-1&&g.configGroups.splice(f,0,e)}),g.columns(c))},g.configureColumnWidths=function(){var b=g.config.columnDefs,c=b.length,d=[],e=[],f=0,h=0,i=g.columns();if($.each(b,function(b,c){var j=!1,k=void 0;if(a.kg.utils.isNullOrUndefined(c.width)?c.width="*":(j=!!isNaN(c.width)&&a.kg.utils.endsWith(c.width,"%"),k=j?c.width:parseInt(c.width,10)),isNaN(k)){if(k=c.width,"auto"==k){i[b].width=i[b].minWidth;var l=i[b];return void $(document).ready(function(){g.resizeOnData(l,!0)})}if(k.indexOf("*")!=-1)return f+=k.length,c.index=b,void d.push(c);if(j)return c.index=b,void e.push(c);throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}h+=i[b].width=parseInt(c.width,10)}),d.length>0){g.config.maintainColumnRatios===!1?$.noop():g.config.maintainColumnRatios=!0;var j=g.rootDim.outerWidth()-h,k=Math.floor(j/f);$.each(d,function(b,d){var e=d.width.length;if(i[d.index].width=k*e,d.index+1==c){var f=2;g.maxCanvasHt()>g.viewportDimHeight()&&(f+=a.kg.domUtilityService.ScrollW),i[d.index].width-=f}h+=i[d.index].width})}e.length>0&&$.each(e,function(a,b){var c=b.width;i[b.index].width=Math.floor(g.rootDim.outerWidth()*(parseInt(c.slice(0,-1),10)/100))}),g.columns(i),a.kg.domUtilityService.BuildStyles(g)},g.init=function(){g.selectionService=new a.kg.SelectionService(g),g.rowFactory=new a.kg.RowFactory(g),g.selectionService.Initialize(g.rowFactory),g.searchProvider=new a.kg.SearchProvider(g),g.styleProvider=new a.kg.StyleProvider(g),g.buildColumns(),a.kg.sortService.columns=g.columns,g.configGroups.subscribe(function(a){if(a){var b=[];$.each(a,function(a,c){c&&b.push(c.field||c)}),g.config.groups=b,g.rowFactory.filteredDataChanged()}}),g.filteredData.subscribe(function(){g.$$selectionPhase||(g.maxCanvasHt(g.calcMaxCanvasHeight()),g.isSorting||g.configureColumnWidths())}),g.maxCanvasHt(g.calcMaxCanvasHeight()),g.searchProvider.evalFilter(),g.refreshDomSizes()},g.prevScrollTop=0,g.prevScrollIndex=0,g.adjustScrollTop=function(b,e){if(g.prevScrollTop!==b||e){var f=Math.floor(b/g.config.rowHeight);g.prevScrollTop<b&&f<g.prevScrollIndex+d||g.prevScrollTop>b&&f>g.prevScrollIndex-d||(g.prevScrollTop=b,g.rowFactory.UpdateViewableRange(new a.kg.Range(Math.max(0,f-c),f+g.minRowsToRender()+c)),g.prevScrollIndex=f)}},g.adjustScrollLeft=function(a){g.$headerContainer&&g.$headerContainer.scrollLeft(a)},g.resizeOnData=function(b){var c=b.minWidth,d=a.kg.utils.getElementsByClassName("col"+b.index);$.each(d,function(b,d){var e;if(0===b){var f=$(d).find(".kgHeaderText");e=a.kg.utils.visualLength(f)+10}else{var g=$(d).find(".kgCellText");e=a.kg.utils.visualLength(g)+10}e>c&&(c=e)}),b.width=c=Math.min(b.maxWidth,c+7),a.kg.domUtilityService.BuildStyles(g)},g.sortData=function(b,c){g.isSorting=!0,g.sortInfo({column:b,direction:c}),g.clearSortingData(b),g.config.useExternalSorting?g.config.sortInfo(g.sortInfo.peek()):a.kg.sortService.Sort(g.sortInfo.peek(),g.sortedData),g.lastSortedColumn=b,g.isSorting=!1},g.clearSortingData=function(a){a?g.lastSortedColumn&&a!=g.lastSortedColumn&&g.lastSortedColumn.sortDirection(""):$.each(g.columns(),function(a,b){b.sortDirection("")})},g.fixColumnIndexes=function(){g.$$indexPhase=!0;var a=g.columns.peek();$.each(a,function(a,b){b.index=a}),g.$$indexPhase=!1},g.elementsNeedMeasuring=!0,g.columns=ko.observableArray([]),g.columns.subscribe(function(a){g.config.columnsChanged(a)}),g.renderedRows=ko.observableArray([]),g.headerRow=null,g.rowHeight=g.config.rowHeight,g.jqueryUITheme=ko.observable(g.config.jqueryUITheme),g.footer=null,g.selectedItems=g.config.selectedItems,g.multiSelect=g.config.multiSelect,g.footerVisible=a.kg.utils.isNullOrUndefined(g.config.displayFooter)?g.config.footerVisible:g.config.displayFooter,g.config.footerRowHeight=g.footerVisible?g.config.footerRowHeight:0,g.showColumnMenu=g.config.showColumnMenu,g.showMenu=ko.observable(!1),g.configGroups=ko.observableArray([]),g.enablePaging=g.config.enablePaging,g.pagingOptions=g.config.pagingOptions,g.rowTemplate=g.config.rowTemplate||a.kg.defaultRowTemplate(),g.headerRowTemplate=g.config.headerRowTemplate||a.kg.defaultHeaderRowTemplate(),g.config.rowTemplate&&!k.test(g.config.rowTemplate)&&(g.rowTemplate=a.kg.utils.getTemplatePromise(g.config.rowTemplate)),g.config.headerRowTemplate&&!k.test(g.config.headerRowTemplate)&&(g.headerRowTemplate=a.kg.utils.getTemplatePromise(g.config.headerRowTemplate)),g.visibleColumns=ko.computed(function(){var a=g.columns();return a.filter(function(a){var b=a.visible();return b})}),g.nonAggColumns=ko.computed(function(){return g.columns().filter(function(a){return!a.isAggCol})}),g.toggleShowMenu=function(){g.showMenu(!g.showMenu())},g.allSelected=g.config.selectAllState,g.allSelected.subscribe(function(a){g.config.beforeSelectionChange(g.sortedData.peek(),this)&&(g.selectionService.toggleSelectAll(a),g.config.afterSelectionChange(g.selectedItems.peek(),this))}),g.totalFilteredItemsLength=ko.computed(function(){return g.filteredData().length}),g.showGroupPanel=ko.computed(function(){return g.config.showGroupPanel}),g.topPanelHeight=ko.observable(g.config.showGroupPanel===!0?2*g.config.headerRowHeight:g.config.headerRowHeight),g.viewportDimHeight=ko.computed(function(){return Math.max(0,g.rootDim.outerHeight()-g.topPanelHeight()-g.config.footerRowHeight-2);
}),g.groupBy=function(b){if(!(g.sortedData().length<1)){var c=g.configGroups().indexOf(b);c==-1?(b.isGroupedBy(!0),g.configGroups.push(b),b.groupIndex(g.configGroups().length)):g.removeGroup(c),a.kg.domUtilityService.BuildStyles(g)}},g.removeGroup=function(b){var c=g.columns().filter(function(a){return a.groupIndex()==b+1})[0];c.isGroupedBy(!1),c.groupIndex(0),g.columns.splice(b,1),g.configGroups.splice(b,1),g.fixGroupIndexes(),0===g.configGroups().length&&g.fixColumnIndexes(),a.kg.domUtilityService.BuildStyles(g)},g.fixGroupIndexes=function(){$.each(g.configGroups(),function(a,b){b.groupIndex(a+1)})},g.totalRowWidth=function(){var a=0,b=g.visibleColumns();return $.each(b,function(b,c){a+=c.width}),a},g.headerScrollerDim=function(){var b=g.viewportDimHeight(),c=g.maxCanvasHt(),d=c>b,e=new a.kg.Dimension;return e.autoFitHeight=!0,e.outerWidth=g.totalRowWidth(),d?e.outerWidth+=g.elementDims.scrollW:c-b<=g.elementDims.scrollH&&(e.outerWidth+=g.elementDims.scrollW),e},g.jqueryUITheme=g.config.jqueryUITheme,g.maxRows=ko.observable(Math.max(g.config.pagingOptions.totalServerItems()||g.sortedData().length,1)),g.maxRowsDisplay=ko.computed(function(){return g.maxRows()}),g.multiSelect=ko.observable(g.config.canSelectRows&&g.config.multiSelect),g.selectedItemCount=ko.computed(function(){return g.selectedItems().length}),g.maxPages=ko.computed(function(){return g.maxRows(Math.max(g.config.pagingOptions.totalServerItems()||g.sortedData().length,1)),Math.ceil(g.maxRows()/g.pagingOptions.pageSize())}),g.pageForward=function(){var a=g.config.pagingOptions.currentPage();g.config.pagingOptions.currentPage(Math.min(a+1,g.maxPages()))},g.pageBackward=function(){var a=g.config.pagingOptions.currentPage();g.config.pagingOptions.currentPage(Math.max(a-1,1))},g.pageToFirst=function(){g.config.pagingOptions.currentPage(1)},g.pageToLast=function(){var a=g.maxPages();g.config.pagingOptions.currentPage(a)},g.cantPageForward=ko.computed(function(){var a=g.config.pagingOptions.currentPage(),b=g.maxPages();return!(a<b)}),g.cantPageBackward=ko.computed(function(){var a=g.config.pagingOptions.currentPage();return!(a>1)}),g.init()},kg.Range=function(a,b){this.topRow=a,this.bottomRow=b},a.kg.Row=function(c,d,e){var f=this;f.canSelectRows=d.canSelectRows,f.rowClasses=d.rowClasses,f.selectedItems=d.selectedItems,f.entity=c,f.selectionService=e,f.selected=ko.observable(!1),f.continueSelection=function(a){f.selectionService.ChangeSelection(f,a)},f.toggleSelected=function(a,b){if(!f.canSelectRows)return!0;var c=b.target||b;return"checkbox"==c.type&&f.selected(!f.selected()),!(!d.selectWithCheckboxOnly||"checkbox"==c.type)||!!f.beforeSelectionChange(f,b)&&(f.continueSelection(b),f.afterSelectionChange(f,b))},void 0===f.entity[b]?f.entity[b]=!1:f.selectionService.setSelection(f,f.entity[b]),f.rowIndex=ko.observable(0),f.offsetTop=ko.observable("0px"),f.rowDisplayIndex=0,f.isEven=ko.computed(function(){return f.rowIndex()%2===0}),f.isOdd=ko.computed(function(){return f.rowIndex()%2!==0}),f.beforeSelectionChange=d.beforeSelectionChangeCallback,f.afterSelectionChange=d.afterSelectionChangeCallback,f.propertyCache={},f.getProperty=function(b){return f.propertyCache[b]||(f.propertyCache[b]=a.kg.utils.evalProperty(f.entity,b))}},a.kg.SearchProvider=function(a){var b,c=this,d=[];c.extFilter=a.config.filterOptions.useExternalFilter,c.showFilter=a.config.showFilter,c.filterText=a.config.filterOptions.filterText,c.throttle=a.config.filterOptions.filterThrottle,c.fieldMap={},c.evalFilter=function(){0===d.length?a.filteredData(a.sortedData.peek().filter(function(a){return!a._destroy})):a.filteredData(a.sortedData.peek().filter(function(a){if(a._destroy)return!1;for(var b=0,e=d.length;b<e;b++){var f=d[b];if(!f.column){for(var g in a)if(a.hasOwnProperty(g)){var h=ko.utils.unwrapObservable(a[g]);if(h&&f.regex.test(h.toString()))return!0}return!1}var i=ko.utils.unwrapObservable(a[f.column])||ko.utils.unwrapObservable(a[c.fieldMap[f.columnDisplay]]);if(!i||!f.regex.test(i.toString()))return!1}return!0})),a.rowFactory.filteredDataChanged()};var e=function(a,b){try{return new RegExp(a,b)}catch(c){return new RegExp(a.replace(/(\^|\$|\(|\)|\<|\>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}},f=function(a){d=[];var b;if(b=$.trim(a)){var c=b.split(";");$.each(c,function(a,b){var c=b.split(":");if(c.length>1){var f=$.trim(c[0]),g=$.trim(c[1]);f&&g&&d.push({column:f,columnDisplay:f.replace(/\s+/g,"").toLowerCase(),regex:e(g,"i")})}else{var h=$.trim(c[0]);h&&d.push({column:"",regex:e(h,"i")})}})}},g=ko.computed(function(){var a=c.filterText();c.extFilter||a==b||(b=a,f(a),c.evalFilter())});"number"==typeof c.throttle&&g.extend({throttle:c.throttle}),c.extFilter||a.columns.subscribe(function(a){$.each(a,function(a,b){c.fieldMap[b.displayName().toLowerCase().replace(/\s+/g,"")]=b.field})})},a.kg.SelectionService=function(a){var c=this;c.multi=a.config.multiSelect,c.selectedItems=a.config.selectedItems,c.selectedIndex=a.config.selectedIndex,c.lastClickedRow=void 0,c.ignoreSelectedItemChanges=!1,c.rowFactory={},c.Initialize=function(a){c.rowFactory=a},c.ChangeSelection=function(d,e){if(a.$$selectionPhase=!0,e&&e.shiftKey&&c.multi){if(c.lastClickedRow){var f=a.filteredData.indexOf(d.entity),g=a.filteredData.indexOf(c.lastClickedRow.entity);if(f==g)return!1;g++,f<g&&(f^=g,g=f^g,f^=g);for(var h=[];g<=f;g++)h.push(c.rowFactory.rowCache[g]);return h[h.length-1].beforeSelectionChange(h,e)&&($.each(h,function(a,d){d.selected(!0),d.entity[b]=!0,c.selectedItems.indexOf(d.entity)===-1&&c.selectedItems.push(d.entity)}),h[h.length-1].afterSelectionChange(h,e)),c.lastClickedRow=h[h.length-1],!0}}else c.multi?c.setSelection(d,!d.selected()):(c.lastClickedRow&&c.lastClickedRow!=d&&c.setSelection(c.lastClickedRow,!1),c.setSelection(d,!!a.config.keepLastSelected||!d.selected()));return c.lastClickedRow=d,a.$$selectionPhase=!1,!0},c.setSelection=function(a,d){if(a.selected(d),a.entity[b]=d,d)c.selectedItems.indexOf(a.entity)===-1&&c.selectedItems.push(a.entity);else{var e=c.selectedItems.indexOf(a.entity);c.selectedItems.splice(e,1)}},c.toggleSelectAll=function(d){var e=c.selectedItems().length;e>0&&c.selectedItems.splice(0,e),$.each(a.filteredData(),function(a,e){e[b]=d,d&&c.selectedItems.push(e)}),$.each(c.rowFactory.rowCache,function(a,b){b&&b.selected&&b.selected(d)})}},a.kg.StyleProvider=function(b){b.canvasStyle=ko.computed(function(){return{height:b.maxCanvasHt().toString()+"px"}}),b.headerScrollerStyle=ko.computed(function(){return{height:b.config.headerRowHeight+"px"}}),b.topPanelStyle=ko.computed(function(){return{width:b.rootDim.outerWidth()+"px",height:b.topPanelHeight()+"px"}}),b.headerStyle=ko.computed(function(){return{width:Math.max(0,b.rootDim.outerWidth()-a.kg.domUtilityService.ScrollW)+"px",height:b.config.headerRowHeight+"px"}}),b.viewportStyle=ko.computed(function(){return{width:b.rootDim.outerWidth()+"px",height:b.viewportDimHeight()+"px"}}),b.footerStyle=ko.computed(function(){return{width:b.rootDim.outerWidth()+"px",height:b.config.footerRowHeight+"px"}})},a.kg.sortService={colSortFnCache:{},dateRE:/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/,guessSortFn:function(b){var c,d,e,f,g;if(void 0===b||null===b||""===b)return null;switch(d=typeof b){case"number":c=a.kg.sortService.sortNumber;break;case"boolean":c=a.kg.sortService.sortBool;break;default:c=void 0}return c?c:"[object Date]"===Object.prototype.toString.call(b)?a.kg.sortService.sortDate:"string"!==d?a.kg.sortService.basicSort:b.match(/^-?[�$�]?[\d,.]+%?$/)?a.kg.sortService.sortNumberStr:(e=b.match(a.kg.sortService.dateRE),e?(f=parseInt(e[1],10),g=parseInt(e[2],10),f>12?a.kg.sortService.sortDDMMStr:g>12?a.kg.sortService.sortMMDDStr:a.kg.sortService.sortMMDDStr):a.kg.sortService.sortAlpha)},basicSort:function(a,b){return a==b?0:a<b?-1:1},sortNumber:function(a,b){return a-b},sortNumberStr:function(a,b){var c,d,e=!1,f=!1;return c=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(c)&&(e=!0),d=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(d)&&(f=!0),e&&f?0:e?1:f?-1:c-d},sortAlpha:function(a,b){var c=a.toLowerCase(),d=b.toLowerCase();return c==d?0:c<d?-1:1},sortBool:function(a,b){return a&&b?0:a||b?a?1:-1:0},sortDate:function(a,b){var c=a.getTime(),d=b.getTime();return c==d?0:c<d?-1:1},sortDDMMStr:function(b,c){var d,e,f,g,h,i;return f=b.match(a.kg.sortService.dateRE),i=f[3],g=f[2],h=f[1],1==g.length&&(g="0"+g),1==h.length&&(h="0"+h),d=i+g+h,f=c.match(a.kg.sortService.dateRE),i=f[3],g=f[2],h=f[1],1==g.length&&(g="0"+g),1==h.length&&(h="0"+h),e=i+g+h,d==e?0:d<e?-1:1},sortMMDDStr:function(b,c){var d,e,f,g,h,i;return f=b.match(a.kg.sortService.dateRE),i=f[3],h=f[2],g=f[1],1==g.length&&(g="0"+g),1==h.length&&(h="0"+h),d=i+g+h,f=c.match(dateRE),i=f[3],h=f[2],g=f[1],1==g.length&&(g="0"+g),1==h.length&&(h="0"+h),e=i+g+h,d==e?0:d<e?-1:1},sortData:function(b,c){var d=b();if(d&&c){var f,g,h=c.column,i=c.direction;if(a.kg.sortService.colSortFnCache[h.field])f=a.kg.sortService.colSortFnCache[h.field];else if(void 0!=h.sortingAlgorithm)f=h.sortingAlgorithm,a.kg.sortService.colSortFnCache[h.field]=h.sortingAlgorithm;else{if(g=d[0],!g)return;f=kg.sortService.guessSortFn(g[h.field]),f?a.kg.sortService.colSortFnCache[h.field]=f:f=a.kg.sortService.sortAlpha}d.sort(function(b,c){var d=a.kg.utils.evalProperty(b,h.field),g=a.kg.utils.evalProperty(c,h.field);return g||d?d?g?i===e?f(d,g):0-f(d,g):-1:1:0}),b(d)}},Sort:function(b,c){a.kg.sortService.isSorting||(a.kg.sortService.isSorting=!0,a.kg.sortService.sortData(c,b),a.kg.sortService.isSorting=!1)}};var l=function(){var b=$("<div></div>");b.appendTo("body"),b.height(100).width(100).css("position","absolute").css("overflow","scroll"),b.append('<div style="height: 400px; width: 400px;"></div>'),a.kg.domUtilityService.ScrollH=b.height()-b[0].clientHeight,a.kg.domUtilityService.ScrollW=b.width()-b[0].clientWidth,b.empty(),b.attr("style",""),b.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>'),a.kg.domUtilityService.LetterW=b.children().first().width(),b.remove()};a.kg.domUtilityService={AssignGridContainers:function(b,c){c.$root=$(b),c.$topPanel=c.$root.find(".kgTopPanel"),c.$groupPanel=c.$root.find(".kgGroupPanel"),c.$headerContainer=c.$topPanel.find(".kgHeaderContainer"),c.$headerScroller=c.$topPanel.find(".kgHeaderScroller"),c.$headers=c.$headerScroller.children(),c.$viewport=c.$root.find(".kgViewport"),c.$canvas=c.$viewport.find(".kgCanvas"),c.$footerPanel=c.$root.find(".ngFooterPanel"),a.kg.domUtilityService.UpdateGridLayout(c)},UpdateGridLayout:function(a){var b=a.$viewport.scrollTop();a.elementDims.rootMaxW=a.$root.width(),a.elementDims.rootMaxH=a.$root.height(),a.refreshDomSizes(),a.adjustScrollTop(b,!0)},BuildStyles:function(b){var c,d=b.config.rowHeight,e=b.$styleSheet,f=b.gridId,g=b.visibleColumns(),h=0;e||(e=$("#"+f),e[0]||(e=$("<style id='"+f+"' type='text/css' rel='stylesheet' />"),e.appendTo("body"))),e.empty();var i=b.totalRowWidth();c="."+f+" .kgCanvas { width: "+i+"px; }."+f+" .kgRow { width: "+i+"px; }."+f+" .kgCell { height: "+d+"px; }."+f+" .kgCanvas { width: "+i+"px; }."+f+" .kgHeaderCell { top: 0; bottom: 0; }."+f+" .kgHeaderScroller { width: "+(i+a.kg.domUtilityService.scrollH+2)+"px}",$.each(g,function(a,b){c+="."+f+" .col"+a+" { width: "+b.width+"px; left: "+h+"px; right: "+(i-h-b.width)+"px; height: "+d+"px }."+f+" .colt"+a+" { width: "+b.width+"px; }",h+=b.width}),a.kg.utils.isIe?e[0].styleSheet.cssText=c:e.append(document.createTextNode(c)),b.$styleSheet=e},ScrollH:17,ScrollW:17,LetterW:10},l()}(window);