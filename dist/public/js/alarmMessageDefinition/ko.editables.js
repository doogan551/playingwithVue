!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko)}(function(a,b){function c(){return"_scope"+ ++c.counter}function d(b,c,e,f){f=f||[];for(var g in b){var h=b[g];if(a.isWriteableObservable(h)&&h.editable!==!1&&(h.extend({editable:{enable:!0,scope:c}}),e.push(h)),!(a.utils.arrayIndexOf(f,h)>-1)){f.push(h);var i=a.utils.unwrapObservable(h);if("object"==typeof i){var j=a.isObservable(h);if(j){if(a.utils.arrayIndexOf(f,i)>-1)continue;f.push(i)}d(i,c,e,f)}}}}var e=function(b){return a.dependentObservable({read:b,deferEvaluation:!0})},f="",g={_observables:{},add:function(b,c){this._observables.hasOwnProperty(b)||(this._observables[b]=a.observableArray()),this._observables[b].push(c)},get:function(c){if(c=c===b?f:c,!this._observables.hasOwnProperty(c))throw new Error("Unknown scope "+c);return a.utils.unwrapObservable(this._observables[c])}};g._observables[f]=a.observableArray(),c.counter=0;var h={scalar:function(a,b){return a==b},array:function(a,b){if(a=a||[],b=b||[],a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}},i={enable:!0,scope:f};a.extenders.editable=function(c,d){if(c.hasOwnProperty("editable"))return c;if(d="object"!=typeof d?{enable:d===b||d,scope:f}:a.utils.extend(a.utils.extend({},i),d),c.editable=d.enable,!c.editable)return c;var j,k=h.scalar,l=c.inTransaction=a.observable(!1);return c.beginEdit=function(){if(!l()){var a=c();a instanceof Array&&(a=a.slice(),k=h.array),j=a,l(!0)}},c.commit=function(){l(!1)},c.rollback=function(){l()&&(c(j),l(!1))},c.oldValue=function(){return j},c.hasChanges=e(function(){var a=l()&&!k(c(),j);return a}),d.scope!==!1&&g.add(d.scope,c),c},a.editable=function(f,g){if("function"!=typeof f.beginEdit){g=g===b||g;var h=a.observableArray();f.beginEdit=function(){a.utils.arrayForEach(h(),function(a){a.beginEdit()})},f.commit=function(){a.utils.arrayForEach(h(),function(a){a.commit()})},f.rollback=function(){a.utils.arrayForEach(h(),function(a){a.rollback()})},f.hasChanges=e(function(){var b=a.utils.arrayFirst(h(),function(a){return a.hasChanges()});return null!=b});var i=c();f.addEditable=function(a){d(a,i,h,[])},g&&d(f,i,h,[])}},a.editable.enable=function(a,c){c===b&&(c=f),d(a,c,[])},a.editable.beginEdit=function(b){a.utils.arrayForEach(g.get(b),function(a){a.beginEdit()})},a.editable.commit=function(b){a.utils.arrayForEach(g.get(b),function(a){a.commit()})},a.editable.rollback=function(b){a.utils.arrayForEach(g.get(b),function(a){a.rollback()})},a.editable.hasChanges=function(a){for(var b=g.get(a),c=0,d=b.length;c<d;c++)if(b[c].hasChanges())return!0;return!1},a.editable._editables=g,a.editable.getHasChangesFlag=function(b){return e(function(){return a.editable.hasChanges(b)}).extend({throttle:100})}});