/**
 * ChromoSelector 2.1.0 for jQuery 1.3+
 *
 * All code (c) 2013 - Copyright www.chromoselector.com - All Rights Reserved.
 * Written by Rouslan Placella <info@chromoselector.com>
 * Unauthorized copying of this file, via any medium is strictly prohibited.
 */(function(a,b,c,d){function p(a,b,d){return[d+a*c.cos(b),d+a*c.sin(b)]}function q(a,b,c){return t(a,[b,b])<=c}function r(a,b,c,d){var e=function(a,b,c){return(a[0]-c[0])*(b[1]-c[1])-(b[0]-c[0])*(a[1]-c[1])},f=e(a,b,c)<0,g=e(a,c,d)<0,h=e(a,d,b)<0;return f===g&&g===h}function s(a,b){return-1/((b[1]-a[1])/(b[0]-a[0]))}function t(a,b){var d=a[0]-b[0],e=a[1]-b[1];return c.sqrt(d*d+e*e)}function u(a,b){return b*b===Infinity?[a[0],a[1]+1]:[a[0]+1,b+a[1]]}function v(a,b,c,d){var e=(d[1]-c[1])*(b[0]-a[0])-(d[0]-c[0])*(b[1]-a[1]),f=(d[0]-c[0])*(a[1]-c[1])-(d[1]-c[1])*(a[0]-c[0]),g=f/e;return[a[0]+g*(b[0]-a[0]),a[1]+g*(b[1]-a[1])]}function w(a,b,c,d){var e,f=(b+c*a.width)*4;for(e=0;e<4;e++)a.data[f+e]=d[e]}function x(a,b,c,d){var e=v(d,[d[0]+20,d[1]],a,b),f=v(d,[d[0]+20,d[1]],a,c),g;return d[0]<e[0]?g=255:d[0]>f[0]?g=0:g=(f[0]-d[0])/(f[0]-e[0])*255,[g,g,g,255]}function z(b,d){var e=b.getContext("2d"),f=a("<canvas>").attr("width",d).attr("height",d)[0],g=f.getContext("2d");if(!y.J){y.J=e.createImageData(80,80);var h,i,j,k,l,m,n,o,p=180/c.PI,q=function(a){return a%=360,a>=240?0:a>=180?255*((240-a)/60):a>=60?255:255*(a/60)};for(i=0;i<80;i++){k=i-40;for(j=0;j<80;j++)l=j-40,h=c.atan2(k,l)*p+270,m=q(h+120),n=q(h),o=q(h+240),w(y.J,i,j,[m,n,o,255])}}e.putImageData(y.J,0,0),g.scale(d/80,d/80),g.drawImage(b,0,0),e.drawImage(f,0,0)}function A(b){var d=b.L,e=b.s[1].getContext("2d");z(b.s[1],d);var f=[d/2,d/2];e[k]="destination-out",e[l]="rgba(0,0,0,1)",e.lineWidth=b.G,e.beginPath(),e.arc(f[0],f[1],b.H-b.G/2,0,c.PI*2,!0),e.closePath(),e.fill();var g=a("<canvas/>").attr("width",d).attr("height",d)[0],h=g.getContext("2d");h[i](0,0,d,d),h[k]="destination-out",h.beginPath(),h.arc(f[0],f[1],b.H+b.G/2,0,c.PI*2,!0),h.closePath(),h.fill(),e.drawImage(g,0,0),e=b.s[0].getContext("2d"),e.lineWidth=b.G-2,e.shadowColor=b.a.shadowColor,e.shadowBlur=b.a.shadow,e.beginPath(),e.arc(f[0],f[1],b.H,0,c.PI*2,!0),e.closePath(),e.stroke()}function B(a){var b=a.Color.getHsl().h,d=a.s[2],e=d.getContext("2d");e.clearRect(0,0,a.L,a.L);var f=-c.PI/2,g=E(a,f),l;if(!a.z){var m=e.createImageData(a.L,a.L),o=function(a,b){return{start:c.round(c.min(a[0][b]-3,a[1][b]-3,a[2][b]-3)),end:c.round(c.max(a[0][b]+3,a[1][b]+3,a[2][b]+3))}},p=o(g,0),q=o(g,1),r,s;for(r=g[0][0]-3;r<=p.end;r++)for(s=q.start+(1.7*(r-g[0][0])|0)-3;s<=q.end;s++)w(m,r,s,x(g[0],g[1],g[2],[r,s]));for(r=p.start;r<=g[0][0]-3;r++)for(s=q.start-(1.7*(r-g[0][0])|0)-3;s<=q.end;s++)w(m,r,s,x(g[0],g[1],g[2],[r,s]));l=a.t.getContext("2d"),l.putImageData(m,0,0);var t=l.createLinearGradient(0,q.start,0,q.end);t[h](1,"rgba(0,0,0,0)"),t[h](0,"rgba(0,0,0,1)"),l[j]=t,l[k]="destination-out",l[i](p.start,q.start,p.end,q.end),l[k]="source-over"}f=(1-b)*c.PI*2,g=E(a,f),e[j]=(new n({h:b,s:1,l:.5})).getHexString(),e[i](0,0,a.L,a.L),e.save(),e.translate(a.L/2,a.L/2),e.rotate(f+c.PI/2),e.translate(-a.L/2,-a.L/2),e.drawImage(a.t,0,0),e.restore(),e.beginPath(),e.moveTo(0,0),e.lineTo(g[1][0],g[1][1]),e.lineTo(g[0][0],g[0][1]),e.lineTo(g[2][0],g[2][1]),e.lineTo(g[1][0],g[1][1]),e.lineTo(0,0),e.lineTo(0,a.L),e.lineTo(a.L,a.L),e.lineTo(a.L,0),e.lineTo(0,0),e.closePath(),e[k]="destination-out",e[j]="rgba(0,0,0,1)",e.fill();var u=function(b,c){var d=1/(a.L/2)*2;return a.L/2*d+g[b][c]*(1-d)};e[k]="destination-over",e.beginPath(),e.moveTo(u(0,0),u(0,1)),e.lineTo(u(1,0),u(1,1)),e.lineTo(u(2,0),u(2,1)),e.closePath(),e[j]="rgba(0,0,0,1)",e.shadowColor=a.a.shadowColor,e.shadowBlur=a.a.shadow,e.fill(),e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e[k]="source-over"}function C(b){var d=b.s[3],e=d.getContext("2d");e.clearRect(0,0,b.L,b.L);var f=(1-b.Color.getHsl().h)*c.PI*2,g=E(b,f),h=p(b.H,f,b.L/2),i=[g[1][0]*b.Color.getHsl().l+(1-b.Color.getHsl().l)*g[2][0],g[1][1]*b.Color.getHsl().l+(1-b.Color.getHsl().l)*g[2][1]],j=s(g[1],g[2]),k=u(i,j),m=v(i,k,g[1],g[2]),n=t(g[1],g[2]),o=t(g[2],m),q=g[2];o>=n/2&&(q=g[1]);var r=v(i,k,g[0],q);i=[r[0]*b.Color.getHsl().s+(1-b.Color.getHsl().s)*m[0],r[1]*b.Color.getHsl().s+(1-b.Color.getHsl().s)*m[1]],a.each([h,i],function(a,b){e[l]="#fff",e.lineWidth=1.5,e.beginPath(),e.arc(b[0],b[1],6,0,c.PI*2,!0),e.closePath(),e.stroke(),e.lineWidth=2,e[l]="rgba(0,0,0,1)",e.beginPath(),e.arc(b[0],b[1],4.5,0,c.PI*2,!0),e.closePath(),e.stroke()})}function D(a,b){var c=b.getContext("2d");c.clearRect(0,0,b.width,b.height),a.n.css("border-bottom-color")?c[l]=a.n.css("border-bottom-color"):c[l]="#444",c.lineWidth=1,c.lineCap="round",c.beginPath(),c.moveTo(0,18),c.lineTo(18,0),c.moveTo(7,18),c.lineTo(18,7),c.moveTo(13,18),c.lineTo(18,13),c.closePath(),c.stroke()}function E(a,b){var d,e=[];for(d=0;d<3;d++)e[d]=p(a.r,b,a.L/2),b-=c.PI*2/3;return e}function F(a,b){var d=Y(a,b,a.d),e=c.atan2(d[0]-a.L/2,d[1]-a.L/2)*(180/c.PI)+270,f=a.Color.getHsla();a.Color.setColor({h:e/360,s:f.s,l:f.l,a:f.a}),B(a),C(a),a.D(a)}function G(a,b,c){var d=a.Color.getHsla();a.Color.setColor({h:d.h,s:b,l:c,a:d.a}),C(a),a.D(a)}function H(a){a.a.autosave&&I(a),a.a.preview&&a.j.find("div").css("background",a.Color.getRgbaString()),a.e.trigger(a.a.eventPrefix+"update")}function I(a){var b="";typeof a.a.color2str=="function"?b=a.a.color2str.call(null,a.Color):b=a.Color.getHexString(),typeof a.a.save=="function"?a.a.save.call(a.e[0],b):a.e.val(b).html(b)}function J(a,b){var c;typeof a.a.load=="function"?c=a.a.load.call(a.e):c=a.e.val()||a.e.html(),typeof a.a.str2color=="function"?a.Color=new n(a.a.str2color.call(null,c)):a.Color=new n(c),a.a.preview&&a.j&&a.j.find("div").css("background",a.Color.getRgbaString()),b&&(B(a),C(a))}function K(a,b){if(a.I){clearTimeout(a.I),a.I=0;return}a.z?(J(a),B(a),C(a)):P(a);if(typeof b!="undefined"){b=parseInt(b,10);if(b<0||isNaN(b))b=a.a.speed}else b=a.a.speed;var c=a.e.triggerHandler(a.a.eventPrefix+"beforeShow");if(typeof c=="undefined"||c){W(a),_(a);var d=a.K==="fade"?"fadeIn":"slideDown";a.n[d].call(a.n,b,function(){W(a),a.a.resizable&&D(a,a.l[0]),a.e.trigger(a.a.eventPrefix+"show")}),a.o&&a.o.setHeight(a.b.height())}}function L(a,b){a.I=setTimeout(function(){if(a.k&&a.k.find("select:focus").length)return;a.I=0;if(typeof b!="undefined"){b=parseInt(b,10);if(b<0||isNaN(b))b=a.a.speed}else b=a.a.speed;var c=a.e.triggerHandler(a.a.eventPrefix+"beforeHide");if(typeof c=="undefined"||c){var d=a.K==="fade"?"fadeOut":"slideUp";a.n[d].call(a.n,b,function(){W(a),a.e.trigger(a.a.eventPrefix+"hide")})}},100)}function M(a,b){var d=(1-a.Color.getHsl().h)*c.PI*2,e=E(a,d),f=Y(a,b,a.d),g=f;if(!r(f,e[0],e[1],e[2])){var h,i=[];for(h=0;h<3;h++)i[h]=t(e[h],f);var j=c.max.apply(null,i);for(h=0;h<3;h++)if(i[h]===j){g=N(f,e,i,h);break}}var k=O(e[0],e[1],e[2],g,a.Color.getHsl().h);G(a,k.s,k.l)}function N(a,b,d,e){var f=[0,1,2],g=[1,0,1],h=[2,2,0],i=v(a,b[f[e]],b[g[e]],b[h[e]]);if(t(i,b[f[e]])>=t(b[0],b[1])){var j,k=c.min.apply(null,d);for(j=0;j<3;j++)if(d[j]===k){i=b[j];break}}return i}function O(a,b,c,d,e){var f=s(b,c),g=u(d,f),h=v(d,g,b,c),i=t(b,c),j=t(c,h),k=c;j>=i/2&&(k=b),f=s(a,k),g=u(d,f);var l=v(d,h,a,k),m=t(h,d),n=t(h,l),o=m/n;return isNaN(o)&&(o=0),{h:e,s:o,l:j/i}}function P(a){A(a),B(a),C(a),a.z=1,a.e.trigger(a.a.eventPrefix+"ready")}function Q(a,b){var d=Y(a,b,a.d);if(a.a.panel||a.a.panelAlpha)d[0]-=a.o.getWidth();var e=V(a,c.max(d[0],d[1])+c.max(a.C[0],a.C[1]));R(a,e),a.e.trigger(a.a.eventPrefix+"resize")}function R(a,b){a.b.width(b).height(b+a.j.outerHeight()),a.a.panel||a.a.panelAlpha?(a.n.width(a.o.getWidth()+a.b.width()),a.o.setHeight(a.b.height())):a.n.width(a.b.width()),a.d.width(b).height(b),U(a,b),_(a)}function S(a,b){b!==a.L&&(a.z=0,a.L=b,a.r=b/2-15-a.a.ringwidth,a.G=a.a.ringwidth,a.H=a.L/2-a.G/2-10,a.s.each(function(){this.width=b,this.height=b}).add(a.b),a.t.width=b,a.t.height=b,R(a,b),P(a))}function T(a){a.preventDefault()}function U(a,b){if(a.a.roundcorners){b=b||a.L;var c="0px 0px 0px "+b/2+"px";!a.a.resizable&&!a.a.panel&&!a.a.panelAlpha&&(c="0px 0px "+b/2+"px "+b/2+"px"),a.n.css({"-webkit-border-radius":c,"border-radius":c})}}function V(a,b){return b|=0,a.a.maxWidth<a.a.minWidth&&(a.a.maxWidth=a.a.minWidth),b>a.a.maxWidth?b=a.a.maxWidth:b<a.a.minWidth&&(b=a.a.minWidth),b+=b%2,b}function W(c){var d=c.e.offset(),f=c.c.offset();if(!c.F){c.c.css({top:0,left:0});var g=a(e).scrollTop(),h=c.n.height(),i=d.top-g,j=g+a(b).height()-d.top-c.e.outerHeight();j<h&&i>j?(c.n.css({top:d.top-h}),c.l&&c.l.hide(),c.n.css({"-webkit-border-radius":"","border-radius":""})):(c.n.css({top:d.top+c.e.outerHeight()}),c.l&&c.l.show(),U(c));var k=a(e).scrollLeft(),l=d.left-k-2,m=d.left+c.n.width()-(k+a(b).width());if(m>0&&l>0){var n=2;l<m?n+=l:n+=m,c.n.css({left:d.left-n})}else c.n.css({left:d.left})}c.e.is(":visible")?(c.f.show().css("top",d.top-f.top+(c.e.outerHeight()-c.f.height())/2),c.a.iconpos==="left"?c.f.css("left",d.left-f.left-c.f.outerWidth()-2):c.f.css("left",d.left-f.left+c.e.outerWidth()+2)):c.f.hide()}function X(b,c){var e=d[b],f,h=["rgb","hsl","cmyk"];if(typeof c!="undefined")if(b==="panelMode")a.inArray(c,h)&&(e=c);else if(b==="panelModes")a.each(c,function(b,d){a.inArray(d,h)||delete c[b]}),e=c;else if(b==="panelChannelWidth")f=parseInt(c)||0,f>=10&&f<=40&&(e=f+f%2);else if(b==="panelChannelMargin")f=parseInt(c)||0,f>=0&&f<=50&&(e=f+f%2);else if(b==="panel"||b==="panelAlpha")e=!!c;else if(b==="shadowColor"&&typeof c=="string"&&c.length)e=(new n(c)).getRgbaString();else if(b==="effect")e=c==="slide"?"slide":"fade";else if(b==="iconpos")e=c==="left"?"left":"right";else if(b==="target"){e=null;if(typeof c=="string"||typeof c=="object"){var i=a(c);i&&typeof i[0]=="object"&&(e=i)}}else b==="icon"&&typeof c=="string"&&c.length?e=c:b==="iconalt"&&typeof c=="string"&&c.length?e=c:b==="pickerClass"&&typeof c=="string"&&c.length?e=c:b.match(/^autoshow|autosave|resizable|preview|roundcorners$/)?e=!!c:b.match(/^minWidth|maxWidth$/)?(f=parseInt(c,10)||0,e=f>100?f:100):b.match(/^speed|width|shadow|ringwidth$/)?(f=parseInt(c,10)||0,e=f>0?f:0):(new RegExp("^"+g+"$")).test(b)||/^save|load|str2color|color2str$/.test(b)?typeof c=="function"&&(e=c):b==="eventPrefix"&&typeof c=="string"&&/^\w*$/.test(c)&&(e=c);return e}function Y(a,b,c){var d=0,f=0,g=b.originalEvent,h=g.touches||g.changedTouches,i,j;a?(i=c.parent().offset(),j=a.j.outerHeight()):(i=c.offset(),j=0);if(h)d=h[0].pageX-i.left,f=h[0].pageY-i.top-j;else if(b.pageX){var k=g.clientX+e.body.scrollLeft,l=g.clientY+e.body.scrollTop;e.documentElement&&(k+=e.documentElement.scrollLeft,l+=e.documentElement.scrollTop),d=k-i.left,f=l-i.top-j}return[d,f]}function Z(a){return a.n.width()}function $(a){return a.n.height()}function _(a){var b=a.i.height();a.g.height(b),a.h.css("top","-"+b+"px").height(b);var c=a.g[0].getContext("2d");a.g[0].height=b,a.g[0].width=500,a.g.css("width","500px");var d=e.createElement("canvas");d.height=10,d.width=10;var f=d.getContext("2d");f[j]="#ccc",f[i](0,0,10,10),f[j]="#888",f[i](0,0,5,5),f[i](5,5,5,5);var g=c.createPattern(d,"repeat");c[j]=g,c[i](0,0,a.L,b)}function ab(a,b){return a.each(b)}"use strict";var e=b.document,f="chromoselector",g="create|ready|update|destroy|show|beforeShow|hide|beforeHide|resize|resizeStart|resizeStop",h="addColorStop",i="fillRect",j="fillStyle",k="globalCompositeOperation",l="strokeStyle",m=function(){return function(a,b){b=b||4;var c,d,e,f=function(){e?(a.apply({},d),e=0,c=setTimeout(f,b)):c=0};return function(){d=arguments,e=1,c||f()}}}(),n=function(){function b(a){var b=this,c={r:0,g:0,b:0,a:1},r={h:0,s:0,l:0,a:1},s=!1;b.getRgba=function(){return c},b.getRgb=function(){return d(c)},b.getHsla=function(){return s?r:g(c)},b.getHsl=function(){return s?f(r):e(c)},b.getCmyk=function(){return h(c)},b.getRgbaString=function(){return j(c)},b.getRgbString=function(){return i(c)},b.getHexaString=function(){return l(c)},b.getHexString=function(){return k(c)},b.getHslaString=function(){return n(c)},b.getHslString=function(){return m(c)},b.getCmykString=function(){return o(c)},b.getTextColor=function(){return p(c)},b.setColor=function(a){var d=q(a,c,r,s);return c=d.rgba,r=d.hsla,s=d.isHsl,b},b.setAlpha=function(a){return a=parseFloat(a),!isNaN(a)&&a>=0&&a<=1&&(c.a=a,r.a=a),b},b.getAlpha=function(){return c.a},b.setColor(a)}function d(a){var b={};return b.r=a.r,b.g=a.g,b.b=a.b,b}function e(a){var b={},c=w(a);return b.h=c.h,b.s=c.s,b.l=c.l,b}function f(a){var b={};return b.h=a.h,b.s=a.s,b.l=a.l,b}function g(a){return w(a)}function h(a){return y(a)}function i(b){return"rgb("+a(b.r*255)+","+a(b.g*255)+","+a(b.b*255)+")"}function j(b){return"rgba("+a(b.r*255)+","+a(b.g*255)+","+a(b.b*255)+","+a(b.a*100)/100+")"}function k(a){return t(a)}function l(b){var c=a(b.a*255),d=c.toString(16);return c<16&&(d="0"+d),t(b)+d}function m(b){var c=w(b);return"hsl("+a(c.h*360)+","+a(c.s*100)+"%,"+a(c.l*100)+"%)"}function n(b){var c=w(b);return"hsla("+a(c.h*360)+","+a(c.s*100)+"%,"+a(c.l*100)+"%,"+a(c.a*100)/100+")"}function o(b){var c=y(b);return"device-cmyk("+a(c.c*100)/100+","+a(c.m*100)/100+","+a(c.y*100)/100+","+a(c.k*100)/100+")"}function p(a){var c=a.r*.2126+a.g*.7152+a.b*.0722;return new b(c<.35?"#fff":"#000")}function q(a,d,e,f){var g,h,i,j;if(typeof a=="string"){a=a.replace(/\s+/g,"");if(/^#/.test(a))/^#([0-9a-f]{3}){1,2}$/i.test(a)?(a.length===4&&(a=a.replace(/[0-9a-f]/gi,r)),d=u(a),d.a=1,f=!1):/^#([0-9a-f]{4}){1,2}$/i.test(a)&&(a.length===5&&(a=a.replace(/[0-9a-f]/gi,r)),d=v(a),f=!1);else if(/^rgba/.test(a)){g=a.match(/^rgba\((\d+%?),(\d+%?),(\d+%?),(\.\d+|\d+\.?\d*)\)$/);if(g&&g.length===5){g.shift(),i=g.pop()/1,i>1?i=1:i<0&&(i=0);for(h=0;h<g.length;h++)g[h].indexOf("%")!==-1?g[h]=g[h].substr(0,g[h].length-1)/100:g[h]=g[h]/255,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);d.r=g[0],d.g=g[1],d.b=g[2],d.a=i,f=!1}}else if(/^rgb/.test(a)){g=a.match(/^rgb\((\d+%?),(\d+%?),(\d+%?)\)$/);if(g&&g.length===4){g.shift();for(h=0;h<g.length;h++)g[h].indexOf("%")!==-1?g[h]=g[h].substr(0,g[h].length-1)/100:g[h]=g[h]/255,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);d.r=g[0],d.g=g[1],d.b=g[2],d.a=1,f=!1}}else if(/^hsla/.test(a)){g=a.match(/^hsla\((\d+),(\d+%),(\d+%),(\.\d+|\d+\.?\d*)\)$/);if(g&&g.length===5){g.shift(),j=g.shift()/360,j-=c.floor(j),j<0&&(j=1+j),i=g.pop()/1,i>1?i=1:i<0&&(i=0);if(g.length===2){for(h=0;h<g.length;h++)g[h]=g[h].substr(0,g[h].length-1)/100,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);f=!0,e={h:j,s:g[0],l:g[1],a:i}}}}else if(/^hsl/.test(a)){g=a.match(/^hsl\((\d+),(\d+%),(\d+%)\)$/);if(g&&g.length===4){g.shift(),j=g.shift()/360,j-=c.floor(j),j<0&&(j=1+j);for(h=0;h<g.length;h++)g[h]=g[h].substr(0,g[h].length-1)/100,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);f=!0,e={h:j,s:g[0],l:g[1],a:1}}}else if(/^device-cmyk/.test(a)){g=a.match(/^device-cmyk\((\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*)\)$/);if(g&&g.length===5){g.shift();for(h=0;h<g.length;h++)g[h]=g[h]/1,g[h]>1?g[h]=1:g[h]<0&&(g[h]=0);d=z({c:g[0],m:g[1],y:g[2],k:g[3]}),f=!1}}}else if(a instanceof b){var k=a.getRgba();s(a,"rgba")&&(d=k,f=!1)}else if(typeof a=="object"){for(h in a)a.hasOwnProperty(h)&&(a[h]=parseFloat(a[h]));s(a,"sl")&&!isNaN(a.h)?(f=!0,a.h=a.h-c.floor(a.h),a.h<0&&(a.h=1+a.h),e=a,i=1,s(a,"a")&&(i=a.a),e.a=i):s(a,"rgb")?(d=a,i=1,s(a,"a")&&(i=a.a),d.a=i,f=!1):s(a,"cmyk")&&(d=z(a),d.a=1,f=!1)}return f?{rgba:x(e),hsla:e,isHsl:f}:{rgba:d,hsla:w(d),isHsl:f}}function r(a){return a+a}function s(a,b){var c,d,e=b.split("");for(c in e)if(e.hasOwnProperty(c)){d=parseFloat(a[b[c]]);if(isNaN(d)||d<0||d>1)return 0}return 1}function t(b){var c,d,e="",f=0;for(;f<3;f++)d=a(b[["r","g","b"][f]]*255),c=d.toString(16),d<16&&(c="0"+c),e+=c;return"#"+e}function u(a){var b=0,c={};for(;b<3;b++)c[b]=parseInt("0x"+a.substring(b*2+1,b*2+3),16)/255;return{r:c[0],g:c[1],b:c[2]}}function v(a){var b=0,c={};for(;b<4;b++)c[b]=parseInt("0x"+a.substring(b*2+1,b*2+3),16)/255;return{r:c[0],g:c[1],b:c[2],a:c[3]}}function w(a){var b=a.r,d=a.g,e=a.b,f=c.max(b,d,e),g=c.min(b,d,e),h,i,j=(f+g)/2;if(f===g)h=i=0;else{var k=f-g;i=j>.5?k/(2-f-g):k/(f+g);switch(f){case b:h=(d-e)/k+(d<e?6:0);break;case d:h=(e-b)/k+2;break;case e:h=(b-d)/k+4}h/=6}return{h:h,s:i,l:j,a:a.a}}function x(a){var b,c,d;if(a.s===0)b=c=d=a.l;else{var e=function(a,b,c){return c<0?c+=1:c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},f;a.l<.5?f=a.l*(1+a.s):f=a.l+a.s-a.l*a.s;var g=2*a.l-f;b=e(g,f,a.h+1/3),c=e(g,f,a.h),d=e(g,f,a.h-1/3)}return{r:b,g:c,b:d,a:a.a}}function y(a){if(a.r===a.g&&a.g===a.b)return{c:0,m:0,y:0,k:1-a.r};var b=c.min(1-a.r,1-a.g,1-a.b);return{c:(1-a.r-b)/(1-b),m:(1-a.g-b)/(1-b),y:(1-a.b-b)/(1-b),k:b}}function z(a){return{r:1-c.min(1,a.c*(1-a.k)+a.k),g:1-c.min(1,a.m*(1-a.k)+a.k),b:1-c.min(1,a.y*(1-a.k)+a.k),a:1}}var a=c.round;return b}(),o=function(){return function(d,g,k,o,p,q,r,s,t,u,v){var w=this,x=function(){var a=K;return o&&(a+=r+s),p?K+r:N==="cmyk"?a+r*4+s*3:a+r*3+s*2},y=function(b,c,d){var e=a.extend({},b);return e[c]=d,new n(e)},z=function(){return ab.createLinearGradient(0,W-r/2-10,0,r/2+10)},A=function(a,b){L=z(),L[h](0,a.getHexString()),L[h](1,b.getHexString()),ab[l]=L},B=function(){L=z(),L[h](0,"#f00"),L[h](1/6,"#ff0"),L[h](2/6,"#0f0"),L[h](.5,"#0ff"),L[h](4/6,"#00f"),L[h](5/6,"#f0f"),L[h](1,"#f00"),ab[l]=L},C=function(a){L=z(),L[h](0,"#000"),L[h](.5,a.getHexString()),L[h](1,"#fff"),ab[l]=L},D=function(a){L=z(),L[h](0,a.getHexString()),L[h](1,"#000"),ab[l]=L},E=function(){ab.clearRect(0,0,x(),W),H();var b,c,d,f,g,k,m=10,q=0,t=function(){ab.beginPath(),ab.moveTo(m+r/2,r/2+10),ab.lineTo(m+r/2,W-r/2-10),ab.lineWidth=r,ab.lineCap="round",ab.stroke()};if(o){var u=e.createElement("canvas");u.height=10,u.width=10;var v=u.getContext("2d");v[j]="#ccc",v[i](0,0,10,10),v[j]="#888",v[i](0,0,5,5),v[i](5,5,5,5);var w=ab.createPattern(u,"repeat");ab[l]=w,t(),L=z(),L[h](0,(new n(M)).setAlpha(0).getRgbaString()),L[h](1,M.getHexString()),ab[l]=L,t(),m+=r+s,q=1}p?F():N==="rgb"?(a.each(O,function(a,b){c=y(M.getRgb(),b,0),d=y(M.getRgb(),b,1),A(c,d),t(),m+=r+s,q++}),F(M.getRgb())):N==="hsl"?(B(),t(),q++,m+=r+s,c=y(M.getHsl(),"s",0),d=y(M.getHsl(),"s",1),A(c,d),t(),q++,m+=r+s,f=a.extend({},M.getHsl()),f.l=.5,C(new n(f)),t(),F(M.getHsl())):N==="cmyk"&&(a.each("cmy".split(""),function(a,b){c=y(M.getCmyk(),b,0),d=y(M.getCmyk(),b,1),A(c,d),t(),m+=r+s,q++}),g=a.extend({},M.getCmyk()),g.k=0,g=new n(g),D(g),t(),F(M.getCmyk()))},F=function(b){var d=10,e,f,g,h,i=function(a,b,d){ab[l]=a,ab.lineWidth=b,ab.beginPath(),ab.arc(f,g,d,0,c.PI*2,!0),ab.closePath(),ab.stroke()};o&&(f=d+r/2,h=W-r-20,g=h-h*M.getAlpha()+r/2+10,d+=r+s,i("#fff",1.5,6),i("#000",2,4.5)),p||a.each(b,function(a,b){f=d+r/2,h=W-r-20,g=h-h*b+r/2+10,i("#fff",1.5,6),i("#000",2,4.5),d+=r+s})},G=function(a){ab.shadowColor=v,ab.shadowBlur=u,ab.beginPath(),ab.moveTo(a,r/2+10),ab.lineTo(a,W-r/2-10),ab.lineWidth=r-2,ab[l]="rgba(0,0,0,1)",ab.lineCap="round",ab.stroke(),ab.shadowBlur=0},H=function(){if(u>0){var b,c=10,d;o&&(b=c+r/2,G(b),c+=r+s),p||a.each(O,function(){b=c+r/2,G(b),c+=r+s})}},I=function(){var b=0;o||p?Z.append(a("<div />").text("A").width(r).css({"padding-left":10})):p||(Z.append(a("<div />").text(O[0].toUpperCase()).width(r).css({"padding-left":10})),b++);if(!p)for(;b<O.length;b++)Z.append(a("<div />").text(O[b].toUpperCase()).width(r).css({"padding-left":s}))},J=m(function(a){var b=Y(!1,a,X),e=W-r-K,g=e-c.round(b[1]-r/2-K/2);g<0?g=0:g>e&&(g=e);var h=g/e;if(o&&Q===0)M.setAlpha(h);else if(!p){var i=Q;o&&i--;var j="get"+N.charAt(0).toUpperCase()+N.slice(1),k=M[j]();k[O[i]]=h,k.a=M.getAlpha(),M=new n(k)}E(),d.trigger(f)});w.getColor=function(){return M},w.getWidth=function(){return x()},w.setAlpha=function(a){return M.setAlpha(a),w},w.setColor=function(a){return M=new n(a),E(),w},w.setHeight=function(a){return ab.clearRect(0,0,x(),W),$=Z.outerHeight(!0),U.width(x()-20),W=a-U.outerHeight(!0)-$,X.attr("height",W),E(),w},w.setMode=function(b){return a.inArray(b,S)>=0&&(U.val(b),N=b,O=b.split(""),X.attr("width",x()),E(),t&&(Z.width(x()).children().remove(),I()),U.width(x()-20)),w};var K=20,L,M=new n,N="rgb",O=N.split(""),P=0,Q=0,R=0,S=["rgb","hsl","cmyk"],U=a("<select/>");if(!p&&k.length){var V="<option/>";a.each(k,function(b,c){U.append(a(V).html(c))}),d.append(U),R=U.outerHeight(!0)}var W=q-R,X=a("<canvas/>").attr("width",x()).attr("height",W).css("display","block");d.append(X);var Z=a(),$=0;t&&(Z=a("<div />").addClass("ui-panel-labels").width(x()),I(),d.append(Z));var _=X[0],ab=_.getContext("2d");w.setMode(g),p||U.change(function(){w.setMode(a(":selected",this).val())}),d.add(Z.find("div")).bind("mousedown touchstart",function(b){a(this).is(b.target)&&T(b)}),X.bind("mousedown touchstart",function(b){T(b),Q=0;var c=10,d=Y(!1,b,a(this));while(Q<5&&!P)d[0]>c&&d[0]<c+r?(P=1,J(b)):(Q++,c+=r+s)}).bind("mousemove touchmove",function(a){var b=Y(!1,a,X),c=X.width(),d=K/2;if(b[0]>d&&b[1]>d&&b[0]<c-d&&b[1]<X.height()-d){var e=d;while(e<c){if(b[0]>e&&b[0]<r+e){X.css("cursor","crosshair");break}X.css("cursor",""),e+=r+s}}else X.css("cursor","")}),a([b,e]).bind("mousemove touchmove",function(a){P&&(T(a),J(a))}).bind("mouseup touchend",function(a){P&&(T(a),P=0,J(a))})}}(),y={},bb=function(d,g){var h=this;h.z=0,h.a=g,h.w=0,h.u=m(F),h.y=0,h.x=m(M),h.B=0,h.A=m(Q),h.D=m(H,100),h.E=m(function(a,b){a.Color.setColor(b),B(a),C(a),a.D(a)}),h.a.ringwidth>h.a.minWidth/4&&(h.a.ringwidth=c.floor(h.a.minWidth/4)),h.I=0,h.e=d,J(h),h.L=V(h,h.a.width),h.G=h.a.ringwidth,h.H=h.L/2-h.G/2-10,h.r=h.L/2-15-h.a.ringwidth;var i='<canvas width="'+h.L+'" height="'+h.L+'"></canvas>',j="";h.a.target&&h.a.target.length?(h.F=1,h.c=h.a.target,j="ui-cs-static"):(h.F=0,h.c=a("<div/>").prependTo("body").css({width:0,height:0,position:"absolute",overflow:"visible"})),h.d=a("<div/>").addClass("ui-cs-widget").css({position:"relative"}).width(h.L).height(h.L).html(i+i+i+i),h.b=a("<div/>").append(h.d).width(h.L).addClass("ui-cs-container"),h.m=a("<div/>").addClass("ui-cs-supercontainer").append(h.b),h.n=a("<div/>").addClass("ui-cs-chromoselector").addClass(h.a.pickerClass).addClass(j).append(h.m);if(h.a.panel||h.a.panelAlpha)h.k=a("<div/>").addClass("ui-cs-panel"),h.m.append(h.k),h.o=new o(h.k,h.a.panelMode,h.a.panelModes,h.a.panelAlpha,!h.a.panel,100,h.a.panelChannelWidth,h.a.panelChannelMargin,!0,h.a.shadow,h.a.shadowColor),h.o.setColor(h.Color.getRgba()),h.k.bind(f,function(){h.E(h,h.o.getColor().getHsla())}),h.e.bind(h.a.eventPrefix+"update",function(){h.o.setColor(h.Color.getHsla())}),h.k.find("select").blur(function(){L(h)}).change(function(){h.n.width(h.o.getWidth()+h.b.width())});h.a.icon?(h.f=a("<a/>",{href:"#",tabindex:"999"}).addClass("ui-cs-icon").css("position","absolute").append(a("<img/>",{alt:h.a.iconalt,src:h.a.icon}).load(function(){a(this).parent().height(a(this).height()),a(this).parent().width(a(this).width()),W(h)})),h.c.append(h.f)):h.f=a([]),h.a.resizable&&(h.l=a("<canvas />").height(20).width(20).attr("height",20).attr("width",20).addClass("ui-cs-resizer").css({position:"absolute",bottom:"0px",right:"0px"}),D(h,h.l[0]),h.m.append(h.l)),h.m.append(a("<div/>").css("clear","both")),h.i=a("<div/>").addClass("ui-cs-preview-widget").css("overflow","hidden").css("background",h.Color.getRgbaString());var k=new n(h.a.shadowColor);k.setAlpha(k.getAlpha()-.1);var l="0 0 "+c.max(0,h.a.shadow-2)+"px 0 "+k.getRgbaString();h.j=a("<div/>").addClass("ui-cs-preview-container").append(h.i.append(a("<canvas/>").css({display:"block"})).css("box-shadow",l).css("-webkit-box-shadow",l)),h.a.preview&&h.b.prepend(h.j),h.h=a("<div/>").addClass("ui-cs-preview-color").css("width","100%").css("background-color",h.Color.getRgbaString()).css("position","relative"),h.i.append(h.h),h.g=h.i.find("canvas"),_(h),U(h),h.d.height(h.L).add(h.b).width(h.L),h.a.panel||h.a.panelAlpha?h.n.width(h.o.getWidth()+h.b.width()):h.n.width(h.b.width()),h.c.append(h.n.hide()),h.s=h.d.find("canvas").css({position:"absolute",width:"100%",height:"100%"}),h.t=a(i)[0],h.K="fade",h.a.effect==="slide"&&(h.K="slide");if(h.a.autoshow){h.a.lazy?h.e.bind("mouseover."+f,function(){h.z||P(h),h.e.unbind("mouseover."+f)}):P(h);var p=h.e;h.f.length&&(p=h.f),p.bind("focus click",function(a){T(a),h.z||P(h),K(h)}).blur(function(){L(h)}),h.e.keydown(function(a){a.keyCode===27&&L(h)})}h.e.keyup(function(){h.e.trigger(h.a.eventPrefix+"update"),J(h),B(h),C(h)}),h.a.resizable&&h.l.bind("mousedown touchstart",function(a){T(a);var b=Y(h,a,h.d);h.e.trigger(h.a.eventPrefix+"resizeStart"),h.B=1,h.C=[h.L-b[0],h.L-b[1]]}),h.b.bind("mousedown touchstart",function(a){T(a);var b=Y(h,a,h.d);if(q(b,h.L/2,h.H+h.G)&&!q(b,h.L/2,h.H-h.G))h.w=1,h.u(h,a);else{var d=(1-h.Color.getHsl().h)*c.PI*2,e=E(h,d);r(b,e[0],e[1],e[2])&&(h.y=1,h.x(h,a))}}).bind("mousemove touchmove",function(a){var b=Y(h,a,h.d);if(q(b,h.L/2,h.H+h.G/2)&&!q(b,h.L/2,h.H-h.G/2))h.d.css("cursor","crosshair");else{var d=(1-h.Color.getHsl().h)*c.PI*2,e=E(h,d);r(b,e[0],e[1],e[2])?h.d.css("cursor","crosshair"):h.d.css("cursor","")}}),a([b,e]).bind("mousemove touchmove",function(a){h.w?(T(a),h.u(h,a)):h.y?(T(a),h.x(h,a)):h.B&&(T(a),h.A(h,a))}).bind("mouseup touchend",function(a){h.w?(T(a),h.w=0,F(h,a)):h.y?(T(a),h.y=0,M(h,a)):h.B&&(T(a),h.B=0,S(h,h.d.width()),W(h),h.e.trigger(h.a.eventPrefix+"resizeStop"))}).bind("resize scroll",function(a){(a.target===b||a.target===e)&&W(h)}),setTimeout(function(){W(h)},4)},cb={init:function(b){var c={};return b=b?b:{},a.each(d,function(a){c[a]=X(a,b[a])}),ab(this,function(){var b=a(this);if(!b.data(f)){b.data(f,new bb(b,c));var d=g.split("|");a.each(d,function(a){var e=d[a],g=c[e];typeof g=="function"&&b.bind(c.eventPrefix+e+"."+f,g)}),b.trigger(c.eventPrefix+"create")}})},show:function(b){return ab(this,function(){K(a(this).data(f),b)})},hide:function(b){return ab(this,function(){L(a(this).data(f),b)})},save:function(){return ab(this,function(){I(a(this).data(f))})},load:function(){return ab(this,function(){J(a(this).data(f),1)})},setColor:function(b){return ab(this,function(){var c=a(this).data(f);c.E(c,b)})},getColor:function(){return this.data(f).Color},getWidth:function(){return Z(a(this).data(f))},getHeight:function(){return $(a(this).data(f))},resize:function(b){return ab(this,function(){var c=a(this).data(f);c.e.trigger(c.a.eventPrefix+"resizeStart"),S(c,b),W(c),c.e.trigger(c.a.eventPrefix+"resize").trigger(c.a.eventPrefix+"resizeStop")})},reflow:function(){return ab(this,function(){W(a(this).data(f))})},api:function(){var a={},b=this;return a.show=function(a){return cb.show.call(b,a),this},a.hide=function(a){return cb.hide.call(b,a),this},a.save=function(){return cb.save.call(b),this},a.load=function(){return cb.load.call(b),this},a.getColor=function(){return cb.getColor.call(b)},a.getWidth=function(){return cb.getWidth.call(b)},a.getHeight=function(){return cb.getHeight.call(b)},a.setColor=function(a){return cb.setColor.call(b,a),this},a.destroy=function(){cb.destroy.call(b)},a.resize=function(a){return cb.resize.call(b,a),this},a.reflow=function(){return cb.reflow.call(b),this},a},destroy:function(){return ab(this,function(){var b=a(this).data(f);b.F?b.b.siblings().length?b.b.remove():b.c.remove():b.c.remove(),a(this).removeData(f).trigger(b.a.eventPrefix+"destroy").unbind("."+f)})}};a.fn[f]=function(b){var c=1;try{var d=e.createElement("canvas"),g=d.getContext("2d");g.createImageData(5,5)}catch(h){c=0}if(!c)return b==="getColor"?new n:b==="getWidth"||b==="getHeight"?0:this;if(cb[b])return cb[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return cb.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery."+f)},a.fn[f].defaults=function(a,b){return typeof b=="undefined"?d[a]:(d[a]=X(a,b),this)},a.fn[f].Color=n})(jQuery,window,Math,{autoshow:!0,autosave:!0,pickerClass:"",speed:400,minWidth:120,maxWidth:400,width:180,ringwidth:18,resizable:!0,shadow:6,shadowColor:"rgba(0,0,0,0.6)",preview:!0,panel:!1,panelAlpha:!1,panelChannelWidth:18,panelChannelMargin:12,panelMode:"rgb",panelModes:["rgb","hsl","cmyk"],roundcorners:!0,effect:"fade",icon:null,iconalt:"Open Color Picker",iconpos:"right",lazy:!0,target:null,eventPrefix:"",create:null,ready:null,destroy:null,update:null,beforeShow:null,show:null,beforeHide:null,hide:null,resize:null,resizeStart:null,resizeStop:null,save:null,load:null,str2color:null,color2str:null});