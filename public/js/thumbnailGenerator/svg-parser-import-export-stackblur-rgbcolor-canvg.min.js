function stackBlurImage(e,t,n,r){var i=document.getElementById(e);var s=i.naturalWidth;var o=i.naturalHeight;var u=document.getElementById(t);u.style.width=s+"px";u.style.height=o+"px";u.width=s;u.height=o;var a=u.getContext("2d");a.clearRect(0,0,s,o);a.drawImage(i,0,0);if(isNaN(n)||n<1)return;if(r)stackBlurCanvasRGBA(t,0,0,s,o,n);else stackBlurCanvasRGB(t,0,0,s,o,n)}function stackBlurCanvasRGBA(e,t,n,r,i,s){if(isNaN(s)||s<1)return;s|=0;var o=document.getElementById(e);var u=o.getContext("2d");var a;try{try{a=u.getImageData(t,n,r,i)}catch(f){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");a=u.getImageData(t,n,r,i)}catch(f){alert("Cannot access local image");throw new Error("unable to access local image data: "+f);return}}}catch(f){alert("Cannot access image");throw new Error("unable to access image data: "+f)}var l=a.data;var c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P;var H=s+s+1;var B=r<<2;var j=r-1;var F=i-1;var I=s+1;var q=I*(I+1)/2;var R=new BlurStack;var U=R;for(p=1;p<H;p++){U=U.next=new BlurStack;if(p==I)var z=U}U.next=R;var W=null;var X=null;g=m=0;var V=mul_table[s];var $=shg_table[s];for(h=0;h<i;h++){C=k=L=A=y=b=w=E=0;S=I*(O=l[m]);x=I*(M=l[m+1]);T=I*(_=l[m+2]);N=I*(D=l[m+3]);y+=q*O;b+=q*M;w+=q*_;E+=q*D;U=R;for(p=0;p<I;p++){U.r=O;U.g=M;U.b=_;U.a=D;U=U.next}for(p=1;p<I;p++){d=m+((j<p?j:p)<<2);y+=(U.r=O=l[d])*(P=I-p);b+=(U.g=M=l[d+1])*P;w+=(U.b=_=l[d+2])*P;E+=(U.a=D=l[d+3])*P;C+=O;k+=M;L+=_;A+=D;U=U.next}W=R;X=z;for(c=0;c<r;c++){l[m+3]=D=E*V>>$;if(D!=0){D=255/D;l[m]=(y*V>>$)*D;l[m+1]=(b*V>>$)*D;l[m+2]=(w*V>>$)*D}else{l[m]=l[m+1]=l[m+2]=0}y-=S;b-=x;w-=T;E-=N;S-=W.r;x-=W.g;T-=W.b;N-=W.a;d=g+((d=c+s+1)<j?d:j)<<2;C+=W.r=l[d];k+=W.g=l[d+1];L+=W.b=l[d+2];A+=W.a=l[d+3];y+=C;b+=k;w+=L;E+=A;W=W.next;S+=O=X.r;x+=M=X.g;T+=_=X.b;N+=D=X.a;C-=O;k-=M;L-=_;A-=D;X=X.next;m+=4}g+=r}for(c=0;c<r;c++){k=L=A=C=b=w=E=y=0;m=c<<2;S=I*(O=l[m]);x=I*(M=l[m+1]);T=I*(_=l[m+2]);N=I*(D=l[m+3]);y+=q*O;b+=q*M;w+=q*_;E+=q*D;U=R;for(p=0;p<I;p++){U.r=O;U.g=M;U.b=_;U.a=D;U=U.next}v=r;for(p=1;p<=s;p++){m=v+c<<2;y+=(U.r=O=l[m])*(P=I-p);b+=(U.g=M=l[m+1])*P;w+=(U.b=_=l[m+2])*P;E+=(U.a=D=l[m+3])*P;C+=O;k+=M;L+=_;A+=D;U=U.next;if(p<F){v+=r}}m=c;W=R;X=z;for(h=0;h<i;h++){d=m<<2;l[d+3]=D=E*V>>$;if(D>0){D=255/D;l[d]=(y*V>>$)*D;l[d+1]=(b*V>>$)*D;l[d+2]=(w*V>>$)*D}else{l[d]=l[d+1]=l[d+2]=0}y-=S;b-=x;w-=T;E-=N;S-=W.r;x-=W.g;T-=W.b;N-=W.a;d=c+((d=h+I)<F?d:F)*r<<2;y+=C+=W.r=l[d];b+=k+=W.g=l[d+1];w+=L+=W.b=l[d+2];E+=A+=W.a=l[d+3];W=W.next;S+=O=X.r;x+=M=X.g;T+=_=X.b;N+=D=X.a;C-=O;k-=M;L-=_;A-=D;X=X.next;m+=r}}u.putImageData(a,t,n)}function stackBlurCanvasRGB(e,t,n,r,i,s){if(isNaN(s)||s<1)return;s|=0;var o=document.getElementById(e);var u=o.getContext("2d");var a;try{try{a=u.getImageData(t,n,r,i)}catch(f){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");a=u.getImageData(t,n,r,i)}catch(f){alert("Cannot access local image");throw new Error("unable to access local image data: "+f);return}}}catch(f){alert("Cannot access image");throw new Error("unable to access image data: "+f)}var l=a.data;var c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O;var M=s+s+1;var _=r<<2;var D=r-1;var P=i-1;var H=s+1;var B=H*(H+1)/2;var j=new BlurStack;var F=j;for(p=1;p<M;p++){F=F.next=new BlurStack;if(p==H)var I=F}F.next=j;var q=null;var R=null;g=m=0;var U=mul_table[s];var z=shg_table[s];for(h=0;h<i;h++){T=N=C=y=b=w=0;E=H*(k=l[m]);S=H*(L=l[m+1]);x=H*(A=l[m+2]);y+=B*k;b+=B*L;w+=B*A;F=j;for(p=0;p<H;p++){F.r=k;F.g=L;F.b=A;F=F.next}for(p=1;p<H;p++){d=m+((D<p?D:p)<<2);y+=(F.r=k=l[d])*(O=H-p);b+=(F.g=L=l[d+1])*O;w+=(F.b=A=l[d+2])*O;T+=k;N+=L;C+=A;F=F.next}q=j;R=I;for(c=0;c<r;c++){l[m]=y*U>>z;l[m+1]=b*U>>z;l[m+2]=w*U>>z;y-=E;b-=S;w-=x;E-=q.r;S-=q.g;x-=q.b;d=g+((d=c+s+1)<D?d:D)<<2;T+=q.r=l[d];N+=q.g=l[d+1];C+=q.b=l[d+2];y+=T;b+=N;w+=C;q=q.next;E+=k=R.r;S+=L=R.g;x+=A=R.b;T-=k;N-=L;C-=A;R=R.next;m+=4}g+=r}for(c=0;c<r;c++){N=C=T=b=w=y=0;m=c<<2;E=H*(k=l[m]);S=H*(L=l[m+1]);x=H*(A=l[m+2]);y+=B*k;b+=B*L;w+=B*A;F=j;for(p=0;p<H;p++){F.r=k;F.g=L;F.b=A;F=F.next}v=r;for(p=1;p<=s;p++){m=v+c<<2;y+=(F.r=k=l[m])*(O=H-p);b+=(F.g=L=l[m+1])*O;w+=(F.b=A=l[m+2])*O;T+=k;N+=L;C+=A;F=F.next;if(p<P){v+=r}}m=c;q=j;R=I;for(h=0;h<i;h++){d=m<<2;l[d]=y*U>>z;l[d+1]=b*U>>z;l[d+2]=w*U>>z;y-=E;b-=S;w-=x;E-=q.r;S-=q.g;x-=q.b;d=c+((d=h+H)<P?d:P)*r<<2;y+=T+=q.r=l[d];b+=N+=q.g=l[d+1];w+=C+=q.b=l[d+2];q=q.next;E+=k=R.r;S+=L=R.g;x+=A=R.b;T-=k;N-=L;C-=A;R=R.next;m+=r}}u.putImageData(a,t,n)}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}function RGBColor(e){this.ok=false;if(e.charAt(0)=="#"){e=e.substr(1,6)}e=e.replace(/ /g,"");e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in t){if(e==n){e=t[n]}}var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];for(var i=0;i<r.length;i++){var s=r[i].re;var o=r[i].process;var u=s.exec(e);if(u){channels=o(u);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var e=this.r.toString(16);var t=this.g.toString(16);var n=this.b.toString(16);if(e.length==1)e="0"+e;if(t.length==1)t="0"+t;if(n.length==1)n="0"+n;return"#"+e+t+n};this.getHelpXML=function(){var e=new Array;for(var n=0;n<r.length;n++){var i=r[n].example;for(var s=0;s<i.length;s++){e[e.length]=i[s]}}for(var o in t){e[e.length]=o}var u=document.createElement("ul");u.setAttribute("id","rgbcolor-examples");for(var n=0;n<e.length;n++){try{var a=document.createElement("li");var f=new RGBColor(e[n]);var l=document.createElement("div");l.style.cssText="margin: 3px; "+"border: 1px solid black; "+"background:"+f.toHex()+"; "+"color:"+f.toHex();l.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+e[n]+" -> "+f.toRGB()+" -> "+f.toHex());a.appendChild(l);a.appendChild(c);u.appendChild(a)}catch(h){}}return u}}(function(){function e(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function t(e){return 4==e.length?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function n(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function r(e,t,n){return(null==t||null==n)&&(null==n?n=e.height/e.width*t:null==t&&(t=e.width/e.height*n)),{width:t,height:n}}function i(e,t){return"number"==typeof e.from?e.from+(e.to-e.from)*t:e instanceof SVG.Color||e instanceof SVG.Number?e.at(t):1>t?e.from:e.to}function s(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t][0],null!=e[t][1]&&(r+=e[t][1],null!=e[t][2]&&(r+=" ",r+=e[t][2],null!=e[t][3]&&(r+=" ",r+=e[t][3],r+=" ",r+=e[t][4],null!=e[t][5]&&(r+=" ",r+=e[t][5],r+=" ",r+=e[t][6],null!=e[t][7]&&(r+=" ",r+=e[t][7])))));return r+" "}function o(e){e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2}function u(e){if(e.matrix){var t=e.matrix.replace(/\s/g,"").split(",");6==t.length&&(e.a=parseFloat(t[0]),e.b=parseFloat(t[1]),e.c=parseFloat(t[2]),e.d=parseFloat(t[3]),e.e=parseFloat(t[4]),e.f=parseFloat(t[5]))}return e}if(this.SVG=function(e){return SVG.supported?(e=new SVG.Doc(e),SVG.parser||SVG.prepare(e),e):void 0},SVG.ns="http://www.w3.org/2000/svg",SVG.xmlns="http://www.w3.org/2000/xmlns/",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(e){return"Svgjs"+e.charAt(0).toUpperCase()+e.slice(1)+SVG.did++},SVG.create=function(e){var t=document.createElementNS(this.ns,e);return t.setAttribute("id",this.eid(e)),t},SVG.extend=function(){var e,t,n,r;for(e=[].slice.call(arguments),t=e.pop(),r=e.length-1;r>=0;r--)if(e[r])for(n in t)e[r].prototype[n]=t[n];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.get=function(e){var t=document.getElementById(e);return t?t.instance:void 0},SVG.prepare=function(e){var t=document.getElementsByTagName("body")[0],n=(t?new SVG.Doc(t):e.nested()).size(2,2),r=SVG.create("path");n.node.appendChild(r),SVG.parser={body:t||e.parent,draw:n.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:n.polyline().node,path:r}},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,SVG.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&SVG.extend(t,e.extend),e.construct&&SVG.extend(e.parent||SVG.Container,e.construct),t},SVG.regex={unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif)(\?[^=]+.*)?/i},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(e){var n;this.r=0,this.g=0,this.b=0,"string"==typeof e?SVG.regex.isRgb.test(e)?(n=SVG.regex.rgb.exec(e.replace(/\s/g,"")),this.r=parseInt(n[1]),this.g=parseInt(n[2]),this.b=parseInt(n[3])):SVG.regex.isHex.test(e)&&(n=SVG.regex.hex.exec(t(e)),this.r=parseInt(n[1],16),this.g=parseInt(n[2],16),this.b=parseInt(n[3],16)):"object"==typeof e&&(this.r=e.r,this.g=e.g,this.b=e.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+n(this.r)+n(this.g)+n(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return.3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)},morph:function(e){return this.destination=new SVG.Color(e),this},at:function(e){return this.destination?(e=0>e?0:e>1?1:e,new SVG.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),SVG.Color.test=function(e){return e+="",SVG.regex.isHex.test(e)||SVG.regex.isRgb.test(e)},SVG.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},SVG.Color.isColor=function(e){return SVG.Color.isRgb(e)||SVG.Color.test(e)},SVG.Array=function(e,t){e=(e||[]).valueOf(),0==e.length&&t&&(e=t.valueOf()),this.value=this.parse(e)},SVG.extend(SVG.Array,{morph:function(e){if(this.destination=this.parse(e),this.value.length!=this.destination.length){for(var t=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(t)}return this},settle:function(){for(var e=0,t=this.value.length,n=[];t>e;e++)-1==n.indexOf(this.value[e])&&n.push(this.value[e]);return this.value=n},at:function(e){if(!this.destination)return this;for(var t=0,n=this.value.length,r=[];n>t;t++)r.push(this.value[t]+(this.destination[t]-this.value[t])*e);return new SVG.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)},split:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")},reverse:function(){return this.value.reverse(),this}}),SVG.PointArray=function(){this.constructor.apply(this,arguments)},SVG.PointArray.prototype=new SVG.Array,SVG.extend(SVG.PointArray,{toString:function(){for(var e=0,t=this.value.length,n=[];t>e;e++)n.push(this.value[e].join(","));return n.join(" ")},at:function(e){if(!this.destination)return this;for(var t=0,n=this.value.length,r=[];n>t;t++)r.push([this.value[t][0]+(this.destination[t][0]-this.value[t][0])*e,this.value[t][1]+(this.destination[t][1]-this.value[t][1])*e]);return new SVG.PointArray(r)},parse:function(e){if(e=e.valueOf(),Array.isArray(e))return e;e=this.split(e);for(var t,n=0,r=e.length,i=[];r>n;n++)t=e[n].split(","),i.push([parseFloat(t[0]),parseFloat(t[1])]);return i},move:function(e,t){var n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(var r=this.value.length-1;r>=0;r--)this.value[r]=[this.value[r][0]+e,this.value[r][1]+t];return this},size:function(e,t){var n,r=this.bbox();for(n=this.value.length-1;n>=0;n--)this.value[n][0]=(this.value[n][0]-r.x)*e/r.width+r.x,this.value[n][1]=(this.value[n][1]-r.y)*t/r.height+r.x;return this},bbox:function(){return SVG.parser.poly.setAttribute("points",this.toString()),SVG.parser.poly.getBBox()}}),SVG.PathArray=function(e,t){this.constructor.call(this,e,t)},SVG.PathArray.prototype=new SVG.Array,SVG.extend(SVG.PathArray,{toString:function(){return s(this.value)},move:function(e,t){var n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(var r,i=this.value.length-1;i>=0;i--)r=this.value[i][0],"M"==r||"L"==r||"T"==r?(this.value[i][1]+=e,this.value[i][2]+=t):"H"==r?this.value[i][1]+=e:"V"==r?this.value[i][1]+=t:"C"==r||"S"==r||"Q"==r?(this.value[i][1]+=e,this.value[i][2]+=t,this.value[i][3]+=e,this.value[i][4]+=t,"C"==r&&(this.value[i][5]+=e,this.value[i][6]+=t)):"A"==r&&(this.value[i][6]+=e,this.value[i][7]+=t);return this},size:function(e,t){var n,r,i=this.bbox();for(n=this.value.length-1;n>=0;n--)r=this.value[n][0],"M"==r||"L"==r||"T"==r?(this.value[n][1]=(this.value[n][1]-i.x)*e/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*t/i.height+i.y):"H"==r?this.value[n][1]=(this.value[n][1]-i.x)*e/i.width+i.x:"V"==r?this.value[n][1]=(this.value[n][1]-i.y)*t/i.height+i.y:"C"==r||"S"==r||"Q"==r?(this.value[n][1]=(this.value[n][1]-i.x)*e/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*t/i.height+i.y,this.value[n][3]=(this.value[n][3]-i.x)*e/i.width+i.x,this.value[n][4]=(this.value[n][4]-i.y)*t/i.height+i.y,"C"==r&&(this.value[n][5]=(this.value[n][5]-i.x)*e/i.width+i.x,this.value[n][6]=(this.value[n][6]-i.y)*t/i.height+i.y)):"A"==r&&(this.value[n][1]=this.value[n][1]*e/i.width,this.value[n][2]=this.value[n][2]*t/i.height,this.value[n][6]=(this.value[n][6]-i.x)*e/i.width+i.x,this.value[n][7]=(this.value[n][7]-i.y)*t/i.height+i.y);return this},parse:function(e){if(e instanceof SVG.PathArray)return e.valueOf();var t,n,r,i,o,u,a,f,l,c,h,p=0,d=0;for(SVG.parser.path.setAttribute("d","string"==typeof e?e:s(e)),h=SVG.parser.path.pathSegList,t=0,n=h.numberOfItems;n>t;++t)c=h.getItem(t),l=c.pathSegTypeAsLetter,"M"==l||"L"==l||"H"==l||"V"==l||"C"==l||"S"==l||"Q"==l||"T"==l||"A"==l?("x"in c&&(p=c.x),"y"in c&&(d=c.y)):("x1"in c&&(o=p+c.x1),"x2"in c&&(a=p+c.x2),"y1"in c&&(u=d+c.y1),"y2"in c&&(f=d+c.y2),"x"in c&&(p+=c.x),"y"in c&&(d+=c.y),"m"==l?h.replaceItem(SVG.parser.path.createSVGPathSegMovetoAbs(p,d),t):"l"==l?h.replaceItem(SVG.parser.path.createSVGPathSegLinetoAbs(p,d),t):"h"==l?h.replaceItem(SVG.parser.path.createSVGPathSegLinetoHorizontalAbs(p),t):"v"==l?h.replaceItem(SVG.parser.path.createSVGPathSegLinetoVerticalAbs(d),t):"c"==l?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoCubicAbs(p,d,o,u,a,f),t):"s"==l?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoCubicSmoothAbs(p,d,a,f),t):"q"==l?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoQuadraticAbs(p,d,o,u),t):"t"==l?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoQuadraticSmoothAbs(p,d),t):"a"==l?h.replaceItem(SVG.parser.path.createSVGPathSegArcAbs(p,d,c.r1,c.r2,c.angle,c.largeArcFlag,c.sweepFlag),t):("z"==l||"Z"==l)&&(p=r,d=i)),("M"==l||"m"==l)&&(r=p,i=d);for(e=[],h=SVG.parser.path.pathSegList,t=0,n=h.numberOfItems;n>t;++t)c=h.getItem(t),l=c.pathSegTypeAsLetter,p=[l],"M"==l||"L"==l||"T"==l?p.push(c.x,c.y):"H"==l?p.push(c.x):"V"==l?p.push(c.y):"C"==l?p.push(c.x1,c.y1,c.x2,c.y2,c.x,c.y):"S"==l?p.push(c.x2,c.y2,c.x,c.y):"Q"==l?p.push(c.x1,c.y1,c.x,c.y):"A"==l&&p.push(c.r1,c.r2,c.angle,0|c.largeArcFlag,0|c.sweepFlag,c.x,c.y),e.push(p);return e},bbox:function(){return SVG.parser.path.setAttribute("d",this.toString()),SVG.parser.path.getBBox()}}),SVG.Number=function(e){if(this.value=0,this.unit="","number"==typeof e)this.value=isNaN(e)?0:isFinite(e)?e:0>e?-3.4e38:3.4e38;else if("string"==typeof e){var t=e.match(SVG.regex.unit);t&&(this.value=parseFloat(t[1]),"%"==t[2]?this.value/=100:"s"==t[2]&&(this.value*=1e3),this.unit=t[2])}else e instanceof SVG.Number&&(this.value=e.value,this.unit=e.unit)},SVG.extend(SVG.Number,{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},valueOf:function(){return this.value},plus:function(e){return this.value=this+new SVG.Number(e),this},minus:function(e){return this.plus(-(new SVG.Number(e)))},times:function(e){return this.value=this*new SVG.Number(e),this},divide:function(e){return this.value=this/new SVG.Number(e),this},to:function(e){return"string"==typeof e&&(this.unit=e),this},morph:function(e){return this.destination=new SVG.Number(e),this},at:function(e){return this.destination?(new SVG.Number(this.destination)).minus(this).times(e).plus(this):this}}),SVG.ViewBox=function(e){var t,n,r,i,s=1,o=1,u=e.bbox(),a=(e.attr("viewBox")||"").match(/-?[\d\.]+/g);for(r=new SVG.Number(e.width()),i=new SVG.Number(e.height());"%"==r.unit;)s*=r.value,r=new SVG.Number(e instanceof SVG.Doc?e.parent.offsetWidth:e.width());for(;"%"==i.unit;)o*=i.value,i=new SVG.Number(e instanceof SVG.Doc?e.parent.offsetHeight:e.height());this.x=u.x,this.y=u.y,this.width=r*s,this.height=i*o,this.zoom=1,a&&(t=parseFloat(a[0]),n=parseFloat(a[1]),r=parseFloat(a[2]),i=parseFloat(a[3]),this.zoom=this.width/this.height>r/i?this.height/i:this.width/r,this.x=t,this.y=n,this.width=r,this.height=i)},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(e){var t;if(this.x=0,this.y=0,this.width=0,this.height=0,e){try{t=e.node.getBBox()}catch(n){t={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}this.x=t.x+e.trans.x,this.y=t.y+e.trans.y,this.width=t.width*e.trans.scaleX,this.height=t.height*e.trans.scaleY}o(this)},SVG.extend(SVG.BBox,{merge:function(e){var t=new SVG.BBox;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,o(t),t}}),SVG.RBox=function(e){var t,n,r={};if(this.x=0,this.y=0,this.width=0,this.height=0,e){for(t=e.doc().parent,n=e.doc().viewbox().zoom,r=e.node.getBoundingClientRect(),this.x=r.left,this.y=r.top,this.x-=t.offsetLeft,this.y-=t.offsetTop;t=t.offsetParent;)this.x-=t.offsetLeft,this.y-=t.offsetTop;for(t=e;t=t.parent;)"svg"==t.type&&t.viewbox&&(n*=t.viewbox().zoom,this.x-=t.x()||0,this.y-=t.y()||0)}this.x/=n,this.y/=n,this.width=r.width/=n,this.height=r.height/=n,o(this)},SVG.extend(SVG.RBox,{merge:function(e){var t=new SVG.RBox;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,o(t),t}}),SVG.Element=SVG.invent({create:function(e){this._stroke=SVG.defaults.attrs.stroke,this.trans=SVG.defaults.trans(),(this.node=e)&&(this.type=e.nodeName,this.node.instance=this)},extend:{x:function(e){return null!=e&&(e=new SVG.Number(e),e.value/=this.trans.scaleX),this.attr("x",e)},y:function(e){return null!=e&&(e=new SVG.Number(e),e.value/=this.trans.scaleY),this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var n=r(this.bbox(),e,t);return this.attr({width:new SVG.Number(n.width),height:new SVG.Number(n.height)})},clone:function(){var e,t,n=this.type;return e="rect"==n||"ellipse"==n?this.parent[n](0,0):"line"==n?this.parent[n](0,0,0,0):"image"==n?this.parent[n](this.src):"text"==n?this.parent[n](this.content):"path"==n?this.parent[n](this.attr("d")):"polyline"==n||"polygon"==n?this.parent[n](this.attr("points")):"g"==n?this.parent.group():this.parent[n](),t=this.attr(),delete t.id,e.attr(t),e.trans=this.trans,e.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},doc:function(e){return this._parent(e||SVG.Doc)},attr:function(e,t,n){if(null==e){for(e={},t=this.node.attributes,n=t.length-1;n>=0;n--)e[t[n].nodeName]=SVG.regex.isNumber.test(t[n].nodeValue)?parseFloat(t[n].nodeValue):t[n].nodeValue;return e}if("object"==typeof e)for(t in e)this.attr(t,e[t]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return t=this.node.getAttribute(e),null==t?SVG.defaults.attrs[e]:SVG.regex.isNumber.test(t)?parseFloat(t):t;if("style"==e)return this.style(t);"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),("fill"==e||"stroke"==e)&&(SVG.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof SVG.Image&&(t=this.doc().defs().pattern(0,0,function(){this.add(t)}))),"number"==typeof t?t=new SVG.Number(t):SVG.Color.isColor(t)?t=new SVG.Color(t):Array.isArray(t)&&(t=new SVG.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof n?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this},transform:function(e,t){if(0==arguments.length)return this.trans;if("string"==typeof e){if(2>arguments.length)return this.trans[e];var n={};return n[e]=t,this.transform(n)}var n=[];e=u(e);for(t in e)null!=e[t]&&(this.trans[t]=e[t]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,e=this.trans,e.matrix!=SVG.defaults.matrix&&n.push("matrix("+e.matrix+")"),0!=e.rotation&&n.push("rotate("+e.rotation+" "+(null==e.cx?this.bbox().cx:e.cx)+" "+(null==e.cy?this.bbox().cy:e.cy)+")"),(1!=e.scaleX||1!=e.scaleY)&&n.push("scale("+e.scaleX+" "+e.scaleY+")"),0!=e.skewX&&n.push("skewX("+e.skewX+")"),0!=e.skewY&&n.push("skewY("+e.skewY+")"),(0!=e.x||0!=e.y)&&n.push("translate("+new SVG.Number(e.x/e.scaleX)+" "+new SVG.Number(e.y/e.scaleY)+")"),0==n.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",n.join(" ")),this},style:function(t,n){if(0==arguments.length)return this.node.style.cssText||"";if(2>arguments.length)if("object"==typeof t)for(n in t)this.style(n,t[n]);else{if(!SVG.regex.isCss.test(t))return this.node.style[e(t)];for(t=t.split(";"),n=0;t.length>n;n++)n=t[n].split(":"),this.style(n[0].replace(/\s+/g,""),n[1])}else this.node.style[e(t)]=null===n||SVG.regex.isBlank.test(n)?null:n;return this},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(e,t){var n=this.bbox();return e>n.x&&t>n.y&&n.x+n.width>e&&n.y+n.height>t},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},_parent:function(e){for(var t=this;null!=t&&!(t instanceof e);)t=t.parent;return t}}}),SVG.Parent=SVG.invent({create:function(e){this.constructor.call(this,e)},inherit:SVG.Element,extend:{children:function(){return this._children||(this._children=[])},add:function(e,t){return this.has(e)||(t=null==t?this.children().length:t,e.parent&&e.parent.children().splice(e.parent.index(e),1),this.children().splice(t,0,e),this.node.insertBefore(e.node,this.node.childNodes[t]||null),e.parent=this),this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return this.children().indexOf(e)},get:function(e){return this.children()[e]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(e,t){var n,r,i=this.children();for(n=0,r=i.length;r>n;n++)i[n]instanceof SVG.Element&&e.apply(i[n],[n,i]),t&&i[n]instanceof SVG.Container&&i[n].each(e,t);return this},removeElement:function(e){return this.children().splice(this.index(e),1),this.node.removeChild(e.node),e.parent=null,this},clear:function(){for(var e=this.children().length-1;e>=0;e--)this.removeElement(this.children()[e]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}}),SVG.Container=SVG.invent({create:function(e){this.constructor.call(this,e)},inherit:SVG.Parent,extend:{viewbox:function(e){return 0==arguments.length?new SVG.ViewBox(this):(e=1==arguments.length?[e.x,e.y,e.width,e.height]:[].slice.call(arguments),this.attr("viewBox",e))}}}),SVG.FX=SVG.invent({create:function(e){this.target=e},extend:{animate:function(e,t,n){var r,s,o,u,a=this.target,f=this;return"object"==typeof e&&(n=e.delay,t=e.ease,e=e.duration),e="="==e?e:null==e?1e3:(new SVG.Number(e)).valueOf(),t=t||"<>",f.to=function(e){var n;if(e=0>e?0:e>1?1:e,null==r){r=[];for(u in f.attrs)r.push(u);if(a.morphArray&&(f._plot||r.indexOf("points")>-1)){var l,c=new a.morphArray(f._plot||f.attrs.points||a.array);f._size&&c.size(f._size.width.to,f._size.height.to),l=c.bbox(),f._x?c.move(f._x.to,l.y):f._cx&&c.move(f._cx.to-l.width/2,l.y),l=c.bbox(),f._y?c.move(l.x,f._y.to):f._cy&&c.move(l.x,f._cy.to-l.height/2),delete f._x,delete f._y,delete f._cx,delete f._cy,delete f._size,f._plot=a.array.morph(c)}}if(null==s){s=[];for(u in f.trans)s.push(u)}if(null==o){o=[];for(u in f.styles)o.push(u)}for(e="<>"==t?-Math.cos(e*Math.PI)/2+.5:">"==t?Math.sin(e*Math.PI/2):"<"==t?-Math.cos(e*Math.PI/2)+1:"-"==t?e:"function"==typeof t?t(e):e,f._plot?a.plot(f._plot.at(e)):(f._x?a.x(f._x.at(e)):f._cx&&a.cx(f._cx.at(e)),f._y?a.y(f._y.at(e)):f._cy&&a.cy(f._cy.at(e)),f._size&&a.size(f._size.width.at(e),f._size.height.at(e))),f._viewbox&&a.viewbox(f._viewbox.x.at(e),f._viewbox.y.at(e),f._viewbox.width.at(e),f._viewbox.height.at(e)),f._leading&&a.leading(f._leading.at(e)),n=r.length-1;n>=0;n--)a.attr(r[n],i(f.attrs[r[n]],e));for(n=s.length-1;n>=0;n--)a.transform(s[n],i(f.trans[s[n]],e));for(n=o.length-1;n>=0;n--)a.style(o[n],i(f.styles[o[n]],e));f._during&&f._during.call(a,e,function(t,n){return i({from:t,to:n},e)})},"number"==typeof e&&(this.timeout=setTimeout(function(){var r=(new Date).getTime();f.situation={interval:1e3/60,start:r,play:!0,finish:r+e,duration:e},f.render=function(){if(f.situation.play===!0){var r=(new Date).getTime(),i=r>f.situation.finish?1:(r-f.situation.start)/e;f.to(i),r>f.situation.finish?(f._plot&&a.plot((new SVG.PointArray(f._plot.destination)).settle()),f._loop===!0||"number"==typeof f._loop&&f._loop>1?("number"==typeof f._loop&&--f._loop,f.animate(e,t,n)):f._after?f._after.apply(a,[f]):f.stop()):requestAnimFrame(f.render)}else requestAnimFrame(f.render)},f.render()},(new SVG.Number(n)).valueOf())),this},bbox:function(){return this.target.bbox()},attr:function(e,t){if("object"==typeof e)for(var n in e)this.attr(n,e[n]);else{var r=this.target.attr(e);this.attrs[e]=SVG.Color.isColor(r)?(new SVG.Color(r)).morph(t):SVG.regex.unit.test(r)?(new SVG.Number(r)).morph(t):{from:r,to:t}}return this},transform:function(e,t){if(1==arguments.length){e=u(e),delete e.matrix;for(t in e)this.trans[t]={from:this.target.trans[t],to:e[t]}}else{var n={};n[e]=t,this.transform(n)}return this},style:function(e,t){if("object"==typeof e)for(var n in e)this.style(n,e[n]);else this.styles[e]={from:this.target.style(e),to:t};return this},x:function(e){return this._x=(new SVG.Number(this.target.x())).morph(e),this},y:function(e){return this._y=(new SVG.Number(this.target.y())).morph(e),this},cx:function(e){return this._cx=(new SVG.Number(this.target.cx())).morph(e),this},cy:function(e){return this._cy=(new SVG.Number(this.target.cy())).morph(e),this},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){if(this.target instanceof SVG.Text)this.attr("font-size",e);else{var n=this.target.bbox();this._size={width:(new SVG.Number(n.width)).morph(e),height:(new SVG.Number(n.height)).morph(t)}}return this},plot:function(e){return this._plot=e,this},leading:function(e){return this.target._leading&&(this._leading=(new SVG.Number(this.target._leading)).morph(e)),this},viewbox:function(e,t,n,r){if(this.target instanceof SVG.Container){var i=this.target.viewbox();this._viewbox={x:(new SVG.Number(i.x)).morph(e),y:(new SVG.Number(i.y)).morph(t),width:(new SVG.Number(i.width)).morph(n),height:(new SVG.Number(i.height)).morph(r)}}return this},update:function(e){return this.target instanceof SVG.Stop&&(null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new SVG.Number(e.offset))),this},during:function(e){return this._during=e,this},after:function(e){return this._after=e,this},loop:function(e){return this._loop=e||!0,this},stop:function(e){return e===!0?this.animate(0):(clearTimeout(this.timeout),this.attrs={},this.trans={},this.styles={},this.situation={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._loop,delete this._after,delete this._during,delete this._leading,delete this._viewbox),this},pause:function(){return this.situation.play===!0&&(this.situation.play=!1,this.situation.pause=(new Date).getTime()),this},play:function(){if(this.situation.play===!1){var e=(new Date).getTime()-this.situation.pause;this.situation.finish+=e,this.situation.start+=e,this.situation.play=!0}return this}},parent:SVG.Element,construct:{animate:function(e,t,n){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(e,t,n)},stop:function(e){return this.fx&&this.fx.stop(e),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),SVG.extend(SVG.Element,SVG.FX,{dx:function(e){return this.x((this.target||this).x()+e)},dy:function(e){return this.y((this.target||this).y()+e)},dmove:function(e,t){return this.dx(e).dy(t)}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(e){SVG.Element.prototype[e]=function(t){var n=this;return this.node["on"+e]="function"==typeof t?function(){return t.apply(n,arguments)}:null,this}}),SVG.on=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},SVG.off=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},SVG.extend(SVG.Element,{on:function(e,t){return SVG.on(this.node,e,t),this},off:function(e,t){return SVG.off(this.node,e,t),this}}),SVG.Defs=SVG.invent({create:"defs",inherit:SVG.Container}),SVG.G=SVG.invent({create:"g",inherit:SVG.Container,extend:{x:function(e){return null==e?this.trans.x:this.transform("x",e)},y:function(e){return null==e?this.trans.y:this.transform("y",e)},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e){return null==e?this.bbox().cy:this.y(e-this.bbox().height/2)}},construct:{group:function(){return this.put(new SVG.G)}}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){return this.parent.index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var e=this.position();return this.parent.removeElement(this).put(this,e+1)},backward:function(){var e=this.position();return e>0&&this.parent.removeElement(this).add(this,e-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(e){e.remove();var t=this.position();return this.parent.add(e,t),this},after:function(e){e.remove();var t=this.position();return this.parent.add(e,t+1),this}}),SVG.Mask=SVG.invent({create:function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unmask();return delete this.targets,this.parent.removeElement(this),this}},construct:{mask:function(){return this.defs().put(new SVG.Mask)}}}),SVG.extend(SVG.Element,{maskWith:function(e){return this.masker=e instanceof SVG.Mask?e:this.parent.mask().add(e),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.Clip=SVG.invent({create:function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unclip();return delete this.targets,this.parent.removeElement(this),this}},construct:{clip:function(){return this.defs().put(new SVG.Clip)}}}),SVG.extend(SVG.Element,{clipWith:function(e){return this.clipper=e instanceof SVG.Clip?e:this.parent.clip().add(e),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.Gradient=SVG.invent({create:function(e){this.constructor.call(this,SVG.create(e+"Gradient")),this.type=e},inherit:SVG.Container,extend:{from:function(e,t){return"radial"==this.type?this.attr({fx:new SVG.Number(e),fy:new SVG.Number(t)}):this.attr({x1:new SVG.Number(e),y1:new SVG.Number(t)})},to:function(e,t){return"radial"==this.type?this.attr({cx:new SVG.Number(e),cy:new SVG.Number(t)}):this.attr({x2:new SVG.Number(e),y2:new SVG.Number(t)})},radius:function(e){return"radial"==this.type?this.attr({r:new SVG.Number(e)}):this},at:function(e,t,n){return this.put(new SVG.Stop).update(e,t,n)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.attr("id")+")"},toString:function(){return this.fill()}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),SVG.extend(SVG.Defs,{gradient:function(e,t){return this.put(new SVG.Gradient(e)).update(t)}}),SVG.Stop=SVG.invent({create:"stop",inherit:SVG.Element,extend:{update:function(e){return("number"==typeof e||e instanceof SVG.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new SVG.Number(e.offset)),this}}}),SVG.Pattern=SVG.invent({create:"pattern",inherit:SVG.Container,extend:{fill:function(){return"url(#"+this.attr("id")+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()}},construct:{pattern:function(e,t,n){return this.defs().pattern(e,t,n)}}}),SVG.extend(SVG.Defs,{pattern:function(e,t,n){return this.put(new SVG.Pattern).update(n).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),SVG.Doc=SVG.invent({create:function(e){this.parent="string"==typeof e?document.getElementById(e):e,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xmlns:xlink",SVG.xlink,SVG.xmlns),this._defs=new SVG.Defs,this._defs.parent=this,this.node.appendChild(this._defs.node),this.doSpof=!1,this.parent!=this.node&&this.stage()},inherit:SVG.Container,extend:{stage:function(){var e=this;return this.parent.appendChild(this.node),e.spof(),SVG.on(window,"resize",function(){e.spof()}),this},defs:function(){return this._defs},spof:function(){if(this.doSpof){var e=this.node.getScreenCTM();e&&this.style("left",-e.e%1+"px").style("top",-e.f%1+"px")}return this},fixSubPixelOffset:function(){return this.doSpof=!0,this}}}),SVG.Shape=SVG.invent({create:function(e){this.constructor.call(this,e)},inherit:SVG.Element}),SVG.Use=SVG.invent({create:"use",inherit:SVG.Shape,extend:{element:function(e){return this.target=e,this.attr("href","#"+e,SVG.xlink)}},construct:{use:function(e){return this.put(new SVG.Use).element(e)}}}),SVG.Rect=SVG.invent({create:"rect",inherit:SVG.Shape,construct:{rect:function(e,t){return this.put((new SVG.Rect).size(e,t))}}}),SVG.Ellipse=SVG.invent({create:"ellipse",inherit:SVG.Shape,extend:{x:function(e){return null==e?this.cx()-this.attr("rx"):this.cx(e+this.attr("rx"))},y:function(e){return null==e?this.cy()-this.attr("ry"):this.cy(e+this.attr("ry"))},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",(new SVG.Number(e)).divide(this.trans.scaleX))},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",(new SVG.Number(e)).divide(this.trans.scaleY))},width:function(e){return null==e?2*this.attr("rx"):this.attr("rx",(new SVG.Number(e)).divide(2))},height:function(e){return null==e?2*this.attr("ry"):this.attr("ry",(new SVG.Number(e)).divide(2))},size:function(e,t){var n=r(this.bbox(),e,t);return this.attr({rx:(new SVG.Number(n.width)).divide(2),ry:(new SVG.Number(n.height)).divide(2)})}},construct:{circle:function(e){return this.ellipse(e,e)},ellipse:function(e,t){return this.put(new SVG.Ellipse).size(e,t).move(0,0)}}}),SVG.Line=SVG.invent({create:"line",inherit:SVG.Shape,extend:{x:function(e){var t=this.bbox();return null==e?t.x:this.attr({x1:this.attr("x1")-t.x+e,x2:this.attr("x2")-t.x+e})},y:function(e){var t=this.bbox();return null==e?t.y:this.attr({y1:this.attr("y1")-t.y+e,y2:this.attr("y2")-t.y+e})},cx:function(e){var t=this.bbox().width/2;return null==e?this.x()+t:this.x(e-t)},cy:function(e){var t=this.bbox().height/2;return null==e?this.y()+t:this.y(e-t)},width:function(e){var t=this.bbox();return null==e?t.width:this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",t.x+e)},height:function(e){var t=this.bbox();return null==e?t.height:this.attr(this.attr("y1")<this.attr("y2")?"y2":"y1",t.y+e)},size:function(e,t){var n=r(this.bbox(),e,t);return this.width(n.width).height(n.height)},plot:function(e,t,n,r){return this.attr({x1:e,y1:t,x2:n,y2:r})}},construct:{line:function(e,t,n,r){return this.put((new SVG.Line).plot(e,t,n,r))}}}),SVG.Polyline=SVG.invent({create:"polyline",inherit:SVG.Shape,construct:{polyline:function(e){return this.put(new SVG.Polyline).plot(e)}}}),SVG.Polygon=SVG.invent({create:"polygon",inherit:SVG.Shape,construct:{polygon:function(e){return this.put(new SVG.Polygon).plot(e)}}}),SVG.extend(SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,plot:function(e){return this.attr("points",this.array=new SVG.PointArray(e,[[0,0]]))},move:function(e,t){return this.attr("points",this.array.move(e,t))},x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)},size:function(e,t){var n=r(this.bbox(),e,t);return this.attr("points",this.array.size(n.width,n.height))}}),SVG.Path=SVG.invent({create:"path",inherit:SVG.Shape,extend:{plot:function(e){return this.attr("d",this.array=new SVG.PathArray(e,[["M",0,0]]))},move:function(e,t){return this.attr("d",this.array.move(e,t))},x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},size:function(e,t){var n=r(this.bbox(),e,t);return this.attr("d",this.array.size(n.width,n.height))},width:function(e){return null==e?this.bbox().width:this.size(e,this.bbox().height)},height:function(e){return null==e?this.bbox().height:this.size(this.bbox().width,e)}},construct:{path:function(e){return this.put(new SVG.Path).plot(e)}}}),SVG.Image=SVG.invent({create:"image",inherit:SVG.Shape,extend:{load:function(e){if(!e)return this;var t=this,n=document.createElement("img");return n.onload=function(){var r=t.doc(SVG.Pattern);0==t.width()&&0==t.height()&&t.size(n.width,n.height),r&&0==r.width()&&0==r.height()&&r.size(t.width(),t.height()),"function"==typeof t._loaded&&t._loaded.call(t,{width:n.width,height:n.height,ratio:n.width/n.height,url:e})},this.attr("href",n.src=this.src=e,SVG.xlink)},loaded:function(e){return this._loaded=e,this}},construct:{image:function(e,t,n){return this.put(new SVG.Image).load(e).size(t||0,n||t||0)}}}),SVG.Text=SVG.invent({create:function(){this.constructor.call(this,SVG.create("text")),this._leading=new SVG.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",SVG.defaults.attrs["font-family"])},inherit:SVG.Shape,extend:{x:function(e){return null==e?this.attr("x"):(this.textPath||this.lines.each(function(){this.newLined&&this.x(e)}),this.attr("x",e))},y:function(e){var t=this.attr("y")-this.bbox().y;return null==e?this.attr("y")-t:this.attr("y",e+t)},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e){return null==e?this.bbox().cy:this.y(e-this.bbox().height/2)},text:function(e){if(!e)return this.content;if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{e=(this.content=SVG.regex.isBlank.test(e)?"text":e).split("\n");for(var t=0,n=e.length;n>t;t++)this.tspan(e[t]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this._leading:(this._leading=new SVG.Number(e),this.rebuild())},rebuild:function(e){var t=this;return"boolean"==typeof e&&(this._rebuild=e),this._rebuild&&this.lines.each(function(){this.newLined&&(this.textPath||this.attr("x",t.attr("x")),this.attr("dy",t._leading*new SVG.Number(t.attr("font-size"))))}),this},build:function(e){return this._build=!!e,this}},construct:{text:function(e){return this.put(new SVG.Text).text(e)},plain:function(e){return this.put(new SVG.Text).plain(e)}}}),SVG.TSpan=SVG.invent({create:"tspan",inherit:SVG.Shape,extend:{text:function(e){return"function"==typeof e?e.call(this,this):this.plain(e),this},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.doc(SVG.Text);return this.newLined=!0,this.dy(e._leading*e.attr("font-size")).attr("x",e.x())}}}),SVG.extend(SVG.Text,SVG.TSpan,{plain:function(e){return this._build===!1&&this.clear(),this.node.appendChild(document.createTextNode(this.content=e)),this},tspan:function(e){var t=(this.textPath||this).node,n=new SVG.TSpan;return this._build===!1&&this.clear(),t.appendChild(n.node),n.parent=this,this instanceof SVG.Text&&this.lines.add(n),n.text(e)},clear:function(){for(var e=(this.textPath||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this instanceof SVG.Text&&(delete this.lines,this.lines=new SVG.Set,this.content=""),this}}),SVG.TextPath=SVG.invent({create:"textPath",inherit:SVG.Element,parent:SVG.Text,construct:{path:function(e){for(this.textPath=new SVG.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(e),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,SVG.xlink),this},plot:function(e){return this.track&&this.track.plot(e),this}}}),SVG.Nested=SVG.invent({create:function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},inherit:SVG.Container,construct:{nested:function(){return this.put(new SVG.Nested)}}}),SVG.A=SVG.invent({create:"a",inherit:SVG.Container,extend:{to:function(e){return this.attr("href",e,SVG.xlink)},show:function(e){return this.attr("show",e,SVG.xlink)},target:function(e){return this.attr("target",e)}},construct:{link:function(e){return this.put(new SVG.A).to(e)}}}),SVG.extend(SVG.Element,{linkTo:function(e){var t=new SVG.A;return"function"==typeof e?e.call(t,t):t.to(e),this.parent.put(t).put(this)}});var a={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};["fill","stroke"].forEach(function(e){var t,n={};n[e]=function(n){if("string"==typeof n||SVG.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(e,n);else for(t=a[e].length-1;t>=0;t--)null!=n[a[e][t]]&&this.attr(a.prefix(e,a[e][t]),n[a[e][t]]);return this},SVG.extend(SVG.Element,SVG.FX,n)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(e,t,n){return this.transform({rotation:e||0,cx:t,cy:n})},skew:function(e,t){return this.transform({skewX:e||0,skewY:t||0})},scale:function(e,t){return this.transform({scaleX:e,scaleY:null==t?e:t})},translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.transform({matrix:e})},opacity:function(e){return this.attr("opacity",e)}}),SVG.extend(SVG.Rect,SVG.Ellipse,SVG.FX,{radius:function(e,t){return this.attr({rx:e,ry:t||e})}}),SVG.extend(SVG.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),SVG.extend(SVG.Parent,SVG.Text,SVG.FX,{font:function(e){for(var t in e)"leading"==t?this.leading(e[t]):"anchor"==t?this.attr("text-anchor",e[t]):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e[t]):this.attr(t,e[t]);return this}}),SVG.Set=SVG.invent({create:function(){this.clear()},extend:{add:function(){var e,t,n=[].slice.call(arguments);for(e=0,t=n.length;t>e;e++)this.members.push(n[e]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,n=this.members.length;n>t;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},valueOf:function(){return this.members},bbox:function(){var e=new SVG.BBox;if(0==this.members.length)return e;var t=this.members[0].rbox();return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this.each(function(){e=e.merge(this.rbox())}),e}},construct:{set:function(){return new SVG.Set}}}),SVG.SetFX=SVG.invent({create:function(e){this.set=e}}),SVG.Set.inherit=function(){var e,t=[];for(var e in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[e]&&"function"!=typeof SVG.Set.prototype[e]&&t.push(e);t.forEach(function(e){SVG.Set.prototype[e]=function(){for(var t=0,n=this.members.length;n>t;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new SVG.SetFX(this)):this}}),t=[];for(var e in SVG.FX.prototype)"function"==typeof SVG.FX.prototype[e]&&"function"!=typeof SVG.SetFX.prototype[e]&&t.push(e);t.forEach(function(e){SVG.SetFX.prototype[e]=function(){for(var t=0,n=this.set.members.length;n>t;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}})},SVG.extend(SVG.Element,{data:function(e,t,n){if("object"==typeof e)for(t in e)this.data(t,e[t]);else if(2>arguments.length)try{return JSON.parse(this.attr("data-"+e))}catch(r){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:n===!0||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),SVG.extend(SVG.Element,{remember:function(e,t){if("object"==typeof arguments[0])for(var t in e)this.remember(t,e[t]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),"function"==typeof define&&define.amd?define(function(){return SVG}):"undefined"!=typeof exports&&(exports.SVG=SVG),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()}).call(this);(function(){SVG.parse={attr:function(e){var t,n=e.attributes||[],r={};for(t=n.length-1;t>=0;t--)r[n[t].nodeName]=n[t].nodeValue;if(typeof r.stroke!="undefined"&&typeof r["stroke-width"]=="undefined")r["stroke-width"]=1;return r},transform:function(e){var t,n,r,i={},s=(e||"").match(/[A-Za-z]+\([^\)]+\)/g)||[],o=SVG.defaults.trans();for(t=s.length-1;t>=0;t--){n=s[t].match(/([A-Za-z]+)\(([^\)]+)\)/);r=(n[2]||"").replace(/^\s+/,"").replace(/,/g," ").replace(/\s+/g," ").split(" ");switch(n[1]){case"matrix":i.a=SVG.regex.isNumber.test(r[0])?parseFloat(r[0]):o.a;i.b=parseFloat(r[1])||o.b;i.c=parseFloat(r[2])||o.c;i.d=SVG.regex.isNumber.test(r[3])?parseFloat(r[3]):o.d;i.e=parseFloat(r[4])||o.e;i.f=parseFloat(r[5])||o.f;break;case"rotate":i.rotation=parseFloat(r[0])||o.rotation;i.cx=parseFloat(r[1])||o.cx;i.cy=parseFloat(r[2])||o.cy;break;case"scale":i.scaleX=SVG.regex.isNumber.test(r[0])?parseFloat(r[0]):o.scaleX;i.scaleY=SVG.regex.isNumber.test(r[1])?parseFloat(r[1]):o.scaleY;break;case"skewX":i.skewX=parseFloat(r[0])||o.skewX;break;case"skewY":i.skewY=parseFloat(r[0])||o.skewY;break;case"translate":i.x=parseFloat(r[0])||o.x;i.y=parseFloat(r[1])||o.y;break}}return i}}})();(function(){function e(t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v;for(o=0,u=t.length;o<u;o++){h=t[o];p={};v=[];c=h.nodeName.toLowerCase();p=SVG.parse.attr(h);switch(c){case"rect":case"circle":case"ellipse":l=n[c](0,0);break;case"line":l=n.line(0,0,0,0);break;case"text":if(h.childNodes.length<2){l=n[c](h.textContent)}else{var m;l=null;for(a=0;a<h.childNodes.length;a++){m=h.childNodes[a];if(m.nodeName.toLowerCase()=="tspan"){if(l===null)l=n[c](m.textContent);else l.tspan(m.textContent).attr(SVG.parse.attr(m))}}}break;case"path":l=n.path(p["d"]);break;case"polygon":case"polyline":l=n[c](p["points"]);break;case"image":l=n.image(p["xlink:href"]);break;case"g":case"svg":l=n[c=="g"?"group":"nested"]();e(h.childNodes,l,r+1,i,s);break;case"defs":e(h.childNodes,n.defs(),r+1,i,s);break;case"use":l=n.use();break;case"clippath":case"mask":l=n[c=="mask"?"mask":"clip"]();e(h.childNodes,l,r+1,i,s);break;case"lineargradient":case"radialgradient":l=n.defs().gradient(c.split("gradient")[0],function(e){for(var t=0;t<h.childNodes.length;t++){e.at({offset:0}).attr(SVG.parse.attr(h.childNodes[t])).style(h.childNodes[t].getAttribute("style"))}});break;case"#comment":case"#text":case"metadata":case"desc":break;default:break}switch(c){case"circle":p.rx=p.r;p.ry=p.r;delete p.r;break}if(l){d=SVG.parse.transform(p.transform);delete p.transform;l.attr(p).transform(d);if(l.attr("id"))i.add(l.attr("id"),l,r==0);if(c=="text")l.rebuild();if(typeof s=="function")s.call(l,r)}}return n}SVG.extend(SVG.Container,{svg:function(t,n){var r=document.createElement("div"),i=new SVG.ImportStore;r.innerHTML=t.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>");e(r.childNodes,this,0,i,n);r=null;return i}});SVG.ImportStore=function(){this._importStoreRoots=new SVG.Set;this._importStore={}};SVG.extend(SVG.ImportStore,{add:function(e,t,n){if(e){if(this._importStore[e]){var r=e;e+=Math.round(Math.random()*1e16)}this._importStore[e]=t}if(n===true)this._importStoreRoots.add(t);return this},roots:function(e){if(typeof e=="function"){this._importStoreRoots.each(e);return this}else{return this._importStoreRoots.valueOf()}},get:function(e){return this._importStore[e]},remove:function(){return this.roots(function(){this.remove()})}})}).call(this);(function(){function e(e,t,n){if(t){var r="",s=t===true?"  ":t||"";for(i=n-1;i>=0;i--)r+=s;e=r+e+"\n"}return e}SVG.extend(SVG.Element,{exportSvg:function(t,n){var r,i,s,o,u,a,f=this.node.nodeName,l="";t=t||{};if(t.exclude==null||!t.exclude.call(this)){t=t||{};n=n||0;if(this instanceof SVG.Doc){l+=e('<?xml version="1.0" encoding="UTF-8"?>',t.whitespace,n);s=this.attr("width");o=this.attr("height");if(t.width)this.attr("width",t.width);if(t.height)this.attr("height",t.height)}l+=e("<"+f+this.attrToString()+">",t.whitespace,n);if(this instanceof SVG.Doc){this.attr({width:s,height:o});l+=e("<desc>Created with svg.js [http://svgjs.com]</desc>",t.whitespace,n+1);l+=this.defs().exportSvg(t,n+1)}if(this instanceof SVG.Parent){for(r=0,i=this.children().length;r<i;r++){l+=this.children()[r].exportSvg(t,n+1)}}else if(this instanceof SVG.Text||this instanceof SVG.TSpan){for(r=0,i=this.node.childNodes.length;r<i;r++)if(this.node.childNodes[r].instance instanceof SVG.TSpan)l+=this.node.childNodes[r].instance.exportSvg(t,n+1);else l+=this.node.childNodes[r].nodeValue.replace(/&/g,"&")}else if(SVG.ComponentTransferEffect&&this instanceof SVG.ComponentTransferEffect){this.rgb.each(function(){l+=this.exportSvg(t,n+1)})}l+=e("</"+f+">",t.whitespace,n)}return l},exportAttr:function(e){if(arguments.length==0)return this.data("svg-export-attr");return this.data("svg-export-attr",e)},attrToString:function(){var e,t,n,r=[],i=this.exportAttr(),s=this.attr();if(typeof i=="object")for(t in i)if(t!="data-svg-export-attr")s[t]=i[t];for(t in s){n=s[t];if(t=="xlink"){t="xmlns:xlink"}else if(t=="href"){if(!s["xlink:href"])t="xlink:href"}if(typeof n==="string")n=n.replace(/"/g,"'");if(t!="data-svg-export-attr"&&t!="href"){if(t!="stroke"||parseFloat(s["stroke-width"])>0)r.push(t+'="'+n+'"')}}return r.length?" "+r.join(" "):""}})}).call(this);var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];(function(){function e(e){var t={opts:e};t.FRAMERATE=30;t.MAX_VIRTUAL_PIXELS=3e4;t.log=function(e){};if(t.opts["log"]==true&&typeof console!="undefined"){t.log=function(e){console.log(e)}}t.init=function(e){var n=0;t.UniqueId=function(){n++;return"canvg"+n};t.Definitions={};t.Styles={};t.Animations=[];t.Images=[];t.ctx=e;t.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(e,t){this.viewPorts.push({width:e,height:t})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(e){if(e!=null&&typeof e=="number")return e;if(e=="x")return this.width();if(e=="y")return this.height();return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}};t.init();t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++){if(!t.Images[e].loaded)return false}return true};t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};t.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")};t.ajax=function(e){var t;if(window.XMLHttpRequest){t=new XMLHttpRequest}else{t=new ActiveXObject("Microsoft.XMLHTTP")}if(t){t.open("GET",e,false);t.send(null);return t.responseText}return null};t.parseXml=function(e){if(window.DOMParser){var t=new DOMParser;return t.parseFromString(e,"text/xml")}else{e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(e);return n}};t.Property=function(e,t){this.name=e;this.value=t};t.Property.prototype.getValue=function(){return this.value};t.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""};t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var e=parseFloat(this.value);if((this.value+"").match(/%$/)){e=e/100}return e};t.Property.prototype.valueOrDefault=function(e){if(this.hasValue())return this.value;return e};t.Property.prototype.numValueOrDefault=function(e){if(this.hasValue())return this.numValue();return e};t.Property.prototype.addOpacity=function(e){var n=this.value;if(e!=null&&e!=""&&typeof this.value=="string"){var r=new RGBColor(this.value);if(r.ok){n="rgba("+r.r+", "+r.g+", "+r.b+", "+e+")"}}return new t.Property(this.name,n)};t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);if(e){e=e[1]}if(!e){e=this.value}return t.Definitions[e]};t.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};t.Property.prototype.getFillStyleDefinition=function(e,n){var r=this.getDefinition();if(r!=null&&r.createGradient){return r.createGradient(t.ctx,e,n)}if(r!=null&&r.createPattern){if(r.getHrefAttribute().hasValue()){var i=r.attribute("patternTransform");r=r.getHrefAttribute().getDefinition();if(i.hasValue()){r.attribute("patternTransform",true).value=i.value}}return r.createPattern(t.ctx,e)}return null};t.Property.prototype.getDPI=function(e){return 96};t.Property.prototype.getEM=function(e){var n=12;var r=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);if(r.hasValue())n=r.toPixels(e);return n};t.Property.prototype.getUnits=function(){var e=this.value+"";return e.replace(/[0-9\.\-]/g,"")};t.Property.prototype.toPixels=function(e,n){if(!this.hasValue())return 0;var r=this.value+"";if(r.match(/em$/))return this.numValue()*this.getEM(e);if(r.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(r.match(/px$/))return this.numValue();if(r.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(r.match(/pc$/))return this.numValue()*15;if(r.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(r.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(r.match(/in$/))return this.numValue()*this.getDPI(e);if(r.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var i=this.numValue();if(n&&i<1)return i*t.ViewPort.ComputeSize(e);return i};t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var e=this.value+"";if(e.match(/s$/))return this.numValue()*1e3;if(e.match(/ms$/))return this.numValue();return this.numValue()};t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var e=this.value+"";if(e.match(/deg$/))return this.numValue()*(Math.PI/180);if(e.match(/grad$/))return this.numValue()*(Math.PI/200);if(e.match(/rad$/))return this.numValue();return this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};t.Property.prototype.toTextBaseline=function(){if(!this.hasValue())return null;return n[this.value]};t.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(e,n,r,i,s,o){var u=o!=null?this.Parse(o):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:s||u.fontFamily,fontSize:i||u.fontSize,fontStyle:e||u.fontStyle,fontWeight:r||u.fontWeight,fontVariant:n||u.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(n){var r={};var i=t.trim(t.compressSpaces(n||"")).split(" ");var s={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var o="";for(var u=0;u<i.length;u++){if(!s.fontStyle&&e.Styles.indexOf(i[u])!=-1){if(i[u]!="inherit")r.fontStyle=i[u];s.fontStyle=true}else if(!s.fontVariant&&e.Variants.indexOf(i[u])!=-1){if(i[u]!="inherit")r.fontVariant=i[u];s.fontStyle=s.fontVariant=true}else if(!s.fontWeight&&e.Weights.indexOf(i[u])!=-1){if(i[u]!="inherit")r.fontWeight=i[u];s.fontStyle=s.fontVariant=s.fontWeight=true}else if(!s.fontSize){if(i[u]!="inherit")r.fontSize=i[u].split("/")[0];s.fontStyle=s.fontVariant=s.fontWeight=s.fontSize=true}else{if(i[u]!="inherit")o+=i[u]}}if(o!="")r.fontFamily=o;return r}};t.ToNumberArray=function(e){var n=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" ");for(var r=0;r<n.length;r++){n[r]=parseFloat(n[r])}return n};t.Point=function(e,t){this.x=e;this.y=t};t.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)};t.Point.prototype.applyTransform=function(e){var t=this.x*e[0]+this.y*e[2]+e[4];var n=this.x*e[1]+this.y*e[3]+e[5];this.x=t;this.y=n};t.CreatePoint=function(e){var n=t.ToNumberArray(e);return new t.Point(n[0],n[1])};t.CreatePath=function(e){var n=t.ToNumberArray(e);var r=[];for(var i=0;i<n.length;i+=2){r.push(new t.Point(n[i],n[i+1]))}return r};t.BoundingBox=function(e,t,n,r){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(e,t){if(e!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=e;this.x2=e}if(e<this.x1)this.x1=e;if(e>this.x2)this.x2=e}if(t!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=t;this.y2=t}if(t<this.y1)this.y1=t;if(t>this.y2)this.y2=t}};this.addX=function(e){this.addPoint(e,null)};this.addY=function(e){this.addPoint(null,e)};this.addBoundingBox=function(e){this.addPoint(e.x1,e.y1);this.addPoint(e.x2,e.y2)};this.addQuadraticCurve=function(e,t,n,r,i,s){var o=e+2/3*(n-e);var u=t+2/3*(r-t);var a=o+1/3*(i-e);var f=u+1/3*(s-t);this.addBezierCurve(e,t,o,a,u,f,i,s)};this.addBezierCurve=function(e,t,n,r,s,o,u,a){var f=[e,t],l=[n,r],c=[s,o],h=[u,a];this.addPoint(f[0],f[1]);this.addPoint(h[0],h[1]);for(i=0;i<=1;i++){var p=function(e){return Math.pow(1-e,3)*f[i]+3*Math.pow(1-e,2)*e*l[i]+3*(1-e)*Math.pow(e,2)*c[i]+Math.pow(e,3)*h[i]};var d=6*f[i]-12*l[i]+6*c[i];var v=-3*f[i]+9*l[i]-9*c[i]+3*h[i];var m=3*l[i]-3*f[i];if(v==0){if(d==0)continue;var g=-m/d;if(0<g&&g<1){if(i==0)this.addX(p(g));if(i==1)this.addY(p(g))}continue}var y=Math.pow(d,2)-4*m*v;if(y<0)continue;var b=(-d+Math.sqrt(y))/(2*v);if(0<b&&b<1){if(i==0)this.addX(p(b));if(i==1)this.addY(p(b))}var w=(-d-Math.sqrt(y))/(2*v);if(0<w&&w<1){if(i==0)this.addX(p(w));if(i==1)this.addY(p(w))}}};this.isPointInBox=function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2};this.addPoint(e,t);this.addPoint(n,r)};t.Transform=function(e){var n=this;this.Type={};this.Type.translate=function(e){this.p=t.CreatePoint(e);this.apply=function(e){e.translate(this.p.x||0,this.p.y||0)};this.unapply=function(e){e.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(e){e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(e){var n=t.ToNumberArray(e);this.angle=new t.Property("angle",n[0]);this.cx=n[1]||0;this.cy=n[2]||0;this.apply=function(e){e.translate(this.cx,this.cy);e.rotate(this.angle.toRadians());e.translate(-this.cx,-this.cy)};this.unapply=function(e){e.translate(this.cx,this.cy);e.rotate(-1*this.angle.toRadians());e.translate(-this.cx,-this.cy)};this.applyToPoint=function(e){var t=this.angle.toRadians();e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);e.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]);e.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(e){this.p=t.CreatePoint(e);this.apply=function(e){e.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(e){e.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(e){e.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(e){this.m=t.ToNumberArray(e);this.apply=function(e){e.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(e){e.applyTransform(this.m)}};this.Type.SkewBase=function(e){this.base=n.Type.matrix;this.base(e);this.angle=new t.Property("angle",e)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(e){this.base=n.Type.SkewBase;this.base(e);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(e){this.base=n.Type.SkewBase;this.base(e);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(e){for(var t=0;t<this.transforms.length;t++){this.transforms[t].apply(e)}};this.unapply=function(e){for(var t=this.transforms.length-1;t>=0;t--){this.transforms[t].unapply(e)}};this.applyToPoint=function(e){for(var t=0;t<this.transforms.length;t++){this.transforms[t].applyToPoint(e)}};var r=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var i=0;i<r.length;i++){var s=t.trim(r[i].split("(")[0]);var o=r[i].split("(")[1].replace(")","");var u=new this.Type[s](o);u.type=s;this.transforms.push(u)}};t.AspectRatio=function(e,n,r,i,s,o,u,a,f,l){n=t.compressSpaces(n);n=n.replace(/^defer\s/,"");var c=n.split(" ")[0]||"xMidYMid";var h=n.split(" ")[1]||"meet";var p=r/i;var d=s/o;var v=Math.min(p,d);var m=Math.max(p,d);if(h=="meet"){i*=v;o*=v}if(h=="slice"){i*=m;o*=m}f=new t.Property("refX",f);l=new t.Property("refY",l);if(f.hasValue()&&l.hasValue()){e.translate(-v*f.toPixels("x"),-v*l.toPixels("y"))}else{if(c.match(/^xMid/)&&(h=="meet"&&v==d||h=="slice"&&m==d))e.translate(r/2-i/2,0);if(c.match(/YMid$/)&&(h=="meet"&&v==p||h=="slice"&&m==p))e.translate(0,s/2-o/2);if(c.match(/^xMax/)&&(h=="meet"&&v==d||h=="slice"&&m==d))e.translate(r-i,0);if(c.match(/YMax$/)&&(h=="meet"&&v==p||h=="slice"&&m==p))e.translate(0,s-o)}if(c=="none")e.scale(p,d);else if(h=="meet")e.scale(v,v);else if(h=="slice")e.scale(m,m);e.translate(u==null?0:-u,a==null?0:-a)};t.Element={};t.EmptyProperty=new t.Property("EMPTY","");t.Element.ElementBase=function(e){this.attributes={};this.styles={};this.children=[];this.attribute=function(e,n){var r=this.attributes[e];if(r!=null)return r;if(n==true){r=new t.Property(e,"");this.attributes[e]=r}return r||t.EmptyProperty};this.getHrefAttribute=function(){for(var e in this.attributes){if(e.match(/:href$/)){return this.attributes[e]}}return t.EmptyProperty};this.style=function(e,n){var r=this.styles[e];if(r!=null)return r;var i=this.attribute(e);if(i!=null&&i.hasValue()){this.styles[e]=i;return i}var s=this.parent;if(s!=null){var o=s.style(e);if(o!=null&&o.hasValue()){return o}}if(n==true){r=new t.Property(e,"");this.styles[e]=r}return r||t.EmptyProperty};this.render=function(e){if(this.style("display").value=="none")return;if(this.style("visibility").value=="hidden")return;e.save();if(this.attribute("mask").hasValue()){var t=this.attribute("mask").getDefinition();if(t!=null)t.apply(e,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();if(n!=null)n.apply(e,this)}else{this.setContext(e);this.renderChildren(e);this.clearContext(e)}e.restore()};this.setContext=function(e){};this.clearContext=function(e){};this.renderChildren=function(e){for(var t=0;t<this.children.length;t++){this.children[t].render(e)}};this.addChild=function(e,n){var r=e;if(n)r=t.CreateElement(e);r.parent=this;this.children.push(r)};if(e!=null&&e.nodeType==1){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType==1)this.addChild(r,true);if(this.captureTextNodes&&(r.nodeType==3||r.nodeType==4)){var i=r.nodeValue||r.text||"";if(t.trim(t.compressSpaces(i))!=""){this.addChild(new t.Element.tspan(r),false)}}}for(var n=0;n<e.attributes.length;n++){var s=e.attributes[n];this.attributes[s.nodeName]=new t.Property(s.nodeName,s.nodeValue)}var o=t.Styles[e.nodeName];if(o!=null){for(var u in o){this.styles[u]=o[u]}}if(this.attribute("class").hasValue()){var a=t.compressSpaces(this.attribute("class").value).split(" ");for(var f=0;f<a.length;f++){o=t.Styles["."+a[f]];if(o!=null){for(var u in o){this.styles[u]=o[u]}}o=t.Styles[e.nodeName+"."+a[f]];if(o!=null){for(var u in o){this.styles[u]=o[u]}}}}if(this.attribute("id").hasValue()){var o=t.Styles["#"+this.attribute("id").value];if(o!=null){for(var u in o){this.styles[u]=o[u]}}}if(this.attribute("style").hasValue()){var o=this.attribute("style").value.split(";");for(var n=0;n<o.length;n++){if(t.trim(o[n])!=""){var l=o[n].split(":");var u=t.trim(l[0]);var c=t.trim(l[1]);this.styles[u]=new t.Property(u,c)}}}if(this.attribute("id").hasValue()){if(t.Definitions[this.attribute("id").value]==null){t.Definitions[this.attribute("id").value]=this}}}};t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase;this.base(e);this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(n!=null)e.fillStyle=n}else if(this.style("fill").hasValue()){var r=this.style("fill");if(r.value=="currentColor")r.value=this.style("color").value;e.fillStyle=r.value=="none"?"rgba(0,0,0,0)":r.value}if(this.style("fill-opacity").hasValue()){var r=new t.Property("fill",e.fillStyle);r=r.addOpacity(this.style("fill-opacity").value);e.fillStyle=r.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(n!=null)e.strokeStyle=n}else if(this.style("stroke").hasValue()){var i=this.style("stroke");if(i.value=="currentColor")i.value=this.style("color").value;e.strokeStyle=i.value=="none"?"rgba(0,0,0,0)":i.value}if(this.style("stroke-opacity").hasValue()){var i=new t.Property("stroke",e.strokeStyle);i=i.addOpacity(this.style("stroke-opacity").value);e.strokeStyle=i.value}if(this.style("stroke-width").hasValue()){var s=this.style("stroke-width").toPixels();e.lineWidth=s==0?.001:s}if(this.style("stroke-linecap").hasValue())e.lineCap=this.style("stroke-linecap").value;if(this.style("stroke-linejoin").hasValue())e.lineJoin=this.style("stroke-linejoin").value;if(this.style("stroke-miterlimit").hasValue())e.miterLimit=this.style("stroke-miterlimit").value;if(this.style("stroke-dasharray").hasValue()&&this.style("stroke-dasharray").value!="none"){var o=t.ToNumberArray(this.style("stroke-dasharray").value);if(typeof e.setLineDash!="undefined"){e.setLineDash(o)}else if(typeof e.webkitLineDash!="undefined"){e.webkitLineDash=o}else if(typeof e.mozDash!="undefined"){e.mozDash=o}var u=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof e.lineDashOffset!="undefined"){e.lineDashOffset=u}else if(typeof e.webkitLineDashOffset!="undefined"){e.webkitLineDashOffset=u}else if(typeof e.mozDashOffset!="undefined"){e.mozDashOffset=u}}if(typeof e.font!="undefined"){e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var a=new t.Transform(this.attribute("transform").value);a.apply(e)}if(this.style("clip-path").hasValue()){var f=this.style("clip-path").getDefinition();if(f!=null)f.apply(e)}if(this.style("opacity").hasValue()){e.globalAlpha=this.style("opacity").numValue()}}};t.Element.RenderedElementBase.prototype=new t.Element.ElementBase;t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase;this.base(e);this.path=function(e){if(e!=null)e.beginPath();return new t.BoundingBox};this.renderChildren=function(e){this.path(e);t.Mouse.checkPath(this,e);if(e.fillStyle!=""){if(this.attribute("fill-rule").valueOrDefault("inherit")!="inherit"){e.fill(this.attribute("fill-rule").value)}else{e.fill()}}if(e.strokeStyle!="")e.stroke();var n=this.getMarkers();if(n!=null){if(this.style("marker-start").isUrlDefinition()){var r=this.style("marker-start").getDefinition();r.render(e,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition()){var r=this.style("marker-mid").getDefinition();for(var i=1;i<n.length-1;i++){r.render(e,n[i][0],n[i][1])}}if(this.style("marker-end").isUrlDefinition()){var r=this.style("marker-end").getDefinition();r.render(e,n[n.length-1][0],n[n.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase;t.Element.svg=function(e){this.base=t.Element.RenderedElementBase;this.base(e);this.baseClearContext=this.clearContext;this.clearContext=function(e){this.baseClearContext(e);t.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)";e.lineCap="butt";e.lineJoin="miter";e.miterLimit=4;if(typeof e.font!="undefined"&&typeof window.getComputedStyle!="undefined"){e.font=window.getComputedStyle(e.canvas).getPropertyValue("font")}this.baseSetContext(e);if(!this.attribute("x").hasValue())this.attribute("x",true).value=0;if(!this.attribute("y").hasValue())this.attribute("y",true).value=0;e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=t.ViewPort.width();var r=t.ViewPort.height();if(!this.attribute("width").hasValue())this.attribute("width",true).value="100%";if(!this.attribute("height").hasValue())this.attribute("height",true).value="100%";if(typeof this.root=="undefined"){n=this.attribute("width").toPixels("x");r=this.attribute("height").toPixels("y");var i=0;var s=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){i=-this.attribute("refX").toPixels("x");s=-this.attribute("refY").toPixels("y")}if(this.attribute("overflow").valueOrDefault("hidden")!="visible"){e.beginPath();e.moveTo(i,s);e.lineTo(n,s);e.lineTo(n,r);e.lineTo(i,r);e.closePath();e.clip()}}t.ViewPort.SetCurrent(n,r);if(this.attribute("viewBox").hasValue()){var o=t.ToNumberArray(this.attribute("viewBox").value);var u=o[0];var a=o[1];n=o[2];r=o[3];t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),n,t.ViewPort.height(),r,u,a,this.attribute("refX").value,this.attribute("refY").value);t.ViewPort.RemoveCurrent();t.ViewPort.SetCurrent(o[2],o[3])}}};t.Element.svg.prototype=new t.Element.RenderedElementBase;t.Element.rect=function(e){this.base=t.Element.PathElementBase;this.base(e);this.path=function(e){var n=this.attribute("x").toPixels("x");var r=this.attribute("y").toPixels("y");var i=this.attribute("width").toPixels("x");var s=this.attribute("height").toPixels("y");var o=this.attribute("rx").toPixels("x");var u=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue())u=o;if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue())o=u;o=Math.min(o,i/2);u=Math.min(u,s/2);if(e!=null){e.beginPath();e.moveTo(n+o,r);e.lineTo(n+i-o,r);e.quadraticCurveTo(n+i,r,n+i,r+u);e.lineTo(n+i,r+s-u);e.quadraticCurveTo(n+i,r+s,n+i-o,r+s);e.lineTo(n+o,r+s);e.quadraticCurveTo(n,r+s,n,r+s-u);e.lineTo(n,r+u);e.quadraticCurveTo(n,r,n+o,r);e.closePath()}return new t.BoundingBox(n,r,n+i,r+s)}};t.Element.rect.prototype=new t.Element.PathElementBase;t.Element.circle=function(e){this.base=t.Element.PathElementBase;this.base(e);this.path=function(e){var n=this.attribute("cx").toPixels("x");var r=this.attribute("cy").toPixels("y");var i=this.attribute("r").toPixels();if(e!=null){e.beginPath();e.arc(n,r,i,0,Math.PI*2,true);e.closePath()}return new t.BoundingBox(n-i,r-i,n+i,r+i)}};t.Element.circle.prototype=new t.Element.PathElementBase;t.Element.ellipse=function(e){this.base=t.Element.PathElementBase;this.base(e);this.path=function(e){var n=4*((Math.sqrt(2)-1)/3);var r=this.attribute("rx").toPixels("x");var i=this.attribute("ry").toPixels("y");var s=this.attribute("cx").toPixels("x");var o=this.attribute("cy").toPixels("y");if(e!=null){e.beginPath();e.moveTo(s,o-i);e.bezierCurveTo(s+n*r,o-i,s+r,o-n*i,s+r,o);e.bezierCurveTo(s+r,o+n*i,s+n*r,o+i,s,o+i);e.bezierCurveTo(s-n*r,o+i,s-r,o+n*i,s-r,o);e.bezierCurveTo(s-r,o-n*i,s-n*r,o-i,s,o-i);e.closePath()}return new t.BoundingBox(s-r,o-i,s+r,o+i)}};t.Element.ellipse.prototype=new t.Element.PathElementBase;t.Element.line=function(e){this.base=t.Element.PathElementBase;this.base(e);this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(e){var n=this.getPoints();if(e!=null){e.beginPath();e.moveTo(n[0].x,n[0].y);e.lineTo(n[1].x,n[1].y)}return new t.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)};this.getMarkers=function(){var e=this.getPoints();var t=e[0].angleTo(e[1]);return[[e[0],t],[e[1],t]]}};t.Element.line.prototype=new t.Element.PathElementBase;t.Element.polyline=function(e){this.base=t.Element.PathElementBase;this.base(e);this.points=t.CreatePath(this.attribute("points").value);this.path=function(e){var n=new t.BoundingBox(this.points[0].x,this.points[0].y);if(e!=null){e.beginPath();e.moveTo(this.points[0].x,this.points[0].y)}for(var r=1;r<this.points.length;r++){n.addPoint(this.points[r].x,this.points[r].y);if(e!=null)e.lineTo(this.points[r].x,this.points[r].y)}return n};this.getMarkers=function(){var e=[];for(var t=0;t<this.points.length-1;t++){e.push([this.points[t],this.points[t].angleTo(this.points[t+1])])}e.push([this.points[this.points.length-1],e[e.length-1][1]]);return e}};t.Element.polyline.prototype=new t.Element.PathElementBase;t.Element.polygon=function(e){this.base=t.Element.polyline;this.base(e);this.basePath=this.path;this.path=function(e){var t=this.basePath(e);if(e!=null){e.lineTo(this.points[0].x,this.points[0].y);e.closePath()}return t}};t.Element.polygon.prototype=new t.Element.polyline;t.Element.path=function(e){this.base=t.Element.PathElementBase;this.base(e);var n=this.attribute("d").value;n=n.replace(/,/gm," ");n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");n=n.replace(/([0-9])([+\-])/gm,"$1 $2");n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");n=t.compressSpaces(n);n=t.trim(n);this.PathParser=new function(e){this.tokens=e.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new t.Point(0,0);this.control=new t.Point(0,0);this.current=new t.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd())return true;return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)};this.getAsControlPoint=function(){var e=this.getPoint();this.control=e;return e};this.getAsCurrentPoint=function(){var e=this.getPoint();this.current=e;return e};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var e=new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e};this.makeAbsolute=function(e){if(this.isRelativeCommand()){e.x+=this.current.x;e.y+=this.current.y}return e};this.addMarker=function(e,t,n){if(n!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)}this.addMarkerAngle(e,t==null?null:t.angleTo(e))};this.addMarkerAngle=function(e,t){this.points.push(e);this.angles.push(t)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++){if(this.angles[e]==null){for(var t=e+1;t<this.angles.length;t++){if(this.angles[t]!=null){this.angles[e]=this.angles[t];break}}}}return this.angles}}(n);this.path=function(e){var n=this.PathParser;n.reset();var r=new t.BoundingBox;if(e!=null)e.beginPath();while(!n.isEnd()){n.nextCommand();switch(n.command){case"M":case"m":var i=n.getAsCurrentPoint();n.addMarker(i);r.addPoint(i.x,i.y);if(e!=null)e.moveTo(i.x,i.y);n.start=n.current;while(!n.isCommandOrEnd()){var i=n.getAsCurrentPoint();n.addMarker(i,n.start);r.addPoint(i.x,i.y);if(e!=null)e.lineTo(i.x,i.y)}break;case"L":case"l":while(!n.isCommandOrEnd()){var s=n.current;var i=n.getAsCurrentPoint();n.addMarker(i,s);r.addPoint(i.x,i.y);if(e!=null)e.lineTo(i.x,i.y)}break;case"H":case"h":while(!n.isCommandOrEnd()){var o=new t.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current);n.current=o;r.addPoint(n.current.x,n.current.y);if(e!=null)e.lineTo(n.current.x,n.current.y)}break;case"V":case"v":while(!n.isCommandOrEnd()){var o=new t.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current);n.current=o;r.addPoint(n.current.x,n.current.y);if(e!=null)e.lineTo(n.current.x,n.current.y)}break;case"C":case"c":while(!n.isCommandOrEnd()){var u=n.current;var a=n.getPoint();var f=n.getAsControlPoint();var l=n.getAsCurrentPoint();n.addMarker(l,f,a);r.addBezierCurve(u.x,u.y,a.x,a.y,f.x,f.y,l.x,l.y);if(e!=null)e.bezierCurveTo(a.x,a.y,f.x,f.y,l.x,l.y)}break;case"S":case"s":while(!n.isCommandOrEnd()){var u=n.current;var a=n.getReflectedControlPoint();var f=n.getAsControlPoint();var l=n.getAsCurrentPoint();n.addMarker(l,f,a);r.addBezierCurve(u.x,u.y,a.x,a.y,f.x,f.y,l.x,l.y);if(e!=null)e.bezierCurveTo(a.x,a.y,f.x,f.y,l.x,l.y)}break;case"Q":case"q":while(!n.isCommandOrEnd()){var u=n.current;var f=n.getAsControlPoint();var l=n.getAsCurrentPoint();n.addMarker(l,f,f);r.addQuadraticCurve(u.x,u.y,f.x,f.y,l.x,l.y);if(e!=null)e.quadraticCurveTo(f.x,f.y,l.x,l.y)}break;case"T":case"t":while(!n.isCommandOrEnd()){var u=n.current;var f=n.getReflectedControlPoint();n.control=f;var l=n.getAsCurrentPoint();n.addMarker(l,f,f);r.addQuadraticCurve(u.x,u.y,f.x,f.y,l.x,l.y);if(e!=null)e.quadraticCurveTo(f.x,f.y,l.x,l.y)}break;case"A":case"a":while(!n.isCommandOrEnd()){var u=n.current;var c=n.getScalar();var h=n.getScalar();var p=n.getScalar()*(Math.PI/180);var d=n.getScalar();var v=n.getScalar();var l=n.getAsCurrentPoint();var m=new t.Point(Math.cos(p)*(u.x-l.x)/2+Math.sin(p)*(u.y-l.y)/2,-Math.sin(p)*(u.x-l.x)/2+Math.cos(p)*(u.y-l.y)/2);var g=Math.pow(m.x,2)/Math.pow(c,2)+Math.pow(m.y,2)/Math.pow(h,2);if(g>1){c*=Math.sqrt(g);h*=Math.sqrt(g)}var y=(d==v?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(h,2)-Math.pow(c,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(c,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));if(isNaN(y))y=0;var b=new t.Point(y*c*m.y/h,y*-h*m.x/c);var w=new t.Point((u.x+l.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(u.y+l.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y);var E=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))};var S=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(E(e)*E(t))};var x=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(S(e,t))};var T=x([1,0],[(m.x-b.x)/c,(m.y-b.y)/h]);var N=[(m.x-b.x)/c,(m.y-b.y)/h];var C=[(-m.x-b.x)/c,(-m.y-b.y)/h];var k=x(N,C);if(S(N,C)<=-1)k=Math.PI;if(S(N,C)>=1)k=0;var L=1-v?1:-1;var A=T+L*(k/2);var O=new t.Point(w.x+c*Math.cos(A),w.y+h*Math.sin(A));n.addMarkerAngle(O,A-L*Math.PI/2);n.addMarkerAngle(l,A-L*Math.PI);r.addPoint(l.x,l.y);if(e!=null){var S=c>h?c:h;var M=c>h?1:c/h;var _=c>h?h/c:1;e.translate(w.x,w.y);e.rotate(p);e.scale(M,_);e.arc(0,0,S,T,T+k,1-v);e.scale(1/M,1/_);e.rotate(-p);e.translate(-w.x,-w.y)}}break;case"Z":case"z":if(e!=null)e.closePath();n.current=n.start}}return r};this.getMarkers=function(){var e=this.PathParser.getMarkerPoints();var t=this.PathParser.getMarkerAngles();var n=[];for(var r=0;r<e.length;r++){n.push([e[r],t[r]])}return n}};t.Element.path.prototype=new t.Element.PathElementBase;t.Element.pattern=function(e){this.base=t.Element.ElementBase;this.base(e);this.createPattern=function(e,n){var r=this.attribute("width").toPixels("x",true);var i=this.attribute("height").toPixels("y",true);var s=new t.Element.svg;s.attributes["viewBox"]=new t.Property("viewBox",this.attribute("viewBox").value);s.attributes["width"]=new t.Property("width",r+"px");s.attributes["height"]=new t.Property("height",i+"px");s.attributes["transform"]=new t.Property("transform",this.attribute("patternTransform").value);s.children=this.children;var o=document.createElement("canvas");o.width=r;o.height=i;var u=o.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){u.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var a=-1;a<=1;a++){for(var f=-1;f<=1;f++){u.save();u.translate(a*o.width,f*o.height);s.render(u);u.restore()}}var l=e.createPattern(o,"repeat");return l}};t.Element.pattern.prototype=new t.Element.ElementBase;t.Element.marker=function(e){this.base=t.Element.ElementBase;this.base(e);this.baseRender=this.render;this.render=function(e,n,r){e.translate(n.x,n.y);if(this.attribute("orient").valueOrDefault("auto")=="auto")e.rotate(r);if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth")e.scale(e.lineWidth,e.lineWidth);e.save();var i=new t.Element.svg;i.attributes["viewBox"]=new t.Property("viewBox",this.attribute("viewBox").value);i.attributes["refX"]=new t.Property("refX",this.attribute("refX").value);i.attributes["refY"]=new t.Property("refY",this.attribute("refY").value);i.attributes["width"]=new t.Property("width",this.attribute("markerWidth").value);i.attributes["height"]=new t.Property("height",this.attribute("markerHeight").value);i.attributes["fill"]=new t.Property("fill",this.attribute("fill").valueOrDefault("black"));i.attributes["stroke"]=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none"));i.children=this.children;i.render(e);e.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth")e.scale(1/e.lineWidth,1/e.lineWidth);if(this.attribute("orient").valueOrDefault("auto")=="auto")e.rotate(-r);e.translate(-n.x,-n.y)}};t.Element.marker.prototype=new t.Element.ElementBase;t.Element.defs=function(e){this.base=t.Element.ElementBase;this.base(e);this.render=function(e){}};t.Element.defs.prototype=new t.Element.ElementBase;t.Element.GradientBase=function(e){this.base=t.Element.ElementBase;this.base(e);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var n=0;n<this.children.length;n++){var r=this.children[n];if(r.type=="stop")this.stops.push(r)}this.getGradient=function(){};this.createGradient=function(e,n,r){var i=this;if(this.getHrefAttribute().hasValue()){i=this.getHrefAttribute().getDefinition()}var s=function(e){if(r.hasValue()){var n=new t.Property("color",e);return n.addOpacity(r.value).value}return e};var o=this.getGradient(e,n);if(o==null)return s(i.stops[i.stops.length-1].color);for(var u=0;u<i.stops.length;u++){o.addColorStop(i.stops[u].offset,s(i.stops[u].color))}if(this.attribute("gradientTransform").hasValue()){var a=t.ViewPort.viewPorts[0];var f=new t.Element.rect;f.attributes["x"]=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3);f.attributes["y"]=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3);f.attributes["width"]=new t.Property("width",t.MAX_VIRTUAL_PIXELS);f.attributes["height"]=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var l=new t.Element.g;l.attributes["transform"]=new t.Property("transform",this.attribute("gradientTransform").value);l.children=[f];var c=new t.Element.svg;c.attributes["x"]=new t.Property("x",0);c.attributes["y"]=new t.Property("y",0);c.attributes["width"]=new t.Property("width",a.width);c.attributes["height"]=new t.Property("height",a.height);c.children=[l];var h=document.createElement("canvas");h.width=a.width;h.height=a.height;var p=h.getContext("2d");p.fillStyle=o;c.render(p);return p.createPattern(h,"no-repeat")}return o}};t.Element.GradientBase.prototype=new t.Element.ElementBase;t.Element.linearGradient=function(e){this.base=t.Element.GradientBase;this.base(e);this.getGradient=function(e,t){var n=this.gradientUnits=="objectBoundingBox"?t.getBoundingBox():null;if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var r=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x");var i=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y");var s=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x");var o=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");if(r==s&&i==o)return null;return e.createLinearGradient(r,i,s,o)}};t.Element.linearGradient.prototype=new t.Element.GradientBase;t.Element.radialGradient=function(e){this.base=t.Element.GradientBase;this.base(e);this.getGradient=function(e,t){var n=t.getBoundingBox();if(!this.attribute("cx").hasValue())this.attribute("cx",true).value="50%";if(!this.attribute("cy").hasValue())this.attribute("cy",true).value="50%";if(!this.attribute("r").hasValue())this.attribute("r",true).value="50%";var r=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x");var i=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y");var s=r;var o=i;if(this.attribute("fx").hasValue()){s=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")}if(this.attribute("fy").hasValue()){o=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")}var u=this.gradientUnits=="objectBoundingBox"?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return e.createRadialGradient(s,o,0,r,i,u)}};t.Element.radialGradient.prototype=new t.Element.GradientBase;t.Element.stop=function(e){this.base=t.Element.ElementBase;this.base(e);this.offset=this.attribute("offset").numValue();if(this.offset<0)this.offset=0;if(this.offset>1)this.offset=1;var n=this.style("stop-color");if(this.style("stop-opacity").hasValue())n=n.addOpacity(this.style("stop-opacity").value);this.color=n.value};t.Element.stop.prototype=new t.Element.ElementBase;t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase;this.base(e);t.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var e=this.attribute("attributeType").value;var t=this.attribute("attributeName").value;if(e=="CSS"){return this.parent.style(t,true)}return this.parent.attribute(t,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(e){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.initialValue;return true}else{return false}}this.duration=this.duration+e;var t=false;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var r=this.attribute("type").value;n=r+"("+n+")"}this.getProperty().value=n;t=true}return t};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue())this.values.value=this.values.value.split(";");this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=e.progress*(this.values.value.length-1);var r=Math.floor(n),i=Math.ceil(n);e.from=new t.Property("from",parseFloat(this.values.value[r]));e.to=new t.Property("to",parseFloat(this.values.value[i]));e.progress=(n-r)/(i-r)}else{e.from=this.from;e.to=this.to}return e}};t.Element.AnimateBase.prototype=new t.Element.ElementBase;t.Element.animate=function(e){this.base=t.Element.AnimateBase;this.base(e);this.calcValue=function(){var e=this.progress();var t=e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress;return t+this.initialUnits}};t.Element.animate.prototype=new t.Element.AnimateBase;t.Element.animateColor=function(e){this.base=t.Element.AnimateBase;this.base(e);this.calcValue=function(){var e=this.progress();var t=new RGBColor(e.from.value);var n=new RGBColor(e.to.value);if(t.ok&&n.ok){var r=t.r+(n.r-t.r)*e.progress;var i=t.g+(n.g-t.g)*e.progress;var s=t.b+(n.b-t.b)*e.progress;return"rgb("+parseInt(r,10)+","+parseInt(i,10)+","+parseInt(s,10)+")"}return this.attribute("from").value}};t.Element.animateColor.prototype=new t.Element.AnimateBase;t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase;this.base(e);this.calcValue=function(){var e=this.progress();var n=t.ToNumberArray(e.from.value);var r=t.ToNumberArray(e.to.value);var i="";for(var s=0;s<n.length;s++){i+=n[s]+(r[s]-n[s])*e.progress+" "}return i}};t.Element.animateTransform.prototype=new t.Element.animate;t.Element.font=function(e){this.base=t.Element.ElementBase;this.base(e);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var n=0;n<this.children.length;n++){var r=this.children[n];if(r.type=="font-face"){this.fontFace=r;if(r.style("font-family").hasValue()){t.Definitions[r.style("font-family").value]=this}}else if(r.type=="missing-glyph")this.missingGlyph=r;else if(r.type=="glyph"){if(r.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof this.glyphs[r.unicode]=="undefined")this.glyphs[r.unicode]=[];this.glyphs[r.unicode][r.arabicForm]=r}else{this.glyphs[r.unicode]=r}}}};t.Element.font.prototype=new t.Element.ElementBase;t.Element.fontface=function(e){this.base=t.Element.ElementBase;this.base(e);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};t.Element.fontface.prototype=new t.Element.ElementBase;t.Element.missingglyph=function(e){this.base=t.Element.path;this.base(e);this.horizAdvX=0};t.Element.missingglyph.prototype=new t.Element.path;t.Element.glyph=function(e){this.base=t.Element.path;this.base(e);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};t.Element.glyph.prototype=new t.Element.path;t.Element.text=function(e){this.captureTextNodes=true;this.base=t.Element.RenderedElementBase;this.base(e);this.baseSetContext=this.setContext;this.setContext=function(e){this.baseSetContext(e);var t=this.style("dominant-baseline").toTextBaseline();if(t==null)t=this.style("alignment-baseline").toTextBaseline();if(t!=null)e.textBaseline=t};this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x");var n=this.attribute("y").toPixels("y");var r=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize);return new t.BoundingBox(e,n-r,e+Math.floor(r*2/3)*this.children[0].getText().length,n)};this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(e,this,0);for(var t=0;t<this.children.length;t++){this.renderChild(e,this,t)}};this.getAnchorDelta=function(e,t,n){var r=this.style("text-anchor").valueOrDefault("start");if(r!="start"){var i=0;for(var s=n;s<t.children.length;s++){var o=t.children[s];if(s>n&&o.attribute("x").hasValue())break;i+=o.measureTextRecursive(e)}return-1*(r=="end"?i:i/2)}return 0};this.renderChild=function(e,t,n){var r=t.children[n];if(r.attribute("x").hasValue()){r.x=r.attribute("x").toPixels("x")+this.getAnchorDelta(e,t,n)}else{if(this.attribute("dx").hasValue())this.x+=this.attribute("dx").toPixels("x");if(r.attribute("dx").hasValue())this.x+=r.attribute("dx").toPixels("x");r.x=this.x}this.x=r.x+r.measureText(e);if(r.attribute("y").hasValue()){r.y=r.attribute("y").toPixels("y")}else{if(this.attribute("dy").hasValue())this.y+=this.attribute("dy").toPixels("y");if(r.attribute("dy").hasValue())this.y+=r.attribute("dy").toPixels("y");r.y=this.y}this.y=r.y;r.render(e);for(var n=0;n<r.children.length;n++){this.renderChild(e,r,n)}}};t.Element.text.prototype=new t.Element.RenderedElementBase;t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase;this.base(e);this.getGlyph=function(e,t,n){var r=t[n];var i=null;if(e.isArabic){var s="isolated";if((n==0||t[n-1]==" ")&&n<t.length-2&&t[n+1]!=" ")s="terminal";if(n>0&&t[n-1]!=" "&&n<t.length-2&&t[n+1]!=" ")s="medial";if(n>0&&t[n-1]!=" "&&(n==t.length-1||t[n+1]==" "))s="initial";if(typeof e.glyphs[r]!="undefined"){i=e.glyphs[r][s];if(i==null&&e.glyphs[r].type=="glyph")i=e.glyphs[r]}}else{i=e.glyphs[r]}if(i==null)i=e.missingGlyph;return i};this.renderChildren=function(e){var n=this.parent.style("font-family").getDefinition();if(n!=null){var r=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize);var i=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle);var s=this.getText();if(n.isRTL)s=s.split("").reverse().join("");var o=t.ToNumberArray(this.parent.attribute("dx").value);for(var u=0;u<s.length;u++){var a=this.getGlyph(n,s,u);var f=r/n.fontFace.unitsPerEm;e.translate(this.x,this.y);e.scale(f,-f);var l=e.lineWidth;e.lineWidth=e.lineWidth*n.fontFace.unitsPerEm/r;if(i=="italic")e.transform(1,0,.4,1,0,0);a.render(e);if(i=="italic")e.transform(1,0,-.4,1,0,0);e.lineWidth=l;e.scale(1/f,-1/f);e.translate(-this.x,-this.y);this.x+=r*(a.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm;if(typeof o[u]!="undefined"&&!isNaN(o[u])){this.x+=o[u]}}return}if(e.fillStyle!="")e.fillText(t.compressSpaces(this.getText()),this.x,this.y);if(e.strokeStyle!="")e.strokeText(t.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(e){var t=this.measureText(e);for(var n=0;n<this.children.length;n++){t+=this.children[n].measureTextRecursive(e)}return t};this.measureText=function(e){var n=this.parent.style("font-family").getDefinition();if(n!=null){var r=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize);var i=0;var s=this.getText();if(n.isRTL)s=s.split("").reverse().join("");var o=t.ToNumberArray(this.parent.attribute("dx").value);for(var u=0;u<s.length;u++){var a=this.getGlyph(n,s,u);i+=(a.horizAdvX||n.horizAdvX)*r/n.fontFace.unitsPerEm;if(typeof o[u]!="undefined"&&!isNaN(o[u])){i+=o[u]}}return i}var f=t.compressSpaces(this.getText());if(!e.measureText)return f.length*10;e.save();this.setContext(e);var l=e.measureText(f).width;e.restore();return l}};t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase;t.Element.tspan=function(e){this.captureTextNodes=true;this.base=t.Element.TextElementBase;this.base(e);this.text=e.nodeValue||e.text||"";this.getText=function(){return this.text}};t.Element.tspan.prototype=new t.Element.TextElementBase;t.Element.tref=function(e){this.base=t.Element.TextElementBase;this.base(e);this.getText=function(){var e=this.getHrefAttribute().getDefinition();if(e!=null)return e.children[0].getText()}};t.Element.tref.prototype=new t.Element.TextElementBase;t.Element.a=function(e){this.base=t.Element.TextElementBase;this.base(e);this.hasText=true;for(var n=0;n<e.childNodes.length;n++){if(e.childNodes[n].nodeType!=3)this.hasText=false}this.text=this.hasText?e.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(e),this.y))}else{var r=new t.Element.g;r.children=this.children;r.parent=this;r.render(e)}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}};t.Element.a.prototype=new t.Element.TextElementBase;t.Element.image=function(e){this.base=t.Element.RenderedElementBase;this.base(e);var n=this.getHrefAttribute().value;var r=n.match(/\.svg$/);t.Images.push(this);this.loaded=false;if(!r){this.img=document.createElement("img");if(t.opts["useCORS"]==true){this.img.crossOrigin="Anonymous"}var i=this;this.img.onload=function(){i.loaded=true};this.img.onerror=function(){t.log('ERROR: image "'+n+'" not found');i.loaded=true};this.img.src=n}else{this.img=t.ajax(n);this.loaded=true}this.renderChildren=function(e){var n=this.attribute("x").toPixels("x");var i=this.attribute("y").toPixels("y");var s=this.attribute("width").toPixels("x");var o=this.attribute("height").toPixels("y");if(s==0||o==0)return;e.save();if(r){e.drawSvg(this.img,n,i,s,o)}else{e.translate(n,i);t.AspectRatio(e,this.attribute("preserveAspectRatio").value,s,this.img.width,o,this.img.height,0,0);e.drawImage(this.img,0,0)}e.restore()};this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x");var n=this.attribute("y").toPixels("y");var r=this.attribute("width").toPixels("x");var i=this.attribute("height").toPixels("y");return new t.BoundingBox(e,n,e+r,n+i)}};t.Element.image.prototype=new t.Element.RenderedElementBase;t.Element.g=function(e){this.base=t.Element.RenderedElementBase;this.base(e);this.getBoundingBox=function(){var e=new t.BoundingBox;for(var n=0;n<this.children.length;n++){e.addBoundingBox(this.children[n].getBoundingBox())}return e}};t.Element.g.prototype=new t.Element.RenderedElementBase;t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase;this.base(e);this.render=function(e){}};t.Element.symbol.prototype=new t.Element.RenderedElementBase;t.Element.style=function(e){this.base=t.Element.ElementBase;this.base(e);var n="";for(var r=0;r<e.childNodes.length;r++){n+=e.childNodes[r].nodeValue}n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");n=t.compressSpaces(n);var i=n.split("}");for(var r=0;r<i.length;r++){if(t.trim(i[r])!=""){var s=i[r].split("{");var o=s[0].split(",");var u=s[1].split(";");for(var a=0;a<o.length;a++){var f=t.trim(o[a]);if(f!=""){var l={};for(var c=0;c<u.length;c++){var h=u[c].indexOf(":");var p=u[c].substr(0,h);var d=u[c].substr(h+1,u[c].length-h);if(p!=null&&d!=null){l[t.trim(p)]=new t.Property(t.trim(p),t.trim(d))}}t.Styles[f]=l;if(f=="@font-face"){var v=l["font-family"].value.replace(/"/g,"");var m=l["src"].value.split(",");for(var g=0;g<m.length;g++){if(m[g].indexOf('format("svg")')>0){var y=m[g].indexOf("url");var b=m[g].indexOf(")",y);var w=m[g].substr(y+5,b-y-6);var E=t.parseXml(t.ajax(w));var S=E.getElementsByTagName("font");for(var x=0;x<S.length;x++){var T=t.CreateElement(S[x]);t.Definitions[v]=T}}}}}}}}};t.Element.style.prototype=new t.Element.ElementBase;t.Element.use=function(e){this.base=t.Element.RenderedElementBase;this.base(e);this.baseSetContext=this.setContext;this.setContext=function(e){this.baseSetContext(e);if(this.attribute("x").hasValue())e.translate(this.attribute("x").toPixels("x"),0);if(this.attribute("y").hasValue())e.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(e){if(n!=null)n.path(e)};this.getBoundingBox=function(){if(n!=null)return n.getBoundingBox()};this.renderChildren=function(e){if(n!=null){var r=n;if(n.type=="symbol"){r=new t.Element.svg;r.type="svg";r.attributes["viewBox"]=new t.Property("viewBox",n.attribute("viewBox").value);r.attributes["preserveAspectRatio"]=new t.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value);r.attributes["overflow"]=new t.Property("overflow",n.attribute("overflow").value);r.children=n.children}if(r.type=="svg"){if(this.attribute("width").hasValue())r.attributes["width"]=new t.Property("width",this.attribute("width").value);if(this.attribute("height").hasValue())r.attributes["height"]=new t.Property("height",this.attribute("height").value)}var i=r.parent;r.parent=null;r.render(e);r.parent=i}}};t.Element.use.prototype=new t.Element.RenderedElementBase;t.Element.mask=function(e){this.base=t.Element.ElementBase;this.base(e);this.apply=function(e,n){var r=this.attribute("x").toPixels("x");var i=this.attribute("y").toPixels("y");var s=this.attribute("width").toPixels("x");var o=this.attribute("height").toPixels("y");if(s==0&&o==0){var u=new t.BoundingBox;for(var a=0;a<this.children.length;a++){u.addBoundingBox(this.children[a].getBoundingBox())}var r=Math.floor(u.x1);var i=Math.floor(u.y1);var s=Math.floor(u.width());var o=Math.floor(u.height())}var f=n.attribute("mask").value;n.attribute("mask").value="";var l=document.createElement("canvas");l.width=r+s;l.height=i+o;var c=l.getContext("2d");this.renderChildren(c);var h=document.createElement("canvas");h.width=r+s;h.height=i+o;var p=h.getContext("2d");n.render(p);p.globalCompositeOperation="destination-in";p.fillStyle=c.createPattern(l,"no-repeat");p.fillRect(0,0,r+s,i+o);e.fillStyle=p.createPattern(h,"no-repeat");e.fillRect(0,0,r+s,i+o);n.attribute("mask").value=f};this.render=function(e){}};t.Element.mask.prototype=new t.Element.ElementBase;t.Element.clipPath=function(e){this.base=t.Element.ElementBase;this.base(e);this.apply=function(e){for(var n=0;n<this.children.length;n++){var r=this.children[n];if(typeof r.path!="undefined"){var i=null;if(r.attribute("transform").hasValue()){i=new t.Transform(r.attribute("transform").value);i.apply(e)}r.path(e);e.clip();if(i){i.unapply(e)}}}};this.render=function(e){}};t.Element.clipPath.prototype=new t.Element.ElementBase;t.Element.filter=function(e){this.base=t.Element.ElementBase;this.base(e);this.apply=function(e,t){var n=t.getBoundingBox();var r=Math.floor(n.x1);var i=Math.floor(n.y1);var s=Math.floor(n.width());var o=Math.floor(n.height());var u=t.style("filter").value;t.style("filter").value="";var a=0,f=0;for(var l=0;l<this.children.length;l++){var c=this.children[l].extraFilterDistance||0;a=Math.max(a,c);f=Math.max(f,c)}var h=document.createElement("canvas");h.width=s+2*a;h.height=o+2*f;var p=h.getContext("2d");p.translate(-r+a,-i+f);t.render(p);for(var l=0;l<this.children.length;l++){this.children[l].apply(p,0,0,s+2*a,o+2*f)}e.drawImage(h,0,0,s+2*a,o+2*f,r-a,i-f,s+2*a,o+2*f);t.style("filter",true).value=u};this.render=function(e){}};t.Element.filter.prototype=new t.Element.ElementBase;t.Element.feMorphology=function(e){this.base=t.Element.ElementBase;this.base(e);this.apply=function(e,t,n,r,i){}};t.Element.feMorphology.prototype=new t.Element.ElementBase;t.Element.feComposite=function(e){this.base=t.Element.ElementBase;this.base(e);this.apply=function(e,t,n,r,i){}};t.Element.feComposite.prototype=new t.Element.ElementBase;t.Element.feColorMatrix=function(e){function o(e,t,n,r,i,s){return e[n*r*4+t*4+s]}function u(e,t,n,r,i,s,o){e[n*r*4+t*4+s]=o}function a(e,t){var r=n[e];return r*(r<0?t-255:t)}this.base=t.Element.ElementBase;this.base(e);var n=t.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var r=n[0];n=[.213+.787*r,.715-.715*r,.072-.072*r,0,0,.213-.213*r,.715+.285*r,.072-.072*r,0,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var i=n[0]*Math.PI/180;var s=function(e,t,n){return e+Math.cos(i)*t+Math.sin(i)*n};n=[s(.213,.787,-.213),s(.715,-.715,-.715),s(.072,-.072,.928),0,0,s(.213,-.213,.143),s(.715,.285,.14),s(.072,-.072,-.283),0,0,s(.213,-.213,-.787),s(.715,-.715,.715),s(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.apply=function(e,t,n,r,i){var s=e.getImageData(0,0,r,i);for(var n=0;n<i;n++){for(var t=0;t<r;t++){var f=o(s.data,t,n,r,i,0);var l=o(s.data,t,n,r,i,1);var c=o(s.data,t,n,r,i,2);var h=o(s.data,t,n,r,i,3);u(s.data,t,n,r,i,0,a(0,f)+a(1,l)+a(2,c)+a(3,h)+a(4,1));u(s.data,t,n,r,i,1,a(5,f)+a(6,l)+a(7,c)+a(8,h)+a(9,1));u(s.data,t,n,r,i,2,a(10,f)+a(11,l)+a(12,c)+a(13,h)+a(14,1));u(s.data,t,n,r,i,3,a(15,f)+a(16,l)+a(17,c)+a(18,h)+a(19,1))}}e.clearRect(0,0,r,i);e.putImageData(s,0,0)}};t.Element.feColorMatrix.prototype=new t.Element.ElementBase;t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase;this.base(e);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(e,n,r,i,s){if(typeof stackBlurCanvasRGBA=="undefined"){t.log("ERROR: StackBlur.js must be included for blur to work");return}e.canvas.id=t.UniqueId();e.canvas.style.display="none";document.body.appendChild(e.canvas);stackBlurCanvasRGBA(e.canvas.id,n,r,i,s,this.blurRadius);document.body.removeChild(e.canvas)}};t.Element.feGaussianBlur.prototype=new t.Element.ElementBase;t.Element.title=function(e){};t.Element.title.prototype=new t.Element.ElementBase;t.Element.desc=function(e){};t.Element.desc.prototype=new t.Element.ElementBase;t.Element.MISSING=function(e){t.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")};t.Element.MISSING.prototype=new t.Element.ElementBase;t.CreateElement=function(e){var n=e.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var r=null;if(typeof t.Element[n]!="undefined"){r=new t.Element[n](e)}else{r=new t.Element.MISSING(e)}r.type=e.nodeName;return r};t.load=function(e,n){t.loadXml(e,t.ajax(n))};t.loadXml=function(e,n){t.loadXmlDoc(e,t.parseXml(n))};t.loadXmlDoc=function(e,n){t.init(e);var r=function(t){var n=e.canvas;while(n){t.x-=n.offsetLeft;t.y-=n.offsetTop;n=n.offsetParent}if(window.scrollX)t.x+=window.scrollX;if(window.scrollY)t.y+=window.scrollY;return t};if(t.opts["ignoreMouse"]!=true){e.canvas.onclick=function(e){var n=r(new t.Point(e!=null?e.clientX:event.clientX,e!=null?e.clientY:event.clientY));t.Mouse.onclick(n.x,n.y)};e.canvas.onmousemove=function(e){var n=r(new t.Point(e!=null?e.clientX:event.clientX,e!=null?e.clientY:event.clientY));t.Mouse.onmousemove(n.x,n.y)}}var i=t.CreateElement(n.documentElement);i.root=true;var s=true;var o=function(){t.ViewPort.Clear();if(e.canvas.parentNode)t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight);if(t.opts["ignoreDimensions"]!=true){if(i.style("width").hasValue()){e.canvas.width=i.style("width").toPixels("x");e.canvas.style.width=e.canvas.width+"px"}if(i.style("height").hasValue()){e.canvas.height=i.style("height").toPixels("y");e.canvas.style.height=e.canvas.height+"px"}}var r=e.canvas.clientWidth||e.canvas.width;var o=e.canvas.clientHeight||e.canvas.height;if(t.opts["ignoreDimensions"]==true&&i.style("width").hasValue()&&i.style("height").hasValue()){r=i.style("width").toPixels("x");o=i.style("height").toPixels("y")}t.ViewPort.SetCurrent(r,o);if(t.opts["offsetX"]!=null)i.attribute("x",true).value=t.opts["offsetX"];if(t.opts["offsetY"]!=null)i.attribute("y",true).value=t.opts["offsetY"];if(t.opts["scaleWidth"]!=null&&t.opts["scaleHeight"]!=null){var u=1,a=1,f=t.ToNumberArray(i.attribute("viewBox").value);if(i.attribute("width").hasValue())u=i.attribute("width").toPixels("x")/t.opts["scaleWidth"];else if(!isNaN(f[2]))u=f[2]/t.opts["scaleWidth"];if(i.attribute("height").hasValue())a=i.attribute("height").toPixels("y")/t.opts["scaleHeight"];else if(!isNaN(f[3]))a=f[3]/t.opts["scaleHeight"];i.attribute("width",true).value=t.opts["scaleWidth"];i.attribute("height",true).value=t.opts["scaleHeight"];i.attribute("viewBox",true).value="0 0 "+r*u+" "+o*a;i.attribute("preserveAspectRatio",true).value="none"}if(t.opts["ignoreClear"]!=true){e.clearRect(0,0,r,o)}i.render(e);if(s){s=false;if(typeof t.opts["renderCallback"]=="function")t.opts["renderCallback"](n)}};var u=true;if(t.ImagesLoaded()){u=false;o()}t.intervalID=setInterval(function(){var e=false;if(u&&t.ImagesLoaded()){u=false;e=true}if(t.opts["ignoreMouse"]!=true){e=e|t.Mouse.hasEvents()}if(t.opts["ignoreAnimation"]!=true){for(var n=0;n<t.Animations.length;n++){e=e|t.Animations[n].update(1e3/t.FRAMERATE)}}if(typeof t.opts["forceRedraw"]=="function"){if(t.opts["forceRedraw"]()==true)e=true}if(e){o();t.Mouse.runEvents()}},1e3/t.FRAMERATE)};t.stop=function(){if(t.intervalID){clearInterval(t.intervalID)}};t.Mouse=new function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(e,t){this.events.push({type:"onclick",x:e,y:t,run:function(e){if(e.onclick)e.onclick()}})};this.onmousemove=function(e,t){this.events.push({type:"onmousemove",x:e,y:t,run:function(e){if(e.onmousemove)e.onmousemove()}})};this.eventElements=[];this.checkPath=function(e,t){for(var n=0;n<this.events.length;n++){var r=this.events[n];if(t.isPointInPath&&t.isPointInPath(r.x,r.y))this.eventElements[n]=e}};this.checkBoundingBox=function(e,t){for(var n=0;n<this.events.length;n++){var r=this.events[n];if(t.isPointInBox(r.x,r.y))this.eventElements[n]=e}};this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++){var n=this.events[e];var r=this.eventElements[e];while(r){n.run(r);r=r.parent}}this.events=[];this.eventElements=[]}};return t}this.canvg=function(t,n,r){if(t==null&&n==null&&r==null){var i=document.querySelectorAll("svg");for(var s=0;s<i.length;s++){var o=i[s];var u=document.createElement("canvas");u.width=o.clientWidth;u.height=o.clientHeight;o.parentNode.insertBefore(u,o);o.parentNode.removeChild(o);var a=document.createElement("div");a.appendChild(o);canvg(u,a.innerHTML)}return}if(typeof t=="string"){t=document.getElementById(t)}if(t.svg!=null)t.svg.stop();var f=e(r||{});if(!(t.childNodes.length==1&&t.childNodes[0].nodeName=="OBJECT"))t.svg=f;var l=t.getContext("2d");if(typeof n.documentElement!="undefined"){f.loadXmlDoc(l,n)}else if(n.substr(0,1)=="<"){f.loadXml(l,n)}else{f.load(l,n)}}})();if(typeof CanvasRenderingContext2D!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(e,t,n,r,i){canvg(this.canvas,e,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:t,offsetY:n,scaleWidth:r,scaleHeight:i})}}
